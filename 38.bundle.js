(()=>{var e,t,r={5117:(e,t,r)=>{"use strict";var n,i=r(9453),o=r(4375),s=r(7428);const a="undefined"!=typeof process&&void 0!==(null===(n=null===process||void 0===process?void 0:process.env)||void 0===n?void 0:n.OL_GPKG_DEBUG)&&process.env.OL_GPKG_DEBUG?console.debug.bind(console):()=>{};var l=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let c,d,u;i.Context.setupCustomContext(class{initialize(){const e=(0,s.iJ)({backendType:"sync",maxPageSize:4096});return(0,s.$C)({http:e}).then((e=>(this.db=new e.oo1.DB({filename:encodeURI(this.filePath),vfs:"http"}),this)))}constructor(e){if("string"!=typeof e)throw new Error("Unsupported URL type "+typeof e);this.filePath=e,this.db=null}size(){throw new Error("Method not implemented.")}readableSize(){throw new Error("Method not implemented.")}close(){if(!this.db)throw new Error("Not initialized");this.db.close()}getDBConnection(){return this.db}export(){return e=this,t=void 0,n=function*(){throw new Error("Method not implemented.")},new((r=void 0)||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}));var e,t,r,n}registerFunction(e,t){throw new Error("Method not implemented.")}get(e,t){if(a("get",e),!this.db)throw new Error("Not initialized");const r=this.db.prepare(e);let n;return r.bind(t),r.step()&&(n=r.get({})),r.finalize(),n}isTableExists(e){if(a("isTableExists",e),!this.db)throw new Error("Not initialized");const t=this.db.prepare("SELECT name FROM sqlite_master WHERE type='table' AND name=:name");let r;return t.bind([e]),t.step()&&(r=t.get({})),t.finalize(),!!r}all(e,t){if(a("all",e,t),!this.db)throw new Error("Not initialized");return this.db.exec(e,{bind:t,rowMode:"object"})}each(e,t){if(a("each",e),!this.db)throw new Error("Not initialized");const r=this.db.prepare(e);return r.bind(t),{[Symbol.iterator](){return this},next:function(){return r.step()?{value:r.get({}),done:!1}:(r.finalize(),{done:!0})}}}run(e,t){if(a("run",e),!this.db)throw new Error("Not initialized");if(t&&!(t instanceof Array))for(const e in t)t["$"+e]=t[e];this.db.exec(e,{bind:t});const r=this.db.exec("select last_insert_rowid();",{rowMode:"array"});let n;return r&&(n=r[0][0]),{lastInsertRowid:+n,changes:this.db.changes()}}insert(e,t){throw new Error("HTTP VFS is read-only")}prepareStatement(e){if(!this.db)throw new Error("Not initialized");return this.db.prepare(e)}bindAndInsert(e,t){throw new Error("HTTP VFS is read-only")}closeStatement(e){e.finalize()}delete(e,t){throw new Error("HTTP VFS is read-only")}dropTable(e){throw new Error("HTTP VFS is read-only")}count(e,t,r){let n='SELECT COUNT(*) as count FROM "'+e+'"';return t&&(n+=" where "+t),this.get(n,r).count}transaction(e){}unsafe(e){}query(e,t){if(a("query",e,t),!this.db)throw new Error("Not initialized");const r=this.db.prepare(e);return r.bind(t),new i.ResultSet({[Symbol.iterator](){return this},next:function(){return r.step()?(a("query next item",r.get({})),{value:r.get({}),done:!1}):(r.finalize(),{done:!0})}},{close:()=>{r.finalize()}},this)}},i.OffscreenCanvasAdapter);const h={open:function(e){return l(this,void 0,void 0,(function*(){d={};try{c=yield i.GeoPackageManager.open(e.url);const t=c.getTileTables();for(const e of t){const t=c.getTileDao(e),r=c.getInfoForTable(t);a("tile tables",e,t,r),d[e]={id:e,extent:[r.tileMatrixSet.minX,r.tileMatrixSet.minY,r.tileMatrixSet.maxX,r.tileMatrixSet.maxY],minZoom:r.minZoom,srs:`${r.srs.organization}:${r.srs.id}`,resolutions:t.getTileMatrices().map((e=>e.getPixelXSize()))},u=new i.GeoPackageTileRetriever(t)}return{status:"ok",rasters:d}}catch(e){return d={},{status:"error",error:e}}}))},getRasterTile:function(e,t,r){return l(this,void 0,void 0,(function*(){a("getRasterTile",t,r,e);const n=yield u.getTile(t,r,e);if(console.log("GOT",n),!n)throw new Error(`Failed retrieving ${e}:${t}:${r}`);const i=n.getData();return console.log("IMAGE",i),i}))}};o.Jj(h)},1304:()=>{},9649:()=>{},9767:()=>{},165:()=>{}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e](o,o.exports,i),o.exports}i.m=r,i.x=()=>{var e=i.O(void 0,[106,640,958],(()=>i(5117)));return i.O(e)},e=[],i.O=(t,r,n,o)=>{if(!r){var s=1/0;for(d=0;d<e.length;d++){for(var[r,n,o]=e[d],a=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(i.O).every((e=>i.O[e](r[l])))?r.splice(l--,1):(a=!1,o<s&&(s=o));if(a){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,n,o]},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>e+".bundle.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{i.b=self.location+"";var e={38:1};i.f.i=(t,r)=>{e[t]||importScripts(i.p+i.u(t))};var t=self.webpackChunkol_gpkg=self.webpackChunkol_gpkg||[],r=t.push.bind(t);t.push=t=>{var[n,o,s]=t;for(var a in o)i.o(o,a)&&(i.m[a]=o[a]);for(s&&s(i);n.length;)e[n.pop()]=1;r(t)}})(),t=i.x,i.x=()=>Promise.all([106,640,958].map(i.e,i)).then(t),i.x()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxJQUNoQndDLFFBQVFuRyxJQUFJLENBQUMsSUFBSSxJQUFJLEtBQUtvRCxJQUFJZSxFQUFvQjhCLEVBQUc5QixJQUFzQmxHLEtBQUtmLEdZRDlEaUgsRUFBb0JSLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbC1ncGtnL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy93ZWJwYWNrL3J1bnRpbWUvc3RhcnR1cCBjaHVuayBkZXBlbmRlbmNpZXMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL3NyYy9kZWJ1Zy50cyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vc3JjL3dvcmtlci50cyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vc3JjL2RiQWRhcHRlci50cyIsIndlYnBhY2s6Ly9vbC1ncGtnL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29sLWdwa2cvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL29sLWdwa2cvd2VicGFjay9ydW50aW1lL2Vuc3VyZSBjaHVuayIsIndlYnBhY2s6Ly9vbC1ncGtnL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly9vbC1ncGtnL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL29sLWdwa2cvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy93ZWJwYWNrL3J1bnRpbWUvaW1wb3J0U2NyaXB0cyBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL29sLWdwa2cvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkgPT4ge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldID0gZGVmZXJyZWRbaV07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KChrZXkpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSkpKSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHZhciByID0gZm4oKTtcblx0XHRcdGlmIChyICE9PSB1bmRlZmluZWQpIHJlc3VsdCA9IHI7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsInZhciBuZXh0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy54O1xuX193ZWJwYWNrX3JlcXVpcmVfXy54ID0gKCkgPT4ge1xuXHRyZXR1cm4gUHJvbWlzZS5hbGwoWzEwNiw2NDAsOTU4XS5tYXAoX193ZWJwYWNrX3JlcXVpcmVfXy5lLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSkudGhlbihuZXh0KTtcbn07IiwiZGVjbGFyZSBjb25zdCBPTF9HUEtHX0RFQlVHOiBzdHJpbmc7XG5jb25zdCBkZWJ1Z0VuYWJsZWQgPSAodHlwZW9mIE9MX0dQS0dfREVCVUcgIT09ICd1bmRlZmluZWQnICYmIE9MX0dQS0dfREVCVUcpIHx8XG4gICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3M/LmVudj8uT0xfR1BLR19ERUJVRyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5lbnYuT0xfR1BLR19ERUJVRyk7XG5cbmV4cG9ydCBjb25zdCBkZWJ1ZyA9IGRlYnVnRW5hYmxlZCA/IGNvbnNvbGUuZGVidWcuYmluZChjb25zb2xlKSA6ICgpID0+IHVuZGVmaW5lZDtcbiIsImltcG9ydCAqIGFzIEdQS0cgZnJvbSAnQG5nYWdlb2ludC9nZW9wYWNrYWdlJztcbmltcG9ydCAqIGFzIENvbWxpbmsgZnJvbSAnY29tbGluayc7XG5pbXBvcnQgKiBhcyBTUUxpdGUgZnJvbSAnc3FsaXRlLXdhc20taHR0cC9zcWxpdGUzLmpzJztcbmltcG9ydCB7IFNRTGl0ZVdhc21IdHRwIH0gZnJvbSAnLi9kYkFkYXB0ZXIuanMnO1xuaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuL2RlYnVnLmpzJztcbmltcG9ydCB7IEdQS0dSYXN0ZXJPcHRpb25zLCBHUEtHVmVjdG9yT3B0aW9ucywgU1FMT3B0aW9ucyB9IGZyb20gJy4vZ2VvcGFja2FnZS5qcyc7XG5cbkdQS0cuQ29udGV4dC5zZXR1cEN1c3RvbUNvbnRleHQoU1FMaXRlV2FzbUh0dHAsIEdQS0cuT2Zmc2NyZWVuQ2FudmFzQWRhcHRlcik7XG5cbmV4cG9ydCB0eXBlIEdQS0dSYXN0ZXJNZXRhZGF0YSA9IHtcbiAgaWQ6IHN0cmluZztcbiAgc3JzOiBzdHJpbmc7XG4gIGV4dGVudDogbnVtYmVyW107XG4gIG1pblpvb206IG51bWJlcjtcbiAgcmVzb2x1dGlvbnM6IG51bWJlcltdO1xufTtcblxubGV0IGdwa2c6IEdQS0cuR2VvUGFja2FnZSB8IHVuZGVmaW5lZDtcbmxldCByYXN0ZXJzOiBSZWNvcmQ8c3RyaW5nLCBHUEtHUmFzdGVyTWV0YWRhdGE+O1xubGV0IGdwcjogR1BLRy5HZW9QYWNrYWdlVGlsZVJldHJpZXZlcjtcblxuYXN5bmMgZnVuY3Rpb24gb3BlbihvcHRzOiBTUUxPcHRpb25zICYgKEdQS0dSYXN0ZXJPcHRpb25zIHwgR1BLR1ZlY3Rvck9wdGlvbnMpKSB7XG4gIHJhc3RlcnMgPSB7fTtcbiAgdHJ5IHtcbiAgICBncGtnID0gYXdhaXQgR1BLRy5HZW9QYWNrYWdlTWFuYWdlci5vcGVuKG9wdHMudXJsKTtcbiAgICBjb25zdCB0aWxlVGFibGVzID0gZ3BrZy5nZXRUaWxlVGFibGVzKCk7XG4gICAgZm9yIChjb25zdCB0YWJsZSBvZiB0aWxlVGFibGVzKSB7XG4gICAgICBjb25zdCB0aWxlRGFvID0gZ3BrZy5nZXRUaWxlRGFvKHRhYmxlKTtcbiAgICAgIGNvbnN0IHRhYmxlSW5mbyA9IGdwa2cuZ2V0SW5mb0ZvclRhYmxlKHRpbGVEYW8pO1xuICAgICAgZGVidWcoJ3RpbGUgdGFibGVzJywgdGFibGUsIHRpbGVEYW8sIHRhYmxlSW5mbyk7XG4gICAgICByYXN0ZXJzW3RhYmxlXSA9IHtcbiAgICAgICAgaWQ6IHRhYmxlLFxuICAgICAgICBleHRlbnQ6IFt0YWJsZUluZm8udGlsZU1hdHJpeFNldC5taW5YLCB0YWJsZUluZm8udGlsZU1hdHJpeFNldC5taW5ZLCB0YWJsZUluZm8udGlsZU1hdHJpeFNldC5tYXhYLCB0YWJsZUluZm8udGlsZU1hdHJpeFNldC5tYXhZXSxcbiAgICAgICAgbWluWm9vbTogdGFibGVJbmZvLm1pblpvb20sXG4gICAgICAgIHNyczogYCR7dGFibGVJbmZvLnNycy5vcmdhbml6YXRpb259OiR7dGFibGVJbmZvLnNycy5pZH1gLFxuICAgICAgICByZXNvbHV0aW9uczogdGlsZURhby5nZXRUaWxlTWF0cmljZXMoKS5tYXAoKG0pID0+IG0uZ2V0UGl4ZWxYU2l6ZSgpKVxuICAgICAgfTtcbiAgICAgIGdwciA9IG5ldyBHUEtHLkdlb1BhY2thZ2VUaWxlUmV0cmlldmVyKHRpbGVEYW8pO1xuICAgIH1cbiAgICByZXR1cm4geyBzdGF0dXM6ICdvaycgYXMgY29uc3QsIHJhc3RlcnMgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByYXN0ZXJzID0ge307XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnZXJyb3InIGFzIGNvbnN0LCBlcnJvciB9O1xuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRSYXN0ZXJUaWxlKHo6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiBQcm9taXNlPFVpbnQ4QXJyYXk+IHtcbiAgZGVidWcoJ2dldFJhc3RlclRpbGUnLCB4LCB5LCB6KTtcbiAgY29uc3QgdGlsZSA9IGF3YWl0IGdwci5nZXRUaWxlKHgsIHksIHopO1xuICBjb25zb2xlLmxvZygnR09UJywgdGlsZSk7XG4gIGlmICghdGlsZSkgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgcmV0cmlldmluZyAke3p9OiR7eH06JHt5fWApO1xuICBjb25zdCBpbWFnZSA9IHRpbGUuZ2V0RGF0YSgpO1xuICBjb25zb2xlLmxvZygnSU1BR0UnLCBpbWFnZSk7XG4gIHJldHVybiBpbWFnZTtcbn1cblxuY29uc3QgaWZhY2UgPSB7XG4gIG9wZW4sXG4gIGdldFJhc3RlclRpbGVcbn07XG5leHBvcnQgZGVmYXVsdCBpZmFjZTtcblxuQ29tbGluay5leHBvc2UoaWZhY2UpO1xuIiwiaW1wb3J0ICogYXMgR1BLRyBmcm9tICdAbmdhZ2VvaW50L2dlb3BhY2thZ2UnO1xuaW1wb3J0IHsgY3JlYXRlSHR0cEJhY2tlbmQsIGluaXRTeW5jU1FMaXRlIH0gZnJvbSAnc3FsaXRlLXdhc20taHR0cCc7XG5pbXBvcnQgKiBhcyBTUUxpdGUgZnJvbSAnc3FsaXRlLXdhc20taHR0cC9zcWxpdGUzLmpzJztcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi9kZWJ1Zy5qcyc7XG5cbi8qKlxuICogVGhpcyBhZGFwdGVyIHVzZXMgc3FsaXRlLXdhc20taHR0cFxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL21tb210Y2hldi9zcWxpdGUtd2FzbS1odHRwfHNxbGl0ZS13YXNtLWh0dHB9XG4gKi9cbmV4cG9ydCBjbGFzcyBTUUxpdGVXYXNtSHR0cCBpbXBsZW1lbnRzIEdQS0cuREJBZGFwdGVyIHtcbiAgZGI6IFNRTGl0ZS5EQiB8IG51bGw7XG4gIGZpbGVQYXRoOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBQcm9taXNlIHdoaWNoLCB3aGVuIHJlc29sdmVkLCByZXR1cm5zIGEgREJBZGFwdGVyIHdoaWNoIGhhcyBjb25uZWN0ZWQgdG8gdGhlIEdlb1BhY2thZ2UgZGF0YWJhc2UgZmlsZVxuICAgKi9cbiAgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHRoaXM+IHtcbiAgICBjb25zdCBiYWNrZW5kID0gY3JlYXRlSHR0cEJhY2tlbmQoeyBiYWNrZW5kVHlwZTogJ3N5bmMnLCBtYXhQYWdlU2l6ZTogNDA5NiB9KTtcbiAgICByZXR1cm4gaW5pdFN5bmNTUUxpdGUoe2h0dHA6IGJhY2tlbmR9KS50aGVuKChzcWxpdGUzKSA9PiB7XG4gICAgICB0aGlzLmRiID0gbmV3IHNxbGl0ZTMub28xLkRCKHtmaWxlbmFtZTogZW5jb2RlVVJJKHRoaXMuZmlsZVBhdGgpLCB2ZnM6ICdodHRwJ30pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtICB7c3RyaW5nfSBbdXJsXSB1cmwgb2YgdGhlIEdlb1BhY2thZ2UgZmlsZVxuICAgKi9cbiAgY29uc3RydWN0b3IodXJsPzogc3RyaW5nIHwgQnVmZmVyIHwgVWludDhBcnJheSkge1xuICAgIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJylcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgVVJMIHR5cGUgJHt0eXBlb2YgdXJsfWApXG4gICAgdGhpcy5maWxlUGF0aCA9IHVybDtcbiAgICB0aGlzLmRiID0gbnVsbDtcbiAgfVxuXG4gIHNpemUoKTogbnVtYmVyIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICByZWFkYWJsZVNpemUoKTogc3RyaW5nIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2VzIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBHZW9QYWNrYWdlXG4gICAqL1xuICBjbG9zZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcignTm90IGluaXRpYWxpemVkJyk7XG5cbiAgICB0aGlzLmRiLmNsb3NlKCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY29ubmVjdGlvbiB0byB0aGUgZGF0YWJhc2UgZmlsZVxuICAgKiBAcmV0dXJuIHthbnl9XG4gICAqL1xuICBnZXREQkNvbm5lY3Rpb24oKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5kYjtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIFVpbnQ4QXJyYXkgY29udGFpbmluZyB0aGUgY29udGVudHMgb2YgdGhlIGRhdGFiYXNlIGFzIGEgZmlsZVxuICAgKi9cbiAgYXN5bmMgZXhwb3J0KCk6IFByb21pc2U8VWludDhBcnJheT4ge1xuICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXJzIHRoZSBnaXZlbiBmdW5jdGlvbiBzbyB0aGF0IGl0IGNhbiBiZSB1c2VkIGJ5IFNRTCBzdGF0ZW1lbnRzXG4gICAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSAgICAgICAgICAgICAgIG5hbWUgb2YgZnVuY3Rpb24gdG8gcmVnaXN0ZXJcbiAgICogQHBhcmFtICB7RnVuY3Rpb259IGZ1bmN0aW9uRGVmaW5pdGlvbiBmdW5jdGlvbiB0byByZWdpc3RlclxuICAgKiBAcmV0dXJuIHtBZGFwdGVyfSB0aGlzXG4gICAqL1xuICByZWdpc3RlckZ1bmN0aW9uKG5hbWU6IHN0cmluZywgZnVuY3Rpb25EZWZpbml0aW9uOiBGdW5jdGlvbik6IHRoaXMge1xuICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxuICAvKipcbiAgICogR2V0cyBvbmUgcm93IG9mIHJlc3VsdHMgZnJvbSB0aGUgc3RhdGVtZW50XG4gICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vc3FsaXRlLm9yZy93YXNtL2RvYy90cnVuay9hcGktb28xLm1kI3N0bXQtZ2V0fFNRTGl0ZSBXQVNNIGdldCgpfVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHNxbCAgICBzdGF0ZW1lbnQgdG8gcnVuXG4gICAqIEBwYXJhbSAge0FycmF5fE9iamVjdH0gW3BhcmFtc10gc3Vic3RpdHV0aW9uIHBhcmFtZXRlcnNcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0KHNxbDogc3RyaW5nLCBwYXJhbXM/OiBbXSB8IFJlY29yZDxzdHJpbmcsIEdQS0cuREJWYWx1ZT4pOiBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+IHtcbiAgICBkZWJ1ZygnZ2V0Jywgc3FsKTtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcignTm90IGluaXRpYWxpemVkJyk7XG5cbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKHNxbCk7XG4gICAgc3RtdC5iaW5kKHBhcmFtcyBhcyBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+KTtcbiAgICBsZXQgcm93OiBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+IHwgdW5kZWZpbmVkO1xuICAgIGlmIChzdG10LnN0ZXAoKSkge1xuICAgICAgcm93ID0gc3RtdC5nZXQoe30pIGFzIFJlY29yZDxzdHJpbmcsIEdQS0cuREJWYWx1ZT47XG4gICAgfVxuICAgIHN0bXQuZmluYWxpemUoKTtcblxuICAgIHJldHVybiByb3cgYXMgUmVjb3JkPHN0cmluZywgR1BLRy5EQlZhbHVlPjtcbiAgfVxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiBhIHRhYmxlTmFtZSBleGlzdHMgaW4gdGhlIGRhdGFiYXNlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0YWJsZU5hbWVcbiAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAqL1xuICBpc1RhYmxlRXhpc3RzKHRhYmxlTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgZGVidWcoJ2lzVGFibGVFeGlzdHMnLCB0YWJsZU5hbWUpO1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW5pdGlhbGl6ZWQnKTtcblxuICAgIGNvbnN0IHN0bXQgPSB0aGlzLmRiLnByZXBhcmUoXCJTRUxFQ1QgbmFtZSBGUk9NIHNxbGl0ZV9tYXN0ZXIgV0hFUkUgdHlwZT0ndGFibGUnIEFORCBuYW1lPTpuYW1lXCIpO1xuICAgIHN0bXQuYmluZChbdGFibGVOYW1lXSk7XG4gICAgbGV0IHJvdzogUmVjb3JkPHN0cmluZywgR1BLRy5EQlZhbHVlPiB8IHVuZGVmaW5lZDtcbiAgICBpZiAoc3RtdC5zdGVwKCkpIHtcbiAgICAgIHJvdyA9IHN0bXQuZ2V0KHt9KSBhcyBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+O1xuICAgIH1cbiAgICBzdG10LmZpbmFsaXplKCk7XG4gICAgcmV0dXJuICEhcm93O1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIGFsbCByZXN1bHRzIGZyb20gdGhlIHN0YXRlbWVudCBpbiBhbiBhcnJheVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHNxbCAgICBzdGF0ZW1lbnQgdG8gcnVuXG4gICAqIEBwYXJhbSAge0FycmF5fE9iamVjdH0gW3BhcmFtc10gYmluZCBwYXJhbWV0ZXJzXG4gICAqIEByZXR1cm4ge09iamVjdFtdfVxuICAgKi9cbiAgYWxsKHNxbDogc3RyaW5nLCBwYXJhbXM/OiBbXSB8IFJlY29yZDxzdHJpbmcsIEdQS0cuREJWYWx1ZT4pOiBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+W10ge1xuICAgIGRlYnVnKCdhbGwnLCBzcWwsIHBhcmFtcyk7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbml0aWFsaXplZCcpO1xuXG4gICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuZGIuZXhlYyhzcWwsIHtcbiAgICAgIGJpbmQ6IHBhcmFtcyBhcyBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+LFxuICAgICAgcm93TW9kZTogJ29iamVjdCdcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0cyBhcyBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+W107XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSXRlcmFibGUgd2l0aCByZXN1bHRzIGZyb20gdGhlIHF1ZXJ5XG4gICAqIEBwYXJhbSAge3N0cmluZ30gc3FsICAgIHN0YXRlbWVudCB0byBydW5cbiAgICogQHBhcmFtICB7T2JqZWN0fEFycmF5fSBwYXJhbXMgYmluZCBwYXJhbWV0ZXJzXG4gICAqIEByZXR1cm4ge0l0ZXJhYmxlSXRlcmF0b3I8T2JqZWN0Pn1cbiAgICovXG4gIGVhY2goc3FsOiBzdHJpbmcsIHBhcmFtcz86IFtdIHwgUmVjb3JkPHN0cmluZywgR1BLRy5EQlZhbHVlPik6IEl0ZXJhYmxlSXRlcmF0b3I8UmVjb3JkPHN0cmluZywgR1BLRy5EQlZhbHVlPj4ge1xuICAgIGRlYnVnKCdlYWNoJywgc3FsKTtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcignTm90IGluaXRpYWxpemVkJyk7XG5cbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKHNxbCk7XG4gICAgc3RtdC5iaW5kKHBhcmFtcyBhcyBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+KTtcbiAgICByZXR1cm4ge1xuICAgICAgW1N5bWJvbC5pdGVyYXRvcl0oKTogSXRlcmFibGVJdGVyYXRvcjxSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+PiB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIG5leHQ6IGZ1bmN0aW9uICgpOiB7IHZhbHVlOiBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+OyBkb25lOiBib29sZWFuOyB9IHtcbiAgICAgICAgaWYgKHN0bXQuc3RlcCgpKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiBzdG10LmdldCh7fSkgYXMgUmVjb3JkPHN0cmluZywgR1BLRy5EQlZhbHVlPixcbiAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RtdC5maW5hbGl6ZSgpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkb25lOiB0cnVlXG4gICAgICAgICAgfSBhcyBJdGVyYXRvclJldHVyblJlc3VsdDxSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+PjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBSdW5zIHRoZSBzdGF0ZW1lbnQgc3BlY2lmaWVkLCByZXR1cm5pbmcgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBjaGFuZ2VkXG4gICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vc3FsaXRlLm9yZy93YXNtL2RvYy90cnVuay9hcGktb28xLm1kI2RiLWV4ZWN8U1FMaXRlIFdBU00gZXhlYygpfVxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHNxbCAgICBzdGF0ZW1lbnQgdG8gcnVuXG4gICAqIEBwYXJhbSAge09iamVjdHxBcnJheX0gW3BhcmFtc10gYmluZCBwYXJhbWV0ZXJzXG4gICAqIEByZXR1cm4ge09iamVjdH0gb2JqZWN0IGNvbnRhaW5pbmcgYSBjaGFuZ2VzIHByb3BlcnR5IGluZGljYXRpbmcgdGhlIG51bWJlciBvZiByb3dzIGNoYW5nZWQgYW5kIGEgbGFzdEluc2VydFJPV0lEIGluZGljYXRpbmcgdGhlIGxhc3QgaW5zZXJ0ZWQgcm93XG4gICAqL1xuICBydW4oc3FsOiBzdHJpbmcsIHBhcmFtcz86IFtdIHwgUmVjb3JkPHN0cmluZywgU1FMaXRlLlNRTEJpbmRhYmxlPik6IHsgY2hhbmdlczogbnVtYmVyOyBsYXN0SW5zZXJ0Um93aWQ6IG51bWJlcjsgfSB7XG4gICAgZGVidWcoJ3J1bicsIHNxbCk7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbml0aWFsaXplZCcpO1xuXG4gICAgaWYgKHBhcmFtcyAmJiAhKHBhcmFtcyBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgIHBhcmFtc1snJCcgKyBrZXldID0gcGFyYW1zW2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZGIuZXhlYyhzcWwsIHtiaW5kOiBwYXJhbXN9KTtcbiAgICBjb25zdCBsYXN0SWQgPSB0aGlzLmRiLmV4ZWMoJ3NlbGVjdCBsYXN0X2luc2VydF9yb3dpZCgpOycsIHtyb3dNb2RlOiAnYXJyYXknfSk7XG4gICAgbGV0IGxhc3RJbnNlcnRlZElkOiBTUUxpdGUuU1FMVmFsdWUgfCB1bmRlZmluZWQ7XG4gICAgaWYgKGxhc3RJZCkge1xuICAgICAgbGFzdEluc2VydGVkSWQgPSBsYXN0SWRbMF1bMF07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBsYXN0SW5zZXJ0Um93aWQ6ICsobGFzdEluc2VydGVkSWQgYXMgbnVtYmVyKSxcbiAgICAgIGNoYW5nZXM6IHRoaXMuZGIuY2hhbmdlcygpLFxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFJ1bnMgdGhlIHNwZWNpZmllZCBpbnNlcnQgc3RhdGVtZW50IGFuZCByZXR1cm5zIHRoZSBsYXN0IGluc2VydGVkIGlkIG9yIHVuZGVmaW5lZCBpZiBubyBpbnNlcnQgaGFwcGVuZWRcbiAgICogQHBhcmFtICB7U3RyaW5nfSBzcWwgICAgc3RhdGVtZW50IHRvIHJ1blxuICAgKiBAcGFyYW0gIHtPYmplY3R8QXJyYXl9IFtwYXJhbXNdIGJpbmQgcGFyYW1ldGVyc1xuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IGxhc3QgaW5zZXJ0ZWQgcm93IGlkXG4gICAqL1xuICBpbnNlcnQoc3FsOiBzdHJpbmcsIHBhcmFtcz86IFtdIHwgUmVjb3JkPHN0cmluZywgR1BLRy5EQlZhbHVlPik6IG51bWJlciB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdIVFRQIFZGUyBpcyByZWFkLW9ubHknKTtcbiAgfVxuICAvKipcbiAgICogUHJlcGFyZXMgYSBTUUwgc3RhdGVtZW50XG4gICAqIEBwYXJhbSBzcWxcbiAgICovXG4gIHByZXBhcmVTdGF0ZW1lbnQoc3FsOiBzdHJpbmcpOiBhbnkge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW5pdGlhbGl6ZWQnKTtcblxuICAgIHJldHVybiB0aGlzLmRiLnByZXBhcmUoc3FsKTtcbiAgfVxuICAvKipcbiAgICogUnVucyBhbiBpbnNlcnQgc3RhdGVtZW50IHdpdGggdGhlIHBhcmFtZXRlcnMgcHJvdmlkZWRcbiAgICogQHBhcmFtICB7YW55fSBzdGF0ZW1lbnQgIHN0YXRlbWVudCB0byBydW5cbiAgICogQHBhcmFtICB7T2JqZWN0fEFycmF5fSBbcGFyYW1zXSBiaW5kIHBhcmFtZXRlcnNcbiAgICogQHJldHVybiB7TnVtYmVyfSBsYXN0IGluc2VydGVkIHJvdyBpZFxuICAgKi9cbiAgYmluZEFuZEluc2VydChzdGF0ZW1lbnQ6IGFueSwgcGFyYW1zPzogW10gfCBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+KTogbnVtYmVyIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0hUVFAgVkZTIGlzIHJlYWQtb25seScpO1xuICB9XG4gIC8qKlxuICAgKiBDbG9zZXMgYSBwcmVwYXJlZCBzdGF0ZW1lbnRcbiAgICogQHBhcmFtIHN0YXRlbWVudFxuICAgKi9cbiAgY2xvc2VTdGF0ZW1lbnQoc3RhdGVtZW50OiBhbnkpOiB2b2lkIHtcbiAgICBzdGF0ZW1lbnQuZmluYWxpemUoKTtcbiAgfVxuICAvKipcbiAgICogUnVucyB0aGUgc3BlY2lmaWVkIGRlbGV0ZSBzdGF0ZW1lbnQgYW5kIHJldHVybnMgdGhlIG51bWJlciBvZiBkZWxldGVkIHJvd3NcbiAgICogQHBhcmFtICB7U3RyaW5nfSBzcWwgICAgc3RhdGVtZW50IHRvIHJ1blxuICAgKiBAcGFyYW0gIHtPYmplY3R8QXJyYXl9IFtwYXJhbXNdIGJpbmQgcGFyYW1ldGVyc1xuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IGRlbGV0ZWQgcm93c1xuICAgKi9cbiAgZGVsZXRlKHNxbDogc3RyaW5nLCBwYXJhbXM/OiBbXSB8IFJlY29yZDxzdHJpbmcsIEdQS0cuREJWYWx1ZT4pOiBudW1iZXIge1xuICAgIHRocm93IG5ldyBFcnJvcignSFRUUCBWRlMgaXMgcmVhZC1vbmx5Jyk7XG4gIH1cbiAgLyoqXG4gICAqIERyb3BzIHRoZSB0YWJsZVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHRhYmxlIHRhYmxlIG5hbWVcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gaW5kaWNhdGVzIGlmIHRoZSB0YWJsZSB3YXMgZHJvcHBlZFxuICAgKi9cbiAgZHJvcFRhYmxlKHRhYmxlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0hUVFAgVkZTIGlzIHJlYWQtb25seScpO1xuICB9XG4gIC8qKlxuICAgKiBDb3VudHMgcm93cyB0aGF0IG1hdGNoIHRoZSBxdWVyeVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHRhYmxlTmFtZSB0YWJsZSBuYW1lIGZyb20gd2hpY2ggdG8gY291bnRcbiAgICogQHBhcmFtICB7U3RyaW5nfSBbd2hlcmVdICAgICB3aGVyZSBjbGF1c2VcbiAgICogQHBhcmFtICB7T2JqZWN0fEFycmF5fSBbd2hlcmVBcmdzXSB3aGVyZSBhcmdzXG4gICAqIEByZXR1cm4ge051bWJlcn0gY291bnRcbiAgICovXG4gIGNvdW50KHRhYmxlTmFtZTogc3RyaW5nLCB3aGVyZT86IHN0cmluZywgd2hlcmVBcmdzPzogW10gfCBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+KTogbnVtYmVyIHtcbiAgICBsZXQgc3FsID0gJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIFwiJyArIHRhYmxlTmFtZSArICdcIic7XG4gICAgaWYgKHdoZXJlKSB7XG4gICAgICBzcWwgKz0gJyB3aGVyZSAnICsgd2hlcmU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldChzcWwsIHdoZXJlQXJncykuY291bnQgYXMgbnVtYmVyO1xuICB9XG5cbiAgdHJhbnNhY3Rpb24oZnVuYzogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAvLyBUcmFuc2FjdGlvbnMgYXJlIG5vLW9wIG9uIHJlYWQtb25seSB0YWJsZXNcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmFibGUgb3IgZGlzYWJsZSB1bnNhZmUgbW9kZVxuICAgKiBAcGFyYW0gZW5hYmxlZFxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvbixAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgdW5zYWZlKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHsgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcmVzdWx0IHNldCBmb3IgdGhlIGdpdmVuIHF1ZXJ5XG4gICAqL1xuICBxdWVyeShzcWw6IHN0cmluZywgcGFyYW1zPzogW10gfCBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+KTogR1BLRy5SZXN1bHRTZXQge1xuICAgIGRlYnVnKCdxdWVyeScsIHNxbCwgcGFyYW1zKTtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcignTm90IGluaXRpYWxpemVkJyk7XG5cbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKHNxbCk7XG4gICAgc3RtdC5iaW5kKHBhcmFtcyBhcyBSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+KTtcbiAgICByZXR1cm4gbmV3IEdQS0cuUmVzdWx0U2V0KFxuICAgICAge1xuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPFJlY29yZDxzdHJpbmcsIEdQS0cuREJWYWx1ZT4+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCk6IHsgdmFsdWU6IFJlY29yZDxzdHJpbmcsIEdQS0cuREJWYWx1ZT47IGRvbmU6IGJvb2xlYW47IH0ge1xuICAgICAgICAgIGlmIChzdG10LnN0ZXAoKSkge1xuICAgICAgICAgICAgZGVidWcoJ3F1ZXJ5IG5leHQgaXRlbScsIHN0bXQuZ2V0KHt9KSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICB2YWx1ZTogc3RtdC5nZXQoe30pIGFzIFJlY29yZDxzdHJpbmcsIEdQS0cuREJWYWx1ZT4sXG4gICAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RtdC5maW5hbGl6ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgZG9uZTogdHJ1ZVxuICAgICAgICAgICAgfSBhcyBJdGVyYXRvclJldHVyblJlc3VsdDxSZWNvcmQ8c3RyaW5nLCBHUEtHLkRCVmFsdWU+PjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNsb3NlOiAoKTogdm9pZCA9PiB7XG4gICAgICAgICAgc3RtdC5maW5hbGl6ZSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdGhpcyxcbiAgICApO1xuICB9XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbi8vIHRoZSBzdGFydHVwIGZ1bmN0aW9uXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnggPSAoKSA9PiB7XG5cdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuXHQvLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcblx0dmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbMTA2LDY0MCw5NThdLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyg1MTE3KSkpXG5cdF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG5cdHJldHVybiBfX3dlYnBhY2tfZXhwb3J0c19fO1xufTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5mID0ge307XG4vLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4vLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3Ncbl9fd2VicGFja19yZXF1aXJlX18uZSA9IChjaHVua0lkKSA9PiB7XG5cdHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLmYpLnJlZHVjZSgocHJvbWlzZXMsIGtleSkgPT4ge1xuXHRcdF9fd2VicGFja19yZXF1aXJlX18uZltrZXldKGNodW5rSWQsIHByb21pc2VzKTtcblx0XHRyZXR1cm4gcHJvbWlzZXM7XG5cdH0sIFtdKSk7XG59OyIsIi8vIFRoaXMgZnVuY3Rpb24gYWxsb3cgdG8gcmVmZXJlbmNlIGFzeW5jIGNodW5rcyBhbmQgc2libGluZyBjaHVua3MgZm9yIHRoZSBlbnRyeXBvaW50XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnUgPSAoY2h1bmtJZCkgPT4ge1xuXHQvLyByZXR1cm4gdXJsIGZvciBmaWxlbmFtZXMgYmFzZWQgb24gdGVtcGxhdGVcblx0cmV0dXJuIFwiXCIgKyBjaHVua0lkICsgXCIuYnVuZGxlLmpzXCI7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsIl9fd2VicGFja19yZXF1aXJlX18uYiA9IHNlbGYubG9jYXRpb24gKyBcIlwiO1xuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGNodW5rc1xuLy8gXCIxXCIgbWVhbnMgXCJhbHJlYWR5IGxvYWRlZFwiXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQzODogMVxufTtcblxuLy8gaW1wb3J0U2NyaXB0cyBjaHVuayBsb2FkaW5nXG52YXIgaW5zdGFsbENodW5rID0gKGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Zm9yKHZhciBtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdH1cblx0fVxuXHRpZihydW50aW1lKSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR3aGlsZShjaHVua0lkcy5sZW5ndGgpXG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRzLnBvcCgpXSA9IDE7XG5cdHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xufTtcbl9fd2VicGFja19yZXF1aXJlX18uZi5pID0gKGNodW5rSWQsIHByb21pc2VzKSA9PiB7XG5cdC8vIFwiMVwiIGlzIHRoZSBzaWduYWwgZm9yIFwiYWxyZWFkeSBsb2FkZWRcIlxuXHRpZighaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0aWYodHJ1ZSkgeyAvLyBhbGwgY2h1bmtzIGhhdmUgSlNcblx0XHRcdGltcG9ydFNjcmlwdHMoX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgX193ZWJwYWNrX3JlcXVpcmVfXy51KGNodW5rSWQpKTtcblx0XHR9XG5cdH1cbn07XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rb2xfZ3BrZ1wiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtvbF9ncGtnXCJdIHx8IFtdO1xudmFyIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uID0gY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSBpbnN0YWxsQ2h1bms7XG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3QiLCIvLyBydW4gc3RhcnR1cFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLngoKTtcbiJdLCJuYW1lcyI6WyJkZWZlcnJlZCIsIm5leHQiLCJkZWJ1ZyIsInByb2Nlc3MiLCJlbnYiLCJPTF9HUEtHX0RFQlVHIiwiY29uc29sZSIsImJpbmQiLCJncGtnIiwicmFzdGVycyIsImdwciIsImluaXRpYWxpemUiLCJiYWNrZW5kIiwiYmFja2VuZFR5cGUiLCJtYXhQYWdlU2l6ZSIsImh0dHAiLCJ0aGVuIiwic3FsaXRlMyIsInRoaXMiLCJkYiIsIm9vMSIsIkRCIiwiZmlsZW5hbWUiLCJlbmNvZGVVUkkiLCJmaWxlUGF0aCIsInZmcyIsImNvbnN0cnVjdG9yIiwidXJsIiwiRXJyb3IiLCJzaXplIiwicmVhZGFibGVTaXplIiwiY2xvc2UiLCJnZXREQkNvbm5lY3Rpb24iLCJleHBvcnQiLCJyZWdpc3RlckZ1bmN0aW9uIiwibmFtZSIsImZ1bmN0aW9uRGVmaW5pdGlvbiIsImdldCIsInNxbCIsInBhcmFtcyIsInN0bXQiLCJwcmVwYXJlIiwicm93Iiwic3RlcCIsImZpbmFsaXplIiwiaXNUYWJsZUV4aXN0cyIsInRhYmxlTmFtZSIsImFsbCIsImV4ZWMiLCJyb3dNb2RlIiwiZWFjaCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidmFsdWUiLCJkb25lIiwicnVuIiwiQXJyYXkiLCJrZXkiLCJsYXN0SWQiLCJsYXN0SW5zZXJ0ZWRJZCIsImxhc3RJbnNlcnRSb3dpZCIsImNoYW5nZXMiLCJpbnNlcnQiLCJwcmVwYXJlU3RhdGVtZW50IiwiYmluZEFuZEluc2VydCIsInN0YXRlbWVudCIsImNsb3NlU3RhdGVtZW50IiwiZGVsZXRlIiwiZHJvcFRhYmxlIiwidGFibGUiLCJjb3VudCIsIndoZXJlIiwid2hlcmVBcmdzIiwidHJhbnNhY3Rpb24iLCJmdW5jIiwidW5zYWZlIiwiZW5hYmxlZCIsInF1ZXJ5IiwiaWZhY2UiLCJvcGVuIiwib3B0cyIsInRpbGVUYWJsZXMiLCJnZXRUaWxlVGFibGVzIiwidGlsZURhbyIsImdldFRpbGVEYW8iLCJ0YWJsZUluZm8iLCJnZXRJbmZvRm9yVGFibGUiLCJpZCIsImV4dGVudCIsInRpbGVNYXRyaXhTZXQiLCJtaW5YIiwibWluWSIsIm1heFgiLCJtYXhZIiwibWluWm9vbSIsInNycyIsIm9yZ2FuaXphdGlvbiIsInJlc29sdXRpb25zIiwiZ2V0VGlsZU1hdHJpY2VzIiwibWFwIiwibSIsImdldFBpeGVsWFNpemUiLCJzdGF0dXMiLCJlcnJvciIsImdldFJhc3RlclRpbGUiLCJ6IiwieCIsInkiLCJ0aWxlIiwiZ2V0VGlsZSIsImxvZyIsImltYWdlIiwiZ2V0RGF0YSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIk8iLCJyZXN1bHQiLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJsZW5ndGgiLCJmdWxmaWxsZWQiLCJqIiwiT2JqZWN0Iiwia2V5cyIsImV2ZXJ5Iiwic3BsaWNlIiwiciIsImQiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImYiLCJlIiwiY2h1bmtJZCIsIlByb21pc2UiLCJyZWR1Y2UiLCJwcm9taXNlcyIsInUiLCJnIiwiZ2xvYmFsVGhpcyIsIkZ1bmN0aW9uIiwid2luZG93Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInJlcGxhY2UiLCJwIiwiYiIsInNlbGYiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsInB1c2giLCJkYXRhIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwicG9wIl0sInNvdXJjZVJvb3QiOiIifQ==