/*! For license information please see 745.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkol_gpkg=self.webpackChunkol_gpkg||[]).push([[745],{4375:(t,e,i)=>{i.d(e,{Ud:()=>d});const n=Symbol("Comlink.proxy"),s=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),r=Symbol("Comlink.finalizer"),a=Symbol("Comlink.thrown"),l=t=>"object"==typeof t&&null!==t||"function"==typeof t,h=new Map([["proxy",{canHandle:t=>l(t)&&t[n],serialize(t){const{port1:e,port2:i}=new MessageChannel;return c(t,e),[i,[i]]},deserialize:t=>(t.start(),d(t))}],["throw",{canHandle:t=>l(t)&&a in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function c(t,e=globalThis,i=["*"]){e.addEventListener("message",(function s(o){if(!o||!o.data)return;if(!function(t,e){for(const i of t){if(e===i||"*"===i)return!0;if(i instanceof RegExp&&i.test(e))return!0}return!1}(i,o.origin))return void console.warn(`Invalid origin '${o.origin}' for comlink proxy`);const{id:l,type:h,path:d}=Object.assign({path:[]},o.data),g=(o.data.argumentList||[]).map(C);let _;try{const e=d.slice(0,-1).reduce(((t,e)=>t[e]),t),i=d.reduce(((t,e)=>t[e]),t);switch(h){case"GET":_=i;break;case"SET":e[d.slice(-1)[0]]=C(o.data.value),_=!0;break;case"APPLY":_=i.apply(e,g);break;case"CONSTRUCT":_=function(t){return Object.assign(t,{[n]:!0})}(new i(...g));break;case"ENDPOINT":{const{port1:e,port2:i}=new MessageChannel;c(t,i),_=function(t,e){return y.set(t,e),t}(e,[e])}break;case"RELEASE":_=void 0;break;default:return}}catch(t){_={value:t,[a]:0}}Promise.resolve(_).catch((t=>({value:t,[a]:0}))).then((i=>{const[n,o]=E(i);e.postMessage(Object.assign(Object.assign({},n),{id:l}),o),"RELEASE"===h&&(e.removeEventListener("message",s),u(e),r in t&&"function"==typeof t[r]&&t[r]())})).catch((t=>{const[i,n]=E({value:new TypeError("Unserializable return value"),[a]:0});e.postMessage(Object.assign(Object.assign({},i),{id:l}),n)}))})),e.start&&e.start()}function u(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function d(t,e){return f(t,[],e)}function g(t){if(t)throw new Error("Proxy has been released and is not useable")}function _(t){return x(t,{type:"RELEASE"}).then((()=>{u(t)}))}const p=new WeakMap,m="FinalizationRegistry"in globalThis&&new FinalizationRegistry((t=>{const e=(p.get(t)||0)-1;p.set(t,e),0===e&&_(t)}));function f(t,e=[],i=function(){}){let n=!1;const r=new Proxy(i,{get(i,s){if(g(n),s===o)return()=>{!function(t){m&&m.unregister(t)}(r),_(t),n=!0};if("then"===s){if(0===e.length)return{then:()=>r};const i=x(t,{type:"GET",path:e.map((t=>t.toString()))}).then(C);return i.then.bind(i)}return f(t,[...e,s])},set(i,s,o){g(n);const[r,a]=E(o);return x(t,{type:"SET",path:[...e,s].map((t=>t.toString())),value:r},a).then(C)},apply(i,o,r){g(n);const a=e[e.length-1];if(a===s)return x(t,{type:"ENDPOINT"}).then(C);if("bind"===a)return f(t,e.slice(0,-1));const[l,h]=v(r);return x(t,{type:"APPLY",path:e.map((t=>t.toString())),argumentList:l},h).then(C)},construct(i,s){g(n);const[o,r]=v(s);return x(t,{type:"CONSTRUCT",path:e.map((t=>t.toString())),argumentList:o},r).then(C)}});return function(t,e){const i=(p.get(e)||0)+1;p.set(e,i),m&&m.register(t,e,t)}(r,t),r}function v(t){const e=t.map(E);return[e.map((t=>t[0])),(i=e.map((t=>t[1])),Array.prototype.concat.apply([],i))];var i}const y=new WeakMap;function E(t){for(const[e,i]of h)if(i.canHandle(t)){const[n,s]=i.serialize(t);return[{type:"HANDLER",name:e,value:n},s]}return[{type:"RAW",value:t},y.get(t)||[]]}function C(t){switch(t.type){case"HANDLER":return h.get(t.name).deserialize(t.value);case"RAW":return t.value}}function x(t,e,i){return new Promise((n=>{const s=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(i){i.data&&i.data.id&&i.data.id===s&&(t.removeEventListener("message",e),n(i.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),i)}))}},7906:(t,e,i)=>{i.d(e,{Z:()=>o});const n={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class s extends Error{constructor(t){const e=n[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const o=s},5466:(t,e,i)=>{i.d(e,{Z:()=>n});const n=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},2953:(t,e,i)=>{i.d(e,{Z:()=>c});var n=i(5069),s=i(3584),o=i(9220),r=i(2001),a=i(7119),l=i(8196);class h extends n.Z{constructor(t,e,i,n,s,o){super(t,e,o),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=s.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=s.Z.ERROR,this.unlistenImage_(),this.image_=function(){const t=(0,o.E4)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=s.Z.LOADED:this.state=s.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==s.Z.ERROR&&(this.state=s.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==s.Z.IDLE&&(this.state=s.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function(t,e,i){const n=t;let s=!0,o=!1,h=!1;const c=[(0,l.Vx)(n,r.Z.LOAD,(function(){h=!0,o||e()}))];return n.src&&a.Tp?(o=!0,n.decode().then((function(){s&&e()})).catch((function(t){s&&(h?e():i())}))):c.push((0,l.Vx)(n,r.Z.ERROR,i)),function(){s=!1,c.forEach(l.bN)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}const c=h},6410:(t,e,i)=>{i.d(e,{Z:()=>ne});var n=i(6414),s=i(7906);const o="add",r="remove";var a=i(9025);const l="length";class h extends a.ZP{constructor(t,e,i){super(t),this.element=e,this.index=i}}class c extends n.Z{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(l)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new h(o,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new h(r,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new h(r,i,t)),this.dispatchEvent(new h(o,e,t))}updateLength_(){this.set(l,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new s.Z(58)}}const u=c;var d=i(5466),g=i(6764),_=i(2637),p=i(1091),m=i(8983),f=i(184);function v(t,e,i){return e+":"+t+":"+(i?(0,f.XC)(i):"null")}const y=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const n=v(t,e,i);return n in this.cache_?this.cache_[n]:null}set(t,e,i,n){const s=v(t,e,i);this.cache_[s]=n,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};var E=i(1716),C=i(2253);class x extends d.Z{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){(0,_.O3)()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;(0,p.qC)(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),(0,p.nb)(n,i)}forEachFeatureAtCoordinate(t,e,i,n,s,o,r,a){let l;const h=e.viewState;function c(t,e,i,n){return s.call(o,e,t?i:null,n)}const u=h.projection,d=(0,C.Cf)(t.slice(),u),g=[[0,0]];if(u.canWrapX()&&n){const t=u.getExtent(),e=(0,m.dz)(t);g.push([-e,0],[e,0])}const _=e.layerStatesArray,p=_.length,f=[],v=[];for(let n=0;n<g.length;n++)for(let s=p-1;s>=0;--s){const o=_[s],u=o.layer;if(u.hasRenderer()&&(0,E.j)(o,h)&&r.call(a,u)){const s=u.getRenderer(),r=u.getSource();if(s&&r){const a=r.getWrapX()?d:t,h=c.bind(null,o.managed);v[0]=a[0]+g[n][0],v[1]=a[1]+g[n][1],l=s.forEachFeatureAtCoordinate(v,e,i,h,f)}if(l)return l}}if(0===f.length)return;const y=1/f.length;return f.forEach(((t,e)=>t.distanceSq+=e*y)),f.sort(((t,e)=>t.distanceSq-e.distanceSq)),f.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,i,n,s,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,n,g.uX,this,s,o)}getMap(){return this.map_}renderFrame(t){(0,_.O3)()}scheduleExpireIconCache(t){y.canExpireCache()&&t.postRenderFunctions.push(T)}}function T(t,e){y.expire()}const R=x;var w=i(3606),b=i(7299),P=i(1900);const I="ol-hidden",S="ol-unselectable",L="ol-control",M="ol-collapsed";new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i");var Z=i(7119),A=i(6534),O=i(9220);const F=new n.Z;!function(){const t=["monospace","serif"];t.length}();var N=i(8196);const D=class extends R{constructor(t){super(t),this.fontChangeListenerKey_=(0,N.oL)(F,w.Z.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=S+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const n=new b.Z(t,void 0,e);i.dispatchEvent(n)}}disposeInternal(){(0,N.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(P.Z.PRECOMPOSE,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),i=t.viewState;this.children_.length=0;const n=[];let s=null;for(let o=0,r=e.length;o<r;++o){const r=e[o];t.layerIndex=o;const a=r.layer,l=a.getSourceState();if(!(0,E.j)(r,i)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const h=a.render(t,s);h&&(h!==s&&(this.children_.push(h),s=h),"getDeclutter"in a&&n.push(a))}for(let e=n.length-1;e>=0;--e)n[e].renderDeclutter(t);(0,O.hF)(this.element_,this.children_),this.dispatchRenderEvent(P.Z.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}};var z=i(2001),G=i(1414),k=i(9162);class j extends a.ZP{constructor(t,e){super(t),this.layer=e}}const K="layers";class U extends G.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(K,this.handleLayersChanged_),i?Array.isArray(i)?i=new u(i.slice(),{unique:!0}):(0,k.h)("function"==typeof i.getArray,43):i=new u(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(N.bN),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push((0,N.oL)(t,o,this.handleLayersAdd_,this),(0,N.oL)(t,r,this.handleLayersRemove_,this));for(const t in this.listenerKeys_)this.listenerKeys_[t].forEach(N.bN);(0,A.Z)(this.listenerKeys_);const e=t.getArray();for(let t=0,i=e.length;t<i;t++){const i=e[t];this.registerLayerListeners_(i),this.dispatchEvent(new j("addlayer",i))}this.changed()}registerLayerListeners_(t){const e=[(0,N.oL)(t,w.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,N.oL)(t,z.Z.CHANGE,this.handleLayerChange_,this)];t instanceof U&&e.push((0,N.oL)(t,"addlayer",this.handleLayerGroupAdd_,this),(0,N.oL)(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,_.sq)(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new j("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new j("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new j("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=(0,_.sq)(e);this.listenerKeys_[i].forEach(N.bN),delete this.listenerKeys_[i],this.dispatchEvent(new j("removelayer",e)),this.changed()}getLayers(){return this.get(K)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,i=t.length;e<i;++e)this.dispatchEvent(new j("removelayer",t[e]))}this.set(K,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const n=this.getLayerState();let s=n.zIndex;t||void 0!==n.zIndex||(s=0);for(let t=i,o=e.length;t<o;t++){const i=e[t];i.opacity*=n.opacity,i.visible=i.visible&&n.visible,i.maxResolution=Math.min(i.maxResolution,n.maxResolution),i.minResolution=Math.max(i.minResolution,n.minResolution),i.minZoom=Math.max(i.minZoom,n.minZoom),i.maxZoom=Math.min(i.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==i.extent?i.extent=(0,m.Ed)(i.extent,n.extent):i.extent=n.extent),void 0===i.zIndex&&(i.zIndex=s)}return e}getSourceState(){return"ready"}}const X=U;class V extends a.ZP{constructor(t,e,i){super(t),this.map=e,this.frameState=void 0!==i?i:null}}const Y=V,W=class extends Y{constructor(t,e,i,n,s,o){super(t,e,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==n&&n,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},q={SINGLECLICK:"singleclick",CLICK:z.Z.CLICK,DBLCLICK:z.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},H="pointerdown";var B=i(952);class $ extends B.Z{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=(0,N.oL)(i,H,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=(0,N.oL)(i,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(z.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!Z.bM&&{passive:!1})}emulateClick_(t){let e=new W(q.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new W(q.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const e=new W(q.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==q.POINTERUP||e.type==q.POINTERCANCEL){delete this.trackedTouches_[i];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=q.POINTERDOWN&&e.type!=q.POINTERMOVE||(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new W(q.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(N.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new W(q.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,N.oL)(t,q.POINTERMOVE,this.handlePointerMove_,this),(0,N.oL)(t,q.POINTERUP,this.handlePointerUp_,this),(0,N.oL)(this.element_,q.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push((0,N.oL)(this.element_.getRootNode(),q.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new W(q.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new W(q.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,N.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(z.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,N.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(N.bN),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Q=$,J="postrender",tt="loadstart",et="loadend",it="layergroup",nt="size",st="target",ot="view",rt=1/0,at=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,A.Z)(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(t){(0,k.h)(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=rt&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,n=e.length,s=e[t],o=i[t],r=t;for(;t<n>>1;){const s=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),r=o<n&&i[o]<i[s]?o:s;e[t]=e[r],i[t]=i[r],t=r}e[t]=s,i[t]=o,this.siftDown_(r,t)}siftDown_(t,e){const i=this.elements_,n=this.priorities_,s=i[e],o=n[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(n[t]>o))break;i[e]=i[t],n[e]=n[t],e=t}i[e]=s,n[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let n=0;const s=e.length;let o,r,a;for(r=0;r<s;++r)o=e[r],a=t(o),a==rt?delete this.queuedElements_[this.keyFunction_(o)]:(i[n]=a,e[n++]=o);e.length=n,i.length=n,this.heapify_()}};var lt=i(3584);const ht=class extends at{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(z.Z.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===lt.Z.LOADED||i===lt.Z.ERROR||i===lt.Z.EMPTY){i!==lt.Z.ERROR&&e.removeEventListener(z.Z.CHANGE,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i,n,s,o=0;for(;this.tilesLoading_<t&&o<e&&this.getCount()>0;)n=this.dequeue()[0],s=n.getKey(),i=n.getState(),i!==lt.Z.IDLE||s in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++o,n.load())}};var ct=i(2724),ut=i(6270);class dt extends n.Z{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){(0,O.ZF)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&(0,O.ZF)(this.element);for(let t=0,e=this.listenerKeys.length;t<e;++t)(0,N.bN)(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==g.Zn&&this.listenerKeys.push((0,N.oL)(t,J,this.render,this)),t.render())}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}}const gt=dt;var _t=i(2182);const pt=class extends gt{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",n=void 0!==t.expandClassName?t.expandClassName:e+"-expand",s=void 0!==t.collapseLabel?t.collapseLabel:"›",o=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const r=void 0!==t.label?t.label:"i";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r,this.label_.className=n):this.label_=r;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(z.Z.CLICK,this.handleClick_.bind(this),!1);const l=e+" "+S+" "+L+(this.collapsed_&&this.collapsible_?" "+M:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=l,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap((e=>e.getAttributions(t))))),i=!this.getMap().getAllLayers().some((t=>t.getSource()&&!1===t.getSource().getAttributionsCollapsible()));return this.overrideCollapsible_||this.setCollapsible(i),e}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!(0,_t.fS)(e,this.renderedAttributions_)){(0,O.ep)(this.ulElement_);for(let t=0,i=e.length;t<i;++t){const i=document.createElement("li");i.innerHTML=e[t],this.ulElement_.appendChild(i)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(M),this.collapsed_?(0,O.$H)(this.collapseLabel_,this.label_):(0,O.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}};var mt=i(7898);const ft=class extends gt{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"⇧",n=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(z.Z.CLICK,this.handleClick_.bind(this),!1);const r=e+" "+S+" "+L,a=this.element;a.className=r,a.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(I)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:mt.Vv}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const t="rotate("+i+"rad)";if(this.autoHide_){const t=this.element.classList.contains(I);t||0!==i?t&&0!==i&&this.element.classList.remove(I):this.element.classList.add(I)}this.label_.style.transform=t}this.rotation_=i}},vt=class extends gt{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,n=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",s=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",r=void 0!==t.zoomOutLabel?t.zoomOutLabel:"–",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=n,h.setAttribute("type","button"),h.title=a,h.appendChild("string"==typeof o?document.createTextNode(o):o),h.addEventListener(z.Z.CLICK,this.handleClick_.bind(this,i),!1);const c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=l,c.appendChild("string"==typeof r?document.createTextNode(r):r),c.addEventListener(z.Z.CLICK,this.handleClick_.bind(this,-i),!1);const u=e+" "+S+" "+L,d=this.element;d.className=u,d.appendChild(h),d.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const i=e.getZoom();if(void 0!==i){const n=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:mt.Vv})):e.setZoom(n)}}},yt="active";class Et extends n.Z{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(yt)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(yt,t)}setMap(t){this.map_=t}}function Ct(t,e,i,n){const s=t.getZoom();if(void 0===s)return;const o=t.getConstrainedZoom(s+e),r=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:r,anchor:i,duration:void 0!==n?n:250,easing:mt.Vv})}const xt=Et,Tt=class extends xt{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==q.DBLCLICK){const i=t.originalEvent,n=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_;Ct(n.getView(),o,s,this.duration_),i.preventDefault(),e=!0}return!e}};function Rt(t){const e=t.length;let i=0,n=0;for(let s=0;s<e;s++)i+=t[s].clientX,n+=t[s].clientY;return{clientX:i/e,clientY:n/e}}const wt=class extends xt{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==q.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==q.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==q.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==q.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function bt(t){const e=arguments;return function(t){let i=!0;for(let n=0,s=e.length;n<s&&(i=i&&e[n](t),i);++n);return i}}const Pt=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},It=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return e.contains(i)}(t)},St=g.uX,Lt=function(t){const e=t.originalEvent;return 0==e.button&&!(Z.G$&&Z.tK&&e.ctrlKey)},Mt=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Zt=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},At=function(t){const e=t.originalEvent,i=e.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!e.target.isContentEditable},Ot=function(t){const e=t.originalEvent;return(0,k.h)(void 0!==e,56),"mouse"==e.pointerType},Ft=function(t){const e=t.originalEvent;return(0,k.h)(void 0!==e,56),e.isPrimary&&0===e.button},Nt=class extends wt{constructor(t){super({stopDown:g.Dv}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:bt(Mt,Ft);this.condition_=t.onFocusOnly?bt(It,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const i=this.targetPointers,n=e.getEventPixel(Rt(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const e=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();(0,C.bA)(e,i.getResolution()),(0,C.U1)(e,i.getRotation()),i.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),s=i.getCenterInternal(),o=e.getPixelFromCoordinateInternal(s),r=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(n),o[1]-t*Math.sin(n)]);i.animateInternal({center:i.getConstrainedCenter(r),duration:500,easing:mt.Vv})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};var Dt=i(2758);const zt=class extends wt{constructor(t){t=t||{},super({stopDown:g.Dv}),this.condition_=t.condition?t.condition:Pt,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!Ot(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===Dt.h$)return;const n=e.getSize(),s=t.pixel,o=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;i.adjustRotationInternal(-t)}this.lastAngle_=o}handleUpEvent(t){return!Ot(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!Ot(t)&&(!(!Lt(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))}};var Gt=i(1403);class kt extends d.Z{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Gt.ZP([i])}getGeometry(){return this.geometry_}}const jt=kt;class Kt extends a.ZP{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}const Ut=class extends wt{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new jt(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Lt,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const n=i[0]-e[0],s=i[1]-e[1];return n*n+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Kt("boxdrag",t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Kt(e?"boxend":"boxcancel",t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Kt("boxstart",t.coordinate,t)),!0)}onBoxEnd(t){}},Xt=class extends Ut{constructor(t){super({condition:(t=t||{}).condition?t.condition:Zt,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let i=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(i),n=e.getResolutionForExtentInternal(t),s=e.getResolution()/n;i=i.clone(),i.scale(s*s)}e.fitInternal(i,{duration:this.duration_,easing:mt.Vv})}},Vt=class extends xt{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return Mt(t)&&At(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==z.Z.KEYDOWN){const i=t.originalEvent,n=i.keyCode;if(this.condition_(t)&&(40==n||37==n||39==n||38==n)){const s=t.map.getView(),o=s.getResolution()*this.pixelDelta_;let r=0,a=0;40==n?a=-o:37==n?r=-o:39==n?r=o:a=o;const l=[r,a];(0,C.U1)(l,s.getRotation()),function(t,e,i){const n=t.getCenterInternal();if(n){const s=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==i?i:250,easing:mt.GE,center:t.getConstrainedCenter(s)})}}(s,l,this.duration_),i.preventDefault(),e=!0}}return!e}},Yt=class extends xt{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:At,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==z.Z.KEYDOWN||t.type==z.Z.KEYPRESS){const i=t.originalEvent,n=i.key;if(this.condition_(t)&&("+"===n||"-"===n)){const s=t.map,o="+"===n?this.delta_:-this.delta_;Ct(s.getView(),o,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}};var Wt=i(8007);const qt=class extends xt{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:St;this.condition_=t.onFocusOnly?bt(It,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==z.Z.WHEEL)return!0;const e=t.map,i=t.originalEvent;let n;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==z.Z.WHEEL&&(n=i.deltaY,Z.V&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=Z.MP),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.lastDelta_=n;const s=Date.now();void 0===this.startTime_&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");const o=e.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=n;const r=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),r),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-(0,Wt.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Ct(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},Ht=class extends wt{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=g.Dv),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=s;const o=t.map,r=o.getView();r.getConstraints().rotation!==Dt.h$&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Rt(this.targetPointers))),this.rotating_&&(o.render(),r.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},Bt=class extends wt{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=g.Dv),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],n=this.targetPointers[1],s=i.clientX-n.clientX,o=i.clientY-n.clientY,r=Math.sqrt(s*s+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/r),this.lastDistance_=r;const a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Rt(this.targetPointers))),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};var $t=i(1202),Qt=i(8691),Jt=i(670);function te(t){t instanceof E.Z?t.setMapInternal(null):t instanceof X&&t.getLayers().forEach(te)}function ee(t,e){if(t instanceof E.Z)t.setMapInternal(e);else if(t instanceof X){const i=t.getLayers().getArray();for(let t=0,n=i.length;t<n;++t)ee(i[t],e)}}class ie extends n.Z{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const i={},n=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new X({layers:t.layers});let s,o,r;return i[it]=n,i[st]=t.target,i[ot]=t.view instanceof ct.ZP?t.view:new ct.ZP,void 0!==t.controls&&(Array.isArray(t.controls)?s=new u(t.controls.slice()):((0,k.h)("function"==typeof t.controls.getArray,47),s=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new u(t.interactions.slice()):((0,k.h)("function"==typeof t.interactions.getArray,48),o=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?r=new u(t.overlays.slice()):((0,k.h)("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new u,{controls:s,interactions:o,keyboardEventTarget:e,overlays:r,values:i}}(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:Z.MP,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,p.Ue)(),this.pixelToCoordinateTransform_=(0,p.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||function(t){t=t||{};const e=new u;return(void 0===t.zoom||t.zoom)&&e.push(new vt(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new ft(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new pt(t.attributionOptions)),e}(),this.interactions=e.interactions||function(t){t=t||{};const e=new u,i=new class{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;const s=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new zt),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new Tt({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new Nt({onFocusOnly:t.onFocusOnly,kinetic:i})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new Ht),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new Bt({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new Vt),e.push(new Yt({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new qt({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new Xt({duration:t.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ht(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(it,this.handleLayerGroupChanged_),this.addChangeListener(ot,this.handleViewChanged_),this.addChangeListener(nt,this.handleSizeChanged_),this.addChangeListener(st,this.handleTargetChanged_),this.setProperties(e.values);const i=this;!t.view||t.view instanceof ct.ZP||t.view.then((function(t){i.setView(new ct.ZP(t))})),this.controls.addEventListener(o,(t=>{t.element.setMap(this)})),this.controls.addEventListener(r,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(o,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(r,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(o,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(r,(t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){ee(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t),s=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:g.uX,r=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,r,e,null,o,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),e),i}getAllLayers(){const t=[];return function e(i){i.forEach((function(i){i instanceof X?e(i.getLayers()):t.push(i)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:g.uX,s=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i=this.getSize(),n=e.width/i[0],s=e.height/i[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-e.left)/n,(o.clientY-e.top)/s]}getTarget(){return this.get(st)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return(0,$t.lO)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?(0,p.nn)(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(it)}setLayers(t){const e=this.getLayerGroup();if(t instanceof u)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e];if(!i.visible)continue;const n=i.layer.getRenderer();if(n&&!n.ready)return!0;const s=i.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(t){const e=(0,$t.Vs)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?(0,p.nn)(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(nt)}getView(){return this.get(ot)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return function(t,e,i,n,s){if(!t||!(i in t.wantedTiles))return rt;if(!t.wantedTiles[i][e.getKey()])return rt;const o=t.viewState.center,r=n[0]-o[0],a=n[1]-o[1];return 65536*Math.log(s)+Math.sqrt(r*r+a*a)/s}(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;const i=new W(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===H||i===z.Z.WHEEL||i===z.Z.KEYDOWN){const t=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():t,n=e.target;if(this.overlayContainerStopEvent_.contains(n)||!(i===t?t.documentElement:i).contains(n))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let i=e.length-1;i>=0;i--){const n=e[i];if(n.getMap()===this&&n.getActive()&&this.getTargetElement()&&(!n.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let i=this.maxTilesLoading_,n=i;if(t){const e=t.viewHints;if(e[ut.Z.ANIMATING]||e[ut.Z.INTERACTING]){const e=Date.now()-t.time>8;i=e?0:8,n=e?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(P.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(P.Z.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Y(et,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Y(tt,this,t))));const i=this.postRenderFunctions_;for(let e=0,n=i.length;e<n;++e)i[e](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)(0,N.bN)(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(z.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(z.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,O.ZF)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new D(this)),this.mapBrowserEventHandler_=new Q(this,this.moveTolerance_);for(const t in q)this.mapBrowserEventHandler_.addEventListener(q[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(z.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(z.Z.WHEEL,this.boundHandleBrowserEvent_,!!Z.bM&&{passive:!1});const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[(0,N.oL)(t,z.Z.KEYDOWN,this.handleBrowserEvent,this),(0,N.oL)(t,z.Z.KEYPRESS,this.handleBrowserEvent,this)];const i=e.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,N.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,N.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,N.oL)(t,w.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,N.oL)(t,z.Z.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(N.bN),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new j("addlayer",t)),this.layerGroupPropertyListenerKeys_=[(0,N.oL)(t,w.Z.PROPERTYCHANGE,this.render,this),(0,N.oL)(t,z.Z.CHANGE,this.render,this),(0,N.oL)(t,"addlayer",this.handleLayerAdd_,this),(0,N.oL)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){te(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let s=null;if(void 0!==e&&(0,Qt.py)(e)&&i&&i.isDef()){const n=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,m.p8)(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:n,wantedTiles:{},mapId:(0,_.sq)(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const t=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=(0,m.p8)(o.nextCenter,o.nextResolution,t,e)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n&&(!this.previousExtent_||!(0,m.xb)(this.previousExtent_)&&!(0,m.fS)(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Y("movestart",this,n)),this.previousExtent_=(0,m.YN)(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ut.Z.ANIMATING]&&!s.viewHints[ut.Z.INTERACTING]&&!(0,m.fS)(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Y("moveend",this,s)),(0,m.d9)(s.extent,this.previousExtent_))),this.dispatchEvent(new Y(J,this,s)),this.renderComplete_=this.hasListener(tt)||this.hasListener(et)||this.hasListener(P.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new j("removelayer",e)),this.set(it,t)}setSize(t){this.set(nt,t)}setTarget(t){this.set(st,t)}setView(t){if(!t||t instanceof ct.ZP)return void this.set(ot,t);this.set(ot,new ct.ZP);const e=this;t.then((function(t){e.setView(new ct.ZP(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const i=getComputedStyle(t),n=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(n)||isNaN(s)||(e=[n,s],!(0,Qt.py)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&(0,Jt.ZK)("No map visible because the map container's width or height are 0."))}const i=this.getSize();!e||i&&(0,_t.fS)(e,i)||(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}}const ne=ie},6414:(t,e,i)=>{i.d(e,{Z:()=>c});var n=i(9025),s=i(3606),o=i(7093),r=i(2637),a=i(6534);class l extends n.ZP{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class h extends o.Z{constructor(t){super(),this.on,this.once,this.un,(0,r.sq)(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new l(i,t,e)),i=s.Z.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new l(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const n=this.values_||(this.values_={});if(i)n[t]=e;else{const i=n[t];n[t]=e,i!==e&&this.notify(t,i)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],(0,a.x)(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const c=h},3606:(t,e,i)=>{i.d(e,{Z:()=>n});const n={PROPERTYCHANGE:"propertychange"}},7093:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(952),s=i(2001),o=i(8196);class r extends n.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(s.Z.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=(0,o.oL)(this,t[s],e);return n}return(0,o.oL)(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const n=t.length;i=new Array(n);for(let s=0;s<n;++s)i[s]=(0,o.Vx)(this,t[s],e)}else i=(0,o.Vx)(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)!function(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)(0,o.bN)(t[e]);else(0,o.bN)(t)}(i);else if(Array.isArray(t))for(let i=0,n=t.length;i<n;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}r.prototype.on,r.prototype.once,r.prototype.un;const a=r},5069:(t,e,i)=>{i.d(e,{Z:()=>h});var n=i(952),s=i(2001),o=i(3584),r=i(2637),a=i(7898);class l extends n.Z{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(s.Z.CHANGE)}release(){this.state===o.Z.ERROR&&this.setState(o.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==o.Z.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==o.Z.LOADED){t.interimTile=null;break}t.getState()==o.Z.LOADING?e=t:t.getState()==o.Z.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==o.Z.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){(0,r.O3)()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;const n=e-i+1e3/60;return n>=this.transition_?1:(0,a.YQ)(n/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const h=l},6462:(t,e,i)=>{i.d(e,{T:()=>s,Z:()=>o});class n{constructor(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function s(t,e,i,s,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=i,o.maxY=s,o):new n(t,e,i,s)}const o=n},3584:(t,e,i)=>{i.d(e,{Z:()=>n});const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},2724:(t,e,i)=>{i.d(e,{ZP:()=>b});var n=i(6414),s=i(6270);const o={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var r=i(591),a=i(1202),l=i(6764),h=i(2253),c=i(9162),u=i(8007);function d(t,e,i){return function(n,s,o,r,a){if(!n)return;if(!s&&!e)return n;const l=e?0:o[0]*s,h=e?0:o[1]*s,c=a?a[0]:0,d=a?a[1]:0;let g=t[0]+l/2+c,_=t[2]-l/2+c,p=t[1]+h/2+d,m=t[3]-h/2+d;g>_&&(g=(_+g)/2,_=g),p>m&&(p=(m+p)/2,m=p);let f=(0,u.uZ)(n[0],g,_),v=(0,u.uZ)(n[1],p,m);if(r&&i&&s){const t=30*s;f+=-t*Math.log(1+Math.max(0,g-n[0])/t)+t*Math.log(1+Math.max(0,n[0]-_)/t),v+=-t*Math.log(1+Math.max(0,p-n[1])/t)+t*Math.log(1+Math.max(0,n[1]-m)/t)}return[f,v]}}function g(t){return t}var _=i(8983),p=i(2182);function m(t,e,i,n){const s=(0,_.dz)(e)/i[0],o=(0,_.Cr)(e)/i[1];return n?Math.min(t,Math.max(s,o)):Math.min(t,Math.min(s,o))}function f(t,e,i){let n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),(0,u.uZ)(n,i/2,2*e)}function v(t,e,i,n,s){return i=void 0===i||i,function(o,r,a,l){if(void 0!==o){const r=n?m(t,n,a,s):t;return i&&l?f(o,r,e):(0,u.uZ)(o,e,r)}}}var y=i(2758),E=i(7898),C=i(1403);class x extends n.Z{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,a.UQ)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&(0,a.h_)(),t.center&&(t.center=(0,a.Vs)(t.center,this.projection_)),t.extent&&(t.extent=(0,a.dY)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in o)delete e[t];this.setProperties(e,!0);const i=function(t){let e,i,n;let s=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28;const l=void 0!==t.zoomFactor?t.zoomFactor:2,h=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,d=void 0!==t.showFullExtent&&t.showFullExtent,g=(0,a.UQ)(t.projection,"EPSG:3857"),y=g.getExtent();let E=t.constrainOnlyCenter,C=t.extent;if(h||C||!g.isGlobal()||(E=!1,C=y),void 0!==t.resolutions){const r=t.resolutions;i=r[s],n=void 0!==r[o]?r[o]:r[r.length-1],e=t.constrainResolution?function(t,e,i,n){return e=void 0===e||e,function(s,o,r,a){if(void 0!==s){const l=t[0],h=t[t.length-1],c=i?m(l,i,r,n):l;if(a)return e?f(s,c,h):(0,u.uZ)(s,h,c);const d=Math.min(c,s),g=Math.floor((0,p.h7)(t,d,o));return t[g]>c&&g<t.length-1?t[g+1]:t[g]}}}(r,c,!E&&C,d):v(i,n,c,!E&&C,d)}else{const h=(y?Math.max((0,_.dz)(y),(0,_.Cr)(y)):360*a.Wm.degrees/g.getMetersPerUnit())/r.S/Math.pow(2,0),p=h/Math.pow(2,28);i=t.maxResolution,void 0!==i?s=0:i=h/Math.pow(l,s),n=t.minResolution,void 0===n&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(l,o):h/Math.pow(l,o):p),o=s+Math.floor(Math.log(i/n)/Math.log(l)),n=i/Math.pow(l,o-s),e=t.constrainResolution?function(t,e,i,n,s,o){return n=void 0===n||n,i=void 0!==i?i:0,function(r,a,l,h){if(void 0!==r){const c=s?m(e,s,l,o):e;if(h)return n?f(r,c,i):(0,u.uZ)(r,i,c);const d=1e-9,g=Math.ceil(Math.log(e/c)/Math.log(t)-d),_=-a*(.5-d)+.5,p=Math.min(c,r),v=Math.floor(Math.log(e/p)/Math.log(t)+_),y=Math.max(g,v),E=e/Math.pow(t,y);return(0,u.uZ)(E,i,c)}}}(l,i,n,c,!E&&C,d):v(i,n,c,!E&&C,d)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:s,zoomFactor:l}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return d(t.extent,t.constrainOnlyCenter,e)}const e=(0,a.UQ)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,d(t,!1,!1)}return g}(t),s=i.constraint,l=function(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?(0,y.Gw)():!1===e?y.YP:"number"==typeof e?(0,y.gE)(e):y.YP}return y.h$}(t);this.constraints_={center:n,resolution:s,rotation:l},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),o=s/2*(n[3]-e[3]+e[1]-n[1]),r=s/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+o,i[1]-r])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let i=arguments[t];i.center&&(i=Object.assign({},i),i.center=(0,a.Vs)(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=(0,a.Vs)(i.anchor,this.getProjection())),e[t]=i}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i);let n=0;for(;n<i&&!this.isDef();++n){const t=arguments[n];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(n===i)return void(e&&T(e,!0));let o=Date.now(),r=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const h=[];for(;n<i;++n){const t=arguments[n],i={start:o,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||E.rd,callback:e};if(t.center&&(i.sourceCenter=r,i.targetCenter=t.center.slice(),r=i.targetCenter),void 0!==t.zoom?(i.sourceResolution=a,i.targetResolution=this.getResolutionForZoom(t.zoom),a=i.targetResolution):t.resolution&&(i.sourceResolution=a,i.targetResolution=t.resolution,a=i.targetResolution),void 0!==t.rotation){i.sourceRotation=l;const e=(0,u.$W)(t.rotation-l+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=l+e,l=i.targetRotation}R(i)?i.complete=!0:o+=i.duration,h.push(i)}this.animations_.push(h),this.setHint(s.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[s.Z.ANIMATING]>0}getInteracting(){return this.hints_[s.Z.INTERACTING]>0}cancelAnimations(){let t;this.setHint(s.Z.ANIMATING,-this.hints_[s.Z.ANIMATING]);for(let e=0,i=this.animations_.length;e<i;++e){const i=this.animations_[e];if(i[0].callback&&T(i[0].callback,!1),!t)for(let e=0,n=i.length;e<n;++e){const n=i[e];if(!n.complete){t=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let o=!0;for(let i=0,s=n.length;i<s;++i){const s=n[i];if(s.complete)continue;const r=t-s.start;let a=s.duration>0?r/s.duration:1;a>=1?(s.complete=!0,a=1):o=!1;const l=s.easing(a);if(s.sourceCenter){const t=s.sourceCenter[0],e=s.sourceCenter[1],i=s.targetCenter[0],n=s.targetCenter[1];this.nextCenter_=s.targetCenter;const o=t+l*(i-t),r=e+l*(n-e);this.targetCenter_=[o,r]}if(s.sourceResolution&&s.targetResolution){const t=1===l?s.targetResolution:s.sourceResolution+l*(s.targetResolution-s.sourceResolution);if(s.anchor){const e=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(i,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){const t=1===l?(0,u.$W)(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+l*(s.targetRotation-s.sourceRotation);if(s.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!s.complete)break}if(o){this.animations_[i]=null,this.setHint(s.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=n[0].callback;t&&T(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],(0,h.U1)(i,t-this.getRotation()),(0,h.IH)(i,e)),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),s=this.getResolution();return void 0!==n&&void 0!==s&&(i=[e[0]-t*(e[0]-n[0])/s,e[1]-t*(e[1]-n[1])/s]),i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?(0,a.lO)(t,this.getProjection()):t}getCenterInternal(){return this.get(o.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return(0,a.Fj)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();(0,c.h)(e,1);const i=this.getResolution();(0,c.h)(void 0!==i,2);const n=this.getRotation();return(0,c.h)(void 0!==n,3),(0,_.p8)(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(o.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal((0,a.dY)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=(0,_.dz)(t)/e[0],n=(0,_.Cr)(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(i){return e/Math.pow(t,i*n)}}getRotation(){return this.get(o.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/e;return function(t){return Math.log(i/t)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const t=this.getViewportSizeMinusPadding_();n=w(n,this.getViewportSize_(),[t[0]/2+s[3],t[1]/2+s[0]],e,i)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,n=this.minZoom_||0;if(this.resolutions_){const s=(0,p.h7)(this.resolutions_,t,1);n=s,e=this.resolutions_[s],i=s==this.resolutions_.length-1?2:e/this.resolutions_[s+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=(0,u.uZ)(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,(0,u.uZ)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if((0,c.h)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,c.h)(!(0,_.xb)(t),25);const e=(0,a.dY)(t,this.getProjection());i=(0,C.oJ)(e)}else if("Circle"===t.getType()){const e=(0,a.dY)(t.getExtent(),this.getProjection());i=(0,C.oJ)(e),i.rotate(this.getRotation(),(0,_.qg)(e))}else{const e=(0,a.Cs)();i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),s=t.getFlatCoordinates(),o=t.getStride();let r=1/0,a=1/0,l=-1/0,h=-1/0;for(let t=0,e=s.length;t<e;t+=o){const e=s[t]*i-s[t+1]*n,o=s[t]*n+s[t+1]*i;r=Math.min(r,e),a=Math.min(a,o),l=Math.max(l,e),h=Math.max(h,o)}return[r,a,l,h]}fitInternal(t,e){let i=(e=e||{}).size;i||(i=this.getViewportSizeMinusPadding_());const n=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const r=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(r,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,s?0:1);const h=this.getRotation(),c=Math.sin(h),u=Math.cos(h),d=(0,_.qg)(r);d[0]+=(n[1]-n[3])/2*a,d[1]+=(n[0]-n[2])/2*a;const g=d[0]*u-d[1]*c,p=d[1]*u+d[0]*c,m=this.getConstrainedCenter([g,p],a),f=e.callback?e.callback:l.Zn;void 0!==e.duration?this.animateInternal({resolution:a,center:m,duration:e.duration,easing:e.easing},f):(this.targetResolution_=a,this.targetCenter_=m,this.applyTargetState_(!1,!0),T(f,!0))}centerOn(t,e,i){this.centerOnInternal((0,a.Vs)(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(w(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let s;const o=this.padding_;if(o&&t){const r=this.getViewportSizeMinusPadding_(-i),a=w(t,n,[r[0]/2+o[3],r[1]/2+o[0]],e,i);s=[t[0]-a[0],t[1]-a[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=(0,a.lO)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&(0,a.Vs)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=(0,a.Vs)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?(0,a.Vs)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,r,s,i,this.calculateCenterShift(this.targetCenter_,r,n,s));this.get(o.ROTATION)!==n&&this.set(o.ROTATION,n),this.get(o.RESOLUTION)!==r&&(this.set(o.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),a&&this.get(o.CENTER)&&(0,h.fS)(this.get(o.CENTER),a)||this.set(o.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200;const n=e||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),r=this.constraints_.resolution(this.targetResolution_,n,o),a=this.constraints_.center(this.targetCenter_,r,o,!1,this.calculateCenterShift(this.targetCenter_,r,s,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=r,this.targetRotation_=s,this.targetCenter_=a,void this.applyTargetState_();i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===r&&this.getRotation()===s&&this.getCenterInternal()&&(0,h.fS)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:a,resolution:r,duration:t,easing:E.Vv,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(s.Z.INTERACTING,1)}endInteraction(t,e,i){i=i&&(0,a.Vs)(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(s.Z.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function T(t,e){setTimeout((function(){t(e)}),0)}function R(t){return!(t.sourceCenter&&t.targetCenter&&!(0,h.fS)(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function w(t,e,i,n,s){const o=Math.cos(-s);let r=Math.sin(-s),a=t[0]*o-t[1]*r,l=t[1]*o+t[0]*r;return a+=(e[0]/2-i[0])*n,l+=(i[1]-e[1]/2)*n,r=-r,[a*o-l*r,l*o+a*r]}const b=x},6270:(t,e,i)=>{i.d(e,{Z:()=>n});const n={ANIMATING:0,INTERACTING:1}},2182:(t,e,i)=>{function n(t,e){return t>e?1:t<e?-1:0}function s(t,e,i){const n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;let s;if(i>0){for(s=1;s<n;++s)if(t[s]<e)return s-1}else if(i<0){for(s=1;s<n;++s)if(t[s]<=e)return s}else for(s=1;s<n;++s){if(t[s]==e)return s;if(t[s]<e)return"function"==typeof i?i(e,t[s-1],t[s])>0?s-1:s:t[s-1]-e<e-t[s]?s-1:s}return n-1}function o(t,e){const i=Array.isArray(e)?e:[e],n=i.length;for(let e=0;e<n;e++)t[t.length]=i[e]}function r(t,e){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function a(t,e,i){const s=e||n;return t.every((function(e,n){if(0===n)return!0;const o=s(t[n-1],e);return!(o>0||i&&0===o)}))}i.d(e,{fS:()=>r,h7:()=>s,j2:()=>n,l7:()=>o,pT:()=>a})},9162:(t,e,i)=>{i.d(e,{h:()=>s});var n=i(7906);function s(t,e){if(!t)throw new n.Z(e)}},184:(t,e,i)=>{i.d(e,{XC:()=>a,_2:()=>h});var n=i(9162),s=i(8007);const o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,r=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(t){return"string"==typeof t?t:function(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let n=t[2];n!=(0|n)&&(n=n+.5|0);return"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}(t)}const l=function(){const t={};let e=0;return function(i){let s;if(t.hasOwnProperty(i))s=t[i];else{if(e>=1024){let i=0;for(const n in t)0==(3&i++)&&(delete t[n],--e)}s=function(t){let e,i,s,a,l;if(r.exec(t)&&(t=function(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(t)),o.exec(t)){const n=t.length-1;let o;o=n<=4?1:2;const r=4===n||8===n;e=parseInt(t.substr(1+0*o,o),16),i=parseInt(t.substr(1+1*o,o),16),s=parseInt(t.substr(1+2*o,o),16),a=r?parseInt(t.substr(1+3*o,o),16):255,1==o&&(e=(e<<4)+e,i=(i<<4)+i,s=(s<<4)+s,r&&(a=(a<<4)+a)),l=[e,i,s,a/255]}else t.startsWith("rgba(")?(l=t.slice(5,-1).split(",").map(Number),c(l)):t.startsWith("rgb(")?(l=t.slice(4,-1).split(",").map(Number),l.push(1),c(l)):(0,n.h)(!1,14);return l}(i),t[i]=s,++e}return s}}();function h(t){return Array.isArray(t)?t:l(t)}function c(t){return t[0]=(0,s.uZ)(t[0]+.5|0,0,255),t[1]=(0,s.uZ)(t[1]+.5|0,0,255),t[2]=(0,s.uZ)(t[2]+.5|0,0,255),t[3]=(0,s.uZ)(t[3],0,1),t}},670:(t,e,i)=>{i.d(e,{ZK:()=>o});const n={info:1,warn:2,error:3,none:4};let s=n.info;function o(...t){s>n.warn||console.warn(...t)}},2253:(t,e,i)=>{i.d(e,{Cf:()=>l,IH:()=>s,U1:()=>r,bA:()=>a,fS:()=>o});var n=i(8983);function s(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function o(t,e){let i=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function r(t,e){const i=Math.cos(e),n=Math.sin(e),s=t[0]*i-t[1]*n,o=t[1]*i+t[0]*n;return t[0]=s,t[1]=o,t}function a(t,e){return t[0]*=e,t[1]*=e,t}function l(t,e){if(e.canWrapX()){const i=(0,n.dz)(e.getExtent()),s=function(t,e,i){const s=e.getExtent();let o=0;return e.canWrapX()&&(t[0]<s[0]||t[0]>s[2])&&(i=i||(0,n.dz)(s),o=Math.floor((t[0]-s[0])/i)),o}(t,e,i);s&&(t[0]-=s*i)}return t}},9220:(t,e,i)=>{i.d(e,{$H:()=>r,E4:()=>s,ZF:()=>a,ep:()=>l,hF:()=>h,jy:()=>o});var n=i(7119);function s(t,e,i,s){let o;return o=i&&i.length?i.shift():n.Id?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("2d",s)}function o(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function r(t,e){const i=e.parentNode;i&&i.replaceChild(t,e)}function a(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function l(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function h(t,e){const i=t.childNodes;for(let n=0;;++n){const s=i[n],o=e[n];if(!s&&!o)break;s!==o&&(s?o?t.insertBefore(o,s):(t.removeChild(s),--n):t.appendChild(o))}}},7898:(t,e,i)=>{function n(t){return Math.pow(t,3)}function s(t){return 1-n(1-t)}function o(t){return 3*t*t-2*t*t*t}function r(t){return t}i.d(e,{GE:()=>r,Vv:()=>s,YQ:()=>n,rd:()=>o})},8196:(t,e,i)=>{i.d(e,{Vx:()=>o,bN:()=>r,oL:()=>s});var n=i(6534);function s(t,e,i,n,s){if(n&&n!==t&&(i=i.bind(n)),s){const n=i;i=function(){t.removeEventListener(e,i),n.apply(this,arguments)}}const o={target:t,type:e,listener:i};return t.addEventListener(e,i),o}function o(t,e,i,n){return s(t,e,i,n,!0)}function r(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,n.Z)(t))}},9025:(t,e,i)=>{i.d(e,{ZP:()=>n});const n=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},2001:(t,e,i)=>{i.d(e,{Z:()=>n});const n={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},952:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(5466),s=i(9025),o=i(6764),r=i(6534);class a extends n.Z{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e="string"==typeof t,i=e?t:t.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const r=e?new s.ZP(t):t;r.target||(r.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});let h;i in a||(a[i]=0,l[i]=0),++a[i];for(let t=0,e=n.length;t<e;++t)if(h="handleEvent"in n[t]?n[t].handleEvent(r):n[t].call(this,r),!1===h||r.propagationStopped){h=!1;break}if(0==--a[i]){let t=l[i];for(delete l[i];t--;)this.removeEventListener(i,o.Zn);delete a[i]}return h}disposeInternal(){this.listeners_&&(0,r.Z)(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=o.Zn,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}}}const l=a},8983:(t,e,i)=>{i.d(e,{Ne:()=>G,hI:()=>o,d9:()=>r,qf:()=>a,b8:()=>l,r4:()=>h,jE:()=>c,lJ:()=>d,T9:()=>g,YN:()=>_,HK:()=>p,GN:()=>m,fS:()=>f,l7:()=>v,Wj:()=>y,qP:()=>E,H6:()=>x,bg:()=>T,hC:()=>R,w$:()=>w,qg:()=>b,g0:()=>P,p8:()=>I,Cr:()=>L,Ed:()=>M,dY:()=>S,rL:()=>Z,Xv:()=>A,dz:()=>O,kK:()=>F,I7:()=>z,xb:()=>N,EO:()=>D});const n={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};var s=i(9162);function o(t){const e=[1/0,1/0,-1/0,-1/0];for(let i=0,n=t.length;i<n;++i)y(e,t[i]);return e}function r(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function a(t,e,i){let n,s;return n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,s=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,n*n+s*s}function l(t,e){return c(t,e[0],e[1])}function h(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function c(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function u(t,e){const i=t[0],s=t[1],o=t[2],r=t[3],a=e[0],l=e[1];let h=n.UNKNOWN;return a<i?h|=n.LEFT:a>o&&(h|=n.RIGHT),l<s?h|=n.BELOW:l>r&&(h|=n.ABOVE),h===n.UNKNOWN&&(h=n.INTERSECTING),h}function d(){return[1/0,1/0,-1/0,-1/0]}function g(t,e,i,n,s){return s?(s[0]=t,s[1]=e,s[2]=i,s[3]=n,s):[t,e,i,n]}function _(t){return g(1/0,1/0,-1/0,-1/0,t)}function p(t,e){const i=t[0],n=t[1];return g(i,n,i,n,e)}function m(t,e,i,n,s){return E(_(s),t,e,i,n)}function f(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function v(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function y(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function E(t,e,i,n,s){for(;i<n;i+=s)C(t,e[i],e[i+1]);return t}function C(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function x(t,e){let i;return i=e(R(t)),i||(i=e(w(t)),i||(i=e(A(t)),i||(i=e(Z(t)),i||!1)))}function T(t){let e=0;return N(t)||(e=O(t)*L(t)),e}function R(t){return[t[0],t[1]]}function w(t){return[t[2],t[1]]}function b(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function P(t,e){let i;return"bottom-left"===e?i=R(t):"bottom-right"===e?i=w(t):"top-left"===e?i=Z(t):"top-right"===e?i=A(t):(0,s.h)(!1,13),i}function I(t,e,i,n,s){const[o,r,a,l,h,c,u,d]=S(t,e,i,n);return g(Math.min(o,a,h,u),Math.min(r,l,c,d),Math.max(o,a,h,u),Math.max(r,l,c,d),s)}function S(t,e,i,n){const s=e*n[0]/2,o=e*n[1]/2,r=Math.cos(i),a=Math.sin(i),l=s*r,h=s*a,c=o*r,u=o*a,d=t[0],g=t[1];return[d-l+u,g-h-c,d-l-u,g-h+c,d+l-u,g+h+c,d+l+u,g+h-c,d-l+u,g-h-c]}function L(t){return t[3]-t[1]}function M(t,e,i){const n=i||[1/0,1/0,-1/0,-1/0];return F(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):_(n),n}function Z(t){return[t[0],t[3]]}function A(t){return[t[2],t[3]]}function O(t){return t[2]-t[0]}function F(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function N(t){return t[2]<t[0]||t[3]<t[1]}function D(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function z(t,e,i){let s=!1;const o=u(t,e),r=u(t,i);if(o===n.INTERSECTING||r===n.INTERSECTING)s=!0;else{const a=t[0],l=t[1],h=t[2],c=t[3],u=e[0],d=e[1],g=i[0],_=i[1],p=(_-d)/(g-u);let m,f;r&n.ABOVE&&!(o&n.ABOVE)&&(m=g-(_-c)/p,s=m>=a&&m<=h),s||!(r&n.RIGHT)||o&n.RIGHT||(f=_-(g-h)*p,s=f>=l&&f<=c),s||!(r&n.BELOW)||o&n.BELOW||(m=g-(_-l)/p,s=m>=a&&m<=h),s||!(r&n.LEFT)||o&n.LEFT||(f=_-(g-a)*p,s=f>=l&&f<=c)}return s}function G(t,e,i,n){let s=[];if(n>1){const e=t[2]-t[0],i=t[3]-t[1];for(let o=0;o<n;++o)s.push(t[0]+e*o/n,t[1],t[2],t[1]+i*o/n,t[2]-e*o/n,t[3],t[0],t[3]-i*o/n)}else s=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(s,s,2);const o=[],r=[];for(let t=0,e=s.length;t<e;t+=2)o.push(s[t]),r.push(s[t+1]);return function(t,e,i){return g(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(o,r,i)}},6764:(t,e,i)=>{i.d(e,{Dv:()=>o,Zn:()=>r,qe:()=>a,uX:()=>s});var n=i(2182);function s(){return!0}function o(){return!1}function r(){}function a(t){let e,i,s,o=!1;return function(){const r=Array.prototype.slice.call(arguments);return o&&this===s&&(0,n.fS)(r,i)||(o=!0,s=this,i=r,e=t.apply(this,arguments)),e}}},1403:(t,e,i)=>{i.d(e,{ZP:()=>O,oJ:()=>F});var n=i(6414),s=i(2637),o=i(1091),r=i(8983),a=i(1202),l=i(6764);const h=(0,o.Ue)();class c extends n.Z{constructor(){super(),this.extent_=(0,r.lJ)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,l.qe)((function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return(0,s.O3)()}closestPointXY(t,e,i,n){return(0,s.O3)()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return(0,s.O3)()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&(0,r.YN)(t),this.extentRevision_=this.getRevision()}return(0,r.EO)(this.extent_,t)}rotate(t,e){(0,s.O3)()}scale(t,e,i){(0,s.O3)()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return(0,s.O3)()}getType(){return(0,s.O3)()}applyTransform(t){(0,s.O3)()}intersectsExtent(t){return(0,s.O3)()}translate(t,e){(0,s.O3)()}transform(t,e){const i=(0,a.U2)(t),n="tile-pixels"==i.getUnits()?function(t,n,s){const l=i.getExtent(),c=i.getWorldExtent(),u=(0,r.Cr)(c)/(0,r.Cr)(l);return(0,o.qC)(h,c[0],c[3],u,-u,0,0,0),function(t,e,i,n,s,o){o=o||[];let r=0;for(let e=0;e<i;e+=n){const i=t[e],n=t[e+1];o[r++]=s[0]*i+s[2]*n+s[4],o[r++]=s[1]*i+s[3]*n+s[5]}o&&o.length!=r&&(o.length=r)}(t,0,t.length,s,h,n),(0,a.Ck)(i,e)(t,n,s)}:(0,a.Ck)(i,e);return this.applyTransform(n),this}}const u=c;function d(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}const g=class extends u{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return(0,r.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return(0,s.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=d(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){(0,s.O3)()}setLayout(t,e,i){let n;if(t)n=d(t);else{for(let t=0;t<i;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}n=e.length,t=function(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();!function(t,e,i,n,s,o,r){r=r||[];const a=Math.cos(s),l=Math.sin(s),h=o[0],c=o[1];let u=0;for(let e=0;e<i;e+=n){const i=t[e]-h,s=t[e+1]-c;r[u++]=h+i*a-s*l,r[u++]=c+i*l+s*a;for(let i=e+2;i<e+n;++i)r[u++]=t[i]}r&&r.length!=u&&(r.length=u)}(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){void 0===e&&(e=t),i||(i=(0,r.qg)(this.getExtent()));const n=this.getFlatCoordinates();if(n){const s=this.getStride();!function(t,e,i,n,s,o,r,a){a=a||[];const l=r[0],h=r[1];let c=0;for(let e=0;e<i;e+=n){const i=t[e]-l,r=t[e+1]-h;a[c++]=l+s*i,a[c++]=h+o*r;for(let i=e+2;i<e+n;++i)a[c++]=t[i]}a&&a.length!=c&&(a.length=c)}(n,0,n.length,s,t,e,i,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();!function(t,e,i,n,s,o,r){r=r||[];let a=0;for(let e=0;e<i;e+=n){r[a++]=t[e]+s,r[a++]=t[e+1]+o;for(let i=e+2;i<e+n;++i)r[a++]=t[i]}r&&r.length!=a&&(r.length=a)}(i,0,i.length,n,t,e,i),this.changed()}}};var _=i(8007);function p(t,e,i,n,s,o,r){const a=t[e],l=t[e+1],h=t[i]-a,c=t[i+1]-l;let u;if(0===h&&0===c)u=e;else{const d=((s-a)*h+(o-l)*c)/(h*h+c*c);if(d>1)u=i;else{if(d>0){for(let s=0;s<n;++s)r[s]=(0,_.t7)(t[e+s],t[i+s],d);return void(r.length=n)}u=e}}for(let e=0;e<n;++e)r[e]=t[u+e];r.length=n}function m(t,e,i,n,s){let o=t[e],r=t[e+1];for(e+=n;e<i;e+=n){const i=t[e],n=t[e+1],a=(0,_.bI)(o,r,i,n);a>s&&(s=a),o=i,r=n}return s}function f(t,e,i,n,s,o,r,a,l,h,c){if(e==i)return h;let u,d;if(0===s){if(d=(0,_.bI)(r,a,t[e],t[e+1]),d<h){for(u=0;u<n;++u)l[u]=t[e+u];return l.length=n,d}return h}c=c||[NaN,NaN];let g=e+n;for(;g<i;)if(p(t,g-n,g,n,r,a,c),d=(0,_.bI)(r,a,c[0],c[1]),d<h){for(h=d,u=0;u<n;++u)l[u]=c[u];l.length=n,g+=n}else g+=n*Math.max((Math.sqrt(d)-Math.sqrt(h))/s|0,1);if(o&&(p(t,i-n,e,n,r,a,c),d=(0,_.bI)(r,a,c[0],c[1]),d<h)){for(h=d,u=0;u<n;++u)l[u]=c[u];l.length=n}return h}function v(t,e,i,n){for(let s=0,o=i.length;s<o;++s){const o=i[s];for(let i=0;i<n;++i)t[e++]=o[i]}return e}function y(t,e){return e*Math.round(t/e)}function E(t,e,i,n,s,o,r){if(e==i)return r;let a,l,h=y(t[e],s),c=y(t[e+1],s);e+=n,o[r++]=h,o[r++]=c;do{if(a=y(t[e],s),l=y(t[e+1],s),(e+=n)==i)return o[r++]=a,o[r++]=l,r}while(a==h&&l==c);for(;e<i;){const i=y(t[e],s),u=y(t[e+1],s);if(e+=n,i==a&&u==l)continue;const d=a-h,g=l-c,_=i-h,p=u-c;d*p==g*_&&(d<0&&_<d||d==_||d>0&&_>d)&&(g<0&&p<g||g==p||g>0&&p>g)?(a=i,l=u):(o[r++]=a,o[r++]=l,h=a,c=l,a=i,l=u)}return o[r++]=a,o[r++]=l,r}function C(t,e,i,n,s){s=void 0!==s?s:[];let o=0;for(let r=e;r<i;r+=n)s[o++]=t.slice(r,r+n);return s.length=o,s}function x(t,e,i,n){let s=0,o=t[i-n],r=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];s+=r*i-o*n,o=i,r=n}return s/2}class T extends g{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new T(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n<(0,r.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(m(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),f(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return x(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return C(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=function(t,e,i,n,s,o,r){const a=(i-e)/n;if(a<3){for(;e<i;e+=n)o[r++]=t[e],o[r++]=t[e+1];return r}const l=new Array(a);l[0]=1,l[a-1]=1;const h=[e,i-n];let c=0;for(;h.length>0;){const i=h.pop(),o=h.pop();let r=0;const a=t[o],u=t[o+1],d=t[i],g=t[i+1];for(let e=o+n;e<i;e+=n){const i=t[e],n=t[e+1],s=(0,_.rU)(i,n,a,u,d,g);s>r&&(c=e,r=s)}r>s&&(l[(c-e)/n]=1,o+n<c&&h.push(o,c),c+n<i&&h.push(c,i))}for(let i=0;i<a;++i)l[i]&&(o[r++]=t[e+i*n],o[r++]=t[e+i*n+1]);return r}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new T(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=v(this.flatCoordinates,0,t,this.stride),this.changed()}}const R=T;class w extends g{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new w(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const s=this.flatCoordinates,o=(0,_.bI)(t,e,s[0],s[1]);if(o<n){const t=this.stride;for(let e=0;e<t;++e)i[e]=s[e];return i.length=t,o}return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return(0,r.HK)(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return(0,r.jE)(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,i,n){for(let n=0,s=i.length;n<s;++n)t[e++]=i[n];return e}(this.flatCoordinates,0,t,this.stride),this.changed()}}const b=w;var P=i(2182),I=i(5888);var S=i(7743);function L(t,e,i,n){for(;e<i-n;){for(let s=0;s<n;++s){const o=t[e+s];t[e+s]=t[i-n+s],t[i-n+s]=o}e+=n,i-=n}}function M(t,e,i,n){let s=0,o=t[i-n],r=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];s+=(i-o)*(n+r),o=i,r=n}return 0===s?void 0:s>0}function Z(t,e,i,n,s){s=void 0!==s&&s;for(let o=0,r=i.length;o<r;++o){const r=i[o],a=M(t,e,r,n);(0===o?s&&a||!s&&!a:s&&!a||!s&&a)&&L(t,e,r,n),e=r}return e}class A extends g{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?(0,P.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new A(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<(0,r.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,n,s){for(let o=0,r=i.length;o<r;++o){const r=i[o];s=m(t,e,r,n,s),e=r}return s}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,s,o,r,a,l,h,c){c=c||[NaN,NaN];for(let u=0,d=i.length;u<d;++u){const d=i[u];h=f(t,e,d,n,s,o,r,a,l,h,c),e=d}return h}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return(0,I.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return function(t,e,i,n){let s=0;for(let o=0,r=i.length;o<r;++o){const r=i[o];s+=x(t,e,r,n),e=r}return s}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Z(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,function(t,e,i,n,s){s=void 0!==s?s:[];let o=0;for(let r=0,a=i.length;r<a;++r){const a=i[r];s[o++]=C(t,e,a,n,s[o]),e=a}return s.length=o,s}(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=(0,r.qg)(this.getExtent());this.flatInteriorPoint_=function(t,e,i,n,s,o,r){let a,l,h,c,u,d,g;const _=s[o+1],p=[];for(let s=0,o=i.length;s<o;++s){const o=i[s];for(c=t[o-n],d=t[o-n+1],a=e;a<o;a+=n)u=t[a],g=t[a+1],(_<=d&&g<=_||d<=_&&_<=g)&&(h=(_-d)/(g-d)*(u-c)+c,p.push(h)),c=u,d=g}let m=NaN,f=-1/0;for(p.sort(P.j2),c=p[0],a=1,l=p.length;a<l;++a){u=p[a];const s=Math.abs(u-c);s>f&&(h=(c+u)/2,(0,I.wY)(t,e,i,n,h,_)&&(m=h,f=s)),c=u}return isNaN(m)&&(m=s[o]),r?(r.push(m,_,f),r):[m,_,f]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new b(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new R(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[];let s=0;for(let o=0,r=i.length;o<r;++o){const r=i[o],a=new R(e.slice(s,r),t);n.push(a),s=r}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function(t,e,i,n,s){s=void 0!==s&&s;for(let o=0,r=i.length;o<r;++o){const r=i[o],a=M(t,e,r,n);if(0===o){if(s&&a||!s&&!a)return!1}else if(s&&!a||!s&&a)return!1;e=r}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Z(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=function(t,e,i,n,s,o,r,a){for(let l=0,h=i.length;l<h;++l){const h=i[l];r=E(t,e,h,n,s,o,r),a.push(r),e=h}return r}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new A(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return(0,S.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=function(t,e,i,n,s){s=s||[];let o=0;for(let r=0,a=i.length;r<a;++r){const a=v(t,e,i[r],n);s[o++]=a,e=a}return s.length=o,s}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const O=A;function F(t){const e=t[0],i=t[1],n=t[2],s=t[3],o=[e,i,e,s,n,s,n,i,e,i];return new A(o,"XY",[o.length])}},5888:(t,e,i)=>{i.d(e,{TG:()=>o,uG:()=>s,wY:()=>r});var n=i(8983);function s(t,e,i,s,r){return!(0,n.H6)(r,(function(n){return!o(t,e,i,s,n[0],n[1])}))}function o(t,e,i,n,s,o){let r=0,a=t[i-n],l=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];l<=o?n>o&&(i-a)*(o-l)-(s-a)*(n-l)>0&&r++:n<=o&&(i-a)*(o-l)-(s-a)*(n-l)<0&&r--,a=i,l=n}return 0!==r}function r(t,e,i,n,s,r){if(0===i.length)return!1;if(!o(t,e,i[0],n,s,r))return!1;for(let e=1,a=i.length;e<a;++e)if(o(t,i[e-1],i[e],n,s,r))return!1;return!0}},7743:(t,e,i)=>{i.d(e,{mV:()=>r,ac:()=>a});var n=i(8983),s=i(5888);function o(t,e,i,s,o){const r=(0,n.qP)((0,n.lJ)(),t,e,i,s);return!!(0,n.kK)(o,r)&&(!!(0,n.r4)(o,r)||r[0]>=o[0]&&r[2]<=o[2]||r[1]>=o[1]&&r[3]<=o[3]||function(t,e,i,s,r){let a;for(e+=s;e<i;e+=s)if(l=t.slice(e-s,e),h=t.slice(e,e+s),a=(0,n.I7)(o,l,h),a)return a;var l,h;return!1}(t,e,i,s))}function r(t,e,i,n,r){return!!(o(t,e,i,n,r)||(0,s.TG)(t,e,i,n,r[0],r[1])||(0,s.TG)(t,e,i,n,r[0],r[3])||(0,s.TG)(t,e,i,n,r[2],r[1])||(0,s.TG)(t,e,i,n,r[2],r[3]))}function a(t,e,i,n,a){if(!r(t,e,i[0],n,a))return!1;if(1===i.length)return!0;for(let e=1,r=i.length;e<r;++e)if((0,s.uG)(t,i[e-1],i[e],n,a)&&!o(t,i[e-1],i[e],n,a))return!1;return!0}},7119:(t,e,i)=>{i.d(e,{G$:()=>o,Id:()=>l,MP:()=>a,Tp:()=>h,V:()=>s,bM:()=>c,tK:()=>r});const n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",s=n.includes("firefox"),o=(n.includes("safari")&&!n.includes("chrom")&&(n.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(n)),n.includes("webkit")&&!n.includes("edge")),r=n.includes("macintosh"),a="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,l="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,h="undefined"!=typeof Image&&Image.prototype.decode,c=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}()},1414:(t,e,i)=>{i.d(e,{Z:()=>h});var n=i(6414),s=i(9324),o=i(2637),r=i(9162),a=i(8007);class l extends n.Z{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[s.Z.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,r.h)("number"==typeof e[s.Z.OPACITY],64),e[s.Z.VISIBLE]=void 0===t.visible||t.visible,e[s.Z.Z_INDEX]=t.zIndex,e[s.Z.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[s.Z.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[s.Z.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[s.Z.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=(0,a.uZ)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return(0,o.O3)()}getLayerStatesArray(t){return(0,o.O3)()}getExtent(){return this.get(s.Z.EXTENT)}getMaxResolution(){return this.get(s.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(s.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(s.Z.MIN_ZOOM)}getMaxZoom(){return this.get(s.Z.MAX_ZOOM)}getOpacity(){return this.get(s.Z.OPACITY)}getSourceState(){return(0,o.O3)()}getVisible(){return this.get(s.Z.VISIBLE)}getZIndex(){return this.get(s.Z.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(s.Z.EXTENT,t)}setMaxResolution(t){this.set(s.Z.MAX_RESOLUTION,t)}setMinResolution(t){this.set(s.Z.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(s.Z.MAX_ZOOM,t)}setMinZoom(t){this.set(s.Z.MIN_ZOOM,t)}setOpacity(t){(0,r.h)("number"==typeof t,64),this.set(s.Z.OPACITY,t)}setVisible(t){this.set(s.Z.VISIBLE,t)}setZIndex(t){this.set(s.Z.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const h=l},1716:(t,e,i)=>{i.d(e,{Z:()=>g,j:()=>d});var n=i(1414),s=i(2001),o=i(9324),r=i(1900),a=i(2724),l=i(9162),h=i(8983),c=i(8196);class u extends n.Z{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(o.Z.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(o.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,c.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=(0,c.oL)(t,s.Z.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;e=t instanceof a.ZP?{viewState:t.getState(),extent:t.calculateExtent()}:t;const i=this.getExtent();return this.getVisible()&&d(this.getLayerState(),e.viewState)&&(!i||(0,h.kK)(i,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const i=this.getSource();if(i&&(e=i.getAttributions()),!e)return[];let n=e(t instanceof a.ZP?t.getViewStateAndExtent():t);return Array.isArray(n)||(n=[n]),n}render(t,e){const i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(o.Z.MAP,t)}getMapInternal(){return this.get(o.Z.MAP)}setMap(t){this.mapPrecomposeKey_&&((0,c.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,c.bN)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,c.oL)(t,r.Z.PRECOMPOSE,(function(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);(0,l.h)(!e.some((function(t){return t.layer===i.layer})),67),e.push(i)}),this),this.mapRenderKey_=(0,c.oL)(this,s.Z.CHANGE,t.render,t),this.changed())}setSource(t){this.set(o.Z.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function d(t,e){if(!t.visible)return!1;const i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;const n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}const g=u},9324:(t,e,i)=>{i.d(e,{Z:()=>n});const n={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},4382:(t,e,i)=>{i.d(e,{Z:()=>S});var n=i(1716);const s="preload",o="useInterimTilesOnError";class r extends n.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(s)}setPreload(t){this.set(s,t)}getUseInterimTilesOnError(){return this.get(o)}setUseInterimTilesOnError(t){this.set(o,t)}getData(t){return super.getData(t)}}const a=r;var l=i(2001);var h=i(7093),c=i(2637);class u extends h.Z{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return(0,c.O3)()}getData(t){return null}prepareFrame(t){return(0,c.O3)()}renderFrame(t,e){return(0,c.O3)()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(n,s)=>{const o=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,s,o)}}forEachFeatureAtCoordinate(t,e,i,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){2===t.target.getState()&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return 2!=e&&3!=e&&t.addEventListener(l.Z.CHANGE,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const d=u;var g=i(7299),_=i(1900),p=i(1091),m=i(184),f=i(9220),v=i(2182),y=i(8983);let E=null;const C=class extends d{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,p.Ue)(),this.pixelTransform=(0,p.Ue)(),this.inversePixelTransform=(0,p.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let n;E||(E=(0,f.E4)(1,1,void 0,{willReadFrequently:!0})),E.clearRect(0,0,1,1);try{E.drawImage(t,e,i,1,1,0,0,1,1),n=E.getImageData(0,0,1,1).data}catch(t){return E=null,null}return n}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,i){const n=this.getLayer().getClassName();let s,o;if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&(0,v.fS)((0,m._2)(t.style.backgroundColor),(0,m._2)(i)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=n;let t=s.style;t.position="absolute",t.width="100%",t.height="100%",o=(0,f.E4)();const e=o.canvas;s.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=s,this.context=o}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const n=(0,y.rL)(i),s=(0,y.Xv)(i),o=(0,y.w$)(i),r=(0,y.hC)(i);(0,p.nn)(e.coordinateToPixelTransform,n),(0,p.nn)(e.coordinateToPixelTransform,s),(0,p.nn)(e.coordinateToPixelTransform,o),(0,p.nn)(e.coordinateToPixelTransform,r);const a=this.inversePixelTransform;(0,p.nn)(a,n),(0,p.nn)(a,s),(0,p.nn)(a,o),(0,p.nn)(a,r),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.clip()}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){const s=new g.Z(t,this.inversePixelTransform,i,e);n.dispatchEvent(s)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(_.Z.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(_.Z.POSTRENDER,t,e)}getRenderTransform(t,e,i,n,s,o,r){const a=s/2,l=o/2,h=n/e,c=-h,u=-t[0]+r,d=-t[1];return(0,p.qC)(this.tempTransform,a,l,h,c,-i,u,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}};var x=i(2953),T=i(4304),R=i(6462),w=i(3584),b=i(1202),P=i(8691);const I=class extends C{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,y.lJ)(),this.tmpTileRange_=new R.Z(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==w.Z.LOADED||i==w.Z.EMPTY||i==w.Z.ERROR&&!n}getTile(t,e,i,n){const s=n.pixelRatio,o=n.viewState.projection,r=this.getLayer();let a=r.getSource().getTile(t,e,i,s,o);return a.getState()==w.Z.ERROR&&r.getUseInterimTilesOnError()&&r.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(a)||(a=a.getInterimTile()),a}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=(0,p.nn)(e.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!(0,y.b8)(s,n))return null;const o=e.pixelRatio,r=e.viewState.projection,a=e.viewState,l=i.getRenderSource(),h=l.getTileGridForProjection(a.projection),c=l.getTilePixelRatio(e.pixelRatio);for(let t=h.getZForResolution(a.resolution);t>=h.getMinZoom();--t){const e=h.getTileCoordForCoordAndZ(n,t),i=l.getTile(t,e[1],e[2],o,r);if(!(i instanceof x.Z||i instanceof T.Z)||i instanceof T.Z&&i.getState()===w.Z.EMPTY)return null;if(i.getState()!==w.Z.LOADED)continue;const s=h.getOrigin(t),u=(0,P.Pq)(h.getTileSize(t)),d=h.getResolution(t),g=Math.floor(c*((n[0]-s[0])/d-e[1]*u[0])),_=Math.floor(c*((s[1]-n[1])/d-e[2]*u[1])),p=Math.round(c*l.getGutterForProjection(a.projection));return this.getImageData(i.getImage(),g+p,_+p)}return null}loadedTileCallback(t,e,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(t,e,i)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],n=t.viewState,s=n.projection,o=n.resolution,r=n.center,a=n.rotation,l=t.pixelRatio,h=this.getLayer(),u=h.getSource(),d=u.getRevision(),g=u.getTileGridForProjection(s),_=g.getZForResolution(o,u.zDirection),m=g.getResolution(_);let f=t.extent;const E=t.viewState.resolution,C=u.getTilePixelRatio(l),x=Math.round((0,y.dz)(f)/E*l),T=Math.round((0,y.Cr)(f)/E*l),R=i.extent&&(0,b.dY)(i.extent,s);R&&(f=(0,y.Ed)(f,(0,b.dY)(i.extent,s)));const P=m*x/2/C,I=m*T/2/C,S=[r[0]-P,r[1]-I,r[0]+P,r[1]+I],L=g.getTileRangeForExtentAndZ(f,_),M={};M[_]={};const Z=this.createLoadedTileFinder(u,s,M),A=this.tmpExtent,O=this.tmpTileRange_;this.newTiles_=!1;const F=a?(0,y.dY)(n.center,E,a,t.size):void 0;for(let e=L.minX;e<=L.maxX;++e)for(let n=L.minY;n<=L.maxY;++n){if(a&&!g.tileCoordIntersectsViewport([_,e,n],F))continue;const s=this.getTile(_,e,n,t);if(this.isDrawableTile(s)){const e=(0,c.sq)(this);if(s.getState()==w.Z.LOADED){M[_][s.tileCoord.toString()]=s;let t=s.inTransition(e);t&&1!==i.opacity&&(s.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(s)||(this.newTiles_=!0)}if(1===s.getAlpha(e,t.time))continue}const o=g.getTileCoordChildTileRange(s.tileCoord,O,A);let r=!1;o&&(r=Z(_+1,o)),r||g.forEachTileCoordParentTileRange(s.tileCoord,Z,O,A)}const N=m/o*l/C;(0,p.qC)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/l,1/l,a,-x/2,-T/2);const D=(0,p.BB)(this.pixelTransform);this.useContainer(e,D,this.getBackground(t));const z=this.context,G=z.canvas;(0,p.nb)(this.inversePixelTransform,this.pixelTransform),(0,p.qC)(this.tempTransform,x/2,T/2,N,N,0,-x/2,-T/2),G.width!=x||G.height!=T?(G.width=x,G.height=T):this.containerReused||z.clearRect(0,0,x,T),R&&this.clipUnrotated(z,t,R),u.getInterpolate()||(z.imageSmoothingEnabled=!1),this.preRender(z,t),this.renderedTiles.length=0;let k,j,K,U=Object.keys(M).map(Number);U.sort(v.j2),1!==i.opacity||this.containerReused&&!u.getOpaque(t.viewState.projection)?(k=[],j=[]):U=U.reverse();for(let e=U.length-1;e>=0;--e){const i=U[e],n=u.getTilePixelSize(i,l,s),o=g.getResolution(i)/m,r=n[0]*o*N,a=n[1]*o*N,h=g.getTileCoordForCoordAndZ((0,y.rL)(S),i),d=g.getTileCoordExtent(h),f=(0,p.nn)(this.tempTransform,[C*(d[0]-S[0])/m,C*(S[3]-d[3])/m]),v=C*u.getGutterForProjection(s),E=M[i];for(const e in E){const n=E[e],s=n.tileCoord,o=h[1]-s[1],l=Math.round(f[0]-(o-1)*r),d=h[2]-s[2],g=Math.round(f[1]-(d-1)*a),p=Math.round(f[0]-o*r),m=Math.round(f[1]-d*a),C=l-p,x=g-m,T=_===i,R=T&&1!==n.getAlpha((0,c.sq)(this),t.time);let w=!1;if(!R)if(k){K=[p,m,p+C,m,p+C,m+x,p,m+x];for(let t=0,e=k.length;t<e;++t)if(_!==i&&i<j[t]){const e=k[t];(0,y.kK)([p,m,p+C,m+x],[e[0],e[3],e[4],e[7]])&&(w||(z.save(),w=!0),z.beginPath(),z.moveTo(K[0],K[1]),z.lineTo(K[2],K[3]),z.lineTo(K[4],K[5]),z.lineTo(K[6],K[7]),z.moveTo(e[6],e[7]),z.lineTo(e[4],e[5]),z.lineTo(e[2],e[3]),z.lineTo(e[0],e[1]),z.clip())}k.push(K),j.push(i)}else z.clearRect(p,m,C,x);this.drawTileImage(n,t,p,m,C,x,v,T),k&&!R?(w&&z.restore(),this.renderedTiles.unshift(n)):this.renderedTiles.push(n),this.updateUsedTiles(t.usedTiles,u,n)}}return this.renderedRevision=d,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!(0,y.fS)(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=l,this.renderedProjection=s,this.manageTilePyramid(t,u,g,l,s,f,_,h.getPreload()),this.scheduleExpireCache(t,u),this.postRender(z,t),i.extent&&z.restore(),z.imageSmoothingEnabled=!0,D!==G.style.transform&&(G.style.transform=D),this.container}drawTileImage(t,e,i,n,s,o,r,a){const l=this.getTileImage(t);if(!l)return;const h=(0,c.sq)(this),u=e.layerStatesArray[e.layerIndex],d=u.opacity*(a?t.getAlpha(h,e.time):1),g=d!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(l,r,r,l.width-2*r,l.height-2*r,i,n,s,o),g&&this.context.restore(),d!==u.opacity?e.animate=!0:a&&t.endTransition(h)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=function(t,e,i){const n=(0,c.sq)(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const n=(0,c.sq)(e);n in t||(t[n]={}),t[n][i.getKey()]=!0}manageTilePyramid(t,e,i,n,s,o,r,a,l){const h=(0,c.sq)(e);h in t.wantedTiles||(t.wantedTiles[h]={});const u=t.wantedTiles[h],d=t.tileQueue,g=i.getMinZoom(),_=t.viewState.rotation,p=_?(0,y.dY)(t.viewState.center,t.viewState.resolution,_,t.size):void 0;let m,f,v,E,C,x,T=0;for(x=g;x<=r;++x)for(f=i.getTileRangeForExtentAndZ(o,x,f),v=i.getResolution(x),E=f.minX;E<=f.maxX;++E)for(C=f.minY;C<=f.maxY;++C)_&&!i.tileCoordIntersectsViewport([x,E,C],p)||(r-x<=a?(++T,m=e.getTile(x,E,C,n,s),m.getState()==w.Z.IDLE&&(u[m.getKey()]=!0,d.isKeyQueued(m.getKey())||d.enqueue([m,h,i.getTileCoordCenter(m.tileCoord),v])),void 0!==l&&l(m)):e.useTile(x,E,C,s));e.updateCacheSize(T,s)}},S=class extends a{constructor(t){super(t)}createRenderer(){return new I(this)}}},8007:(t,e,i)=>{function n(t,e,i){return Math.min(Math.max(t,e),i)}function s(t,e,i,n,s,r){const a=s-i,l=r-n;if(0!==a||0!==l){const o=((t-i)*a+(e-n)*l)/(a*a+l*l);o>1?(i=s,n=r):o>0&&(i+=a*o,n+=l*o)}return o(t,e,i,n)}function o(t,e,i,n){const s=i-t,o=n-e;return s*s+o*o}function r(t){const e=t.length;for(let i=0;i<e;i++){let n=i,s=Math.abs(t[i][i]);for(let o=i+1;o<e;o++){const e=Math.abs(t[o][i]);e>s&&(s=e,n=o)}if(0===s)return null;const o=t[n];t[n]=t[i],t[i]=o;for(let n=i+1;n<e;n++){const s=-t[n][i]/t[i][i];for(let o=i;o<e+1;o++)i==o?t[n][o]=0:t[n][o]+=s*t[i][o]}}const i=new Array(e);for(let n=e-1;n>=0;n--){i[n]=t[n][e]/t[n][n];for(let s=n-1;s>=0;s--)t[s][e]-=t[s][n]*i[n]}return i}function a(t){return t*Math.PI/180}function l(t,e){const i=t%e;return i*e<0?i+e:i}function h(t,e,i){return t+i*(e-t)}function c(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}function u(t,e){return Math.floor(c(t,e))}function d(t,e){return Math.ceil(c(t,e))}i.d(e,{$W:()=>l,GW:()=>u,SV:()=>r,Yr:()=>a,bI:()=>o,mD:()=>d,rU:()=>s,t7:()=>h,uZ:()=>n})},6534:(t,e,i)=>{function n(t){for(const e in t)delete t[e]}function s(t){let e;for(e in t)return!1;return!e}i.d(e,{Z:()=>n,x:()=>s})},1202:(t,e,i)=>{i.d(e,{Wm:()=>n,UQ:()=>A,h_:()=>b,OP:()=>F,mi:()=>O,Vs:()=>U,dY:()=>V,U2:()=>L,_Q:()=>M,Ck:()=>D,Cs:()=>j,lO:()=>K,Fj:()=>X,vs:()=>z});const n={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},s=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||n[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},o=6378137,r=Math.PI*o,a=[-r,-r,r,r],l=[-180,-85,180,85],h=o*Math.log(Math.tan(Math.PI/2));class c extends s{constructor(t){super({code:t,units:"m",extent:a,global:!0,worldExtent:l,getPointResolution:function(t,e){return t/Math.cosh(e[1]/o)}})}}const u=[new c("EPSG:3857"),new c("EPSG:102100"),new c("EPSG:102113"),new c("EPSG:900913"),new c("http://www.opengis.net/def/crs/EPSG/0/3857"),new c("http://www.opengis.net/gml/srs/epsg.xml#3857")];const d=[-180,-90,180,90],g=6378137*Math.PI/180;class _ extends s{constructor(t,e){super({code:t,units:"degrees",extent:d,axisOrientation:e,global:!0,metersPerUnit:g,worldExtent:d})}}const p=[new _("CRS:84"),new _("EPSG:4326","neu"),new _("urn:ogc:def:crs:OGC:1.3:CRS84"),new _("urn:ogc:def:crs:OGC:2:84"),new _("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new _("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new _("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let m={},f={};function v(t,e,i){const n=t.getCode(),s=e.getCode();n in f||(f[n]={}),f[n][s]=i}var y=i(8983),E=i(2253),C=i(8007);const x=6371008.8;function T(t,e,i){i=i||x;const n=(0,C.Yr)(t[1]),s=(0,C.Yr)(e[1]),o=(s-n)/2,r=(0,C.Yr)(e[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(r)*Math.sin(r)*Math.cos(n)*Math.cos(s);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}var R=i(670);let w=!0;function b(t){w=!(void 0===t||t)}function P(t,e){if(void 0!==e)for(let i=0,n=t.length;i<n;++i)e[i]=t[i];else e=t.slice();return e}function I(t,e){if(void 0!==e&&t!==e){for(let i=0,n=t.length;i<n;++i)e[i]=t[i];t=e}return t}function S(t){!function(t,e){m[t]=e}(t.getCode(),t),v(t,t,P)}function L(t){return"string"==typeof t?m[e=t]||m[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function M(t,e,i,s){let o;const r=(t=L(t)).getPointResolutionFunc();if(r){if(o=r(e,i),s&&s!==t.getUnits()){const e=t.getMetersPerUnit();e&&(o=o*e/n[s])}}else{const r=t.getUnits();if("degrees"==r&&!s||"degrees"==s)o=e;else{const a=N(t,L("EPSG:4326"));if(a===I&&"degrees"!==r)o=e*t.getMetersPerUnit();else{let t=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];t=a(t,t,2),o=(T(t.slice(0,2),t.slice(2,4))+T(t.slice(4,6),t.slice(6,8)))/2}const l=s?n[s]:t.getMetersPerUnit();void 0!==l&&(o/=l)}}return o}function Z(t){!function(t){t.forEach(S)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&v(e,t,P)}))}))}function A(t,e){return t?"string"==typeof t?L(t):t:L(e)}function O(t,e){return b(),z(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function F(t,e){if(t===e)return!0;const i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||N(t,e)===P)&&i}function N(t,e){let i=function(t,e){let i;return t in f&&e in f[t]&&(i=f[t][e]),i}(t.getCode(),e.getCode());return i||(i=I),i}function D(t,e){return N(L(t),L(e))}function z(t,e,i){return D(e,i)(t,void 0,t.length)}function G(t,e,i,n){const s=D(e,i);return(0,y.Ne)(t,s,void 0,n)}let k=null;function j(){return k}function K(t,e){return k?z(t,e,k):t}function U(t,e){return k?z(t,k,e):(w&&!(0,E.fS)(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(w=!1,(0,R.ZK)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function X(t,e){return k?G(t,e,k):t}function V(t,e){return k?G(t,k,e):t}var Y,W,q;Z(u),Z(p),Y=u,W=function(t,e,i){const n=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n));for(let s=0;s<n;s+=i){e[s]=r*t[s]/180;let i=o*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));i>h?i=h:i<-h&&(i=-h),e[s+1]=i}return e},q=function(t,e,i){const n=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n));for(let s=0;s<n;s+=i)e[s]=180*t[s]/r,e[s+1]=360*Math.atan(Math.exp(t[s+1]/o))/Math.PI-90;return e},p.forEach((function(t){Y.forEach((function(e){v(t,e,W),v(e,t,q)}))}))},7299:(t,e,i)=>{i.d(e,{Z:()=>o});var n=i(9025);class s extends n.ZP{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}}const o=s},1900:(t,e,i)=>{i.d(e,{Z:()=>n});const n={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},4304:(t,e,i)=>{i.d(e,{Z:()=>f});var n=i(2001),s=i(5069),o=i(3584),r=i(8983),a=i(1202),l=i(8007);var h=i(9220);let c;const u=[];function d(t,e,i,n,s){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,s),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,s)),t.restore()}function g(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function _(t,e,i,n){const s=(0,a.vs)(i,e,t);let o=(0,a._Q)(e,n,i);const l=e.getMetersPerUnit();void 0!==l&&(o*=l);const h=t.getMetersPerUnit();void 0!==h&&(o/=h);const c=t.getExtent();if(!c||(0,r.b8)(c,s)){const e=(0,a._Q)(t,o,s)/o;isFinite(e)&&e>0&&(o/=e)}return o}var p=i(8196);class m extends s.Z{constructor(t,e,i,n,s,h,c,u,d,g,p,m){super(s,o.Z.IDLE,{interpolate:!!m}),this.renderEdges_=void 0!==p&&p,this.pixelRatio_=c,this.gutter_=u,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=h||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=n.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let y=this.sourceTileGrid_.getExtent();const E=v?(0,r.Ed)(f,v):f;if(0===(0,r.bg)(E))return void(this.state=o.Z.EMPTY);const C=t.getExtent();C&&(y=y?(0,r.Ed)(y,C):C);const x=n.getResolution(this.wrappedTileCoord_[0]),T=function(t,e,i,n){const s=(0,r.qg)(i);let o=_(t,e,s,n);return(!isFinite(o)||o<=0)&&(0,r.H6)(i,(function(i){return o=_(t,e,i,n),isFinite(o)&&o>0})),o}(t,i,E,x);if(!isFinite(T)||T<=0)return void(this.state=o.Z.EMPTY);const R=void 0!==g?g:.5;if(this.triangulation_=new class{constructor(t,e,i,n,s,o){this.sourceProj_=t,this.targetProj_=e;let l={};const h=(0,a.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return l[e]||(l[e]=h(t)),l[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&(0,r.dz)(n)==(0,r.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,r.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,r.dz)(this.targetProj_.getExtent()):null;const c=(0,r.rL)(i),u=(0,r.Xv)(i),d=(0,r.w$)(i),g=(0,r.hC)(i),_=this.transformInv_(c),p=this.transformInv_(u),m=this.transformInv_(d),f=this.transformInv_(g),v=10+(o?Math.max(0,Math.ceil(Math.log2((0,r.bg)(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,d,g,_,p,m,f,v),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,i,n){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);const n=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-n<this.sourceWorldWidth_/2&&(e.source=i)}}))}l={}}addTriangle_(t,e,i,n,s,o){this.triangles_.push({source:[n,s,o],target:[t,e,i]})}addQuad_(t,e,i,n,s,o,a,h,c){const u=(0,r.hI)([s,o,a,h]),d=this.sourceWorldWidth_?(0,r.dz)(u)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,_=this.sourceProj_.canWrapX()&&d>.5&&d<1;let p=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const s=(0,r.hI)([t,e,i,n]);p=(0,r.dz)(s)/this.targetWorldWidth_>.25||p}!_&&this.sourceProj_.isGlobal()&&d&&(p=d>.25||p)}if(!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!(0,r.kK)(u,this.maxSourceExtent_))return;let m=0;if(!(p||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(h[0])&&isFinite(h[1])))if(c>0)p=!0;else if(m=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(h[0])&&isFinite(h[1])?0:1),1!=m&&2!=m&&4!=m&&8!=m)return;if(c>0){if(!p){const e=[(t[0]+i[0])/2,(t[1]+i[1])/2],n=this.transformInv_(e);let o;o=_?((0,l.$W)(s[0],g)+(0,l.$W)(a[0],g))/2-(0,l.$W)(n[0],g):(s[0]+a[0])/2-n[0];const r=(s[1]+a[1])/2-n[1];p=o*o+r*r>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const r=[(e[0]+i[0])/2,(e[1]+i[1])/2],l=this.transformInv_(r),u=[(n[0]+t[0])/2,(n[1]+t[1])/2],d=this.transformInv_(u);this.addQuad_(t,e,r,u,s,o,l,d,c-1),this.addQuad_(u,r,i,n,d,l,a,h,c-1)}else{const r=[(t[0]+e[0])/2,(t[1]+e[1])/2],l=this.transformInv_(r),u=[(i[0]+n[0])/2,(i[1]+n[1])/2],d=this.transformInv_(u);this.addQuad_(t,r,u,n,s,l,d,h,c-1),this.addQuad_(r,e,i,u,l,o,a,d,c-1)}return}}if(_){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&m)&&this.addTriangle_(t,i,n,s,a,h),0==(14&m)&&this.addTriangle_(t,i,e,s,a,o),m&&(0==(13&m)&&this.addTriangle_(e,n,t,o,h,s),0==(7&m)&&this.addTriangle_(e,n,i,o,h,a))}calculateSourceExtent(){const t=(0,r.lJ)();return this.triangles_.forEach((function(e,i,n){const s=e.source;(0,r.Wj)(t,s[0]),(0,r.Wj)(t,s[1]),(0,r.Wj)(t,s[2])})),t}getTriangles(){return this.triangles_}}(t,i,E,y,T*R,x),0===this.triangulation_.getTriangles().length)return void(this.state=o.Z.EMPTY);this.sourceZ_=e.getZForResolution(T);let w=this.triangulation_.calculateSourceExtent();if(y&&(t.canWrapX()?(w[1]=(0,l.uZ)(w[1],y[1],y[3]),w[3]=(0,l.uZ)(w[3],y[1],y[3])):w=(0,r.Ed)(w,y)),(0,r.bg)(w)){const t=e.getTileRangeForExtentAndZ(w,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let i=t.minY;i<=t.maxY;i++){const t=d(this.sourceZ_,e,i,c);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=o.Z.EMPTY)}else this.state=o.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{e&&e.getState()==o.Z.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})})),this.sourceTiles_.length=0,0===t.length)this.state=o.Z.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],a=this.targetTileGrid_.getResolution(e),_=this.sourceTileGrid_.getResolution(this.sourceZ_),p=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,i,n,s,o,a,_,p,m,f,v){const y=(0,h.E4)(Math.round(i*t),Math.round(i*e),u);if(v||(y.imageSmoothingEnabled=!1),0===p.length)return y.canvas;function E(t){return Math.round(t*i)/i}y.scale(i,i),y.globalCompositeOperation="lighter";const C=(0,r.lJ)();p.forEach((function(t,e,i){(0,r.l7)(C,t.extent)}));const x=(0,r.dz)(C),T=(0,r.Cr)(C),R=(0,h.E4)(Math.round(i*x/n),Math.round(i*T/n),u);v||(R.imageSmoothingEnabled=!1);const w=i/n;p.forEach((function(t,e,i){const n=t.extent[0]-C[0],s=-(t.extent[3]-C[3]),o=(0,r.dz)(t.extent),a=(0,r.Cr)(t.extent);t.image.width>0&&t.image.height>0&&R.drawImage(t.image,m,m,t.image.width-2*m,t.image.height-2*m,n*w,s*w,o*w,a*w)}));const b=(0,r.rL)(a);return _.getTriangles().forEach((function(t,e,s){const r=t.source,a=t.target;let _=r[0][0],p=r[0][1],m=r[1][0],f=r[1][1],x=r[2][0],T=r[2][1];const w=E((a[0][0]-b[0])/o),P=E(-(a[0][1]-b[1])/o),I=E((a[1][0]-b[0])/o),S=E(-(a[1][1]-b[1])/o),L=E((a[2][0]-b[0])/o),M=E(-(a[2][1]-b[1])/o),Z=_,A=p;_=0,p=0,m-=Z,f-=A,x-=Z,T-=A;const O=[[m,f,0,0,I-w],[x,T,0,0,L-w],[0,0,m,f,S-P],[0,0,x,T,M-P]],F=(0,l.SV)(O);if(F){if(y.save(),y.beginPath(),function(){if(void 0===c){const t=(0,h.E4)(6,6,u);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",d(t,4,5,4,0),d(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;c=g(e,0)||g(e,4)||g(e,8),(0,h.jy)(t),u.push(t.canvas)}return c}()||!v){y.moveTo(I,S);const t=4,e=w-I,i=P-S;for(let n=0;n<t;n++)y.lineTo(I+E((n+1)*e/t),S+E(n*i/(t-1))),n!=t-1&&y.lineTo(I+E((n+1)*e/t),S+E((n+1)*i/(t-1)));y.lineTo(L,M)}else y.moveTo(I,S),y.lineTo(w,P),y.lineTo(L,M);y.clip(),y.transform(F[0],F[2],F[1],F[3],w,P),y.translate(C[0]-Z,C[3]-A),y.scale(n/i,-n/i),y.drawImage(R.canvas,0,0),y.restore()}})),(0,h.jy)(R),u.push(R.canvas),f&&(y.save(),y.globalCompositeOperation="source-over",y.strokeStyle="black",y.lineWidth=1,_.getTriangles().forEach((function(t,e,i){const n=t.target,s=(n[0][0]-b[0])/o,r=-(n[0][1]-b[1])/o,a=(n[1][0]-b[0])/o,l=-(n[1][1]-b[1])/o,h=(n[2][0]-b[0])/o,c=-(n[2][1]-b[1])/o;y.beginPath(),y.moveTo(a,l),y.lineTo(s,r),y.lineTo(h,c),y.closePath(),y.stroke()})),y.restore()),y.canvas}(n,s,this.pixelRatio_,_,this.sourceTileGrid_.getExtent(),a,p,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=o.Z.LOADED}this.changed()}load(){if(this.state==o.Z.IDLE){this.state=o.Z.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const i=e.getState();if(i==o.Z.IDLE||i==o.Z.LOADING){t++;const i=(0,p.oL)(e,n.Z.CHANGE,(function(n){const s=e.getState();s!=o.Z.LOADED&&s!=o.Z.ERROR&&s!=o.Z.EMPTY||((0,p.bN)(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(i)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,i){t.getState()==o.Z.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(p.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,h.jy)(this.canvas_.getContext("2d")),u.push(this.canvas_),this.canvas_=null),super.release()}}const f=m},2758:(t,e,i)=>{i.d(e,{Gw:()=>a,YP:()=>o,gE:()=>r,h$:()=>s});var n=i(8007);function s(t){if(void 0!==t)return 0}function o(t){if(void 0!==t)return t}function r(t){const e=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function a(t){return t=t||(0,n.Yr)(5),function(e,i){return i?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}},8691:(t,e,i)=>{function n(t){return t[0]>0&&t[1]>0}function s(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function o(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}i.d(e,{Pq:()=>o,bA:()=>s,py:()=>n})},3792:(t,e,i)=>{i.d(e,{Z:()=>h});var n=i(2102),s=i(5035);class o extends n.Z{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:(0,s.dl)({extent:(0,s.Tl)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}}const r=o;var a=i(9220),l=i(8691);const h=class extends r{constructor(t){super({opaque:!1,projection:(t=t||{}).projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection,url:t.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(t,e)=>{const i=t.getTileCoord()[0],n=(0,l.Pq)(this.tileGrid.getTileSize(i)),s=(0,a.E4)(n[0],n[1]);s.strokeStyle="grey",s.strokeRect(.5,.5,n[0]+.5,n[1]+.5),s.fillStyle="grey",s.strokeStyle="white",s.textAlign="center",s.textBaseline="middle",s.font="24px sans-serif",s.lineWidth=4,s.strokeText(e,n[0]/2,n[1]/2,n[0]),s.fillText(e,n[0]/2,n[1]/2,n[0]),t.setImage(s.canvas)}})}}},2102:(t,e,i)=>{i.d(e,{Z:()=>P});var n=i(2001),s=i(2953),o=i(4304),r=i(9162);const a=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return(0,r.h)(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return(0,r.h)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,r.h)(!(t in this.entries_),16);const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}};var l=i(9465);const h=class extends a{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const t=this.peekFirstKey(),e=(0,l.Ul)(t)[0];this.forEach((t=>{t.tileCoord[0]!==e&&(this.remove((0,l.km)(t.tileCoord)),t.release())}))}};var c=i(3584);var u=i(9025),d=i(6414),g=i(1202);class _ extends d.Z{constructor(t){super(),this.projection=(0,g.U2)(t.projection),this.attributions_=p(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,i){e.viewResolver=t,e.viewRejector=i}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=p(t),this.changed()}setState(t){this.state_=t,this.changed()}}function p(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const m=_;var f=i(2637),v=i(5035),y=i(8691);class E extends u.ZP{constructor(t,e){super(t),this.tile=e}}const C=class extends m{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;this.tileGrid&&(0,y.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new h(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,n){const s=this.getTileCacheForProjection(t);if(!s)return!1;let o,r,a,h=!0;for(let t=i.minX;t<=i.maxX;++t)for(let u=i.minY;u<=i.maxY;++u)r=(0,l.lg)(e,t,u),a=!1,s.containsKey(r)&&(o=s.get(r),a=o.getState()===c.Z.LOADED,a&&(a=!1!==n(o))),a||(h=!1);return h}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,n,s){return(0,f.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:(0,v.X$)(t)}getTileCacheForProjection(t){const e=this.getProjection();return(0,r.h)(null===e||(0,g.OP)(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),s=this.getTilePixelRatio(e),o=(0,y.Pq)(n.getTileSize(t),this.tmpSize);return 1==s?o:(0,y.bA)(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=(0,v.Cf)(i,t,e)),(0,l.tE)(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,n){}};var x=i(8007);function T(t,e){const i=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,o=/\{-y\}/g;return function(a,l,h){if(a)return t.replace(i,a[0].toString()).replace(n,a[1].toString()).replace(s,a[2].toString()).replace(o,(function(){const t=a[0],i=e.getFullTileRange(t);return(0,r.h)(i,55),(i.getHeight()-a[2]-1).toString()}))}}class R extends C{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===R.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=(0,f.sq)(e),n=e.getState();let s;n==c.Z.LOADING?(this.tileLoadingKeys_[i]=!0,s="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=n==c.Z.ERROR?"tileloaderror":n==c.Z.LOADED?"tileloadend":void 0),null!=s&&this.dispatchEvent(new E(s,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=function(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const n=i[1].charCodeAt(0),s=i[2].charCodeAt(0);let o;for(o=n;o<=s;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const n=parseInt(i[2],10);for(let s=parseInt(i[1],10);s<=n;s++)e.push(t.replace(i[0],s.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){const i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=T(t[s],e);return function(t){return 1===t.length?t[0]:function(e,i,n){if(!e)return;const s=(0,l.vp)(e),o=(0,x.$W)(s,t.length);return t[o](e,i,n)}}(n)}(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const n=(0,l.lg)(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const w=R;function b(t,e){t.getImage().src=e}const P=class extends w{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:b,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:s.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const t in this.tileCacheForProjection){const n=this.tileCacheForProjection[t];n.expireCache(n==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!(0,g.OP)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!(0,g.OP)(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||(0,g.OP)(e,t)))return this.tileGrid;const i=(0,f.sq)(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=(0,v.X$)(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||(0,g.OP)(e,t))return this.tileCache;const i=(0,f.sq)(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new h(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,e,i,s,o,r){const a=[t,e,i],l=this.getTileCoordForTileUrlFunction(a,o),h=l?this.tileUrlFunction(l,s,o):void 0,u=new this.tileClass(a,void 0!==h?c.Z.IDLE:c.Z.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=r,u.addEventListener(n.Z.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,e,i,n,s){const r=this.getProjection();if(!r||!s||(0,g.OP)(r,s))return this.getTileInternal(t,e,i,n,r||s);const a=this.getTileCacheForProjection(s),h=[t,e,i];let c;const u=(0,l.km)(h);a.containsKey(u)&&(c=a.get(u));const d=this.getKey();if(c&&c.key==d)return c;const _=this.getTileGridForProjection(r),p=this.getTileGridForProjection(s),m=this.getTileCoordForTileUrlFunction(h,s),f=new o.Z(r,_,s,p,h,m,this.getTilePixelRatio(n),this.getGutter(),((t,e,i,n)=>this.getTileInternal(t,e,i,n,r)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return f.key=d,c?(f.interimTile=c,f.refreshInterimChain(),a.replace(u,f)):a.set(u,f),f}getTileInternal(t,e,i,n,s){let o=null;const r=(0,l.lg)(t,e,i),a=this.getKey();if(this.tileCache.containsKey(r)){if(o=this.tileCache.get(r),o.key!=a){const l=o;o=this.createTile_(t,e,i,n,s,a),l.getState()==c.Z.IDLE?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(r,o)}}else o=this.createTile_(t,e,i,n,s,a),this.tileCache.set(r,o);return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const i=(0,g.U2)(t);if(i){const t=(0,f.sq)(i);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}},9465:(t,e,i)=>{function n(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function s(t,e,i){return t+"/"+e+"/"+i}function o(t){return s(t[0],t[1],t[2])}function r(t){return t.split("/").map(Number)}function a(t){return(t[1]<<t[0])+t[2]}function l(t,e){const i=t[0],n=t[1],s=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;const o=e.getFullTileRange(i);return!o||o.containsXY(n,s)}i.d(e,{T9:()=>n,Ul:()=>r,km:()=>o,lg:()=>s,tE:()=>l,vp:()=>a})},5035:(t,e,i)=>{i.d(e,{Cf:()=>h,Tl:()=>d,X$:()=>l,dl:()=>c});var n=i(8948),s=i(591),o=i(1202),r=i(8983),a=i(8691);function l(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,i,s){return function(t,e,i,s){s=void 0!==s?s:"top-left";const o=u(t,undefined,i);return new n.Z({extent:t,origin:(0,r.g0)(t,s),resolutions:o,tileSize:i})}(d(t),0,void 0,void 0)}(t),t.setDefaultTileGrid(e)),e}function h(t,e,i){const n=e[0],s=t.getTileCoordCenter(e),o=d(i);if(!(0,r.b8)(o,s)){const e=(0,r.dz)(o),i=Math.ceil((o[0]-s[0])/e);return s[0]+=e*i,t.getTileCoordForCoordAndZ(s,n)}return e}function c(t){const e=t||{},i=e.extent||(0,o.U2)("EPSG:3857").getExtent(),s={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:u(i,e.maxZoom,e.tileSize,e.maxResolution)};return new n.Z(s)}function u(t,e,i,n){e=void 0!==e?e:s.e,i=(0,a.Pq)(void 0!==i?i:s.S);const o=(0,r.Cr)(t),l=(0,r.dz)(t);n=n>0?n:Math.max(l/i[0],o/i[1]);const h=e+1,c=new Array(h);for(let t=0;t<h;++t)c[t]=n/Math.pow(2,t);return c}function d(t){let e=(t=(0,o.U2)(t)).getExtent();if(!e){const i=180*o.Wm.degrees/t.getMetersPerUnit();e=(0,r.T9)(-i,-i,i,i)}return e}},8948:(t,e,i)=>{i.d(e,{Z:()=>g});var n=i(6462),s=i(591),o=i(9162),r=i(8007),a=i(8983),l=i(9465),h=i(7743),c=i(2182),u=i(8691);const d=[0,0,0],g=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,o.h)((0,c.pT)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(let t=0,i=this.resolutions_.length-1;t<i;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,o.h)(this.origins_.length==this.resolutions_.length,20));const i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=(0,a.rL)(i)),(0,o.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,o.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:s.S,(0,o.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){const s=new n.Z(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){const t=this.getTileRangeForExtentAndZ(i,e);s.minX=Math.max(t.minX,s.minX),s.maxX=Math.min(t.maxX,s.maxX),s.minY=Math.max(t.minY,s.minY),s.maxY=Math.min(t.maxY,s.maxY)}return s}),this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const n=this.getTileRangeForExtentAndZ(t,e);for(let t=n.minX,s=n.maxX;t<=s;++t)for(let s=n.minY,o=n.maxY;s<=o;++s)i([e,t,s])}forEachTileCoordParentTileRange(t,e,i,s){let o,r,a,l=null,h=t[0]-1;for(2===this.zoomFactor_?(r=t[1],a=t[2]):l=this.getTileCoordExtent(t,s);h>=this.minZoom;){if(2===this.zoomFactor_?(r=Math.floor(r/2),a=Math.floor(a/2),o=(0,n.T)(r,r,a,a,i)):o=this.getTileRangeForExtentAndZ(l,h,i),e(h,o))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*t[1],s=2*t[2];return(0,n.T)(i,i+1,s,s+1,e)}const s=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const s=t[0],o=t[1],r=t[2];if(e===s)return(0,n.T)(o,r,o,r,i);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-s),a=Math.floor(o*t),l=Math.floor(r*t);if(e<s)return(0,n.T)(a,a,l,l,i);const h=Math.floor(t*(o+1))-1,c=Math.floor(t*(r+1))-1;return(0,n.T)(a,h,l,c,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,i)}getTileRangeExtent(t,e,i){const n=this.getOrigin(t),s=this.getResolution(t),o=(0,u.Pq)(this.getTileSize(t),this.tmpSize_),r=n[0]+e.minX*o[0]*s,l=n[0]+(e.maxX+1)*o[0]*s,h=n[1]+e.minY*o[1]*s,c=n[1]+(e.maxY+1)*o[1]*s;return(0,a.T9)(r,h,l,c,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,d);const s=d[1],o=d[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,d);const r=d[1],a=d[2];return(0,n.T)(s,r,o,a,i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=(0,u.Pq)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=(0,u.Pq)(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*n,r=i[1]-(t[2]+1)*s[1]*n,l=o+s[0]*n,h=r+s[1]*n;return(0,a.T9)(o,r,l,h,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,n,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),h=this.getOrigin(o),c=(0,u.Pq)(this.getTileSize(o),this.tmpSize_);let d=a*(t-h[0])/i/c[0],g=a*(h[1]-e)/i/c[1];return n?(d=(0,r.mD)(d,5)-1,g=(0,r.mD)(g,5)-1):(d=(0,r.GW)(d,5),g=(0,r.GW)(g,5)),(0,l.T9)(o,d,g,s)}getTileCoordForXYAndZ_(t,e,i,n,s){const o=this.getOrigin(i),a=this.getResolution(i),h=(0,u.Pq)(this.getTileSize(i),this.tmpSize_);let c=(t-o[0])/a/h[0],d=(o[1]-e)/a/h[1];return n?(c=(0,r.mD)(c,5)-1,d=(0,r.mD)(d,5)-1):(c=(0,r.GW)(c,5),d=(0,r.GW)(d,5)),(0,l.T9)(i,c,d,s)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=(0,c.h7)(this.resolutions_,t,e||0);return(0,r.uZ)(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return(0,h.mV)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i}}},591:(t,e,i)=>{i.d(e,{S:()=>s,e:()=>n});const n=42,s=256},1091:(t,e,i)=>{i.d(e,{BB:()=>c,Ue:()=>o,nb:()=>l,nn:()=>r,qC:()=>a});var n=i(7119),s=i(9162);function o(){return[1,0,0,1,0,0]}function r(t,e){const i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function a(t,e,i,n,s,o,r,a){const l=Math.sin(o),h=Math.cos(o);return t[0]=n*h,t[1]=s*l,t[2]=-n*l,t[3]=s*h,t[4]=r*n*h-a*n*l+e,t[5]=r*s*l+a*s*h+i,t}function l(t,e){const i=(n=e)[0]*n[3]-n[1]*n[2];var n;(0,s.h)(0!==i,32);const o=e[0],r=e[1],a=e[2],l=e[3],h=e[4],c=e[5];return t[0]=l/i,t[1]=-r/i,t[2]=-a/i,t[3]=o/i,t[4]=(a*c-l*h)/i,t[5]=-(o*c-r*h)/i,t}let h;function c(t){const e="matrix("+t.join(", ")+")";if(n.Id)return e;const i=h||(h=document.createElement("div"));return i.style.transform=e,i.style.transform}new Array(6)},2637:(t,e,i)=>{function n(){throw new Error("Unimplemented abstract method.")}i.d(e,{O3:()=>n,sq:()=>o});let s=0;function o(t){return t.ol_uid||(t.ol_uid=String(++s))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WyJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9jb21saW5rL2Rpc3QvZXNtL2NvbWxpbmsubWpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvQXNzZXJ0aW9uRXJyb3IuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9EaXNwb3NhYmxlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VUaWxlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvQ29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3N0eWxlL0ljb25JbWFnZUNhY2hlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvTWFwLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvY3NzLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL0NvbXBvc2l0ZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0dyb3VwLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvTWFwRXZlbnQuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9NYXBCcm93c2VyRXZlbnQuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9NYXBCcm93c2VyRXZlbnRUeXBlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvcG9pbnRlci9FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9NYXBCcm93c2VyRXZlbnRIYW5kbGVyLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvTWFwRXZlbnRUeXBlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvTWFwUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9zdHJ1Y3RzL1ByaW9yaXR5UXVldWUuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9UaWxlUXVldWUuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL0NvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL0F0dHJpYnV0aW9uLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Sb3RhdGUuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL1pvb20uanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Qcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUG9pbnRlci5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9jb25kaXRpb24uanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9EcmFnUGFuLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9Cb3guanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9EcmFnQm94LmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1pvb20uanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9LZXlDb2RlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL01hcC5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvZGVmYXVsdHMuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9kZWZhdWx0cy5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL0tpbmV0aWMuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9PYmplY3QuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9PYmplY3RFdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9PYnNlcnZhYmxlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvVGlsZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVSYW5nZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVTdGF0ZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL1ZpZXdQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2NlbnRlcmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9yZXNvbHV0aW9uY29uc3RyYWludC5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL1ZpZXcuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9WaWV3SGludC5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2FycmF5LmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvYXNzZXJ0cy5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2NvbG9yLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvY29uc29sZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2Nvb3JkaW5hdGUuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9kb20uanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9lYXNpbmcuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvRXZlbnQuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvRXZlbnRUeXBlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL1RhcmdldC5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC9SZWxhdGlvbnNoaXAuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9leHRlbnQuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0dlb21ldHJ5LmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vU2ltcGxlR2VvbWV0cnkuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvY2xvc2VzdC5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9kZWZsYXRlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3NpbXBsaWZ5LmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2luZmxhdGUuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvYXJlYS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vTGluZWFyUmluZy5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vUG9pbnQuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvcmV2ZXJzZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9vcmllbnQuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL1BvbHlnb24uanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJpb3Jwb2ludC5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9jb250YWlucy5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbnRlcnNlY3RzZXh0ZW50LmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3NlZ21lbnRzLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvaGFzLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvQmFzZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0xheWVyLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9UaWxlUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9CYXNlVGlsZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL0xheWVyLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VTdGF0ZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL2NhbnZhcy9MYXllci5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9UaWxlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvbWF0aC5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL29iai5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovVW5pdHMuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL1Byb2plY3Rpb24uanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL2Vwc2czODU3LmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvcHJvai9lcHNnNDMyNi5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovcHJvamVjdGlvbnMuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL3RyYW5zZm9ybXMuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9zcGhlcmUuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9wcm9qLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50LmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai9UaWxlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai9Ucmlhbmd1bGF0aW9uLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvcm90YXRpb25jb25zdHJhaW50LmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvc2l6ZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9YWVouanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZURlYnVnLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvc3RydWN0cy9MUlVDYWNoZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVDYWNoZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3RpbGV1cmxmdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9VcmxUaWxlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1RpbGVFdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZUltYWdlLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWNvb3JkLmpzIiwid2VicGFjazovL29sLWdwa2cvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQuanMiLCJ3ZWJwYWNrOi8vb2wtZ3BrZy8uL25vZGVfbW9kdWxlcy9vbC90aWxlZ3JpZC9UaWxlR3JpZC5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3RpbGVncmlkL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly9vbC1ncGtnLy4vbm9kZV9tb2R1bGVzL29sL3V0aWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuY29uc3QgcHJveHlNYXJrZXIgPSBTeW1ib2woXCJDb21saW5rLnByb3h5XCIpO1xuY29uc3QgY3JlYXRlRW5kcG9pbnQgPSBTeW1ib2woXCJDb21saW5rLmVuZHBvaW50XCIpO1xuY29uc3QgcmVsZWFzZVByb3h5ID0gU3ltYm9sKFwiQ29tbGluay5yZWxlYXNlUHJveHlcIik7XG5jb25zdCBmaW5hbGl6ZXIgPSBTeW1ib2woXCJDb21saW5rLmZpbmFsaXplclwiKTtcbmNvbnN0IHRocm93TWFya2VyID0gU3ltYm9sKFwiQ29tbGluay50aHJvd25cIik7XG5jb25zdCBpc09iamVjdCA9ICh2YWwpID0+ICh0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIHZhbCAhPT0gbnVsbCkgfHwgdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiO1xuLyoqXG4gKiBJbnRlcm5hbCB0cmFuc2ZlciBoYW5kbGUgdG8gaGFuZGxlIG9iamVjdHMgbWFya2VkIHRvIHByb3h5LlxuICovXG5jb25zdCBwcm94eVRyYW5zZmVySGFuZGxlciA9IHtcbiAgICBjYW5IYW5kbGU6ICh2YWwpID0+IGlzT2JqZWN0KHZhbCkgJiYgdmFsW3Byb3h5TWFya2VyXSxcbiAgICBzZXJpYWxpemUob2JqKSB7XG4gICAgICAgIGNvbnN0IHsgcG9ydDEsIHBvcnQyIH0gPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgZXhwb3NlKG9iaiwgcG9ydDEpO1xuICAgICAgICByZXR1cm4gW3BvcnQyLCBbcG9ydDJdXTtcbiAgICB9LFxuICAgIGRlc2VyaWFsaXplKHBvcnQpIHtcbiAgICAgICAgcG9ydC5zdGFydCgpO1xuICAgICAgICByZXR1cm4gd3JhcChwb3J0KTtcbiAgICB9LFxufTtcbi8qKlxuICogSW50ZXJuYWwgdHJhbnNmZXIgaGFuZGxlciB0byBoYW5kbGUgdGhyb3duIGV4Y2VwdGlvbnMuXG4gKi9cbmNvbnN0IHRocm93VHJhbnNmZXJIYW5kbGVyID0ge1xuICAgIGNhbkhhbmRsZTogKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgJiYgdGhyb3dNYXJrZXIgaW4gdmFsdWUsXG4gICAgc2VyaWFsaXplKHsgdmFsdWUgfSkge1xuICAgICAgICBsZXQgc2VyaWFsaXplZDtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQgPSB7XG4gICAgICAgICAgICAgICAgaXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB2YWx1ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB2YWx1ZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBzdGFjazogdmFsdWUuc3RhY2ssXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXJpYWxpemVkID0geyBpc0Vycm9yOiBmYWxzZSwgdmFsdWUgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW3NlcmlhbGl6ZWQsIFtdXTtcbiAgICB9LFxuICAgIGRlc2VyaWFsaXplKHNlcmlhbGl6ZWQpIHtcbiAgICAgICAgaWYgKHNlcmlhbGl6ZWQuaXNFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmFzc2lnbihuZXcgRXJyb3Ioc2VyaWFsaXplZC52YWx1ZS5tZXNzYWdlKSwgc2VyaWFsaXplZC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgc2VyaWFsaXplZC52YWx1ZTtcbiAgICB9LFxufTtcbi8qKlxuICogQWxsb3dzIGN1c3RvbWl6aW5nIHRoZSBzZXJpYWxpemF0aW9uIG9mIGNlcnRhaW4gdmFsdWVzLlxuICovXG5jb25zdCB0cmFuc2ZlckhhbmRsZXJzID0gbmV3IE1hcChbXG4gICAgW1wicHJveHlcIiwgcHJveHlUcmFuc2ZlckhhbmRsZXJdLFxuICAgIFtcInRocm93XCIsIHRocm93VHJhbnNmZXJIYW5kbGVyXSxcbl0pO1xuZnVuY3Rpb24gaXNBbGxvd2VkT3JpZ2luKGFsbG93ZWRPcmlnaW5zLCBvcmlnaW4pIHtcbiAgICBmb3IgKGNvbnN0IGFsbG93ZWRPcmlnaW4gb2YgYWxsb3dlZE9yaWdpbnMpIHtcbiAgICAgICAgaWYgKG9yaWdpbiA9PT0gYWxsb3dlZE9yaWdpbiB8fCBhbGxvd2VkT3JpZ2luID09PSBcIipcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFsbG93ZWRPcmlnaW4gaW5zdGFuY2VvZiBSZWdFeHAgJiYgYWxsb3dlZE9yaWdpbi50ZXN0KG9yaWdpbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGV4cG9zZShvYmosIGVwID0gZ2xvYmFsVGhpcywgYWxsb3dlZE9yaWdpbnMgPSBbXCIqXCJdKSB7XG4gICAgZXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgZnVuY3Rpb24gY2FsbGJhY2soZXYpIHtcbiAgICAgICAgaWYgKCFldiB8fCAhZXYuZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNBbGxvd2VkT3JpZ2luKGFsbG93ZWRPcmlnaW5zLCBldi5vcmlnaW4pKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgb3JpZ2luICcke2V2Lm9yaWdpbn0nIGZvciBjb21saW5rIHByb3h5YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBpZCwgdHlwZSwgcGF0aCB9ID0gT2JqZWN0LmFzc2lnbih7IHBhdGg6IFtdIH0sIGV2LmRhdGEpO1xuICAgICAgICBjb25zdCBhcmd1bWVudExpc3QgPSAoZXYuZGF0YS5hcmd1bWVudExpc3QgfHwgW10pLm1hcChmcm9tV2lyZVZhbHVlKTtcbiAgICAgICAgbGV0IHJldHVyblZhbHVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gcGF0aC5zbGljZSgwLCAtMSkucmVkdWNlKChvYmosIHByb3ApID0+IG9ialtwcm9wXSwgb2JqKTtcbiAgICAgICAgICAgIGNvbnN0IHJhd1ZhbHVlID0gcGF0aC5yZWR1Y2UoKG9iaiwgcHJvcCkgPT4gb2JqW3Byb3BdLCBvYmopO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkdFVFwiIC8qIE1lc3NhZ2VUeXBlLkdFVCAqLzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSByYXdWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiU0VUXCIgLyogTWVzc2FnZVR5cGUuU0VUICovOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRbcGF0aC5zbGljZSgtMSlbMF1dID0gZnJvbVdpcmVWYWx1ZShldi5kYXRhLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiQVBQTFlcIiAvKiBNZXNzYWdlVHlwZS5BUFBMWSAqLzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSByYXdWYWx1ZS5hcHBseShwYXJlbnQsIGFyZ3VtZW50TGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkNPTlNUUlVDVFwiIC8qIE1lc3NhZ2VUeXBlLkNPTlNUUlVDVCAqLzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBuZXcgcmF3VmFsdWUoLi4uYXJndW1lbnRMaXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gcHJveHkodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJFTkRQT0lOVFwiIC8qIE1lc3NhZ2VUeXBlLkVORFBPSU5UICovOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHBvcnQxLCBwb3J0MiB9ID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBvc2Uob2JqLCBwb3J0Mik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHRyYW5zZmVyKHBvcnQxLCBbcG9ydDFdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiUkVMRUFTRVwiIC8qIE1lc3NhZ2VUeXBlLlJFTEVBU0UgKi86XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlID0geyB2YWx1ZSwgW3Rocm93TWFya2VyXTogMCB9O1xuICAgICAgICB9XG4gICAgICAgIFByb21pc2UucmVzb2x2ZShyZXR1cm5WYWx1ZSlcbiAgICAgICAgICAgIC5jYXRjaCgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlLCBbdGhyb3dNYXJrZXJdOiAwIH07XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigocmV0dXJuVmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFt3aXJlVmFsdWUsIHRyYW5zZmVyYWJsZXNdID0gdG9XaXJlVmFsdWUocmV0dXJuVmFsdWUpO1xuICAgICAgICAgICAgZXAucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB3aXJlVmFsdWUpLCB7IGlkIH0pLCB0cmFuc2ZlcmFibGVzKTtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSBcIlJFTEVBU0VcIiAvKiBNZXNzYWdlVHlwZS5SRUxFQVNFICovKSB7XG4gICAgICAgICAgICAgICAgLy8gZGV0YWNoIGFuZCBkZWFjdGl2ZSBhZnRlciBzZW5kaW5nIHJlbGVhc2UgcmVzcG9uc2UgYWJvdmUuXG4gICAgICAgICAgICAgICAgZXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGNsb3NlRW5kUG9pbnQoZXApO1xuICAgICAgICAgICAgICAgIGlmIChmaW5hbGl6ZXIgaW4gb2JqICYmIHR5cGVvZiBvYmpbZmluYWxpemVyXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9ialtmaW5hbGl6ZXJdKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgLy8gU2VuZCBTZXJpYWxpemF0aW9uIEVycm9yIFRvIENhbGxlclxuICAgICAgICAgICAgY29uc3QgW3dpcmVWYWx1ZSwgdHJhbnNmZXJhYmxlc10gPSB0b1dpcmVWYWx1ZSh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBUeXBlRXJyb3IoXCJVbnNlcmlhbGl6YWJsZSByZXR1cm4gdmFsdWVcIiksXG4gICAgICAgICAgICAgICAgW3Rocm93TWFya2VyXTogMCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXAucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB3aXJlVmFsdWUpLCB7IGlkIH0pLCB0cmFuc2ZlcmFibGVzKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgaWYgKGVwLnN0YXJ0KSB7XG4gICAgICAgIGVwLnN0YXJ0KCk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNNZXNzYWdlUG9ydChlbmRwb2ludCkge1xuICAgIHJldHVybiBlbmRwb2ludC5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIk1lc3NhZ2VQb3J0XCI7XG59XG5mdW5jdGlvbiBjbG9zZUVuZFBvaW50KGVuZHBvaW50KSB7XG4gICAgaWYgKGlzTWVzc2FnZVBvcnQoZW5kcG9pbnQpKVxuICAgICAgICBlbmRwb2ludC5jbG9zZSgpO1xufVxuZnVuY3Rpb24gd3JhcChlcCwgdGFyZ2V0KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBbXSwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUmVsZWFzZWQpIHtcbiAgICBpZiAoaXNSZWxlYXNlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm94eSBoYXMgYmVlbiByZWxlYXNlZCBhbmQgaXMgbm90IHVzZWFibGVcIik7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVsZWFzZUVuZHBvaW50KGVwKSB7XG4gICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcbiAgICAgICAgdHlwZTogXCJSRUxFQVNFXCIgLyogTWVzc2FnZVR5cGUuUkVMRUFTRSAqLyxcbiAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgY2xvc2VFbmRQb2ludChlcCk7XG4gICAgfSk7XG59XG5jb25zdCBwcm94eUNvdW50ZXIgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcHJveHlGaW5hbGl6ZXJzID0gXCJGaW5hbGl6YXRpb25SZWdpc3RyeVwiIGluIGdsb2JhbFRoaXMgJiZcbiAgICBuZXcgRmluYWxpemF0aW9uUmVnaXN0cnkoKGVwKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0NvdW50ID0gKHByb3h5Q291bnRlci5nZXQoZXApIHx8IDApIC0gMTtcbiAgICAgICAgcHJveHlDb3VudGVyLnNldChlcCwgbmV3Q291bnQpO1xuICAgICAgICBpZiAobmV3Q291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHJlbGVhc2VFbmRwb2ludChlcCk7XG4gICAgICAgIH1cbiAgICB9KTtcbmZ1bmN0aW9uIHJlZ2lzdGVyUHJveHkocHJveHksIGVwKSB7XG4gICAgY29uc3QgbmV3Q291bnQgPSAocHJveHlDb3VudGVyLmdldChlcCkgfHwgMCkgKyAxO1xuICAgIHByb3h5Q291bnRlci5zZXQoZXAsIG5ld0NvdW50KTtcbiAgICBpZiAocHJveHlGaW5hbGl6ZXJzKSB7XG4gICAgICAgIHByb3h5RmluYWxpemVycy5yZWdpc3Rlcihwcm94eSwgZXAsIHByb3h5KTtcbiAgICB9XG59XG5mdW5jdGlvbiB1bnJlZ2lzdGVyUHJveHkocHJveHkpIHtcbiAgICBpZiAocHJveHlGaW5hbGl6ZXJzKSB7XG4gICAgICAgIHByb3h5RmluYWxpemVycy51bnJlZ2lzdGVyKHByb3h5KTtcbiAgICB9XG59XG5mdW5jdGlvbiBjcmVhdGVQcm94eShlcCwgcGF0aCA9IFtdLCB0YXJnZXQgPSBmdW5jdGlvbiAoKSB7IH0pIHtcbiAgICBsZXQgaXNQcm94eVJlbGVhc2VkID0gZmFsc2U7XG4gICAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LCB7XG4gICAgICAgIGdldChfdGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpO1xuICAgICAgICAgICAgaWYgKHByb3AgPT09IHJlbGVhc2VQcm94eSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHVucmVnaXN0ZXJQcm94eShwcm94eSk7XG4gICAgICAgICAgICAgICAgICAgIHJlbGVhc2VFbmRwb2ludChlcCk7XG4gICAgICAgICAgICAgICAgICAgIGlzUHJveHlSZWxlYXNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9wID09PSBcInRoZW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB0aGVuOiAoKSA9PiBwcm94eSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByID0gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkdFVFwiIC8qIE1lc3NhZ2VUeXBlLkdFVCAqLyxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksXG4gICAgICAgICAgICAgICAgfSkudGhlbihmcm9tV2lyZVZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gci50aGVuLmJpbmQocik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlUHJveHkoZXAsIFsuLi5wYXRoLCBwcm9wXSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldChfdGFyZ2V0LCBwcm9wLCByYXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTtcbiAgICAgICAgICAgIC8vIEZJWE1FOiBFUzYgUHJveHkgSGFuZGxlciBgc2V0YCBtZXRob2RzIGFyZSBzdXBwb3NlZCB0byByZXR1cm4gYVxuICAgICAgICAgICAgLy8gYm9vbGVhbi4gVG8gc2hvdyBnb29kIHdpbGwsIHdlIHJldHVybiB0cnVlIGFzeW5jaHJvbm91c2x5IMKvXFxfKOODhClfL8KvXG4gICAgICAgICAgICBjb25zdCBbdmFsdWUsIHRyYW5zZmVyYWJsZXNdID0gdG9XaXJlVmFsdWUocmF3VmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlNFVFwiIC8qIE1lc3NhZ2VUeXBlLlNFVCAqLyxcbiAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGF0aCwgcHJvcF0ubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgfSwgdHJhbnNmZXJhYmxlcykudGhlbihmcm9tV2lyZVZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgYXBwbHkoX3RhcmdldCwgX3RoaXNBcmcsIHJhd0FyZ3VtZW50TGlzdCkge1xuICAgICAgICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3QgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBpZiAobGFzdCA9PT0gY3JlYXRlRW5kcG9pbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkVORFBPSU5UXCIgLyogTWVzc2FnZVR5cGUuRU5EUE9JTlQgKi8sXG4gICAgICAgICAgICAgICAgfSkudGhlbihmcm9tV2lyZVZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlIGp1c3QgcHJldGVuZCB0aGF0IGBiaW5kKClgIGRpZG7igJl0IGhhcHBlbi5cbiAgICAgICAgICAgIGlmIChsYXN0ID09PSBcImJpbmRcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVQcm94eShlcCwgcGF0aC5zbGljZSgwLCAtMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgW2FyZ3VtZW50TGlzdCwgdHJhbnNmZXJhYmxlc10gPSBwcm9jZXNzQXJndW1lbnRzKHJhd0FyZ3VtZW50TGlzdCk7XG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiQVBQTFlcIiAvKiBNZXNzYWdlVHlwZS5BUFBMWSAqLyxcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoLm1hcCgocCkgPT4gcC50b1N0cmluZygpKSxcbiAgICAgICAgICAgICAgICBhcmd1bWVudExpc3QsXG4gICAgICAgICAgICB9LCB0cmFuc2ZlcmFibGVzKS50aGVuKGZyb21XaXJlVmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBjb25zdHJ1Y3QoX3RhcmdldCwgcmF3QXJndW1lbnRMaXN0KSB7XG4gICAgICAgICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpO1xuICAgICAgICAgICAgY29uc3QgW2FyZ3VtZW50TGlzdCwgdHJhbnNmZXJhYmxlc10gPSBwcm9jZXNzQXJndW1lbnRzKHJhd0FyZ3VtZW50TGlzdCk7XG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiQ09OU1RSVUNUXCIgLyogTWVzc2FnZVR5cGUuQ09OU1RSVUNUICovLFxuICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50TGlzdCxcbiAgICAgICAgICAgIH0sIHRyYW5zZmVyYWJsZXMpLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmVnaXN0ZXJQcm94eShwcm94eSwgZXApO1xuICAgIHJldHVybiBwcm94eTtcbn1cbmZ1bmN0aW9uIG15RmxhdChhcnIpIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJyKTtcbn1cbmZ1bmN0aW9uIHByb2Nlc3NBcmd1bWVudHMoYXJndW1lbnRMaXN0KSB7XG4gICAgY29uc3QgcHJvY2Vzc2VkID0gYXJndW1lbnRMaXN0Lm1hcCh0b1dpcmVWYWx1ZSk7XG4gICAgcmV0dXJuIFtwcm9jZXNzZWQubWFwKCh2KSA9PiB2WzBdKSwgbXlGbGF0KHByb2Nlc3NlZC5tYXAoKHYpID0+IHZbMV0pKV07XG59XG5jb25zdCB0cmFuc2ZlckNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHRyYW5zZmVyKG9iaiwgdHJhbnNmZXJzKSB7XG4gICAgdHJhbnNmZXJDYWNoZS5zZXQob2JqLCB0cmFuc2ZlcnMpO1xuICAgIHJldHVybiBvYmo7XG59XG5mdW5jdGlvbiBwcm94eShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIHsgW3Byb3h5TWFya2VyXTogdHJ1ZSB9KTtcbn1cbmZ1bmN0aW9uIHdpbmRvd0VuZHBvaW50KHcsIGNvbnRleHQgPSBnbG9iYWxUaGlzLCB0YXJnZXRPcmlnaW4gPSBcIipcIikge1xuICAgIHJldHVybiB7XG4gICAgICAgIHBvc3RNZXNzYWdlOiAobXNnLCB0cmFuc2ZlcmFibGVzKSA9PiB3LnBvc3RNZXNzYWdlKG1zZywgdGFyZ2V0T3JpZ2luLCB0cmFuc2ZlcmFibGVzKSxcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogY29udGV4dC5hZGRFdmVudExpc3RlbmVyLmJpbmQoY29udGV4dCksXG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGNvbnRleHQucmVtb3ZlRXZlbnRMaXN0ZW5lci5iaW5kKGNvbnRleHQpLFxuICAgIH07XG59XG5mdW5jdGlvbiB0b1dpcmVWYWx1ZSh2YWx1ZSkge1xuICAgIGZvciAoY29uc3QgW25hbWUsIGhhbmRsZXJdIG9mIHRyYW5zZmVySGFuZGxlcnMpIHtcbiAgICAgICAgaWYgKGhhbmRsZXIuY2FuSGFuZGxlKHZhbHVlKSkge1xuICAgICAgICAgICAgY29uc3QgW3NlcmlhbGl6ZWRWYWx1ZSwgdHJhbnNmZXJhYmxlc10gPSBoYW5kbGVyLnNlcmlhbGl6ZSh2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJIQU5ETEVSXCIgLyogV2lyZVZhbHVlVHlwZS5IQU5ETEVSICovLFxuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VyaWFsaXplZFZhbHVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJhYmxlcyxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogXCJSQVdcIiAvKiBXaXJlVmFsdWVUeXBlLlJBVyAqLyxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICB9LFxuICAgICAgICB0cmFuc2ZlckNhY2hlLmdldCh2YWx1ZSkgfHwgW10sXG4gICAgXTtcbn1cbmZ1bmN0aW9uIGZyb21XaXJlVmFsdWUodmFsdWUpIHtcbiAgICBzd2l0Y2ggKHZhbHVlLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcIkhBTkRMRVJcIiAvKiBXaXJlVmFsdWVUeXBlLkhBTkRMRVIgKi86XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNmZXJIYW5kbGVycy5nZXQodmFsdWUubmFtZSkuZGVzZXJpYWxpemUodmFsdWUudmFsdWUpO1xuICAgICAgICBjYXNlIFwiUkFXXCIgLyogV2lyZVZhbHVlVHlwZS5SQVcgKi86XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudmFsdWU7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwgbXNnLCB0cmFuc2ZlcnMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBnZW5lcmF0ZVVVSUQoKTtcbiAgICAgICAgZXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgZnVuY3Rpb24gbChldikge1xuICAgICAgICAgICAgaWYgKCFldi5kYXRhIHx8ICFldi5kYXRhLmlkIHx8IGV2LmRhdGEuaWQgIT09IGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbCk7XG4gICAgICAgICAgICByZXNvbHZlKGV2LmRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGVwLnN0YXJ0KSB7XG4gICAgICAgICAgICBlcC5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVwLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oeyBpZCB9LCBtc2cpLCB0cmFuc2ZlcnMpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZ2VuZXJhdGVVVUlEKCkge1xuICAgIHJldHVybiBuZXcgQXJyYXkoNClcbiAgICAgICAgLmZpbGwoMClcbiAgICAgICAgLm1hcCgoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikudG9TdHJpbmcoMTYpKVxuICAgICAgICAuam9pbihcIi1cIik7XG59XG5cbmV4cG9ydCB7IGNyZWF0ZUVuZHBvaW50LCBleHBvc2UsIGZpbmFsaXplciwgcHJveHksIHByb3h5TWFya2VyLCByZWxlYXNlUHJveHksIHRyYW5zZmVyLCB0cmFuc2ZlckhhbmRsZXJzLCB3aW5kb3dFbmRwb2ludCwgd3JhcCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbGluay5tanMubWFwXG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvQXNzZXJ0aW9uRXJyb3JcbiAqL1xuXG4vKiogQHR5cGUge09iamVjdDxudW1iZXIsIHN0cmluZz59ICovXG5jb25zdCBtZXNzYWdlcyA9IHtcbiAgMTogJ1RoZSB2aWV3IGNlbnRlciBpcyBub3QgZGVmaW5lZCcsXG4gIDI6ICdUaGUgdmlldyByZXNvbHV0aW9uIGlzIG5vdCBkZWZpbmVkJyxcbiAgMzogJ1RoZSB2aWV3IHJvdGF0aW9uIGlzIG5vdCBkZWZpbmVkJyxcbiAgNDogJ2BpbWFnZWAgYW5kIGBzcmNgIGNhbm5vdCBiZSBwcm92aWRlZCBhdCB0aGUgc2FtZSB0aW1lJyxcbiAgNTogJ2BpbWdTaXplYCBtdXN0IGJlIHNldCB3aGVuIGBpbWFnZWAgaXMgcHJvdmlkZWQnLFxuICA3OiAnYGZvcm1hdGAgbXVzdCBiZSBzZXQgd2hlbiBgdXJsYCBpcyBzZXQnLFxuICA4OiAnVW5rbm93biBgc2VydmVyVHlwZWAgY29uZmlndXJlZCcsXG4gIDk6ICdgdXJsYCBtdXN0IGJlIGNvbmZpZ3VyZWQgb3Igc2V0IHVzaW5nIGAjc2V0VXJsKClgJyxcbiAgMTA6ICdUaGUgZGVmYXVsdCBgZ2VvbWV0cnlGdW5jdGlvbmAgY2FuIG9ubHkgaGFuZGxlIGBQb2ludGAgZ2VvbWV0cmllcycsXG4gIDExOiAnYG9wdGlvbnMuZmVhdHVyZVR5cGVzYCBtdXN0IGJlIGFuIEFycmF5JyxcbiAgMTI6ICdgb3B0aW9ucy5nZW9tZXRyeU5hbWVgIG11c3QgYWxzbyBiZSBwcm92aWRlZCB3aGVuIGBvcHRpb25zLmJib3hgIGlzIHNldCcsXG4gIDEzOiAnSW52YWxpZCBjb3JuZXInLFxuICAxNDogJ0ludmFsaWQgY29sb3InLFxuICAxNTogJ1RyaWVkIHRvIGdldCBhIHZhbHVlIGZvciBhIGtleSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBjYWNoZScsXG4gIDE2OiAnVHJpZWQgdG8gc2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgaXMgdXNlZCBhbHJlYWR5JyxcbiAgMTc6ICdgcmVzb2x1dGlvbnNgIG11c3QgYmUgc29ydGVkIGluIGRlc2NlbmRpbmcgb3JkZXInLFxuICAxODogJ0VpdGhlciBgb3JpZ2luYCBvciBgb3JpZ2luc2AgbXVzdCBiZSBjb25maWd1cmVkLCBuZXZlciBib3RoJyxcbiAgMTk6ICdOdW1iZXIgb2YgYHRpbGVTaXplc2AgYW5kIGByZXNvbHV0aW9uc2AgbXVzdCBiZSBlcXVhbCcsXG4gIDIwOiAnTnVtYmVyIG9mIGBvcmlnaW5zYCBhbmQgYHJlc29sdXRpb25zYCBtdXN0IGJlIGVxdWFsJyxcbiAgMjI6ICdFaXRoZXIgYHRpbGVTaXplYCBvciBgdGlsZVNpemVzYCBtdXN0IGJlIGNvbmZpZ3VyZWQsIG5ldmVyIGJvdGgnLFxuICAyNDogJ0ludmFsaWQgZXh0ZW50IG9yIGdlb21ldHJ5IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWAnLFxuICAyNTogJ0Nhbm5vdCBmaXQgZW1wdHkgZXh0ZW50IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWAnLFxuICAyNjogJ0ZlYXR1cmVzIG11c3QgaGF2ZSBhbiBpZCBzZXQnLFxuICAyNzogJ0ZlYXR1cmVzIG11c3QgaGF2ZSBhbiBpZCBzZXQnLFxuICAyODogJ2ByZW5kZXJNb2RlYCBtdXN0IGJlIGBcImh5YnJpZFwiYCBvciBgXCJ2ZWN0b3JcImAnLFxuICAzMDogJ1RoZSBwYXNzZWQgYGZlYXR1cmVgIHdhcyBhbHJlYWR5IGFkZGVkIHRvIHRoZSBzb3VyY2UnLFxuICAzMTogJ1RyaWVkIHRvIGVucXVldWUgYW4gYGVsZW1lbnRgIHRoYXQgd2FzIGFscmVhZHkgYWRkZWQgdG8gdGhlIHF1ZXVlJyxcbiAgMzI6ICdUcmFuc2Zvcm1hdGlvbiBtYXRyaXggY2Fubm90IGJlIGludmVydGVkJyxcbiAgMzM6ICdJbnZhbGlkIHVuaXRzJyxcbiAgMzQ6ICdJbnZhbGlkIGdlb21ldHJ5IGxheW91dCcsXG4gIDM2OiAnVW5rbm93biBTUlMgdHlwZScsXG4gIDM3OiAnVW5rbm93biBnZW9tZXRyeSB0eXBlIGZvdW5kJyxcbiAgMzg6ICdgc3R5bGVNYXBWYWx1ZWAgaGFzIGFuIHVua25vd24gdHlwZScsXG4gIDM5OiAnVW5rbm93biBnZW9tZXRyeSB0eXBlJyxcbiAgNDA6ICdFeHBlY3RlZCBgZmVhdHVyZWAgdG8gaGF2ZSBhIGdlb21ldHJ5JyxcbiAgNDE6ICdFeHBlY3RlZCBhbiBgb2wvc3R5bGUvU3R5bGVgIG9yIGFuIGFycmF5IG9mIGBvbC9zdHlsZS9TdHlsZS5qc2AnLFxuICA0MjogJ1F1ZXN0aW9uIHVua25vd24sIHRoZSBhbnN3ZXIgaXMgNDInLFxuICA0MzogJ0V4cGVjdGVkIGBsYXllcnNgIHRvIGJlIGFuIGFycmF5IG9yIGEgYENvbGxlY3Rpb25gJyxcbiAgNDc6ICdFeHBlY3RlZCBgY29udHJvbHNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBvbC9Db2xsZWN0aW9uYCcsXG4gIDQ4OiAnRXhwZWN0ZWQgYGludGVyYWN0aW9uc2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYG9sL0NvbGxlY3Rpb25gJyxcbiAgNDk6ICdFeHBlY3RlZCBgb3ZlcmxheXNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBvbC9Db2xsZWN0aW9uYCcsXG4gIDUwOiAnYG9wdGlvbnMuZmVhdHVyZVR5cGVzYCBzaG91bGQgYmUgYW4gQXJyYXknLFxuICA1MTogJ0VpdGhlciBgdXJsYCBvciBgdGlsZUpTT05gIG9wdGlvbnMgbXVzdCBiZSBwcm92aWRlZCcsXG4gIDUyOiAnVW5rbm93biBgc2VydmVyVHlwZWAgY29uZmlndXJlZCcsXG4gIDUzOiAnVW5rbm93biBgdGllclNpemVDYWxjdWxhdGlvbmAgY29uZmlndXJlZCcsXG4gIDU1OiAnVGhlIHsteX0gcGxhY2Vob2xkZXIgcmVxdWlyZXMgYSB0aWxlIGdyaWQgd2l0aCBleHRlbnQnLFxuICA1NjogJ21hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudCcsXG4gIDU3OiAnQXQgbGVhc3QgMiBjb25kaXRpb25zIGFyZSByZXF1aXJlZCcsXG4gIDU5OiAnSW52YWxpZCBjb21tYW5kIGZvdW5kIGluIHRoZSBQQkYnLFxuICA2MDogJ01pc3Npbmcgb3IgaW52YWxpZCBgc2l6ZWAnLFxuICA2MTogJ0Nhbm5vdCBkZXRlcm1pbmUgSUlJRiBJbWFnZSBBUEkgdmVyc2lvbiBmcm9tIHByb3ZpZGVkIGltYWdlIGluZm9ybWF0aW9uIEpTT04nLFxuICA2MjogJ0EgYFdlYkdMQXJyYXlCdWZmZXJgIG11c3QgZWl0aGVyIGJlIG9mIHR5cGUgYEVMRU1FTlRfQVJSQVlfQlVGRkVSYCBvciBgQVJSQVlfQlVGRkVSYCcsXG4gIDY0OiAnTGF5ZXIgb3BhY2l0eSBtdXN0IGJlIGEgbnVtYmVyJyxcbiAgNjY6ICdgZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGVgIGNhbm5vdCBiZSB1c2VkIG9uIGEgV2ViR0wgbGF5ZXIgaWYgdGhlIGhpdCBkZXRlY3Rpb24gbG9naWMgaGFzIG5vdCBiZWVuIGVuYWJsZWQuIFRoaXMgaXMgZG9uZSBieSBwcm92aWRpbmcgYWRlcXVhdGUgc2hhZGVycyB1c2luZyB0aGUgYGhpdFZlcnRleFNoYWRlcmAgYW5kIGBoaXRGcmFnbWVudFNoYWRlcmAgcHJvcGVydGllcyBvZiBgV2ViR0xQb2ludHNMYXllclJlbmRlcmVyYCcsXG4gIDY3OiAnQSBsYXllciBjYW4gb25seSBiZSBhZGRlZCB0byB0aGUgbWFwIG9uY2UuIFVzZSBlaXRoZXIgYGxheWVyLnNldE1hcCgpYCBvciBgbWFwLmFkZExheWVyKClgLCBub3QgYm90aCcsXG4gIDY4OiAnQSBWZWN0b3JUaWxlIHNvdXJjZSBjYW4gb25seSBiZSByZW5kZXJlZCBpZiBpdCBoYXMgYSBwcm9qZWN0aW9uIGNvbXBhdGlibGUgd2l0aCB0aGUgdmlldyBwcm9qZWN0aW9uJyxcbiAgNjk6ICdgd2lkdGhgIG9yIGBoZWlnaHRgIGNhbm5vdCBiZSBwcm92aWRlZCB0b2dldGhlciB3aXRoIGBzY2FsZWAnLFxufTtcblxuLyoqXG4gKiBFcnJvciBvYmplY3QgdGhyb3duIHdoZW4gYW4gYXNzZXJ0aW9uIGZhaWxlZC4gVGhpcyBpcyBhbiBFQ01BLTI2MiBFcnJvcixcbiAqIGV4dGVuZGVkIHdpdGggYSBgY29kZWAgcHJvcGVydHkuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IuXG4gKi9cbmNsYXNzIEFzc2VydGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvZGUgRXJyb3IgY29kZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvZGUpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gbWVzc2FnZXNbY29kZV07XG5cbiAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgIC8qKlxuICAgICAqIEVycm9yIGNvZGUuIFRoZSBtZWFuaW5nIG9mIHRoZSBjb2RlIGNhbiBiZSBmb3VuZCBvblxuICAgICAqIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vbGF0ZXN0L2RvYy9lcnJvcnMvIChyZXBsYWNlIGBsYXRlc3RgIHdpdGhcbiAgICAgKiB0aGUgdmVyc2lvbiBmb3VuZCBpbiB0aGUgT3BlbkxheWVycyBzY3JpcHQncyBoZWFkZXIgY29tbWVudCBpZiBhIHZlcnNpb25cbiAgICAgKiBvdGhlciB0aGFuIHRoZSBsYXRlc3QgaXMgdXNlZCkuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAZGVwcmVjYXRlZCBvbC9Bc3NlcnRpb25FcnJvciBhbmQgZXJyb3IgY29kZXMgd2lsbCBiZSByZW1vdmVkIGluIHY4LjBcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5jb2RlID0gY29kZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcblxuICAgIC8vIFJlLWFzc2lnbiBtZXNzYWdlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1JpY2gtSGFycmlzL2J1YmxlL2lzc3Vlcy80MFxuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXNzZXJ0aW9uRXJyb3I7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvRGlzcG9zYWJsZVxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogT2JqZWN0cyB0aGF0IG5lZWQgdG8gY2xlYW4gdXAgYWZ0ZXIgdGhlbXNlbHZlcy5cbiAqL1xuY2xhc3MgRGlzcG9zYWJsZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKlxuICAgICAqIFRoZSBvYmplY3QgaGFzIGFscmVhZHkgYmVlbiBkaXNwb3NlZC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgdGhpcy5kaXNwb3NlZCA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwLlxuICAgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICBpZiAoIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuZGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdGhpcy5kaXNwb3NlSW50ZXJuYWwoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5zaW9uIHBvaW50IGZvciBkaXNwb3NhYmxlIG9iamVjdHMuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGRpc3Bvc2VJbnRlcm5hbCgpIHt9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERpc3Bvc2FibGU7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VUaWxlXG4gKi9cbmltcG9ydCBUaWxlIGZyb20gJy4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7Y3JlYXRlQ2FudmFzQ29udGV4dDJEfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQge2xpc3RlbkltYWdlfSBmcm9tICcuL0ltYWdlLmpzJztcblxuY2xhc3MgSW1hZ2VUaWxlIGV4dGVuZHMgVGlsZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fSBzdGF0ZSBTdGF0ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyBJbWFnZSBzb3VyY2UgVVJJLlxuICAgKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSB0aWxlTG9hZEZ1bmN0aW9uIFRpbGUgbG9hZCBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuT3B0aW9uc30gW29wdGlvbnNdIFRpbGUgb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHRpbGVDb29yZCwgc3RhdGUsIHNyYywgY3Jvc3NPcmlnaW4sIHRpbGVMb2FkRnVuY3Rpb24sIG9wdGlvbnMpIHtcbiAgICBzdXBlcih0aWxlQ29vcmQsIHN0YXRlLCBvcHRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5jcm9zc09yaWdpbl8gPSBjcm9zc09yaWdpbjtcblxuICAgIC8qKlxuICAgICAqIEltYWdlIFVSSVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMuc3JjXyA9IHNyYztcblxuICAgIHRoaXMua2V5ID0gc3JjO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmltYWdlXyA9IG5ldyBJbWFnZSgpO1xuICAgIGlmIChjcm9zc09yaWdpbiAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5pbWFnZV8uY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/ZnVuY3Rpb24oKTp2b2lkfVxuICAgICAqL1xuICAgIHRoaXMudW5saXN0ZW5fID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uXyA9IHRpbGVMb2FkRnVuY3Rpb247XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBIVE1MIGltYWdlIGVsZW1lbnQgZm9yIHRoaXMgdGlsZSAobWF5IGJlIGEgQ2FudmFzLCBJbWFnZSwgb3IgVmlkZW8pLlxuICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRJbWFnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pbWFnZV87XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhbiBIVE1MIGltYWdlIGVsZW1lbnQgZm9yIHRoaXMgdGlsZSAobWF5IGJlIGEgQ2FudmFzIG9yIHByZWxvYWRlZCBJbWFnZSkuXG4gICAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudH0gZWxlbWVudCBFbGVtZW50LlxuICAgKi9cbiAgc2V0SW1hZ2UoZWxlbWVudCkge1xuICAgIHRoaXMuaW1hZ2VfID0gZWxlbWVudDtcbiAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cblxuICAvKipcbiAgICogVHJhY2tzIGxvYWRpbmcgb3IgcmVhZCBlcnJvcnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVJbWFnZUVycm9yXygpIHtcbiAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVSUk9SO1xuICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICB0aGlzLmltYWdlXyA9IGdldEJsYW5rSW1hZ2UoKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFja3Mgc3VjY2Vzc2Z1bCBpbWFnZSBsb2FkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlSW1hZ2VMb2FkXygpIHtcbiAgICBjb25zdCBpbWFnZSA9IC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudH0gKi8gKHRoaXMuaW1hZ2VfKTtcbiAgICBpZiAoaW1hZ2UubmF0dXJhbFdpZHRoICYmIGltYWdlLm5hdHVyYWxIZWlnaHQpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BREVEO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgIH1cbiAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCB0aGUgaW1hZ2Ugb3IgcmV0cnkgaWYgbG9hZGluZyBwcmV2aW91c2x5IGZhaWxlZC5cbiAgICogTG9hZGluZyBpcyB0YWtlbiBjYXJlIG9mIGJ5IHRoZSB0aWxlIHF1ZXVlLCBhbmQgY2FsbGluZyB0aGlzIG1ldGhvZCBpc1xuICAgKiBvbmx5IG5lZWRlZCBmb3IgcHJlbG9hZGluZyBvciBmb3IgcmVsb2FkaW5nIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAqXG4gICAqIFRvIHJldHJ5IGxvYWRpbmcgdGlsZXMgb24gZmFpbGVkIHJlcXVlc3RzLCB1c2UgYSBjdXN0b20gYHRpbGVMb2FkRnVuY3Rpb25gXG4gICAqIHRoYXQgY2hlY2tzIGZvciBlcnJvciBzdGF0dXMgY29kZXMgYW5kIHJlbG9hZHMgb25seSB3aGVuIHRoZSBzdGF0dXMgY29kZSBpc1xuICAgKiA0MDgsIDQyOSwgNTAwLCA1MDIsIDUwMyBhbmQgNTA0LCBhbmQgb25seSB3aGVuIG5vdCB0b28gbWFueSByZXRyaWVzIGhhdmUgYmVlblxuICAgKiBtYWRlIGFscmVhZHk6XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGNvbnN0IHJldHJ5Q29kZXMgPSBbNDA4LCA0MjksIDUwMCwgNTAyLCA1MDMsIDUwNF07XG4gICAqIGNvbnN0IHJldHJpZXMgPSB7fTtcbiAgICogc291cmNlLnNldFRpbGVMb2FkRnVuY3Rpb24oKHRpbGUsIHNyYykgPT4ge1xuICAgKiAgIGNvbnN0IGltYWdlID0gdGlsZS5nZXRJbWFnZSgpO1xuICAgKiAgIGZldGNoKHNyYylcbiAgICogICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgKiAgICAgICBpZiAocmV0cnlDb2Rlcy5pbmNsdWRlcyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAqICAgICAgICAgcmV0cmllc1tzcmNdID0gKHJldHJpZXNbc3JjXSB8fCAwKSArIDE7XG4gICAqICAgICAgICAgaWYgKHJldHJpZXNbc3JjXSA8PSAzKSB7XG4gICAqICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRpbGUubG9hZCgpLCByZXRyaWVzW3NyY10gKiAxMDAwKTtcbiAgICogICAgICAgICB9XG4gICAqICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XG4gICAqICAgICAgIH1cbiAgICogICAgICAgcmV0dXJuIHJlc3BvbnNlLmJsb2IoKTtcbiAgICogICAgIH0pXG4gICAqICAgICAudGhlbigoYmxvYikgPT4ge1xuICAgKiAgICAgICBjb25zdCBpbWFnZVVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAqICAgICAgIGltYWdlLnNyYyA9IGltYWdlVXJsO1xuICAgKiAgICAgICBzZXRUaW1lb3V0KCgpID0+IFVSTC5yZXZva2VPYmplY3RVUkwoaW1hZ2VVcmwpLCA1MDAwKTtcbiAgICogICAgIH0pXG4gICAqICAgICAuY2F0Y2goKCkgPT4gdGlsZS5zZXRTdGF0ZSgzKSk7IC8vIGVycm9yXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQGFwaVxuICAgKi9cbiAgbG9hZCgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PSBUaWxlU3RhdGUuRVJST1IpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuSURMRTtcbiAgICAgIHRoaXMuaW1hZ2VfID0gbmV3IEltYWdlKCk7XG4gICAgICBpZiAodGhpcy5jcm9zc09yaWdpbl8gIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5pbWFnZV8uY3Jvc3NPcmlnaW4gPSB0aGlzLmNyb3NzT3JpZ2luXztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BRElORztcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uXyh0aGlzLCB0aGlzLnNyY18pO1xuICAgICAgdGhpcy51bmxpc3Rlbl8gPSBsaXN0ZW5JbWFnZShcbiAgICAgICAgdGhpcy5pbWFnZV8sXG4gICAgICAgIHRoaXMuaGFuZGxlSW1hZ2VMb2FkXy5iaW5kKHRoaXMpLFxuICAgICAgICB0aGlzLmhhbmRsZUltYWdlRXJyb3JfLmJpbmQodGhpcylcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERpc2NhcmRzIGV2ZW50IGhhbmRsZXJzIHdoaWNoIGxpc3RlbiBmb3IgbG9hZCBjb21wbGV0aW9uIG9yIGVycm9ycy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVubGlzdGVuSW1hZ2VfKCkge1xuICAgIGlmICh0aGlzLnVubGlzdGVuXykge1xuICAgICAgdGhpcy51bmxpc3Rlbl8oKTtcbiAgICAgIHRoaXMudW5saXN0ZW5fID0gbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgYSAxLXBpeGVsIGJsYW5rIGltYWdlLlxuICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IEJsYW5rIGltYWdlLlxuICovXG5mdW5jdGlvbiBnZXRCbGFua0ltYWdlKCkge1xuICBjb25zdCBjdHggPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoMSwgMSk7XG4gIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLDAsMCwwKSc7XG4gIGN0eC5maWxsUmVjdCgwLCAwLCAxLCAxKTtcbiAgcmV0dXJuIGN0eC5jYW52YXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEltYWdlVGlsZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VCYXNlIGZyb20gJy4vSW1hZ2VCYXNlLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4vSW1hZ2VTdGF0ZS5qcyc7XG5pbXBvcnQge0lNQUdFX0RFQ09ERX0gZnJvbSAnLi9oYXMuanMnO1xuaW1wb3J0IHtnZXRIZWlnaHR9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7bGlzdGVuT25jZSwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi9ldmVudHMuanMnO1xuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL0ltYWdlfkltYWdlV3JhcHBlcn0gZm9yIHRoZSBpbWFnZSBhbmQgYVxuICogYHtzdHJpbmd9YCBmb3IgdGhlIHNyYyBhcyBhcmd1bWVudHMuIEl0IGlzIHN1cHBvc2VkIHRvIG1ha2UgaXQgc28gdGhlXG4gKiB1bmRlcmx5aW5nIGltYWdlIHtAbGluayBtb2R1bGU6b2wvSW1hZ2V+SW1hZ2VXcmFwcGVyI2dldEltYWdlfSBpcyBhc3NpZ25lZCB0aGVcbiAqIGNvbnRlbnQgc3BlY2lmaWVkIGJ5IHRoZSBzcmMuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSBkZWZhdWx0IGlzXG4gKlxuICogICAgIGZ1bmN0aW9uKGltYWdlLCBzcmMpIHtcbiAqICAgICAgIGltYWdlLmdldEltYWdlKCkuc3JjID0gc3JjO1xuICogICAgIH1cbiAqXG4gKiBQcm92aWRpbmcgYSBjdXN0b20gYGltYWdlTG9hZEZ1bmN0aW9uYCBjYW4gYmUgdXNlZnVsIHRvIGxvYWQgaW1hZ2VzIHdpdGhcbiAqIHBvc3QgcmVxdWVzdHMgb3IgLSBpbiBnZW5lcmFsIC0gdGhyb3VnaCBYSFIgcmVxdWVzdHMsIHdoZXJlIHRoZSBzcmMgb2YgdGhlXG4gKiBpbWFnZSBlbGVtZW50IHdvdWxkIGJlIHNldCB0byBhIGRhdGEgVVJJIHdoZW4gdGhlIGNvbnRlbnQgaXMgbG9hZGVkLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihJbWFnZVdyYXBwZXIsIHN0cmluZyk6IHZvaWR9IExvYWRGdW5jdGlvblxuICogQGFwaVxuICovXG5cbmNsYXNzIEltYWdlV3JhcHBlciBleHRlbmRzIEltYWdlQmFzZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIEltYWdlIHNvdXJjZSBVUkkuXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICAgKiBAcGFyYW0ge0xvYWRGdW5jdGlvbn0gaW1hZ2VMb2FkRnVuY3Rpb24gSW1hZ2UgbG9hZCBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IFtjb250ZXh0XSBDYW52YXMgY29udGV4dC4gV2hlbiBwcm92aWRlZCwgdGhlIGltYWdlIHdpbGwgYmVcbiAgICogICAgZHJhd24gaW50byB0aGUgY29udGV4dCdzIGNhbnZhcywgYW5kIGBnZXRJbWFnZSgpYCB3aWxsIHJldHVybiB0aGUgY2FudmFzIG9uY2UgdGhlIGltYWdlXG4gICAqICAgIGhhcyBmaW5pc2hlZCBsb2FkaW5nLlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgZXh0ZW50LFxuICAgIHJlc29sdXRpb24sXG4gICAgcGl4ZWxSYXRpbyxcbiAgICBzcmMsXG4gICAgY3Jvc3NPcmlnaW4sXG4gICAgaW1hZ2VMb2FkRnVuY3Rpb24sXG4gICAgY29udGV4dFxuICApIHtcbiAgICBzdXBlcihleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIEltYWdlU3RhdGUuSURMRSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5zcmNfID0gc3JjO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VfID0gbmV3IEltYWdlKCk7XG4gICAgaWYgKGNyb3NzT3JpZ2luICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmltYWdlXy5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgKi9cbiAgICB0aGlzLmNvbnRleHRfID0gY29udGV4dDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9mdW5jdGlvbigpOnZvaWR9XG4gICAgICovXG4gICAgdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5JRExFO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7TG9hZEZ1bmN0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VMb2FkRnVuY3Rpb25fID0gaW1hZ2VMb2FkRnVuY3Rpb247XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0SW1hZ2UoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5zdGF0ZSA9PSBJbWFnZVN0YXRlLkxPQURFRCAmJlxuICAgICAgdGhpcy5jb250ZXh0XyAmJlxuICAgICAgISh0aGlzLmltYWdlXyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KVxuICAgICkge1xuICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5jb250ZXh0Xy5jYW52YXM7XG4gICAgICBjYW52YXMud2lkdGggPSB0aGlzLmltYWdlXy53aWR0aDtcbiAgICAgIGNhbnZhcy5oZWlnaHQgPSB0aGlzLmltYWdlXy5oZWlnaHQ7XG4gICAgICB0aGlzLmNvbnRleHRfLmRyYXdJbWFnZSh0aGlzLmltYWdlXywgMCwgMCk7XG4gICAgICB0aGlzLmltYWdlXyA9IHRoaXMuY29udGV4dF8uY2FudmFzO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5pbWFnZV87XG4gIH1cblxuICAvKipcbiAgICogVHJhY2tzIGxvYWRpbmcgb3IgcmVhZCBlcnJvcnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVJbWFnZUVycm9yXygpIHtcbiAgICB0aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5FUlJPUjtcbiAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cblxuICAvKipcbiAgICogVHJhY2tzIHN1Y2Nlc3NmdWwgaW1hZ2UgbG9hZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUltYWdlTG9hZF8oKSB7XG4gICAgaWYgKHRoaXMucmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnJlc29sdXRpb24gPSBnZXRIZWlnaHQodGhpcy5leHRlbnQpIC8gdGhpcy5pbWFnZV8uaGVpZ2h0O1xuICAgIH1cbiAgICB0aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5MT0FERUQ7XG4gICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgdGhlIGltYWdlIG9yIHJldHJ5IGlmIGxvYWRpbmcgcHJldmlvdXNseSBmYWlsZWQuXG4gICAqIExvYWRpbmcgaXMgdGFrZW4gY2FyZSBvZiBieSB0aGUgdGlsZSBxdWV1ZSwgYW5kIGNhbGxpbmcgdGhpcyBtZXRob2QgaXNcbiAgICogb25seSBuZWVkZWQgZm9yIHByZWxvYWRpbmcgb3IgZm9yIHJlbG9hZGluZyBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgKiBAYXBpXG4gICAqL1xuICBsb2FkKCkge1xuICAgIGlmICh0aGlzLnN0YXRlID09IEltYWdlU3RhdGUuSURMRSB8fCB0aGlzLnN0YXRlID09IEltYWdlU3RhdGUuRVJST1IpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLkxPQURJTkc7XG4gICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgIHRoaXMuaW1hZ2VMb2FkRnVuY3Rpb25fKHRoaXMsIHRoaXMuc3JjXyk7XG4gICAgICB0aGlzLnVubGlzdGVuXyA9IGxpc3RlbkltYWdlKFxuICAgICAgICB0aGlzLmltYWdlXyxcbiAgICAgICAgdGhpcy5oYW5kbGVJbWFnZUxvYWRfLmJpbmQodGhpcyksXG4gICAgICAgIHRoaXMuaGFuZGxlSW1hZ2VFcnJvcl8uYmluZCh0aGlzKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGltYWdlIEltYWdlLlxuICAgKi9cbiAgc2V0SW1hZ2UoaW1hZ2UpIHtcbiAgICB0aGlzLmltYWdlXyA9IGltYWdlO1xuICAgIHRoaXMucmVzb2x1dGlvbiA9IGdldEhlaWdodCh0aGlzLmV4dGVudCkgLyB0aGlzLmltYWdlXy5oZWlnaHQ7XG4gIH1cblxuICAvKipcbiAgICogRGlzY2FyZHMgZXZlbnQgaGFuZGxlcnMgd2hpY2ggbGlzdGVuIGZvciBsb2FkIGNvbXBsZXRpb24gb3IgZXJyb3JzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdW5saXN0ZW5JbWFnZV8oKSB7XG4gICAgaWYgKHRoaXMudW5saXN0ZW5fKSB7XG4gICAgICB0aGlzLnVubGlzdGVuXygpO1xuICAgICAgdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBpbWFnZSBJbWFnZSBlbGVtZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbigpOmFueX0gbG9hZEhhbmRsZXIgTG9hZCBjYWxsYmFjayBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTphbnl9IGVycm9ySGFuZGxlciBFcnJvciBjYWxsYmFjayBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKCk6dm9pZH0gQ2FsbGJhY2sgdG8gc3RvcCBsaXN0ZW5pbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5JbWFnZShpbWFnZSwgbG9hZEhhbmRsZXIsIGVycm9ySGFuZGxlcikge1xuICBjb25zdCBpbWcgPSAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovIChpbWFnZSk7XG4gIGxldCBsaXN0ZW5pbmcgPSB0cnVlO1xuICBsZXQgZGVjb2RpbmcgPSBmYWxzZTtcbiAgbGV0IGxvYWRlZCA9IGZhbHNlO1xuXG4gIGNvbnN0IGxpc3RlbmVyS2V5cyA9IFtcbiAgICBsaXN0ZW5PbmNlKGltZywgRXZlbnRUeXBlLkxPQUQsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxvYWRlZCA9IHRydWU7XG4gICAgICBpZiAoIWRlY29kaW5nKSB7XG4gICAgICAgIGxvYWRIYW5kbGVyKCk7XG4gICAgICB9XG4gICAgfSksXG4gIF07XG5cbiAgaWYgKGltZy5zcmMgJiYgSU1BR0VfREVDT0RFKSB7XG4gICAgZGVjb2RpbmcgPSB0cnVlO1xuICAgIGltZ1xuICAgICAgLmRlY29kZSgpXG4gICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChsaXN0ZW5pbmcpIHtcbiAgICAgICAgICBsb2FkSGFuZGxlcigpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBpZiAobGlzdGVuaW5nKSB7XG4gICAgICAgICAgaWYgKGxvYWRlZCkge1xuICAgICAgICAgICAgbG9hZEhhbmRsZXIoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXJyb3JIYW5kbGVyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBsaXN0ZW5lcktleXMucHVzaChsaXN0ZW5PbmNlKGltZywgRXZlbnRUeXBlLkVSUk9SLCBlcnJvckhhbmRsZXIpKTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiB1bmxpc3RlbigpIHtcbiAgICBsaXN0ZW5pbmcgPSBmYWxzZTtcbiAgICBsaXN0ZW5lcktleXMuZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VXcmFwcGVyO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0NvbGxlY3Rpb25FdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGFuIGl0ZW0gaXMgYWRkZWQgdG8gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBldmVudCBtb2R1bGU6b2wvQ29sbGVjdGlvbi5Db2xsZWN0aW9uRXZlbnQjYWRkXG4gICAqIEBhcGlcbiAgICovXG4gIEFERDogJ2FkZCcsXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBhbiBpdGVtIGlzIHJlbW92ZWQgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9Db2xsZWN0aW9uLkNvbGxlY3Rpb25FdmVudCNyZW1vdmVcbiAgICogQGFwaVxuICAgKi9cbiAgUkVNT1ZFOiAncmVtb3ZlJyxcbn07XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvQ29sbGVjdGlvblxuICovXG5pbXBvcnQgQXNzZXJ0aW9uRXJyb3IgZnJvbSAnLi9Bc3NlcnRpb25FcnJvci5qcyc7XG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgUHJvcGVydHkgPSB7XG4gIExFTkdUSDogJ2xlbmd0aCcsXG59O1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzXG4gKiB0eXBlLlxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGNsYXNzIENvbGxlY3Rpb25FdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzXCIpLmRlZmF1bHR9IHR5cGUgVHlwZS5cbiAgICogQHBhcmFtIHtUfSBlbGVtZW50IEVsZW1lbnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIGFkZGVkIG9yIHJlbW92ZWQgZWxlbWVudC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGUsIGVsZW1lbnQsIGluZGV4KSB7XG4gICAgc3VwZXIodHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZWxlbWVudCB0aGF0IGlzIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAdHlwZSB7VH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgYWRkZWQgb3IgcmVtb3ZlZCBlbGVtZW50LlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgfVxufVxuXG4vKioqXG4gKiBAdGVtcGxhdGUgVFxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3wnY2hhbmdlOmxlbmd0aCcsIGltcG9ydChcIi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPCdhZGQnfCdyZW1vdmUnLCBDb2xsZWN0aW9uRXZlbnQ8VD4sIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmxlbmd0aCd8J2FkZCd8J3JlbW92ZScsUmV0dXJuPn0gQ29sbGVjdGlvbk9uU2lnbmF0dXJlXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1bmlxdWU9ZmFsc2VdIERpc2FsbG93IHRoZSBzYW1lIGl0ZW0gZnJvbSBiZWluZyBhZGRlZCB0b1xuICogdGhlIGNvbGxlY3Rpb24gdHdpY2UuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbiBleHBhbmRlZCB2ZXJzaW9uIG9mIHN0YW5kYXJkIEpTIEFycmF5LCBhZGRpbmcgY29udmVuaWVuY2UgbWV0aG9kcyBmb3JcbiAqIG1hbmlwdWxhdGlvbi4gQWRkIGFuZCByZW1vdmUgY2hhbmdlcyB0byB0aGUgQ29sbGVjdGlvbiB0cmlnZ2VyIGEgQ29sbGVjdGlvblxuICogZXZlbnQuIE5vdGUgdGhhdCB0aGlzIGRvZXMgbm90IGNvdmVyIGNoYW5nZXMgdG8gdGhlIG9iamVjdHMgX3dpdGhpbl8gdGhlXG4gKiBDb2xsZWN0aW9uOyB0aGV5IHRyaWdnZXIgZXZlbnRzIG9uIHRoZSBhcHByb3ByaWF0ZSBvYmplY3QsIG5vdCBvbiB0aGVcbiAqIENvbGxlY3Rpb24gYXMgYSB3aG9sZS5cbiAqXG4gKiBAZmlyZXMgQ29sbGVjdGlvbkV2ZW50XG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBhcGlcbiAqL1xuY2xhc3MgQ29sbGVjdGlvbiBleHRlbmRzIEJhc2VPYmplY3Qge1xuICAvKipcbiAgICogQHBhcmFtIHtBcnJheTxUPn0gW2FycmF5XSBBcnJheS5cbiAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc10gQ29sbGVjdGlvbiBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYXJyYXksIG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uT25TaWduYXR1cmU8VCwgaW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uT25TaWduYXR1cmU8VCwgaW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uY2U7XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge0NvbGxlY3Rpb25PblNpZ25hdHVyZTxULCB2b2lkPn1cbiAgICAgKi9cbiAgICB0aGlzLnVuO1xuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMudW5pcXVlXyA9ICEhb3B0aW9ucy51bmlxdWU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshQXJyYXk8VD59XG4gICAgICovXG4gICAgdGhpcy5hcnJheV8gPSBhcnJheSA/IGFycmF5IDogW107XG5cbiAgICBpZiAodGhpcy51bmlxdWVfKSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB0aGlzLmFycmF5Xy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyh0aGlzLmFycmF5X1tpXSwgaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVMZW5ndGhfKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCBlbGVtZW50cyBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBjbGVhcigpIHtcbiAgICB3aGlsZSAodGhpcy5nZXRMZW5ndGgoKSA+IDApIHtcbiAgICAgIHRoaXMucG9wKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBlbGVtZW50cyB0byB0aGUgY29sbGVjdGlvbi4gIFRoaXMgcHVzaGVzIGVhY2ggaXRlbSBpbiB0aGUgcHJvdmlkZWQgYXJyYXlcbiAgICogdG8gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICogQHBhcmFtIHshQXJyYXk8VD59IGFyciBBcnJheS5cbiAgICogQHJldHVybiB7Q29sbGVjdGlvbjxUPn0gVGhpcyBjb2xsZWN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBleHRlbmQoYXJyKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gYXJyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHRoaXMucHVzaChhcnJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlIG92ZXIgZWFjaCBlbGVtZW50LCBjYWxsaW5nIHRoZSBwcm92aWRlZCBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihULCBudW1iZXIsIEFycmF5PFQ+KTogKn0gZiBUaGUgZnVuY3Rpb24gdG8gY2FsbFxuICAgKiAgICAgZm9yIGV2ZXJ5IGVsZW1lbnQuIFRoaXMgZnVuY3Rpb24gdGFrZXMgMyBhcmd1bWVudHMgKHRoZSBlbGVtZW50LCB0aGVcbiAgICogICAgIGluZGV4IGFuZCB0aGUgYXJyYXkpLiBUaGUgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWQuXG4gICAqIEBhcGlcbiAgICovXG4gIGZvckVhY2goZikge1xuICAgIGNvbnN0IGFycmF5ID0gdGhpcy5hcnJheV87XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gYXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgZihhcnJheVtpXSwgaSwgYXJyYXkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSByZWZlcmVuY2UgdG8gdGhlIHVuZGVybHlpbmcgQXJyYXkgb2JqZWN0LiBXYXJuaW5nOiBpZiB0aGUgYXJyYXlcbiAgICogaXMgbXV0YXRlZCwgbm8gZXZlbnRzIHdpbGwgYmUgZGlzcGF0Y2hlZCBieSB0aGUgY29sbGVjdGlvbiwgYW5kIHRoZVxuICAgKiBjb2xsZWN0aW9uJ3MgXCJsZW5ndGhcIiBwcm9wZXJ0eSB3b24ndCBiZSBpbiBzeW5jIHdpdGggdGhlIGFjdHVhbCBsZW5ndGhcbiAgICogb2YgdGhlIGFycmF5LlxuICAgKiBAcmV0dXJuIHshQXJyYXk8VD59IEFycmF5LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRBcnJheSgpIHtcbiAgICByZXR1cm4gdGhpcy5hcnJheV87XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgKiBAcmV0dXJuIHtUfSBFbGVtZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBpdGVtKGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxlbmd0aCBvZiB0aGlzIGNvbGxlY3Rpb24uXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGxlbmd0aCBvZiB0aGUgYXJyYXkuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldExlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoUHJvcGVydHkuTEVOR1RIKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnQgYW4gZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIGluc2VydEF0KGluZGV4LCBlbGVtKSB7XG4gICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+IHRoaXMuZ2V0TGVuZ3RoKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW5kZXggb3V0IG9mIGJvdW5kczogJyArIGluZGV4KTtcbiAgICB9XG4gICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0pO1xuICAgIH1cbiAgICB0aGlzLmFycmF5Xy5zcGxpY2UoaW5kZXgsIDAsIGVsZW0pO1xuICAgIHRoaXMudXBkYXRlTGVuZ3RoXygpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIGVsZW0sIGluZGV4KVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBsYXN0IGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb24gYW5kIHJldHVybiBpdC5cbiAgICogUmV0dXJuIGB1bmRlZmluZWRgIGlmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5LlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gRWxlbWVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgcG9wKCkge1xuICAgIHJldHVybiB0aGlzLnJlbW92ZUF0KHRoaXMuZ2V0TGVuZ3RoKCkgLSAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnQgdGhlIHByb3ZpZGVkIGVsZW1lbnQgYXQgdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTmV3IGxlbmd0aCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgcHVzaChlbGVtKSB7XG4gICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0pO1xuICAgIH1cbiAgICBjb25zdCBuID0gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICB0aGlzLmluc2VydEF0KG4sIGVsZW0pO1xuICAgIHJldHVybiB0aGlzLmdldExlbmd0aCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBlbGVtZW50IGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgZWxlbWVudCBvciB1bmRlZmluZWQgaWYgbm9uZSBmb3VuZC5cbiAgICogQGFwaVxuICAgKi9cbiAgcmVtb3ZlKGVsZW0pIHtcbiAgICBjb25zdCBhcnIgPSB0aGlzLmFycmF5XztcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBhcnIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgaWYgKGFycltpXSA9PT0gZWxlbSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVBdChpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4IGFuZCByZXR1cm4gaXQuXG4gICAqIFJldHVybiBgdW5kZWZpbmVkYCBpZiB0aGUgY29sbGVjdGlvbiBkb2VzIG5vdCBjb250YWluIHRoaXMgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFZhbHVlLlxuICAgKiBAYXBpXG4gICAqL1xuICByZW1vdmVBdChpbmRleCkge1xuICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5nZXRMZW5ndGgoKSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgcHJldiA9IHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgICB0aGlzLmFycmF5Xy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHRoaXMudXBkYXRlTGVuZ3RoXygpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgIC8qKiBAdHlwZSB7Q29sbGVjdGlvbkV2ZW50PFQ+fSAqLyAoXG4gICAgICAgIG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIHByZXYsIGluZGV4KVxuICAgICAgKVxuICAgICk7XG4gICAgcmV0dXJuIHByZXY7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0QXQoaW5kZXgsIGVsZW0pIHtcbiAgICBjb25zdCBuID0gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICBpZiAoaW5kZXggPj0gbikge1xuICAgICAgdGhpcy5pbnNlcnRBdChpbmRleCwgZWxlbSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW5kZXggb3V0IG9mIGJvdW5kczogJyArIGluZGV4KTtcbiAgICB9XG4gICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0sIGluZGV4KTtcbiAgICB9XG4gICAgY29uc3QgcHJldiA9IHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgICB0aGlzLmFycmF5X1tpbmRleF0gPSBlbGVtO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgIC8qKiBAdHlwZSB7Q29sbGVjdGlvbkV2ZW50PFQ+fSAqLyAoXG4gICAgICAgIG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIHByZXYsIGluZGV4KVxuICAgICAgKVxuICAgICk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgLyoqIEB0eXBlIHtDb2xsZWN0aW9uRXZlbnQ8VD59ICovIChcbiAgICAgICAgbmV3IENvbGxlY3Rpb25FdmVudChDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgZWxlbSwgaW5kZXgpXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdXBkYXRlTGVuZ3RoXygpIHtcbiAgICB0aGlzLnNldChQcm9wZXJ0eS5MRU5HVEgsIHRoaXMuYXJyYXlfLmxlbmd0aCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZXhjZXB0XSBPcHRpb25hbCBpbmRleCB0byBpZ25vcmUuXG4gICAqL1xuICBhc3NlcnRVbmlxdWVfKGVsZW0sIGV4Y2VwdCkge1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRoaXMuYXJyYXlfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGlmICh0aGlzLmFycmF5X1tpXSA9PT0gZWxlbSAmJiBpICE9PSBleGNlcHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFzc2VydGlvbkVycm9yKDU4KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29sbGVjdGlvbjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHlsZS9JY29uSW1hZ2VDYWNoZVxuICovXG5pbXBvcnQge2FzU3RyaW5nfSBmcm9tICcuLi9jb2xvci5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU2luZ2xldG9uIGNsYXNzLiBBdmFpbGFibGUgdGhyb3VnaCB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL0ljb25JbWFnZUNhY2hlLnNoYXJlZH0uXG4gKi9cbmNsYXNzIEljb25JbWFnZUNhY2hlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuY2FjaGVfID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5jYWNoZVNpemVfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1heENhY2hlU2l6ZV8gPSAzMjtcbiAgfVxuXG4gIC8qKlxuICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICovXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuY2FjaGVfID0ge307XG4gICAgdGhpcy5jYWNoZVNpemVfID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgKi9cbiAgY2FuRXhwaXJlQ2FjaGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGVTaXplXyA+IHRoaXMubWF4Q2FjaGVTaXplXztcbiAgfVxuXG4gIC8qKlxuICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICovXG4gIGV4cGlyZSgpIHtcbiAgICBpZiAodGhpcy5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICBsZXQgaSA9IDA7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmNhY2hlXykge1xuICAgICAgICBjb25zdCBpY29uSW1hZ2UgPSB0aGlzLmNhY2hlX1trZXldO1xuICAgICAgICBpZiAoKGkrKyAmIDMpID09PSAwICYmICFpY29uSW1hZ2UuaGFzTGlzdGVuZXIoKSkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlX1trZXldO1xuICAgICAgICAgIC0tdGhpcy5jYWNoZVNpemVfO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICAgKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn0gY29sb3IgQ29sb3IuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vSWNvbkltYWdlLmpzXCIpLmRlZmF1bHR9IEljb24gaW1hZ2UuXG4gICAqL1xuICBnZXQoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpIHtcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpO1xuICAgIHJldHVybiBrZXkgaW4gdGhpcy5jYWNoZV8gPyB0aGlzLmNhY2hlX1trZXldIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNyYy5cbiAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vSWNvbkltYWdlLmpzXCIpLmRlZmF1bHR9IGljb25JbWFnZSBJY29uIGltYWdlLlxuICAgKi9cbiAgc2V0KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yLCBpY29uSW1hZ2UpIHtcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpO1xuICAgIHRoaXMuY2FjaGVfW2tleV0gPSBpY29uSW1hZ2U7XG4gICAgKyt0aGlzLmNhY2hlU2l6ZV87XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjYWNoZSBzaXplIG9mIHRoZSBpY29uIGNhY2hlLiBEZWZhdWx0IGlzIGAzMmAuIENoYW5nZSB0aGlzIHZhbHVlIHdoZW5cbiAgICogeW91ciBtYXAgdXNlcyBtb3JlIHRoYW4gMzIgZGlmZmVyZW50IGljb24gaW1hZ2VzIGFuZCB5b3UgYXJlIG5vdCBjYWNoaW5nIGljb25cbiAgICogc3R5bGVzIG9uIHRoZSBhcHBsaWNhdGlvbiBsZXZlbC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heENhY2hlU2l6ZSBDYWNoZSBtYXggc2l6ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0U2l6ZShtYXhDYWNoZVNpemUpIHtcbiAgICB0aGlzLm1heENhY2hlU2l6ZV8gPSBtYXhDYWNoZVNpemU7XG4gICAgdGhpcy5leHBpcmUoKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ2FjaGUga2V5LlxuICovXG5mdW5jdGlvbiBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpIHtcbiAgY29uc3QgY29sb3JTdHJpbmcgPSBjb2xvciA/IGFzU3RyaW5nKGNvbG9yKSA6ICdudWxsJztcbiAgcmV0dXJuIGNyb3NzT3JpZ2luICsgJzonICsgc3JjICsgJzonICsgY29sb3JTdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEljb25JbWFnZUNhY2hlO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL0ljb25JbWFnZUNhY2hlfkljb25JbWFnZUNhY2hlfSBmb3JcbiAqIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvSWNvbn5JY29ufSBpbWFnZXMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBzaGFyZWQgPSBuZXcgSWNvbkltYWdlQ2FjaGUoKTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9NYXBcbiAqL1xuaW1wb3J0IERpc3Bvc2FibGUgZnJvbSAnLi4vRGlzcG9zYWJsZS5qcyc7XG5pbXBvcnQge1RSVUV9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge2Fic3RyYWN0fSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7Y29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLCBtYWtlSW52ZXJzZX0gZnJvbSAnLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7Z2V0V2lkdGh9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge3NoYXJlZCBhcyBpY29uSW1hZ2VDYWNoZX0gZnJvbSAnLi4vc3R5bGUvSWNvbkltYWdlQ2FjaGUuanMnO1xuaW1wb3J0IHtpblZpZXd9IGZyb20gJy4uL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCB7d3JhcFh9IGZyb20gJy4uL2Nvb3JkaW5hdGUuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIEhpdE1hdGNoXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gZGlzdGFuY2VTcSBTcXVhcmVkIGRpc3RhbmNlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3ZlY3Rvci5qc1wiKS5GZWF0dXJlQ2FsbGJhY2s8VD59IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHRlbXBsYXRlIFRcbiAqL1xuXG4vKipcbiAqIEBhYnN0cmFjdFxuICovXG5jbGFzcyBNYXBSZW5kZXJlciBleHRlbmRzIERpc3Bvc2FibGUge1xuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG1hcCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLm1hcF8gPSBtYXA7XG4gIH1cblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqL1xuICBkaXNwYXRjaFJlbmRlckV2ZW50KHR5cGUsIGZyYW1lU3RhdGUpIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgY2FsY3VsYXRlTWF0cmljZXMyRChmcmFtZVN0YXRlKSB7XG4gICAgY29uc3Qgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgY29uc3QgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0gPSBmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtO1xuICAgIGNvbnN0IHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtID0gZnJhbWVTdGF0ZS5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybTtcblxuICAgIGNvbXBvc2VUcmFuc2Zvcm0oXG4gICAgICBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSxcbiAgICAgIGZyYW1lU3RhdGUuc2l6ZVswXSAvIDIsXG4gICAgICBmcmFtZVN0YXRlLnNpemVbMV0gLyAyLFxuICAgICAgMSAvIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLFxuICAgICAgLTEgLyB2aWV3U3RhdGUucmVzb2x1dGlvbixcbiAgICAgIC12aWV3U3RhdGUucm90YXRpb24sXG4gICAgICAtdmlld1N0YXRlLmNlbnRlclswXSxcbiAgICAgIC12aWV3U3RhdGUuY2VudGVyWzFdXG4gICAgKTtcblxuICAgIG1ha2VJbnZlcnNlKHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNoZWNrV3JhcHBlZCBDaGVjayBmb3Igd3JhcHBlZCBnZW9tZXRyaWVzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdmVjdG9yLmpzXCIpLkZlYXR1cmVDYWxsYmFjazxUPn0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtTfSB0aGlzQXJnIFZhbHVlIHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgYGNhbGxiYWNrYC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBVLCBpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gbGF5ZXJGaWx0ZXIgTGF5ZXIgZmlsdGVyXG4gICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAqICAgICByZXR1cm5zIGB0cnVlYCB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuICBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZVxuICAgKiAgICAgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICAgKiBAcGFyYW0ge1V9IHRoaXNBcmcyIFZhbHVlIHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgYGxheWVyRmlsdGVyYC5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICogQHRlbXBsYXRlIFMsVCxVXG4gICAqL1xuICBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShcbiAgICBjb29yZGluYXRlLFxuICAgIGZyYW1lU3RhdGUsXG4gICAgaGl0VG9sZXJhbmNlLFxuICAgIGNoZWNrV3JhcHBlZCxcbiAgICBjYWxsYmFjayxcbiAgICB0aGlzQXJnLFxuICAgIGxheWVyRmlsdGVyLFxuICAgIHRoaXNBcmcyXG4gICkge1xuICAgIGxldCByZXN1bHQ7XG4gICAgY29uc3Qgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG1hbmFnZWQgTWFuYWdlZCBsYXllci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKG1hbmFnZWQsIGZlYXR1cmUsIGxheWVyLCBnZW9tZXRyeSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgZmVhdHVyZSwgbWFuYWdlZCA/IGxheWVyIDogbnVsbCwgZ2VvbWV0cnkpO1xuICAgIH1cblxuICAgIGNvbnN0IHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcblxuICAgIGNvbnN0IHRyYW5zbGF0ZWRDb29yZGluYXRlID0gd3JhcFgoY29vcmRpbmF0ZS5zbGljZSgpLCBwcm9qZWN0aW9uKTtcbiAgICBjb25zdCBvZmZzZXRzID0gW1swLCAwXV07XG4gICAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJiBjaGVja1dyYXBwZWQpIHtcbiAgICAgIGNvbnN0IHByb2plY3Rpb25FeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgICAgY29uc3Qgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgb2Zmc2V0cy5wdXNoKFstd29ybGRXaWR0aCwgMF0sIFt3b3JsZFdpZHRoLCAwXSk7XG4gICAgfVxuXG4gICAgY29uc3QgbGF5ZXJTdGF0ZXMgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgY29uc3QgbnVtTGF5ZXJzID0gbGF5ZXJTdGF0ZXMubGVuZ3RoO1xuXG4gICAgY29uc3QgbWF0Y2hlcyA9IC8qKiBAdHlwZSB7QXJyYXk8SGl0TWF0Y2g8VD4+fSAqLyAoW10pO1xuICAgIGNvbnN0IHRtcENvb3JkID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvZmZzZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gbnVtTGF5ZXJzIC0gMTsgaiA+PSAwOyAtLWopIHtcbiAgICAgICAgY29uc3QgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzW2pdO1xuICAgICAgICBjb25zdCBsYXllciA9IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBsYXllci5oYXNSZW5kZXJlcigpICYmXG4gICAgICAgICAgaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkgJiZcbiAgICAgICAgICBsYXllckZpbHRlci5jYWxsKHRoaXNBcmcyLCBsYXllcilcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgbGF5ZXJSZW5kZXJlciA9IGxheWVyLmdldFJlbmRlcmVyKCk7XG4gICAgICAgICAgY29uc3Qgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICAgICAgaWYgKGxheWVyUmVuZGVyZXIgJiYgc291cmNlKSB7XG4gICAgICAgICAgICBjb25zdCBjb29yZGluYXRlcyA9IHNvdXJjZS5nZXRXcmFwWCgpXG4gICAgICAgICAgICAgID8gdHJhbnNsYXRlZENvb3JkaW5hdGVcbiAgICAgICAgICAgICAgOiBjb29yZGluYXRlO1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZS5iaW5kKFxuICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICBsYXllclN0YXRlLm1hbmFnZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0bXBDb29yZFswXSA9IGNvb3JkaW5hdGVzWzBdICsgb2Zmc2V0c1tpXVswXTtcbiAgICAgICAgICAgIHRtcENvb3JkWzFdID0gY29vcmRpbmF0ZXNbMV0gKyBvZmZzZXRzW2ldWzFdO1xuICAgICAgICAgICAgcmVzdWx0ID0gbGF5ZXJSZW5kZXJlci5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShcbiAgICAgICAgICAgICAgdG1wQ29vcmQsXG4gICAgICAgICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgICAgICAgIGhpdFRvbGVyYW5jZSxcbiAgICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgICAgICAgIG1hdGNoZXNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3Qgb3JkZXIgPSAxIC8gbWF0Y2hlcy5sZW5ndGg7XG4gICAgbWF0Y2hlcy5mb3JFYWNoKChtLCBpKSA9PiAobS5kaXN0YW5jZVNxICs9IGkgKiBvcmRlcikpO1xuICAgIG1hdGNoZXMuc29ydCgoYSwgYikgPT4gYS5kaXN0YW5jZVNxIC0gYi5kaXN0YW5jZVNxKTtcbiAgICBtYXRjaGVzLnNvbWUoKG0pID0+IHtcbiAgICAgIHJldHVybiAocmVzdWx0ID0gbS5jYWxsYmFjayhtLmZlYXR1cmUsIG0ubGF5ZXIsIG0uZ2VvbWV0cnkpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICogQHBhcmFtIHtib29sZWFufSBjaGVja1dyYXBwZWQgQ2hlY2sgZm9yIHdyYXBwZWQgZ2VvbWV0cmllcy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBVLCBpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gbGF5ZXJGaWx0ZXIgTGF5ZXIgZmlsdGVyXG4gICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAqICAgICByZXR1cm5zIGB0cnVlYCB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuICBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZVxuICAgKiAgICAgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICAgKiBAcGFyYW0ge1V9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGF5ZXJGaWx0ZXJgLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyB0aGVyZSBhIGZlYXR1cmUgYXQgdGhlIGdpdmVuIGNvb3JkaW5hdGU/XG4gICAqIEB0ZW1wbGF0ZSBVXG4gICAqL1xuICBoYXNGZWF0dXJlQXRDb29yZGluYXRlKFxuICAgIGNvb3JkaW5hdGUsXG4gICAgZnJhbWVTdGF0ZSxcbiAgICBoaXRUb2xlcmFuY2UsXG4gICAgY2hlY2tXcmFwcGVkLFxuICAgIGxheWVyRmlsdGVyLFxuICAgIHRoaXNBcmdcbiAgKSB7XG4gICAgY29uc3QgaGFzRmVhdHVyZSA9IHRoaXMuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoXG4gICAgICBjb29yZGluYXRlLFxuICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgIGhpdFRvbGVyYW5jZSxcbiAgICAgIGNoZWNrV3JhcHBlZCxcbiAgICAgIFRSVUUsXG4gICAgICB0aGlzLFxuICAgICAgbGF5ZXJGaWx0ZXIsXG4gICAgICB0aGlzQXJnXG4gICAgKTtcblxuICAgIHJldHVybiBoYXNGZWF0dXJlICE9PSB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR9IE1hcC5cbiAgICovXG4gIGdldE1hcCgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXBfO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlci5cbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKi9cbiAgcmVuZGVyRnJhbWUoZnJhbWVTdGF0ZSkge1xuICAgIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgc2NoZWR1bGVFeHBpcmVJY29uQ2FjaGUoZnJhbWVTdGF0ZSkge1xuICAgIGlmIChpY29uSW1hZ2VDYWNoZS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaChleHBpcmVJY29uQ2FjaGUpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICovXG5mdW5jdGlvbiBleHBpcmVJY29uQ2FjaGUobWFwLCBmcmFtZVN0YXRlKSB7XG4gIGljb25JbWFnZUNhY2hlLmV4cGlyZSgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBNYXBSZW5kZXJlcjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9jc3NcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZvbnRQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge3N0cmluZ30gc3R5bGUgU3R5bGUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdmFyaWFudCBWYXJpYW50LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHdlaWdodCBXZWlnaHQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gc2l6ZSBTaXplLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGxpbmVIZWlnaHQgTGluZUhlaWdodC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBmYW1pbHkgRmFtaWx5LlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBmYW1pbGllcyBGYW1pbGllcy5cbiAqL1xuXG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgZm9yIGhpZGRlbiBmZWF0dXJlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IENMQVNTX0hJRERFTiA9ICdvbC1oaWRkZW4nO1xuXG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgdGhhdCB3ZSdsbCBnaXZlIHRoZSBET00gZWxlbWVudHMgdG8gaGF2ZSB0aGVtIHNlbGVjdGFibGUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgQ0xBU1NfU0VMRUNUQUJMRSA9ICdvbC1zZWxlY3RhYmxlJztcblxuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRvIGhhdmUgdGhlbSB1bnNlbGVjdGFibGUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgQ0xBU1NfVU5TRUxFQ1RBQkxFID0gJ29sLXVuc2VsZWN0YWJsZSc7XG5cbi8qKlxuICogVGhlIENTUyBjbGFzcyBmb3IgdW5zdXBwb3J0ZWQgZmVhdHVyZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBDTEFTU19VTlNVUFBPUlRFRCA9ICdvbC11bnN1cHBvcnRlZCc7XG5cbi8qKlxuICogVGhlIENTUyBjbGFzcyBmb3IgY29udHJvbHMuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgQ0xBU1NfQ09OVFJPTCA9ICdvbC1jb250cm9sJztcblxuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRoYXQgYXJlIGNvbGxhcHNlZCwgaS5lLlxuICogdG8gdGhvc2UgZWxlbWVudHMgd2hpY2ggdXN1YWxseSBjYW4gYmUgZXhwYW5kZWQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgQ0xBU1NfQ09MTEFQU0VEID0gJ29sLWNvbGxhcHNlZCc7XG5cbi8qKlxuICogRnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDEzNTY5Ny9yZWdleC10by1wYXJzZS1hbnktY3NzLWZvbnRcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKi9cbmNvbnN0IGZvbnRSZWdFeCA9IG5ldyBSZWdFeHAoXG4gIFtcbiAgICAnXlxcXFxzKig/PSg/Oig/OlstYS16XStcXFxccyopezAsMn0oaXRhbGljfG9ibGlxdWUpKT8pJyxcbiAgICAnKD89KD86KD86Wy1hLXpdK1xcXFxzKil7MCwyfShzbWFsbC1jYXBzKSk/KScsXG4gICAgJyg/PSg/Oig/OlstYS16XStcXFxccyopezAsMn0oYm9sZCg/OmVyKT98bGlnaHRlcnxbMS05XTAwICkpPyknLFxuICAgICcoPzooPzpub3JtYWx8XFxcXDF8XFxcXDJ8XFxcXDMpXFxcXHMqKXswLDN9KCg/Onh4Py0pPycsXG4gICAgJyg/OnNtYWxsfGxhcmdlKXxtZWRpdW18c21hbGxlcnxsYXJnZXJ8W1xcXFwuXFxcXGRdKyg/OlxcXFwlfGlufFtjZW1dbXxleHxwW2N0eF0pKScsXG4gICAgJyg/OlxcXFxzKlxcXFwvXFxcXHMqKG5vcm1hbHxbXFxcXC5cXFxcZF0rKD86XFxcXCV8aW58W2NlbV1tfGV4fHBbY3R4XSk/KSknLFxuICAgICc/XFxcXHMqKFstLFxcXFxcIlxcXFxcXCdcXFxcc2Etel0rPylcXFxccyokJyxcbiAgXS5qb2luKCcnKSxcbiAgJ2knXG4pO1xuY29uc3QgZm9udFJlZ0V4TWF0Y2hJbmRleCA9IFtcbiAgJ3N0eWxlJyxcbiAgJ3ZhcmlhbnQnLFxuICAnd2VpZ2h0JyxcbiAgJ3NpemUnLFxuICAnbGluZUhlaWdodCcsXG4gICdmYW1pbHknLFxuXTtcblxuLyoqXG4gKiBHZXQgdGhlIGxpc3Qgb2YgZm9udCBmYW1pbGllcyBmcm9tIGEgZm9udCBzcGVjLiAgTm90ZSB0aGF0IHRoaXMgZG9lc24ndCB3b3JrXG4gKiBmb3IgZm9udCBmYW1pbGllcyB0aGF0IGhhdmUgY29tbWFzIGluIHRoZW0uXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udFNwZWMgVGhlIENTUyBmb250IHByb3BlcnR5LlxuICogQHJldHVybiB7Rm9udFBhcmFtZXRlcnN8bnVsbH0gVGhlIGZvbnQgcGFyYW1ldGVycyAob3IgbnVsbCBpZiB0aGUgaW5wdXQgc3BlYyBpcyBpbnZhbGlkKS5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEZvbnRQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKGZvbnRTcGVjKSB7XG4gIGNvbnN0IG1hdGNoID0gZm9udFNwZWMubWF0Y2goZm9udFJlZ0V4KTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHN0eWxlID0gLyoqIEB0eXBlIHtGb250UGFyYW1ldGVyc30gKi8gKHtcbiAgICBsaW5lSGVpZ2h0OiAnbm9ybWFsJyxcbiAgICBzaXplOiAnMS4yZW0nLFxuICAgIHN0eWxlOiAnbm9ybWFsJyxcbiAgICB3ZWlnaHQ6ICdub3JtYWwnLFxuICAgIHZhcmlhbnQ6ICdub3JtYWwnLFxuICB9KTtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZm9udFJlZ0V4TWF0Y2hJbmRleC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgY29uc3QgdmFsdWUgPSBtYXRjaFtpICsgMV07XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHN0eWxlW2ZvbnRSZWdFeE1hdGNoSW5kZXhbaV1dID0gdmFsdWU7XG4gICAgfVxuICB9XG4gIHN0eWxlLmZhbWlsaWVzID0gc3R5bGUuZmFtaWx5LnNwbGl0KC8sXFxzPy8pO1xuICByZXR1cm4gc3R5bGU7XG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXNcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCB7V09SS0VSX09GRlNDUkVFTl9DQU5WQVN9IGZyb20gJy4uL2hhcy5qcyc7XG5pbXBvcnQge2NsZWFyfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHtjcmVhdGVDYW52YXNDb250ZXh0MkR9IGZyb20gJy4uL2RvbS5qcyc7XG5pbXBvcnQge2dldEZvbnRQYXJhbWV0ZXJzfSBmcm9tICcuLi9jc3MuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsnQ2lyY2xlJyB8ICdJbWFnZScgfCAnTGluZVN0cmluZycgfCAnUG9seWdvbicgfCAnVGV4dCcgfCAnRGVmYXVsdCd9IEJ1aWxkZXJUeXBlXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaWxsU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gZmlsbFN0eWxlIEZpbGxTdHlsZS5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIExhYmVsXG4gKiBAcHJvcGVydHkge251bWJlcn0gd2lkdGggV2lkdGguXG4gKiBAcHJvcGVydHkge251bWJlcn0gaGVpZ2h0IEhlaWdodC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nfG51bWJlcj59IGNvbnRleHRJbnN0cnVjdGlvbnMgQ29udGV4dEluc3RydWN0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZpbGxTdHJva2VTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbY3VycmVudEZpbGxTdHlsZV0gQ3VycmVudCBGaWxsU3R5bGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtjdXJyZW50U3Ryb2tlU3R5bGVdIEN1cnJlbnQgU3Ryb2tlU3R5bGUuXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IFtjdXJyZW50TGluZUNhcF0gQ3VycmVudCBMaW5lQ2FwLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBjdXJyZW50TGluZURhc2ggQ3VycmVudCBMaW5lRGFzaC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3VycmVudExpbmVEYXNoT2Zmc2V0XSBDdXJyZW50IExpbmVEYXNoT2Zmc2V0LlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gW2N1cnJlbnRMaW5lSm9pbl0gQ3VycmVudCBMaW5lSm9pbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3VycmVudExpbmVXaWR0aF0gQ3VycmVudCBMaW5lV2lkdGguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRNaXRlckxpbWl0XSBDdXJyZW50IE1pdGVyTGltaXQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xhc3RTdHJva2VdIExhc3Qgc3Ryb2tlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbZmlsbFN0eWxlXSBGaWxsU3R5bGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtzdHJva2VTdHlsZV0gU3Ryb2tlU3R5bGUuXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IFtsaW5lQ2FwXSBMaW5lQ2FwLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBsaW5lRGFzaCBMaW5lRGFzaC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGluZURhc2hPZmZzZXRdIExpbmVEYXNoT2Zmc2V0LlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gW2xpbmVKb2luXSBMaW5lSm9pbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGluZVdpZHRoXSBMaW5lV2lkdGguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pdGVyTGltaXRdIE1pdGVyTGltaXQuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdHJva2VTdGF0ZVxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lQ2FwfSBsaW5lQ2FwIExpbmVDYXAuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGxpbmVEYXNoIExpbmVEYXNoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGxpbmVEYXNoT2Zmc2V0IExpbmVEYXNoT2Zmc2V0LlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gbGluZUpvaW4gTGluZUpvaW4uXG4gKiBAcHJvcGVydHkge251bWJlcn0gbGluZVdpZHRoIExpbmVXaWR0aC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaXRlckxpbWl0IE1pdGVyTGltaXQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IHN0cm9rZVN0eWxlIFN0cm9rZVN0eWxlLlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gVGV4dFN0YXRlXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZm9udCBGb250LlxuICogQHByb3BlcnR5IHtDYW52YXNUZXh0QWxpZ259IFt0ZXh0QWxpZ25dIFRleHRBbGlnbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVwZWF0XSBSZXBlYXQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1RleHQuanNcIikuVGV4dEp1c3RpZnl9IFtqdXN0aWZ5XSBKdXN0aWZ5LlxuICogQHByb3BlcnR5IHtDYW52YXNUZXh0QmFzZWxpbmV9IHRleHRCYXNlbGluZSBUZXh0QmFzZWxpbmUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1RleHQuanNcIikuVGV4dFBsYWNlbWVudH0gW3BsYWNlbWVudF0gUGxhY2VtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhBbmdsZV0gTWF4QW5nbGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdmVyZmxvd10gT3ZlcmZsb3cuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL0ZpbGwuanNcIikuZGVmYXVsdH0gW2JhY2tncm91bmRGaWxsXSBCYWNrZ3JvdW5kRmlsbC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc3R5bGUvU3Ryb2tlLmpzXCIpLmRlZmF1bHR9IFtiYWNrZ3JvdW5kU3Ryb2tlXSBCYWNrZ3JvdW5kU3Ryb2tlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFtzY2FsZV0gU2NhbGUuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtwYWRkaW5nXSBQYWRkaW5nLlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU2VyaWFsaXphYmxlSW5zdHJ1Y3Rpb25zXG4gKiBAcHJvcGVydHkge0FycmF5PCo+fSBpbnN0cnVjdGlvbnMgVGhlIHJlbmRlcmluZyBpbnN0cnVjdGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PCo+fSBoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMgVGhlIHJlbmRlcmluZyBoaXQgZGV0ZWN0aW9uIGluc3RydWN0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgVGhlIGFycmF5IG9mIGFsbCBjb29yZGluYXRlcy5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIFRleHRTdGF0ZT59IFt0ZXh0U3RhdGVzXSBUaGUgdGV4dCBzdGF0ZXMgKGRlY2x1dHRlcmluZykuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBGaWxsU3RhdGU+fSBbZmlsbFN0YXRlc10gVGhlIGZpbGwgc3RhdGVzIChkZWNsdXR0ZXJpbmcpLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgU3Ryb2tlU3RhdGU+fSBbc3Ryb2tlU3RhdGVzXSBUaGUgc3Ryb2tlIHN0YXRlcyAoZGVjbHV0dGVyaW5nKS5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3Q8bnVtYmVyLCBpbXBvcnQoXCIuL2NhbnZhcy9FeGVjdXRvci5qc1wiKS5SZXBsYXlJbWFnZU9yTGFiZWxBcmdzPn0gRGVjbHV0dGVySW1hZ2VXaXRoVGV4dFxuICovXG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdEZvbnQgPSAnMTBweCBzYW5zLXNlcmlmJztcblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdEZpbGxTdHlsZSA9ICcjMDAwJztcblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtDYW52YXNMaW5lQ2FwfVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdExpbmVDYXAgPSAncm91bmQnO1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0TGluZURhc2ggPSBbXTtcblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0TGluZURhc2hPZmZzZXQgPSAwO1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0NhbnZhc0xpbmVKb2lufVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdExpbmVKb2luID0gJ3JvdW5kJztcblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0TWl0ZXJMaW1pdCA9IDEwO1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9XG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0U3Ryb2tlU3R5bGUgPSAnIzAwMCc7XG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7Q2FudmFzVGV4dEFsaWdufVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdFRleHRBbGlnbiA9ICdjZW50ZXInO1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0NhbnZhc1RleHRCYXNlbGluZX1cbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRUZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdFBhZGRpbmcgPSBbMCwgMCwgMCwgMF07XG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdExpbmVXaWR0aCA9IDE7XG5cbi8qKlxuICogQHR5cGUge0Jhc2VPYmplY3R9XG4gKi9cbmV4cG9ydCBjb25zdCBjaGVja2VkRm9udHMgPSBuZXcgQmFzZU9iamVjdCgpO1xuXG4vKipcbiAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gKi9cbmxldCBtZWFzdXJlQ29udGV4dCA9IG51bGw7XG5cbi8qKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xubGV0IG1lYXN1cmVGb250O1xuXG4vKipcbiAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAqL1xuZXhwb3J0IGNvbnN0IHRleHRIZWlnaHRzID0ge307XG5cbi8qKlxuICogQ2xlYXJzIHRoZSBsYWJlbCBjYWNoZSB3aGVuIGEgZm9udCBiZWNvbWVzIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3BlYyBDU1MgZm9udCBzcGVjLlxuICovXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJGb250ID0gKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgcmV0cmllcyA9IDEwMDtcbiAgY29uc3Qgc2l6ZSA9ICczMnB4ICc7XG4gIGNvbnN0IHJlZmVyZW5jZUZvbnRzID0gWydtb25vc3BhY2UnLCAnc2VyaWYnXTtcbiAgY29uc3QgbGVuID0gcmVmZXJlbmNlRm9udHMubGVuZ3RoO1xuICBjb25zdCB0ZXh0ID0gJ3dteXR6aWxXTVlUWklMQCMvJj8kJTEwXFx1RjAxMyc7XG4gIGxldCBpbnRlcnZhbCwgcmVmZXJlbmNlV2lkdGg7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3R5bGUgQ3NzIGZvbnQtc3R5bGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvbnRXZWlnaHQgQ3NzIGZvbnQtd2VpZ2h0XG4gICAqIEBwYXJhbSB7Kn0gZm9udEZhbWlseSBDc3MgZm9udC1mYW1pbHlcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gRm9udCB3aXRoIHN0eWxlIGFuZCB3ZWlnaHQgaXMgYXZhaWxhYmxlXG4gICAqL1xuICBmdW5jdGlvbiBpc0F2YWlsYWJsZShmb250U3R5bGUsIGZvbnRXZWlnaHQsIGZvbnRGYW1pbHkpIHtcbiAgICBsZXQgYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBjb25zdCByZWZlcmVuY2VGb250ID0gcmVmZXJlbmNlRm9udHNbaV07XG4gICAgICByZWZlcmVuY2VXaWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoXG4gICAgICAgIGZvbnRTdHlsZSArICcgJyArIGZvbnRXZWlnaHQgKyAnICcgKyBzaXplICsgcmVmZXJlbmNlRm9udCxcbiAgICAgICAgdGV4dFxuICAgICAgKTtcbiAgICAgIGlmIChmb250RmFtaWx5ICE9IHJlZmVyZW5jZUZvbnQpIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKFxuICAgICAgICAgIGZvbnRTdHlsZSArXG4gICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgZm9udFdlaWdodCArXG4gICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgc2l6ZSArXG4gICAgICAgICAgICBmb250RmFtaWx5ICtcbiAgICAgICAgICAgICcsJyArXG4gICAgICAgICAgICByZWZlcmVuY2VGb250LFxuICAgICAgICAgIHRleHRcbiAgICAgICAgKTtcbiAgICAgICAgLy8gSWYgd2lkdGggYW5kIHJlZmVyZW5jZVdpZHRoIGFyZSB0aGUgc2FtZSwgdGhlbiB0aGUgZmFsbGJhY2sgd2FzIHVzZWRcbiAgICAgICAgLy8gaW5zdGVhZCBvZiB0aGUgZm9udCB3ZSB3YW50ZWQsIHNvIHRoZSBmb250IGlzIG5vdCBhdmFpbGFibGUuXG4gICAgICAgIGF2YWlsYWJsZSA9IGF2YWlsYWJsZSAmJiB3aWR0aCAhPSByZWZlcmVuY2VXaWR0aDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGF2YWlsYWJsZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrKCkge1xuICAgIGxldCBkb25lID0gdHJ1ZTtcbiAgICBjb25zdCBmb250cyA9IGNoZWNrZWRGb250cy5nZXRLZXlzKCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZm9udHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3QgZm9udCA9IGZvbnRzW2ldO1xuICAgICAgaWYgKGNoZWNrZWRGb250cy5nZXQoZm9udCkgPCByZXRyaWVzKSB7XG4gICAgICAgIGlmIChpc0F2YWlsYWJsZS5hcHBseSh0aGlzLCBmb250LnNwbGl0KCdcXG4nKSkpIHtcbiAgICAgICAgICBjbGVhcih0ZXh0SGVpZ2h0cyk7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgbG9hZGVkIGZvbnRzIGFyZSBwaWNrZWQgdXAgYnkgU2FmYXJpXG4gICAgICAgICAgbWVhc3VyZUNvbnRleHQgPSBudWxsO1xuICAgICAgICAgIG1lYXN1cmVGb250ID0gdW5kZWZpbmVkO1xuICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoZm9udCwgcmV0cmllcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChmb250LCBjaGVja2VkRm9udHMuZ2V0KGZvbnQpICsgMSwgdHJ1ZSk7XG4gICAgICAgICAgZG9uZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChkb25lKSB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgIGludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICBjb25zdCBmb250ID0gZ2V0Rm9udFBhcmFtZXRlcnMoZm9udFNwZWMpO1xuICAgIGlmICghZm9udCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBmYW1pbGllcyA9IGZvbnQuZmFtaWxpZXM7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZmFtaWxpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3QgZmFtaWx5ID0gZmFtaWxpZXNbaV07XG4gICAgICBjb25zdCBrZXkgPSBmb250LnN0eWxlICsgJ1xcbicgKyBmb250LndlaWdodCArICdcXG4nICsgZmFtaWx5O1xuICAgICAgaWYgKGNoZWNrZWRGb250cy5nZXQoa2V5KSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNoZWNrZWRGb250cy5zZXQoa2V5LCByZXRyaWVzLCB0cnVlKTtcbiAgICAgICAgaWYgKCFpc0F2YWlsYWJsZShmb250LnN0eWxlLCBmb250LndlaWdodCwgZmFtaWx5KSkge1xuICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoa2V5LCAwLCB0cnVlKTtcbiAgICAgICAgICBpZiAoaW50ZXJ2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjaGVjaywgMzIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn0pKCk7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udCB0byB1c2UgZm9yIG1lYXN1cmluZy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gTWVhc3VyZW1lbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBtZWFzdXJlVGV4dEhlaWdodCA9IChmdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAqL1xuICBsZXQgbWVhc3VyZUVsZW1lbnQ7XG4gIHJldHVybiBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICBsZXQgaGVpZ2h0ID0gdGV4dEhlaWdodHNbZm9udFNwZWNdO1xuICAgIGlmIChoZWlnaHQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoV09SS0VSX09GRlNDUkVFTl9DQU5WQVMpIHtcbiAgICAgICAgY29uc3QgZm9udCA9IGdldEZvbnRQYXJhbWV0ZXJzKGZvbnRTcGVjKTtcbiAgICAgICAgY29uc3QgbWV0cmljcyA9IG1lYXN1cmVUZXh0KGZvbnRTcGVjLCAnxb1nJyk7XG4gICAgICAgIGNvbnN0IGxpbmVIZWlnaHQgPSBpc05hTihOdW1iZXIoZm9udC5saW5lSGVpZ2h0KSlcbiAgICAgICAgICA/IDEuMlxuICAgICAgICAgIDogTnVtYmVyKGZvbnQubGluZUhlaWdodCk7XG4gICAgICAgIGhlaWdodCA9XG4gICAgICAgICAgbGluZUhlaWdodCAqXG4gICAgICAgICAgKG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQgKyBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIW1lYXN1cmVFbGVtZW50KSB7XG4gICAgICAgICAgbWVhc3VyZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICBtZWFzdXJlRWxlbWVudC5pbm5lckhUTUwgPSAnTSc7XG4gICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gJzAnO1xuICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLm1heEhlaWdodCA9ICdub25lJztcbiAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICcwJztcbiAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmxlZnQgPSAnLTk5OTk5cHgnO1xuICAgICAgICB9XG4gICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmZvbnQgPSBmb250U3BlYztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtZWFzdXJlRWxlbWVudCk7XG4gICAgICAgIGhlaWdodCA9IG1lYXN1cmVFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtZWFzdXJlRWxlbWVudCk7XG4gICAgICB9XG4gICAgICB0ZXh0SGVpZ2h0c1tmb250U3BlY10gPSBoZWlnaHQ7XG4gICAgfVxuICAgIHJldHVybiBoZWlnaHQ7XG4gIH07XG59KSgpO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICogQHJldHVybiB7VGV4dE1ldHJpY3N9IFRleHQgbWV0cmljcy5cbiAqL1xuZnVuY3Rpb24gbWVhc3VyZVRleHQoZm9udCwgdGV4dCkge1xuICBpZiAoIW1lYXN1cmVDb250ZXh0KSB7XG4gICAgbWVhc3VyZUNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoMSwgMSk7XG4gIH1cbiAgaWYgKGZvbnQgIT0gbWVhc3VyZUZvbnQpIHtcbiAgICBtZWFzdXJlQ29udGV4dC5mb250ID0gZm9udDtcbiAgICBtZWFzdXJlRm9udCA9IG1lYXN1cmVDb250ZXh0LmZvbnQ7XG4gIH1cbiAgcmV0dXJuIG1lYXN1cmVDb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCkge1xuICByZXR1cm4gbWVhc3VyZVRleHQoZm9udCwgdGV4dCkud2lkdGg7XG59XG5cbi8qKlxuICogTWVhc3VyZSB0ZXh0IHdpZHRoIHVzaW5nIGEgY2FjaGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBUaGUgZm9udC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIG1lYXN1cmUuXG4gKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIG51bWJlcj59IGNhY2hlIEEgbG9va3VwIG9mIGNhY2hlZCB3aWR0aHMgYnkgdGV4dC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHRleHQgd2lkdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZWFzdXJlQW5kQ2FjaGVUZXh0V2lkdGgoZm9udCwgdGV4dCwgY2FjaGUpIHtcbiAgaWYgKHRleHQgaW4gY2FjaGUpIHtcbiAgICByZXR1cm4gY2FjaGVbdGV4dF07XG4gIH1cbiAgY29uc3Qgd2lkdGggPSB0ZXh0XG4gICAgLnNwbGl0KCdcXG4nKVxuICAgIC5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IE1hdGgubWF4KHByZXYsIG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgY3VycikpLCAwKTtcbiAgY2FjaGVbdGV4dF0gPSB3aWR0aDtcbiAgcmV0dXJuIHdpZHRoO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7VGV4dFN0YXRlfSBiYXNlU3R5bGUgQmFzZSBzdHlsZS5cbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gY2h1bmtzIFRleHQgY2h1bmtzIHRvIG1lYXN1cmUuXG4gKiBAcmV0dXJuIHt7d2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHdpZHRoczogQXJyYXk8bnVtYmVyPiwgaGVpZ2h0czogQXJyYXk8bnVtYmVyPiwgbGluZVdpZHRoczogQXJyYXk8bnVtYmVyPn19fSBUZXh0IG1ldHJpY3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXh0RGltZW5zaW9ucyhiYXNlU3R5bGUsIGNodW5rcykge1xuICBjb25zdCB3aWR0aHMgPSBbXTtcbiAgY29uc3QgaGVpZ2h0cyA9IFtdO1xuICBjb25zdCBsaW5lV2lkdGhzID0gW107XG4gIGxldCB3aWR0aCA9IDA7XG4gIGxldCBsaW5lV2lkdGggPSAwO1xuICBsZXQgaGVpZ2h0ID0gMDtcbiAgbGV0IGxpbmVIZWlnaHQgPSAwO1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBjaHVua3MubGVuZ3RoOyBpIDw9IGlpOyBpICs9IDIpIHtcbiAgICBjb25zdCB0ZXh0ID0gY2h1bmtzW2ldO1xuICAgIGlmICh0ZXh0ID09PSAnXFxuJyB8fCBpID09PSBpaSkge1xuICAgICAgd2lkdGggPSBNYXRoLm1heCh3aWR0aCwgbGluZVdpZHRoKTtcbiAgICAgIGxpbmVXaWR0aHMucHVzaChsaW5lV2lkdGgpO1xuICAgICAgbGluZVdpZHRoID0gMDtcbiAgICAgIGhlaWdodCArPSBsaW5lSGVpZ2h0O1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IGZvbnQgPSBjaHVua3NbaSArIDFdIHx8IGJhc2VTdHlsZS5mb250O1xuICAgIGNvbnN0IGN1cnJlbnRXaWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCk7XG4gICAgd2lkdGhzLnB1c2goY3VycmVudFdpZHRoKTtcbiAgICBsaW5lV2lkdGggKz0gY3VycmVudFdpZHRoO1xuICAgIGNvbnN0IGN1cnJlbnRIZWlnaHQgPSBtZWFzdXJlVGV4dEhlaWdodChmb250KTtcbiAgICBoZWlnaHRzLnB1c2goY3VycmVudEhlaWdodCk7XG4gICAgbGluZUhlaWdodCA9IE1hdGgubWF4KGxpbmVIZWlnaHQsIGN1cnJlbnRIZWlnaHQpO1xuICB9XG4gIHJldHVybiB7d2lkdGgsIGhlaWdodCwgd2lkdGhzLCBoZWlnaHRzLCBsaW5lV2lkdGhzfTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFggWCBvZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WSBZIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUF0T2Zmc2V0KGNvbnRleHQsIHJvdGF0aW9uLCBvZmZzZXRYLCBvZmZzZXRZKSB7XG4gIGlmIChyb3RhdGlvbiAhPT0gMCkge1xuICAgIGNvbnRleHQudHJhbnNsYXRlKG9mZnNldFgsIG9mZnNldFkpO1xuICAgIGNvbnRleHQucm90YXRlKHJvdGF0aW9uKTtcbiAgICBjb250ZXh0LnRyYW5zbGF0ZSgtb2Zmc2V0WCwgLW9mZnNldFkpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybXxudWxsfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgT3BhY2l0eS5cbiAqIEBwYXJhbSB7TGFiZWx8SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBsYWJlbE9ySW1hZ2UgTGFiZWwuXG4gKiBAcGFyYW0ge251bWJlcn0gb3JpZ2luWCBPcmlnaW4gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcmlnaW5ZIE9yaWdpbiBZLlxuICogQHBhcmFtIHtudW1iZXJ9IHcgV2lkdGguXG4gKiBAcGFyYW0ge251bWJlcn0gaCBIZWlnaHQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBzY2FsZSBTY2FsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRyYXdJbWFnZU9yTGFiZWwoXG4gIGNvbnRleHQsXG4gIHRyYW5zZm9ybSxcbiAgb3BhY2l0eSxcbiAgbGFiZWxPckltYWdlLFxuICBvcmlnaW5YLFxuICBvcmlnaW5ZLFxuICB3LFxuICBoLFxuICB4LFxuICB5LFxuICBzY2FsZVxuKSB7XG4gIGNvbnRleHQuc2F2ZSgpO1xuXG4gIGlmIChvcGFjaXR5ICE9PSAxKSB7XG4gICAgY29udGV4dC5nbG9iYWxBbHBoYSAqPSBvcGFjaXR5O1xuICB9XG4gIGlmICh0cmFuc2Zvcm0pIHtcbiAgICBjb250ZXh0LnNldFRyYW5zZm9ybS5hcHBseShjb250ZXh0LCB0cmFuc2Zvcm0pO1xuICB9XG5cbiAgaWYgKC8qKiBAdHlwZSB7Kn0gKi8gKGxhYmVsT3JJbWFnZSkuY29udGV4dEluc3RydWN0aW9ucykge1xuICAgIC8vIGxhYmVsXG4gICAgY29udGV4dC50cmFuc2xhdGUoeCwgeSk7XG4gICAgY29udGV4dC5zY2FsZShzY2FsZVswXSwgc2NhbGVbMV0pO1xuICAgIGV4ZWN1dGVMYWJlbEluc3RydWN0aW9ucygvKiogQHR5cGUge0xhYmVsfSAqLyAobGFiZWxPckltYWdlKSwgY29udGV4dCk7XG4gIH0gZWxzZSBpZiAoc2NhbGVbMF0gPCAwIHx8IHNjYWxlWzFdIDwgMCkge1xuICAgIC8vIGZsaXBwZWQgaW1hZ2VcbiAgICBjb250ZXh0LnRyYW5zbGF0ZSh4LCB5KTtcbiAgICBjb250ZXh0LnNjYWxlKHNjYWxlWzBdLCBzY2FsZVsxXSk7XG4gICAgY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gKi8gKFxuICAgICAgICBsYWJlbE9ySW1hZ2VcbiAgICAgICksXG4gICAgICBvcmlnaW5YLFxuICAgICAgb3JpZ2luWSxcbiAgICAgIHcsXG4gICAgICBoLFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICB3LFxuICAgICAgaFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gaWYgaW1hZ2Ugbm90IGZsaXBwZWQgdHJhbnNsYXRlIGFuZCBzY2FsZSBjYW4gYmUgYXZvaWRlZFxuICAgIGNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgLyoqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9ICovIChcbiAgICAgICAgbGFiZWxPckltYWdlXG4gICAgICApLFxuICAgICAgb3JpZ2luWCxcbiAgICAgIG9yaWdpblksXG4gICAgICB3LFxuICAgICAgaCxcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgdyAqIHNjYWxlWzBdLFxuICAgICAgaCAqIHNjYWxlWzFdXG4gICAgKTtcbiAgfVxuXG4gIGNvbnRleHQucmVzdG9yZSgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7TGFiZWx9IGxhYmVsIExhYmVsLlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZUxhYmVsSW5zdHJ1Y3Rpb25zKGxhYmVsLCBjb250ZXh0KSB7XG4gIGNvbnN0IGNvbnRleHRJbnN0cnVjdGlvbnMgPSBsYWJlbC5jb250ZXh0SW5zdHJ1Y3Rpb25zO1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBjb250ZXh0SW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaSA8IGlpOyBpICs9IDIpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb250ZXh0SW5zdHJ1Y3Rpb25zW2kgKyAxXSkpIHtcbiAgICAgIGNvbnRleHRbY29udGV4dEluc3RydWN0aW9uc1tpXV0uYXBwbHkoXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIGNvbnRleHRJbnN0cnVjdGlvbnNbaSArIDFdXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0W2NvbnRleHRJbnN0cnVjdGlvbnNbaV1dID0gY29udGV4dEluc3RydWN0aW9uc1tpICsgMV07XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvQ29tcG9zaXRlXG4gKi9cbmltcG9ydCBNYXBSZW5kZXJlciBmcm9tICcuL01hcC5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4uL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnQgZnJvbSAnLi4vcmVuZGVyL0V2ZW50LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge0NMQVNTX1VOU0VMRUNUQUJMRX0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7Y2hlY2tlZEZvbnRzfSBmcm9tICcuLi9yZW5kZXIvY2FudmFzLmpzJztcbmltcG9ydCB7aW5WaWV3fSBmcm9tICcuLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCB7cmVwbGFjZUNoaWxkcmVufSBmcm9tICcuLi9kb20uanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyBtYXAgcmVuZGVyZXIuXG4gKiBAYXBpXG4gKi9cbmNsYXNzIENvbXBvc2l0ZU1hcFJlbmRlcmVyIGV4dGVuZHMgTWFwUmVuZGVyZXIge1xuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG1hcCkge1xuICAgIHN1cGVyKG1hcCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgKi9cbiAgICB0aGlzLmZvbnRDaGFuZ2VMaXN0ZW5lcktleV8gPSBsaXN0ZW4oXG4gICAgICBjaGVja2VkRm9udHMsXG4gICAgICBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsXG4gICAgICBtYXAucmVkcmF3VGV4dC5iaW5kKG1hcClcbiAgICApO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5lbGVtZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHN0eWxlID0gdGhpcy5lbGVtZW50Xy5zdHlsZTtcbiAgICBzdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIHN0eWxlLnpJbmRleCA9ICcwJztcblxuICAgIHRoaXMuZWxlbWVudF8uY2xhc3NOYW1lID0gQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyBvbC1sYXllcnMnO1xuXG4gICAgY29uc3QgY29udGFpbmVyID0gbWFwLmdldFZpZXdwb3J0KCk7XG4gICAgY29udGFpbmVyLmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnRfLCBjb250YWluZXIuZmlyc3RDaGlsZCB8fCBudWxsKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PEhUTUxFbGVtZW50Pn1cbiAgICAgKi9cbiAgICB0aGlzLmNoaWxkcmVuXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqL1xuICBkaXNwYXRjaFJlbmRlckV2ZW50KHR5cGUsIGZyYW1lU3RhdGUpIHtcbiAgICBjb25zdCBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIGlmIChtYXAuaGFzTGlzdGVuZXIodHlwZSkpIHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IFJlbmRlckV2ZW50KHR5cGUsIHVuZGVmaW5lZCwgZnJhbWVTdGF0ZSk7XG4gICAgICBtYXAuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuICB9XG5cbiAgZGlzcG9zZUludGVybmFsKCkge1xuICAgIHVubGlzdGVuQnlLZXkodGhpcy5mb250Q2hhbmdlTGlzdGVuZXJLZXlfKTtcbiAgICB0aGlzLmVsZW1lbnRfLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50Xyk7XG4gICAgc3VwZXIuZGlzcG9zZUludGVybmFsKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyLlxuICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICovXG4gIHJlbmRlckZyYW1lKGZyYW1lU3RhdGUpIHtcbiAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgICAgdGhpcy5lbGVtZW50Xy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmNhbGN1bGF0ZU1hdHJpY2VzMkQoZnJhbWVTdGF0ZSk7XG4gICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50KFJlbmRlckV2ZW50VHlwZS5QUkVDT01QT1NFLCBmcmFtZVN0YXRlKTtcblxuICAgIGNvbnN0IGxheWVyU3RhdGVzQXJyYXkgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGEuekluZGV4IC0gYi56SW5kZXg7XG4gICAgfSk7XG4gICAgY29uc3Qgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG5cbiAgICB0aGlzLmNoaWxkcmVuXy5sZW5ndGggPSAwO1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9sYXllci9CYXNlVmVjdG9yLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqL1xuICAgIGNvbnN0IGRlY2x1dHRlckxheWVycyA9IFtdO1xuICAgIGxldCBwcmV2aW91c0VsZW1lbnQgPSBudWxsO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3QgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzQXJyYXlbaV07XG4gICAgICBmcmFtZVN0YXRlLmxheWVySW5kZXggPSBpO1xuXG4gICAgICBjb25zdCBsYXllciA9IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICBjb25zdCBzb3VyY2VTdGF0ZSA9IGxheWVyLmdldFNvdXJjZVN0YXRlKCk7XG4gICAgICBpZiAoXG4gICAgICAgICFpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSB8fFxuICAgICAgICAoc291cmNlU3RhdGUgIT0gJ3JlYWR5JyAmJiBzb3VyY2VTdGF0ZSAhPSAndW5kZWZpbmVkJylcbiAgICAgICkge1xuICAgICAgICBsYXllci51bnJlbmRlcigpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZWxlbWVudCA9IGxheWVyLnJlbmRlcihmcmFtZVN0YXRlLCBwcmV2aW91c0VsZW1lbnQpO1xuICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGVsZW1lbnQgIT09IHByZXZpb3VzRWxlbWVudCkge1xuICAgICAgICB0aGlzLmNoaWxkcmVuXy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICBwcmV2aW91c0VsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgfVxuICAgICAgaWYgKCdnZXREZWNsdXR0ZXInIGluIGxheWVyKSB7XG4gICAgICAgIGRlY2x1dHRlckxheWVycy5wdXNoKFxuICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vbGF5ZXIvQmFzZVZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSBkZWNsdXR0ZXJMYXllcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIGRlY2x1dHRlckxheWVyc1tpXS5yZW5kZXJEZWNsdXR0ZXIoZnJhbWVTdGF0ZSk7XG4gICAgfVxuXG4gICAgcmVwbGFjZUNoaWxkcmVuKHRoaXMuZWxlbWVudF8sIHRoaXMuY2hpbGRyZW5fKTtcblxuICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudChSZW5kZXJFdmVudFR5cGUuUE9TVENPTVBPU0UsIGZyYW1lU3RhdGUpO1xuXG4gICAgaWYgKCF0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgIHRoaXMuZWxlbWVudF8uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLnNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlKGZyYW1lU3RhdGUpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbXBvc2l0ZU1hcFJlbmRlcmVyO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0dyb3VwXG4gKi9cbmltcG9ydCBCYXNlTGF5ZXIgZnJvbSAnLi9CYXNlLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4uL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4uL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge2NsZWFyfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHtnZXRJbnRlcnNlY3Rpb259IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi4vZXZlbnRzLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7J2FkZGxheWVyJ3wncmVtb3ZlbGF5ZXInfSBFdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgbGF5ZXIgZ3JvdXAgdHJpZ2dlcnMgJ2FkZGxheWVyJyBhbmQgJ3JlbW92ZWxheWVyJyBldmVudHMgd2hlbiBsYXllcnMgYXJlIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbVxuICogdGhlIGdyb3VwIG9yIG9uZSBvZiBpdHMgY2hpbGQgZ3JvdXBzLiAgV2hlbiBhIGxheWVyIGdyb3VwIGlzIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbSBhbm90aGVyIGxheWVyIGdyb3VwLFxuICogYSBzaW5nbGUgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQgKGluc3RlYWQgb2Ygb25lIHBlciBsYXllciBpbiB0aGUgZ3JvdXAgYWRkZWQgb3IgcmVtb3ZlZCkuXG4gKi9cbmV4cG9ydCBjbGFzcyBHcm91cEV2ZW50IGV4dGVuZHMgRXZlbnQge1xuICAvKipcbiAgICogQHBhcmFtIHtFdmVudFR5cGV9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7QmFzZUxheWVyfSBsYXllciBUaGUgbGF5ZXIuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBsYXllcikge1xuICAgIHN1cGVyKHR5cGUpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGFkZGVkIG9yIHJlbW92ZWQgbGF5ZXIuXG4gICAgICogQHR5cGUge0Jhc2VMYXllcn1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5sYXllciA9IGxheWVyO1xuICB9XG59XG5cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfFxuICogICAgICdjaGFuZ2U6bGF5ZXJzJywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3wnY2hhbmdlOmxheWVycycsIFJldHVybj59IEdyb3VwT25TaWduYXR1cmVcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tXSBUaGUgbWluaW11bSB2aWV3IHpvb20gbGV2ZWwgKGV4Y2x1c2l2ZSkgYWJvdmUgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBUaGUgbWF4aW11bSB2aWV3IHpvb20gbGV2ZWwgKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD58Q29sbGVjdGlvbjxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IFtsYXllcnNdIENoaWxkIGxheWVycy5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IFtwcm9wZXJ0aWVzXSBBcmJpdHJhcnkgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzLiBDYW4gYmUgYWNjZXNzZWQgd2l0aCBgI2dldCgpYCBhbmQgYCNzZXQoKWAuXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgUHJvcGVydHkgPSB7XG4gIExBWUVSUzogJ2xheWVycycsXG59O1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259IG9mIGxheWVycyB0aGF0IGFyZSBoYW5kbGVkIHRvZ2V0aGVyLlxuICpcbiAqIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyB0cmlnZ2VyZWQgd2hlbiB0aGUgZ3JvdXAvQ29sbGVjdGlvbiBjaGFuZ2VzLlxuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgTGF5ZXJHcm91cCBleHRlbmRzIEJhc2VMYXllciB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSBMYXllciBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGNvbnN0IGJhc2VPcHRpb25zID0gLyoqIEB0eXBlIHtPcHRpb25zfSAqLyAoT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucykpO1xuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5sYXllcnM7XG5cbiAgICBsZXQgbGF5ZXJzID0gb3B0aW9ucy5sYXllcnM7XG5cbiAgICBzdXBlcihiYXNlT3B0aW9ucyk7XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge0dyb3VwT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbjtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7R3JvdXBPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uY2U7XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge0dyb3VwT25TaWduYXR1cmU8dm9pZD59XG4gICAgICovXG4gICAgdGhpcy51bjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgQXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT4+fVxuICAgICAqL1xuICAgIHRoaXMubGlzdGVuZXJLZXlzXyA9IHt9O1xuXG4gICAgdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihQcm9wZXJ0eS5MQVlFUlMsIHRoaXMuaGFuZGxlTGF5ZXJzQ2hhbmdlZF8pO1xuXG4gICAgaWYgKGxheWVycykge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGF5ZXJzKSkge1xuICAgICAgICBsYXllcnMgPSBuZXcgQ29sbGVjdGlvbihsYXllcnMuc2xpY2UoKSwge3VuaXF1ZTogdHJ1ZX0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KHR5cGVvZiAoLyoqIEB0eXBlIHs/fSAqLyAobGF5ZXJzKS5nZXRBcnJheSkgPT09ICdmdW5jdGlvbicsIDQzKTsgLy8gRXhwZWN0ZWQgYGxheWVyc2AgdG8gYmUgYW4gYXJyYXkgb3IgYSBgQ29sbGVjdGlvbmBcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGF5ZXJzID0gbmV3IENvbGxlY3Rpb24odW5kZWZpbmVkLCB7dW5pcXVlOiB0cnVlfSk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRMYXllcnMobGF5ZXJzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlTGF5ZXJDaGFuZ2VfKCkge1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVMYXllcnNDaGFuZ2VkXygpIHtcbiAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcblxuICAgIGNvbnN0IGxheWVycyA9IHRoaXMuZ2V0TGF5ZXJzKCk7XG4gICAgdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfLnB1c2goXG4gICAgICBsaXN0ZW4obGF5ZXJzLCBDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgdGhpcy5oYW5kbGVMYXllcnNBZGRfLCB0aGlzKSxcbiAgICAgIGxpc3RlbihsYXllcnMsIENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCB0aGlzLmhhbmRsZUxheWVyc1JlbW92ZV8sIHRoaXMpXG4gICAgKTtcblxuICAgIGZvciAoY29uc3QgaWQgaW4gdGhpcy5saXN0ZW5lcktleXNfKSB7XG4gICAgICB0aGlzLmxpc3RlbmVyS2V5c19baWRdLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgfVxuICAgIGNsZWFyKHRoaXMubGlzdGVuZXJLZXlzXyk7XG5cbiAgICBjb25zdCBsYXllcnNBcnJheSA9IGxheWVycy5nZXRBcnJheSgpO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGxheWVyc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGNvbnN0IGxheWVyID0gbGF5ZXJzQXJyYXlbaV07XG4gICAgICB0aGlzLnJlZ2lzdGVyTGF5ZXJMaXN0ZW5lcnNfKGxheWVyKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgR3JvdXBFdmVudCgnYWRkbGF5ZXInLCBsYXllcikpO1xuICAgIH1cbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0Jhc2VMYXllcn0gbGF5ZXIgVGhlIGxheWVyLlxuICAgKi9cbiAgcmVnaXN0ZXJMYXllckxpc3RlbmVyc18obGF5ZXIpIHtcbiAgICBjb25zdCBsaXN0ZW5lcktleXMgPSBbXG4gICAgICBsaXN0ZW4oXG4gICAgICAgIGxheWVyLFxuICAgICAgICBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsXG4gICAgICAgIHRoaXMuaGFuZGxlTGF5ZXJDaGFuZ2VfLFxuICAgICAgICB0aGlzXG4gICAgICApLFxuICAgICAgbGlzdGVuKGxheWVyLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyQ2hhbmdlXywgdGhpcyksXG4gICAgXTtcblxuICAgIGlmIChsYXllciBpbnN0YW5jZW9mIExheWVyR3JvdXApIHtcbiAgICAgIGxpc3RlbmVyS2V5cy5wdXNoKFxuICAgICAgICBsaXN0ZW4obGF5ZXIsICdhZGRsYXllcicsIHRoaXMuaGFuZGxlTGF5ZXJHcm91cEFkZF8sIHRoaXMpLFxuICAgICAgICBsaXN0ZW4obGF5ZXIsICdyZW1vdmVsYXllcicsIHRoaXMuaGFuZGxlTGF5ZXJHcm91cFJlbW92ZV8sIHRoaXMpXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMubGlzdGVuZXJLZXlzX1tnZXRVaWQobGF5ZXIpXSA9IGxpc3RlbmVyS2V5cztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0dyb3VwRXZlbnR9IGV2ZW50IFRoZSBsYXllciBncm91cCBldmVudC5cbiAgICovXG4gIGhhbmRsZUxheWVyR3JvdXBBZGRfKGV2ZW50KSB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBHcm91cEV2ZW50KCdhZGRsYXllcicsIGV2ZW50LmxheWVyKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtHcm91cEV2ZW50fSBldmVudCBUaGUgbGF5ZXIgZ3JvdXAgZXZlbnQuXG4gICAqL1xuICBoYW5kbGVMYXllckdyb3VwUmVtb3ZlXyhldmVudCkge1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgR3JvdXBFdmVudCgncmVtb3ZlbGF5ZXInLCBldmVudC5sYXllcikpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBjb2xsZWN0aW9uRXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlTGF5ZXJzQWRkXyhjb2xsZWN0aW9uRXZlbnQpIHtcbiAgICBjb25zdCBsYXllciA9IGNvbGxlY3Rpb25FdmVudC5lbGVtZW50O1xuICAgIHRoaXMucmVnaXN0ZXJMYXllckxpc3RlbmVyc18obGF5ZXIpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgR3JvdXBFdmVudCgnYWRkbGF5ZXInLCBsYXllcikpO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBjb2xsZWN0aW9uRXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlTGF5ZXJzUmVtb3ZlXyhjb2xsZWN0aW9uRXZlbnQpIHtcbiAgICBjb25zdCBsYXllciA9IGNvbGxlY3Rpb25FdmVudC5lbGVtZW50O1xuICAgIGNvbnN0IGtleSA9IGdldFVpZChsYXllcik7XG4gICAgdGhpcy5saXN0ZW5lcktleXNfW2tleV0uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICBkZWxldGUgdGhpcy5saXN0ZW5lcktleXNfW2tleV07XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBHcm91cEV2ZW50KCdyZW1vdmVsYXllcicsIGxheWVyKSk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb24gY29sbGVjdGlvbn0gb2Yge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciBsYXllcnN9XG4gICAqIGluIHRoaXMgZ3JvdXAuXG4gICAqIEByZXR1cm4geyFDb2xsZWN0aW9uPGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gQ29sbGVjdGlvbiBvZlxuICAgKiAgIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZX5CYXNlTGF5ZXIgbGF5ZXJzfSB0aGF0IGFyZSBwYXJ0IG9mIHRoaXMgZ3JvdXAuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldExheWVycygpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshQ29sbGVjdGlvbjxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59ICovIChcbiAgICAgIHRoaXMuZ2V0KFByb3BlcnR5LkxBWUVSUylcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb24gY29sbGVjdGlvbn0gb2Yge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciBsYXllcnN9XG4gICAqIGluIHRoaXMgZ3JvdXAuXG4gICAqIEBwYXJhbSB7IUNvbGxlY3Rpb248aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBsYXllcnMgQ29sbGVjdGlvbiBvZlxuICAgKiAgIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZX5CYXNlTGF5ZXIgbGF5ZXJzfSB0aGF0IGFyZSBwYXJ0IG9mIHRoaXMgZ3JvdXAuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldExheWVycyhsYXllcnMpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5nZXRMYXllcnMoKTtcbiAgICBpZiAoY29sbGVjdGlvbikge1xuICAgICAgY29uc3QgY3VycmVudExheWVycyA9IGNvbGxlY3Rpb24uZ2V0QXJyYXkoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGN1cnJlbnRMYXllcnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEdyb3VwRXZlbnQoJ3JlbW92ZWxheWVyJywgY3VycmVudExheWVyc1tpXSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2V0KFByb3BlcnR5LkxBWUVSUywgbGF5ZXJzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IFthcnJheV0gQXJyYXkgb2YgbGF5ZXJzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IEFycmF5IG9mIGxheWVycy5cbiAgICovXG4gIGdldExheWVyc0FycmF5KGFycmF5KSB7XG4gICAgYXJyYXkgPSBhcnJheSAhPT0gdW5kZWZpbmVkID8gYXJyYXkgOiBbXTtcbiAgICB0aGlzLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICBsYXllci5nZXRMYXllcnNBcnJheShhcnJheSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGF5ZXIgc3RhdGVzIGxpc3QgYW5kIHVzZSB0aGlzIGdyb3VwcyB6LWluZGV4IGFzIHRoZSBkZWZhdWx0XG4gICAqIGZvciBhbGwgbGF5ZXJzIGluIHRoaXMgYW5kIG5lc3RlZCBncm91cHMsIGlmIGl0IGlzIHVuc2V0IGF0IHRoaXMgcG9pbnQuXG4gICAqIElmIGRlc3QgaXMgbm90IHByb3ZpZGVkIGFuZCB0aGlzIGdyb3VwJ3Mgei1pbmRleCBpcyB1bmRlZmluZWRcbiAgICogMCBpcyB1c2VkIGEgdGhlIGRlZmF1bHQgei1pbmRleC5cbiAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gW2Rlc3RdIE9wdGlvbmFsIGxpc3RcbiAgICogb2YgbGF5ZXIgc3RhdGVzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBMaXN0IG9mIGxheWVyIHN0YXRlcy5cbiAgICovXG4gIGdldExheWVyU3RhdGVzQXJyYXkoZGVzdCkge1xuICAgIGNvbnN0IHN0YXRlcyA9IGRlc3QgIT09IHVuZGVmaW5lZCA/IGRlc3QgOiBbXTtcbiAgICBjb25zdCBwb3MgPSBzdGF0ZXMubGVuZ3RoO1xuXG4gICAgdGhpcy5nZXRMYXllcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgbGF5ZXIuZ2V0TGF5ZXJTdGF0ZXNBcnJheShzdGF0ZXMpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgb3duTGF5ZXJTdGF0ZSA9IHRoaXMuZ2V0TGF5ZXJTdGF0ZSgpO1xuICAgIGxldCBkZWZhdWx0WkluZGV4ID0gb3duTGF5ZXJTdGF0ZS56SW5kZXg7XG4gICAgaWYgKCFkZXN0ICYmIG93bkxheWVyU3RhdGUuekluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGRlZmF1bHRaSW5kZXggPSAwO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gcG9zLCBpaSA9IHN0YXRlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBjb25zdCBsYXllclN0YXRlID0gc3RhdGVzW2ldO1xuICAgICAgbGF5ZXJTdGF0ZS5vcGFjaXR5ICo9IG93bkxheWVyU3RhdGUub3BhY2l0eTtcbiAgICAgIGxheWVyU3RhdGUudmlzaWJsZSA9IGxheWVyU3RhdGUudmlzaWJsZSAmJiBvd25MYXllclN0YXRlLnZpc2libGU7XG4gICAgICBsYXllclN0YXRlLm1heFJlc29sdXRpb24gPSBNYXRoLm1pbihcbiAgICAgICAgbGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uLFxuICAgICAgICBvd25MYXllclN0YXRlLm1heFJlc29sdXRpb25cbiAgICAgICk7XG4gICAgICBsYXllclN0YXRlLm1pblJlc29sdXRpb24gPSBNYXRoLm1heChcbiAgICAgICAgbGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uLFxuICAgICAgICBvd25MYXllclN0YXRlLm1pblJlc29sdXRpb25cbiAgICAgICk7XG4gICAgICBsYXllclN0YXRlLm1pblpvb20gPSBNYXRoLm1heChsYXllclN0YXRlLm1pblpvb20sIG93bkxheWVyU3RhdGUubWluWm9vbSk7XG4gICAgICBsYXllclN0YXRlLm1heFpvb20gPSBNYXRoLm1pbihsYXllclN0YXRlLm1heFpvb20sIG93bkxheWVyU3RhdGUubWF4Wm9vbSk7XG4gICAgICBpZiAob3duTGF5ZXJTdGF0ZS5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAobGF5ZXJTdGF0ZS5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGxheWVyU3RhdGUuZXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKFxuICAgICAgICAgICAgbGF5ZXJTdGF0ZS5leHRlbnQsXG4gICAgICAgICAgICBvd25MYXllclN0YXRlLmV4dGVudFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGF5ZXJTdGF0ZS5leHRlbnQgPSBvd25MYXllclN0YXRlLmV4dGVudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGxheWVyU3RhdGUuekluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbGF5ZXJTdGF0ZS56SW5kZXggPSBkZWZhdWx0WkluZGV4O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdGF0ZXM7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5TdGF0ZX0gU291cmNlIHN0YXRlLlxuICAgKi9cbiAgZ2V0U291cmNlU3RhdGUoKSB7XG4gICAgcmV0dXJuICdyZWFkeSc7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTGF5ZXJHcm91cDtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBFdmVudFxuICovXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGFzIG1hcCBldmVudHMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfSBmb3Igd2hpY2ggZXZlbnRzIHRyaWdnZXIgYSBtYXAgZXZlbnQuXG4gKi9cbmNsYXNzIE1hcEV2ZW50IGV4dGVuZHMgRXZlbnQge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL01hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBbZnJhbWVTdGF0ZV0gRnJhbWUgc3RhdGUuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBtYXAsIGZyYW1lU3RhdGUpIHtcbiAgICBzdXBlcih0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtYXAgd2hlcmUgdGhlIGV2ZW50IG9jY3VycmVkLlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL01hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLm1hcCA9IG1hcDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFtZSBzdGF0ZSBhdCB0aGUgdGltZSBvZiB0aGUgZXZlbnQuXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL01hcC5qc1wiKS5GcmFtZVN0YXRlfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmZyYW1lU3RhdGUgPSBmcmFtZVN0YXRlICE9PSB1bmRlZmluZWQgPyBmcmFtZVN0YXRlIDogbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNYXBFdmVudDtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBCcm93c2VyRXZlbnRcbiAqL1xuaW1wb3J0IE1hcEV2ZW50IGZyb20gJy4vTWFwRXZlbnQuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGFzIG1hcCBicm93c2VyIGV2ZW50cyBhcmUgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9IGZvciB3aGljaCBldmVudHMgdHJpZ2dlciBhIG1hcCBicm93c2VyIGV2ZW50LlxuICogQHRlbXBsYXRlIHtVSUV2ZW50fSBFVkVOVFxuICovXG5jbGFzcyBNYXBCcm93c2VyRXZlbnQgZXh0ZW5kcyBNYXBFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAqIEBwYXJhbSB7RVZFTlR9IG9yaWdpbmFsRXZlbnQgT3JpZ2luYWwgZXZlbnQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2RyYWdnaW5nXSBJcyB0aGUgbWFwIGN1cnJlbnRseSBiZWluZyBkcmFnZ2VkP1xuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IFtmcmFtZVN0YXRlXSBGcmFtZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtBcnJheTxQb2ludGVyRXZlbnQ+fSBbYWN0aXZlUG9pbnRlcnNdIEFjdGl2ZSBwb2ludGVycy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGUsIG1hcCwgb3JpZ2luYWxFdmVudCwgZHJhZ2dpbmcsIGZyYW1lU3RhdGUsIGFjdGl2ZVBvaW50ZXJzKSB7XG4gICAgc3VwZXIodHlwZSwgbWFwLCBmcmFtZVN0YXRlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtFVkVOVH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5vcmlnaW5hbEV2ZW50ID0gb3JpZ2luYWxFdmVudDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtYXAgcGl4ZWwgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWxfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjb29yZGluYXRlIGluIHRoZSB1c2VyIHByb2plY3Rpb24gY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC5cbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGlmIHRoZSBtYXAgaXMgY3VycmVudGx5IGJlaW5nIGRyYWdnZWQuIE9ubHkgc2V0IGZvclxuICAgICAqIGBQT0lOVEVSRFJBR2AgYW5kIGBQT0lOVEVSTU9WRWAgZXZlbnRzLiBEZWZhdWx0IGlzIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5kcmFnZ2luZyA9IGRyYWdnaW5nICE9PSB1bmRlZmluZWQgPyBkcmFnZ2luZyA6IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5PFBvaW50ZXJFdmVudD58dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuYWN0aXZlUG9pbnRlcnMgPSBhY3RpdmVQb2ludGVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbWFwIHBpeGVsIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydCBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcmlnaW5hbCBldmVudC5cbiAgICogQHR5cGUge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAqIEBhcGlcbiAgICovXG4gIGdldCBwaXhlbCgpIHtcbiAgICBpZiAoIXRoaXMucGl4ZWxfKSB7XG4gICAgICB0aGlzLnBpeGVsXyA9IHRoaXMubWFwLmdldEV2ZW50UGl4ZWwodGhpcy5vcmlnaW5hbEV2ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucGl4ZWxfO1xuICB9XG4gIHNldCBwaXhlbChwaXhlbCkge1xuICAgIHRoaXMucGl4ZWxfID0gcGl4ZWw7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGNvb3JkaW5hdGUgY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC4gIFRoaXMgd2lsbCBiZSBpbiB0aGUgdXNlclxuICAgKiBwcm9qZWN0aW9uIGlmIG9uZSBpcyBzZXQuICBPdGhlcndpc2UgaXQgd2lsbCBiZSBpbiB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAqIEBhcGlcbiAgICovXG4gIGdldCBjb29yZGluYXRlKCkge1xuICAgIGlmICghdGhpcy5jb29yZGluYXRlXykge1xuICAgICAgdGhpcy5jb29yZGluYXRlXyA9IHRoaXMubWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwodGhpcy5waXhlbCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNvb3JkaW5hdGVfO1xuICB9XG4gIHNldCBjb29yZGluYXRlKGNvb3JkaW5hdGUpIHtcbiAgICB0aGlzLmNvb3JkaW5hdGVfID0gY29vcmRpbmF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmV2ZW50cyB0aGUgZGVmYXVsdCBicm93c2VyIGFjdGlvbi5cbiAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ldmVudC5wcmV2ZW50RGVmYXVsdC5cbiAgICogQGFwaVxuICAgKi9cbiAgcHJldmVudERlZmF1bHQoKSB7XG4gICAgc3VwZXIucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoJ3ByZXZlbnREZWZhdWx0JyBpbiB0aGlzLm9yaWdpbmFsRXZlbnQpIHtcbiAgICAgIC8qKiBAdHlwZSB7VUlFdmVudH0gKi8gKHRoaXMub3JpZ2luYWxFdmVudCkucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJldmVudHMgZnVydGhlciBwcm9wYWdhdGlvbiBvZiB0aGUgY3VycmVudCBldmVudC5cbiAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ldmVudC5zdG9wUHJvcGFnYXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIHN0b3BQcm9wYWdhdGlvbigpIHtcbiAgICBzdXBlci5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBpZiAoJ3N0b3BQcm9wYWdhdGlvbicgaW4gdGhpcy5vcmlnaW5hbEV2ZW50KSB7XG4gICAgICAvKiogQHR5cGUge1VJRXZlbnR9ICovICh0aGlzLm9yaWdpbmFsRXZlbnQpLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNYXBCcm93c2VyRXZlbnQ7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwQnJvd3NlckV2ZW50VHlwZVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5cbi8qKlxuICogQ29uc3RhbnRzIGZvciBldmVudCBuYW1lcy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIEEgdHJ1ZSBzaW5nbGUgY2xpY2sgd2l0aCBubyBkcmFnZ2luZyBhbmQgbm8gZG91YmxlIGNsaWNrLiBOb3RlIHRoYXQgdGhpc1xuICAgKiBldmVudCBpcyBkZWxheWVkIGJ5IDI1MCBtcyB0byBlbnN1cmUgdGhhdCBpdCBpcyBub3QgYSBkb3VibGUgY2xpY2suXG4gICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNzaW5nbGVjbGlja1xuICAgKiBAYXBpXG4gICAqL1xuICBTSU5HTEVDTElDSzogJ3NpbmdsZWNsaWNrJyxcblxuICAvKipcbiAgICogQSBjbGljayB3aXRoIG5vIGRyYWdnaW5nLiBBIGRvdWJsZSBjbGljayB3aWxsIGZpcmUgdHdvIG9mIHRoaXMuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNjbGlja1xuICAgKiBAYXBpXG4gICAqL1xuICBDTElDSzogRXZlbnRUeXBlLkNMSUNLLFxuXG4gIC8qKlxuICAgKiBBIHRydWUgZG91YmxlIGNsaWNrLCB3aXRoIG5vIGRyYWdnaW5nLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjZGJsY2xpY2tcbiAgICogQGFwaVxuICAgKi9cbiAgREJMQ0xJQ0s6IEV2ZW50VHlwZS5EQkxDTElDSyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYSBwb2ludGVyIGlzIGRyYWdnZWQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNwb2ludGVyZHJhZ1xuICAgKiBAYXBpXG4gICAqL1xuICBQT0lOVEVSRFJBRzogJ3BvaW50ZXJkcmFnJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYSBwb2ludGVyIGlzIG1vdmVkLiBOb3RlIHRoYXQgb24gdG91Y2ggZGV2aWNlcyB0aGlzIGlzXG4gICAqIHRyaWdnZXJlZCB3aGVuIHRoZSBtYXAgaXMgcGFubmVkLCBzbyBpcyBub3QgdGhlIHNhbWUgYXMgbW91c2Vtb3ZlLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjcG9pbnRlcm1vdmVcbiAgICogQGFwaVxuICAgKi9cbiAgUE9JTlRFUk1PVkU6ICdwb2ludGVybW92ZScsXG5cbiAgUE9JTlRFUkRPV046ICdwb2ludGVyZG93bicsXG4gIFBPSU5URVJVUDogJ3BvaW50ZXJ1cCcsXG4gIFBPSU5URVJPVkVSOiAncG9pbnRlcm92ZXInLFxuICBQT0lOVEVST1VUOiAncG9pbnRlcm91dCcsXG4gIFBPSU5URVJFTlRFUjogJ3BvaW50ZXJlbnRlcicsXG4gIFBPSU5URVJMRUFWRTogJ3BvaW50ZXJsZWF2ZScsXG4gIFBPSU5URVJDQU5DRUw6ICdwb2ludGVyY2FuY2VsJyxcbn07XG5cbi8qKipcbiAqIEB0eXBlZGVmIHsnc2luZ2xlY2xpY2snfCdjbGljayd8J2RibGNsaWNrJ3wncG9pbnRlcmRyYWcnfCdwb2ludGVybW92ZSd9IFR5cGVzXG4gKi9cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9wb2ludGVyL0V2ZW50VHlwZVxuICovXG5cbi8qKlxuICogQ29uc3RhbnRzIGZvciBldmVudCBuYW1lcy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgUE9JTlRFUk1PVkU6ICdwb2ludGVybW92ZScsXG4gIFBPSU5URVJET1dOOiAncG9pbnRlcmRvd24nLFxuICBQT0lOVEVSVVA6ICdwb2ludGVydXAnLFxuICBQT0lOVEVST1ZFUjogJ3BvaW50ZXJvdmVyJyxcbiAgUE9JTlRFUk9VVDogJ3BvaW50ZXJvdXQnLFxuICBQT0lOVEVSRU5URVI6ICdwb2ludGVyZW50ZXInLFxuICBQT0lOVEVSTEVBVkU6ICdwb2ludGVybGVhdmUnLFxuICBQT0lOVEVSQ0FOQ0VMOiAncG9pbnRlcmNhbmNlbCcsXG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudEhhbmRsZXJcbiAqL1xuXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50IGZyb20gJy4vTWFwQnJvd3NlckV2ZW50LmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUG9pbnRlckV2ZW50VHlwZSBmcm9tICcuL3BvaW50ZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBUYXJnZXQgZnJvbSAnLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCB7UEFTU0lWRV9FVkVOVF9MSVNURU5FUlN9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7bGlzdGVuLCB1bmxpc3RlbkJ5S2V5fSBmcm9tICcuL2V2ZW50cy5qcyc7XG5cbmNsYXNzIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIgZXh0ZW5kcyBUYXJnZXQge1xuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL01hcC5qc1wiKS5kZWZhdWx0fSBtYXAgVGhlIG1hcCB3aXRoIHRoZSB2aWV3cG9ydCB0byBsaXN0ZW4gdG8gZXZlbnRzIG9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW21vdmVUb2xlcmFuY2VdIFRoZSBtaW5pbWFsIGRpc3RhbmNlIHRoZSBwb2ludGVyIG11c3QgdHJhdmVsIHRvIHRyaWdnZXIgYSBtb3ZlLlxuICAgKi9cbiAgY29uc3RydWN0b3IobWFwLCBtb3ZlVG9sZXJhbmNlKSB7XG4gICAgc3VwZXIobWFwKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgdGhlIGVsZW1lbnQgdGhhdCB3ZSB3aWxsIGxpc3RlbiB0byB0aGUgcmVhbCBldmVudHMgb24uXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1hcF8gPSBtYXA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7YW55fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5jbGlja1RpbWVvdXRJZF87XG5cbiAgICAvKipcbiAgICAgKiBFbXVsYXRlIGRibGNsaWNrIGFuZCBzaW5nbGVjbGljay4gV2lsbCBiZSB0cnVlIHdoZW4gb25seSBvbmUgcG9pbnRlciBpcyBhY3RpdmUuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5lbXVsYXRlQ2xpY2tzXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmRyYWdnaW5nXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubW92ZVRvbGVyYW5jZV8gPSBtb3ZlVG9sZXJhbmNlID09PSB1bmRlZmluZWQgPyAxIDogbW92ZVRvbGVyYW5jZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtb3N0IHJlY2VudCBcImRvd25cIiB0eXBlIGV2ZW50IChvciBudWxsIGlmIG5vbmUgaGF2ZSBvY2N1cnJlZCkuXG4gICAgICogU2V0IG9uIHBvaW50ZXJkb3duLlxuICAgICAqIEB0eXBlIHtQb2ludGVyRXZlbnR8bnVsbH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZG93bl8gPSBudWxsO1xuXG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMubWFwXy5nZXRWaWV3cG9ydCgpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5PFBvaW50ZXJFdmVudD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmFjdGl2ZVBvaW50ZXJzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFPYmplY3Q8bnVtYmVyLCBFdmVudD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnRyYWNrZWRUb3VjaGVzXyA9IHt9O1xuXG4gICAgdGhpcy5lbGVtZW50XyA9IGVsZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8gPSBsaXN0ZW4oXG4gICAgICBlbGVtZW50LFxuICAgICAgUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSRE9XTixcbiAgICAgIHRoaXMuaGFuZGxlUG9pbnRlckRvd25fLFxuICAgICAgdGhpc1xuICAgICk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7UG9pbnRlckV2ZW50fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8gPSBsaXN0ZW4oXG4gICAgICBlbGVtZW50LFxuICAgICAgUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSxcbiAgICAgIHRoaXMucmVsYXlNb3ZlRXZlbnRfLFxuICAgICAgdGhpc1xuICAgICk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYm91bmRIYW5kbGVUb3VjaE1vdmVfID0gdGhpcy5oYW5kbGVUb3VjaE1vdmVfLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmVsZW1lbnRfLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBFdmVudFR5cGUuVE9VQ0hNT1ZFLFxuICAgICAgdGhpcy5ib3VuZEhhbmRsZVRvdWNoTW92ZV8sXG4gICAgICBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyA/IHtwYXNzaXZlOiBmYWxzZX0gOiBmYWxzZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZW11bGF0ZUNsaWNrXyhwb2ludGVyRXZlbnQpIHtcbiAgICBsZXQgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KFxuICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5DTElDSyxcbiAgICAgIHRoaXMubWFwXyxcbiAgICAgIHBvaW50ZXJFdmVudFxuICAgICk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICBpZiAodGhpcy5jbGlja1RpbWVvdXRJZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gZG91YmxlLWNsaWNrXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5jbGlja1RpbWVvdXRJZF8pO1xuICAgICAgdGhpcy5jbGlja1RpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoXG4gICAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0ssXG4gICAgICAgIHRoaXMubWFwXyxcbiAgICAgICAgcG9pbnRlckV2ZW50XG4gICAgICApO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY2xpY2tcbiAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoXG4gICAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5TSU5HTEVDTElDSyxcbiAgICAgICAgICB0aGlzLm1hcF8sXG4gICAgICAgICAgcG9pbnRlckV2ZW50XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICB9LCAyNTApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBLZWVwcyB0cmFjayBvbiBob3cgbWFueSBwb2ludGVycyBhcmUgY3VycmVudGx5IGFjdGl2ZS5cbiAgICpcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdXBkYXRlQWN0aXZlUG9pbnRlcnNfKHBvaW50ZXJFdmVudCkge1xuICAgIGNvbnN0IGV2ZW50ID0gcG9pbnRlckV2ZW50O1xuICAgIGNvbnN0IGlkID0gZXZlbnQucG9pbnRlcklkO1xuXG4gICAgaWYgKFxuICAgICAgZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCB8fFxuICAgICAgZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJDQU5DRUxcbiAgICApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnRyYWNrZWRUb3VjaGVzX1tpZF07XG4gICAgICBmb3IgKGNvbnN0IHBvaW50ZXJJZCBpbiB0aGlzLnRyYWNrZWRUb3VjaGVzXykge1xuICAgICAgICBpZiAodGhpcy50cmFja2VkVG91Y2hlc19bcG9pbnRlcklkXS50YXJnZXQgIT09IGV2ZW50LnRhcmdldCkge1xuICAgICAgICAgIC8vIFNvbWUgcGxhdGZvcm1zIGFzc2lnbiBhIG5ldyBwb2ludGVySWQgd2hlbiB0aGUgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICAgICAgLy8gSWYgdGhpcyBoYXBwZW5zLCBkZWxldGUgb25lIHRyYWNrZWQgcG9pbnRlci4gSWYgdGhlcmUgaXMgbW9yZVxuICAgICAgICAgIC8vIHRoYW4gb25lIHRyYWNrZWQgcG9pbnRlciBmb3IgdGhlIG9sZCB0YXJnZXQsIGl0IHdpbGwgYmUgY2xlYXJlZFxuICAgICAgICAgIC8vIGJ5IHN1YnNlcXVlbnQgUE9JTlRFUlVQIGV2ZW50cyBmcm9tIG90aGVyIHBvaW50ZXJzLlxuICAgICAgICAgIGRlbGV0ZSB0aGlzLnRyYWNrZWRUb3VjaGVzX1twb2ludGVySWRdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiB8fFxuICAgICAgZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFXG4gICAgKSB7XG4gICAgICB0aGlzLnRyYWNrZWRUb3VjaGVzX1tpZF0gPSBldmVudDtcbiAgICB9XG4gICAgdGhpcy5hY3RpdmVQb2ludGVyc18gPSBPYmplY3QudmFsdWVzKHRoaXMudHJhY2tlZFRvdWNoZXNfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICogZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVQb2ludGVyVXBfKHBvaW50ZXJFdmVudCkge1xuICAgIHRoaXMudXBkYXRlQWN0aXZlUG9pbnRlcnNfKHBvaW50ZXJFdmVudCk7XG4gICAgY29uc3QgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KFxuICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVAsXG4gICAgICB0aGlzLm1hcF8sXG4gICAgICBwb2ludGVyRXZlbnQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0aGlzLmFjdGl2ZVBvaW50ZXJzX1xuICAgICk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcblxuICAgIC8vIFdlIGVtdWxhdGUgY2xpY2sgZXZlbnRzIG9uIGxlZnQgbW91c2UgYnV0dG9uIGNsaWNrLCB0b3VjaCBjb250YWN0LCBhbmQgcGVuXG4gICAgLy8gY29udGFjdC4gaXNNb3VzZUFjdGlvbkJ1dHRvbiByZXR1cm5zIHRydWUgaW4gdGhlc2UgY2FzZXMgKGV2dC5idXR0b24gaXMgc2V0XG4gICAgLy8gdG8gMCkuXG4gICAgLy8gU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI2J1dHRvbi1zdGF0ZXNcbiAgICAvLyBXZSBvbmx5IGZpcmUgY2xpY2ssIHNpbmdsZWNsaWNrLCBhbmQgZG91YmxlY2xpY2sgaWYgbm9ib2R5IGhhcyBjYWxsZWRcbiAgICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpLlxuICAgIGlmIChcbiAgICAgIHRoaXMuZW11bGF0ZUNsaWNrc18gJiZcbiAgICAgICFuZXdFdmVudC5kZWZhdWx0UHJldmVudGVkICYmXG4gICAgICAhdGhpcy5kcmFnZ2luZ18gJiZcbiAgICAgIHRoaXMuaXNNb3VzZUFjdGlvbkJ1dHRvbl8ocG9pbnRlckV2ZW50KVxuICAgICkge1xuICAgICAgdGhpcy5lbXVsYXRlQ2xpY2tfKHRoaXMuZG93bl8pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmFjdGl2ZVBvaW50ZXJzXy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuZHJhZ2dpbmdfID0gZmFsc2U7XG4gICAgICB0aGlzLmRvd25fID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgbGVmdCBtb3VzZSBidXR0b24gd2FzIHByZXNzZWQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc01vdXNlQWN0aW9uQnV0dG9uXyhwb2ludGVyRXZlbnQpIHtcbiAgICByZXR1cm4gcG9pbnRlckV2ZW50LmJ1dHRvbiA9PT0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICogZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVQb2ludGVyRG93bl8ocG9pbnRlckV2ZW50KSB7XG4gICAgdGhpcy5lbXVsYXRlQ2xpY2tzXyA9IHRoaXMuYWN0aXZlUG9pbnRlcnNfLmxlbmd0aCA9PT0gMDtcbiAgICB0aGlzLnVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyhwb2ludGVyRXZlbnQpO1xuICAgIGNvbnN0IG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChcbiAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04sXG4gICAgICB0aGlzLm1hcF8sXG4gICAgICBwb2ludGVyRXZlbnQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0aGlzLmFjdGl2ZVBvaW50ZXJzX1xuICAgICk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcblxuICAgIHRoaXMuZG93bl8gPSBuZXcgUG9pbnRlckV2ZW50KHBvaW50ZXJFdmVudC50eXBlLCBwb2ludGVyRXZlbnQpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmRvd25fLCAndGFyZ2V0Jywge1xuICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgdmFsdWU6IHBvaW50ZXJFdmVudC50YXJnZXQsXG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IGRvYyA9IHRoaXMubWFwXy5nZXRPd25lckRvY3VtZW50KCk7XG4gICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLnB1c2goXG4gICAgICAgIGxpc3RlbihcbiAgICAgICAgICBkb2MsXG4gICAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSxcbiAgICAgICAgICB0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlXyxcbiAgICAgICAgICB0aGlzXG4gICAgICAgICksXG4gICAgICAgIGxpc3Rlbihkb2MsIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQLCB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sIHRoaXMpLFxuICAgICAgICAvKiBOb3RlIHRoYXQgdGhlIGxpc3RlbmVyIGZvciBgcG9pbnRlcmNhbmNlbCBpcyBzZXQgdXAgb25cbiAgICAgICAgICogYHBvaW50ZXJFdmVudEhhbmRsZXJfYCBhbmQgbm90IGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBsaWtlXG4gICAgICAgICAqIHRoZSBgcG9pbnRlcnVwYCBhbmQgYHBvaW50ZXJtb3ZlYCBsaXN0ZW5lcnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSByZWFzb24gZm9yIHRoaXMgaXMgdGhlIGZvbGxvd2luZzogYFRvdWNoU291cmNlLnZhY3V1bVRvdWNoZXNfKClgXG4gICAgICAgICAqIGlzc3VlcyBgcG9pbnRlcmNhbmNlbGAgZXZlbnRzLCB3aGVuIHRoZXJlIHdhcyBubyBgdG91Y2hlbmRgIGZvciBhXG4gICAgICAgICAqIGB0b3VjaHN0YXJ0YC4gTm93LCBsZXQncyBzYXkgYSBmaXJzdCBgdG91Y2hzdGFydGAgaXMgcmVnaXN0ZXJlZCBvblxuICAgICAgICAgKiBgcG9pbnRlckV2ZW50SGFuZGxlcl9gLiBUaGUgYGRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl9gIGlzIHNldCB1cC5cbiAgICAgICAgICogQnV0IGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBkb2Vzbid0IGtub3cgYWJvdXQgdGhlIGZpcnN0XG4gICAgICAgICAqIGB0b3VjaHN0YXJ0YC4gSWYgdGhlcmUgaXMgbm8gYHRvdWNoZW5kYCBmb3IgdGhlIGB0b3VjaHN0YXJ0YCwgd2UgY2FuXG4gICAgICAgICAqIG9ubHkgcmVjZWl2ZSBhIGB0b3VjaGNhbmNlbGAgZnJvbSBgcG9pbnRlckV2ZW50SGFuZGxlcl9gLCBiZWNhdXNlIGl0IGlzXG4gICAgICAgICAqIG9ubHkgcmVnaXN0ZXJlZCB0aGVyZS5cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RlbihcbiAgICAgICAgICB0aGlzLmVsZW1lbnRfLFxuICAgICAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkNBTkNFTCxcbiAgICAgICAgICB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sXG4gICAgICAgICAgdGhpc1xuICAgICAgICApXG4gICAgICApO1xuICAgICAgaWYgKHRoaXMuZWxlbWVudF8uZ2V0Um9vdE5vZGUgJiYgdGhpcy5lbGVtZW50Xy5nZXRSb290Tm9kZSgpICE9PSBkb2MpIHtcbiAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5wdXNoKFxuICAgICAgICAgIGxpc3RlbihcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudF8uZ2V0Um9vdE5vZGUoKSxcbiAgICAgICAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQLFxuICAgICAgICAgICAgdGhpcy5oYW5kbGVQb2ludGVyVXBfLFxuICAgICAgICAgICAgdGhpc1xuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlUG9pbnRlck1vdmVfKHBvaW50ZXJFdmVudCkge1xuICAgIC8vIEJldHdlZW4gcG9pbnRlcmRvd24gYW5kIHBvaW50ZXJ1cCwgcG9pbnRlcm1vdmUgZXZlbnRzIGFyZSB0cmlnZ2VyZWQuXG4gICAgLy8gVG8gYXZvaWQgYSAnZmFsc2UnIHRvdWNobW92ZSBldmVudCB0byBiZSBkaXNwYXRjaGVkLCB3ZSB0ZXN0IGlmIHRoZSBwb2ludGVyXG4gICAgLy8gbW92ZWQgYSBzaWduaWZpY2FudCBkaXN0YW5jZS5cbiAgICBpZiAodGhpcy5pc01vdmluZ18ocG9pbnRlckV2ZW50KSkge1xuICAgICAgdGhpcy51cGRhdGVBY3RpdmVQb2ludGVyc18ocG9pbnRlckV2ZW50KTtcbiAgICAgIHRoaXMuZHJhZ2dpbmdfID0gdHJ1ZTtcbiAgICAgIGNvbnN0IG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChcbiAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRyxcbiAgICAgICAgdGhpcy5tYXBfLFxuICAgICAgICBwb2ludGVyRXZlbnQsXG4gICAgICAgIHRoaXMuZHJhZ2dpbmdfLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHRoaXMuYWN0aXZlUG9pbnRlcnNfXG4gICAgICApO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV3JhcCBhbmQgcmVsYXkgYSBwb2ludGVybW92ZSBldmVudC5cbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVsYXlNb3ZlRXZlbnRfKHBvaW50ZXJFdmVudCkge1xuICAgIHRoaXMub3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XyA9IHBvaW50ZXJFdmVudDtcbiAgICBjb25zdCBkcmFnZ2luZyA9ICEhKHRoaXMuZG93bl8gJiYgdGhpcy5pc01vdmluZ18ocG9pbnRlckV2ZW50KSk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IE1hcEJyb3dzZXJFdmVudChcbiAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSxcbiAgICAgICAgdGhpcy5tYXBfLFxuICAgICAgICBwb2ludGVyRXZlbnQsXG4gICAgICAgIGRyYWdnaW5nXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGbGV4aWJsZSBoYW5kbGluZyBvZiBhIGB0b3VjaC1hY3Rpb246IG5vbmVgIGNzcyBlcXVpdmFsZW50OiBiZWNhdXNlIGNhbGxpbmdcbiAgICogYHByZXZlbnREZWZhdWx0KClgIG9uIGEgYHBvaW50ZXJtb3ZlYCBldmVudCBkb2VzIG5vdCBzdG9wIG5hdGl2ZSBwYWdlIHNjcm9sbGluZ1xuICAgKiBhbmQgem9vbWluZywgd2UgYWxzbyBsaXN0ZW4gZm9yIGB0b3VjaG1vdmVgIGFuZCBjYWxsIGBwcmV2ZW50RGVmYXVsdCgpYCBvbiBpdFxuICAgKiB3aGVuIGFuIGludGVyYWN0aW9uIChjdXJyZW50bHkgYERyYWdQYW5gIGhhbmRsZXMgdGhlIGV2ZW50LlxuICAgKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlVG91Y2hNb3ZlXyhldmVudCkge1xuICAgIC8vIER1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbXBpemVuYmVyZy9lbG0tcGVwL2lzc3Vlcy8yLCBgdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfYFxuICAgIC8vIG1heSBub3QgYmUgaW5pdGlhbGl6ZWQgeWV0IHdoZW4gd2UgZ2V0IGhlcmUgb24gYSBwbGF0Zm9ybSB3aXRob3V0IG5hdGl2ZSBwb2ludGVyIGV2ZW50cy5cbiAgICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfO1xuICAgIGlmIChcbiAgICAgICghb3JpZ2luYWxFdmVudCB8fCBvcmlnaW5hbEV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpICYmXG4gICAgICAodHlwZW9mIGV2ZW50LmNhbmNlbGFibGUgIT09ICdib29sZWFuJyB8fCBldmVudC5jYW5jZWxhYmxlID09PSB0cnVlKVxuICAgICkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBtb3ZpbmcuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc01vdmluZ18ocG9pbnRlckV2ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZHJhZ2dpbmdfIHx8XG4gICAgICBNYXRoLmFicyhwb2ludGVyRXZlbnQuY2xpZW50WCAtIHRoaXMuZG93bl8uY2xpZW50WCkgPlxuICAgICAgICB0aGlzLm1vdmVUb2xlcmFuY2VfIHx8XG4gICAgICBNYXRoLmFicyhwb2ludGVyRXZlbnQuY2xpZW50WSAtIHRoaXMuZG93bl8uY2xpZW50WSkgPiB0aGlzLm1vdmVUb2xlcmFuY2VfXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cC5cbiAgICovXG4gIGRpc3Bvc2VJbnRlcm5hbCgpIHtcbiAgICBpZiAodGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMucmVsYXllZExpc3RlbmVyS2V5Xyk7XG4gICAgICB0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLmVsZW1lbnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICBFdmVudFR5cGUuVE9VQ0hNT1ZFLFxuICAgICAgdGhpcy5ib3VuZEhhbmRsZVRvdWNoTW92ZV9cbiAgICApO1xuXG4gICAgaWYgKHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8pIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5Xyk7XG4gICAgICB0aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xuXG4gICAgdGhpcy5lbGVtZW50XyA9IG51bGw7XG4gICAgc3VwZXIuZGlzcG9zZUludGVybmFsKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTWFwQnJvd3NlckV2ZW50SGFuZGxlcjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBFdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCBhZnRlciBhIG1hcCBmcmFtZSBpcyByZW5kZXJlZC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNwb3N0cmVuZGVyXG4gICAqIEBhcGlcbiAgICovXG4gIFBPU1RSRU5ERVI6ICdwb3N0cmVuZGVyJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gdGhlIG1hcCBzdGFydHMgbW92aW5nLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEV2ZW50fk1hcEV2ZW50I21vdmVzdGFydFxuICAgKiBAYXBpXG4gICAqL1xuICBNT1ZFU1RBUlQ6ICdtb3Zlc3RhcnQnLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIG1hcCBpcyBtb3ZlZC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNtb3ZlZW5kXG4gICAqIEBhcGlcbiAgICovXG4gIE1PVkVFTkQ6ICdtb3ZlZW5kJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gbG9hZGluZyBvZiBhZGRpdGlvbmFsIG1hcCBkYXRhICh0aWxlcywgaW1hZ2VzLCBmZWF0dXJlcykgc3RhcnRzLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEV2ZW50fk1hcEV2ZW50I2xvYWRzdGFydFxuICAgKiBAYXBpXG4gICAqL1xuICBMT0FEU1RBUlQ6ICdsb2Fkc3RhcnQnLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBsb2FkaW5nIG9mIGFkZGl0aW9uYWwgbWFwIGRhdGEgaGFzIGNvbXBsZXRlZC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNsb2FkZW5kXG4gICAqIEBhcGlcbiAgICovXG4gIExPQURFTkQ6ICdsb2FkZW5kJyxcbn07XG5cbi8qKipcbiAqIEB0eXBlZGVmIHsncG9zdHJlbmRlcid8J21vdmVzdGFydCd8J21vdmVlbmQnfCdsb2Fkc3RhcnQnfCdsb2FkZW5kJ30gVHlwZXNcbiAqL1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcFByb3BlcnR5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIExBWUVSR1JPVVA6ICdsYXllcmdyb3VwJyxcbiAgU0laRTogJ3NpemUnLFxuICBUQVJHRVQ6ICd0YXJnZXQnLFxuICBWSUVXOiAndmlldycsXG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0cnVjdHMvUHJpb3JpdHlRdWV1ZVxuICovXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge2NsZWFyfSBmcm9tICcuLi9vYmouanMnO1xuXG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBEUk9QID0gSW5maW5pdHk7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJpb3JpdHkgcXVldWUuXG4gKlxuICogVGhlIGltcGxlbWVudGF0aW9uIGlzIGluc3BpcmVkIGZyb20gdGhlIENsb3N1cmUgTGlicmFyeSdzIEhlYXAgY2xhc3MgYW5kXG4gKiBQeXRob24ncyBoZWFwcSBtb2R1bGUuXG4gKlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvbWFzdGVyL2Nsb3N1cmUvZ29vZy9zdHJ1Y3RzL2hlYXAuanNcbiAqIGFuZCBodHRwczovL2hnLnB5dGhvbi5vcmcvY3B5dGhvbi9maWxlLzIuNy9MaWIvaGVhcHEucHkuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqL1xuY2xhc3MgUHJpb3JpdHlRdWV1ZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQpOiBudW1iZXJ9IHByaW9yaXR5RnVuY3Rpb24gUHJpb3JpdHkgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCk6IHN0cmluZ30ga2V5RnVuY3Rpb24gS2V5IGZ1bmN0aW9uLlxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpb3JpdHlGdW5jdGlvbiwga2V5RnVuY3Rpb24pIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oVCk6IG51bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucHJpb3JpdHlGdW5jdGlvbl8gPSBwcmlvcml0eUZ1bmN0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKFQpOiBzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmtleUZ1bmN0aW9uXyA9IGtleUZ1bmN0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5PFQ+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5lbGVtZW50c18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5wcmlvcml0aWVzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucXVldWVkRWxlbWVudHNfID0ge307XG4gIH1cblxuICAvKipcbiAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLmVsZW1lbnRzXy5sZW5ndGggPSAwO1xuICAgIHRoaXMucHJpb3JpdGllc18ubGVuZ3RoID0gMDtcbiAgICBjbGVhcih0aGlzLnF1ZXVlZEVsZW1lbnRzXyk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFuZCByZXR1cm4gdGhlIGhpZ2hlc3QtcHJpb3JpdHkgZWxlbWVudC4gTyhsb2cgTikuXG4gICAqIEByZXR1cm4ge1R9IEVsZW1lbnQuXG4gICAqL1xuICBkZXF1ZXVlKCkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgY29uc3QgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzWzBdO1xuICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgZWxlbWVudHMubGVuZ3RoID0gMDtcbiAgICAgIHByaW9yaXRpZXMubGVuZ3RoID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudHNbMF0gPSBlbGVtZW50cy5wb3AoKTtcbiAgICAgIHByaW9yaXRpZXNbMF0gPSBwcmlvcml0aWVzLnBvcCgpO1xuICAgICAgdGhpcy5zaWZ0VXBfKDApO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50S2V5ID0gdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCk7XG4gICAgZGVsZXRlIHRoaXMucXVldWVkRWxlbWVudHNfW2VsZW1lbnRLZXldO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEVucXVldWUgYW4gZWxlbWVudC4gTyhsb2cgTikuXG4gICAqIEBwYXJhbSB7VH0gZWxlbWVudCBFbGVtZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZWxlbWVudCB3YXMgYWRkZWQgdG8gdGhlIHF1ZXVlLlxuICAgKi9cbiAgZW5xdWV1ZShlbGVtZW50KSB7XG4gICAgYXNzZXJ0KCEodGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCkgaW4gdGhpcy5xdWV1ZWRFbGVtZW50c18pLCAzMSk7IC8vIFRyaWVkIHRvIGVucXVldWUgYW4gYGVsZW1lbnRgIHRoYXQgd2FzIGFscmVhZHkgYWRkZWQgdG8gdGhlIHF1ZXVlXG4gICAgY29uc3QgcHJpb3JpdHkgPSB0aGlzLnByaW9yaXR5RnVuY3Rpb25fKGVsZW1lbnQpO1xuICAgIGlmIChwcmlvcml0eSAhPSBEUk9QKSB7XG4gICAgICB0aGlzLmVsZW1lbnRzXy5wdXNoKGVsZW1lbnQpO1xuICAgICAgdGhpcy5wcmlvcml0aWVzXy5wdXNoKHByaW9yaXR5KTtcbiAgICAgIHRoaXMucXVldWVkRWxlbWVudHNfW3RoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpXSA9IHRydWU7XG4gICAgICB0aGlzLnNpZnREb3duXygwLCB0aGlzLmVsZW1lbnRzXy5sZW5ndGggLSAxKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBDb3VudC5cbiAgICovXG4gIGdldENvdW50KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRzXy5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIGxlZnQgY2hpbGQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgbGVmdCBjaGlsZCBmb3IuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBsZWZ0IGNoaWxkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0TGVmdENoaWxkSW5kZXhfKGluZGV4KSB7XG4gICAgcmV0dXJuIGluZGV4ICogMiArIDE7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIHJpZ2h0IGNoaWxkIG9mIHRoZSBub2RlIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBnZXQgdGhlIHJpZ2h0IGNoaWxkIGZvci5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIHJpZ2h0IGNoaWxkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0UmlnaHRDaGlsZEluZGV4XyhpbmRleCkge1xuICAgIHJldHVybiBpbmRleCAqIDIgKyAyO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSBwYXJlbnQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgcGFyZW50IGZvci5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIHBhcmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFBhcmVudEluZGV4XyhpbmRleCkge1xuICAgIHJldHVybiAoaW5kZXggLSAxKSA+PiAxO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgdGhpcyBhIGhlYXAuIE8oTikuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoZWFwaWZ5XygpIHtcbiAgICBsZXQgaTtcbiAgICBmb3IgKGkgPSAodGhpcy5lbGVtZW50c18ubGVuZ3RoID4+IDEpIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHRoaXMuc2lmdFVwXyhpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZW1wdHkuXG4gICAqL1xuICBpc0VtcHR5KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRzXy5sZW5ndGggPT09IDA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGtleSBxdWV1ZWQuXG4gICAqL1xuICBpc0tleVF1ZXVlZChrZXkpIHtcbiAgICByZXR1cm4ga2V5IGluIHRoaXMucXVldWVkRWxlbWVudHNfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7VH0gZWxlbWVudCBFbGVtZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBxdWV1ZWQuXG4gICAqL1xuICBpc1F1ZXVlZChlbGVtZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNLZXlRdWV1ZWQodGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gbW92ZSBkb3duLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2lmdFVwXyhpbmRleCkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgY29uc3QgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgY29uc3QgY291bnQgPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICBjb25zdCBwcmlvcml0eSA9IHByaW9yaXRpZXNbaW5kZXhdO1xuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBpbmRleDtcblxuICAgIHdoaWxlIChpbmRleCA8IGNvdW50ID4+IDEpIHtcbiAgICAgIGNvbnN0IGxJbmRleCA9IHRoaXMuZ2V0TGVmdENoaWxkSW5kZXhfKGluZGV4KTtcbiAgICAgIGNvbnN0IHJJbmRleCA9IHRoaXMuZ2V0UmlnaHRDaGlsZEluZGV4XyhpbmRleCk7XG5cbiAgICAgIGNvbnN0IHNtYWxsZXJDaGlsZEluZGV4ID1cbiAgICAgICAgckluZGV4IDwgY291bnQgJiYgcHJpb3JpdGllc1tySW5kZXhdIDwgcHJpb3JpdGllc1tsSW5kZXhdXG4gICAgICAgICAgPyBySW5kZXhcbiAgICAgICAgICA6IGxJbmRleDtcblxuICAgICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudHNbc21hbGxlckNoaWxkSW5kZXhdO1xuICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0aWVzW3NtYWxsZXJDaGlsZEluZGV4XTtcbiAgICAgIGluZGV4ID0gc21hbGxlckNoaWxkSW5kZXg7XG4gICAgfVxuXG4gICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudDtcbiAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXR5O1xuICAgIHRoaXMuc2lmdERvd25fKHN0YXJ0SW5kZXgsIGluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRJbmRleCBUaGUgaW5kZXggb2YgdGhlIHJvb3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gbW92ZSB1cC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNpZnREb3duXyhzdGFydEluZGV4LCBpbmRleCkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgY29uc3QgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICBjb25zdCBwcmlvcml0eSA9IHByaW9yaXRpZXNbaW5kZXhdO1xuXG4gICAgd2hpbGUgKGluZGV4ID4gc3RhcnRJbmRleCkge1xuICAgICAgY29uc3QgcGFyZW50SW5kZXggPSB0aGlzLmdldFBhcmVudEluZGV4XyhpbmRleCk7XG4gICAgICBpZiAocHJpb3JpdGllc1twYXJlbnRJbmRleF0gPiBwcmlvcml0eSkge1xuICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50c1twYXJlbnRJbmRleF07XG4gICAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdGllc1twYXJlbnRJbmRleF07XG4gICAgICAgIGluZGV4ID0gcGFyZW50SW5kZXg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudDtcbiAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXR5O1xuICB9XG5cbiAgLyoqXG4gICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgKi9cbiAgcmVwcmlvcml0aXplKCkge1xuICAgIGNvbnN0IHByaW9yaXR5RnVuY3Rpb24gPSB0aGlzLnByaW9yaXR5RnVuY3Rpb25fO1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgY29uc3QgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBjb25zdCBuID0gZWxlbWVudHMubGVuZ3RoO1xuICAgIGxldCBlbGVtZW50LCBpLCBwcmlvcml0eTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBlbGVtZW50ID0gZWxlbWVudHNbaV07XG4gICAgICBwcmlvcml0eSA9IHByaW9yaXR5RnVuY3Rpb24oZWxlbWVudCk7XG4gICAgICBpZiAocHJpb3JpdHkgPT0gRFJPUCkge1xuICAgICAgICBkZWxldGUgdGhpcy5xdWV1ZWRFbGVtZW50c19bdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0eTtcbiAgICAgICAgZWxlbWVudHNbaW5kZXgrK10gPSBlbGVtZW50O1xuICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50cy5sZW5ndGggPSBpbmRleDtcbiAgICBwcmlvcml0aWVzLmxlbmd0aCA9IGluZGV4O1xuICAgIHRoaXMuaGVhcGlmeV8oKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQcmlvcml0eVF1ZXVlO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVRdWV1ZVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUHJpb3JpdHlRdWV1ZSwge0RST1B9IGZyb20gJy4vc3RydWN0cy9Qcmlvcml0eVF1ZXVlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi9UaWxlU3RhdGUuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdCwgc3RyaW5nLCBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSwgbnVtYmVyKTogbnVtYmVyfSBQcmlvcml0eUZ1bmN0aW9uXG4gKi9cblxuY2xhc3MgVGlsZVF1ZXVlIGV4dGVuZHMgUHJpb3JpdHlRdWV1ZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge1ByaW9yaXR5RnVuY3Rpb259IHRpbGVQcmlvcml0eUZ1bmN0aW9uIFRpbGUgcHJpb3JpdHkgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogP30gdGlsZUNoYW5nZUNhbGxiYWNrIEZ1bmN0aW9uIGNhbGxlZCBvbiBlYWNoIHRpbGUgY2hhbmdlIGV2ZW50LlxuICAgKi9cbiAgY29uc3RydWN0b3IodGlsZVByaW9yaXR5RnVuY3Rpb24sIHRpbGVDaGFuZ2VDYWxsYmFjaykge1xuICAgIHN1cGVyKFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge0FycmF5fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFByaW9yaXR5LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGlsZVByaW9yaXR5RnVuY3Rpb24uYXBwbHkobnVsbCwgZWxlbWVudCk7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge0FycmF5fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovIChlbGVtZW50WzBdKS5nZXRLZXkoKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgdGhpcy5ib3VuZEhhbmRsZVRpbGVDaGFuZ2VfID0gdGhpcy5oYW5kbGVUaWxlQ2hhbmdlLmJpbmQodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtmdW5jdGlvbigpOiA/fVxuICAgICAqL1xuICAgIHRoaXMudGlsZUNoYW5nZUNhbGxiYWNrXyA9IHRpbGVDaGFuZ2VDYWxsYmFjaztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVzTG9hZGluZ18gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsYm9vbGVhbj59XG4gICAgICovXG4gICAgdGhpcy50aWxlc0xvYWRpbmdLZXlzXyA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGVsZW1lbnQgRWxlbWVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGVsZW1lbnQgd2FzIGFkZGVkIHRvIHRoZSBxdWV1ZS5cbiAgICovXG4gIGVucXVldWUoZWxlbWVudCkge1xuICAgIGNvbnN0IGFkZGVkID0gc3VwZXIuZW5xdWV1ZShlbGVtZW50KTtcbiAgICBpZiAoYWRkZWQpIHtcbiAgICAgIGNvbnN0IHRpbGUgPSBlbGVtZW50WzBdO1xuICAgICAgdGlsZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyk7XG4gICAgfVxuICAgIHJldHVybiBhZGRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE51bWJlciBvZiB0aWxlcyBsb2FkaW5nLlxuICAgKi9cbiAgZ2V0VGlsZXNMb2FkaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnRpbGVzTG9hZGluZ187XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgaGFuZGxlVGlsZUNoYW5nZShldmVudCkge1xuICAgIGNvbnN0IHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICBjb25zdCBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICBpZiAoXG4gICAgICBzdGF0ZSA9PT0gVGlsZVN0YXRlLkxPQURFRCB8fFxuICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FUlJPUiB8fFxuICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FTVBUWVxuICAgICkge1xuICAgICAgaWYgKHN0YXRlICE9PSBUaWxlU3RhdGUuRVJST1IpIHtcbiAgICAgICAgdGlsZS5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyk7XG4gICAgICB9XG4gICAgICBjb25zdCB0aWxlS2V5ID0gdGlsZS5nZXRLZXkoKTtcbiAgICAgIGlmICh0aWxlS2V5IGluIHRoaXMudGlsZXNMb2FkaW5nS2V5c18pIHtcbiAgICAgICAgZGVsZXRlIHRoaXMudGlsZXNMb2FkaW5nS2V5c19bdGlsZUtleV07XG4gICAgICAgIC0tdGhpcy50aWxlc0xvYWRpbmdfO1xuICAgICAgfVxuICAgICAgdGhpcy50aWxlQ2hhbmdlQ2FsbGJhY2tfKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhUb3RhbExvYWRpbmcgTWF4aW11bSBudW1iZXIgdGlsZXMgdG8gbG9hZCBzaW11bHRhbmVvdXNseS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heE5ld0xvYWRzIE1heGltdW0gbnVtYmVyIG9mIG5ldyB0aWxlcyB0byBsb2FkLlxuICAgKi9cbiAgbG9hZE1vcmVUaWxlcyhtYXhUb3RhbExvYWRpbmcsIG1heE5ld0xvYWRzKSB7XG4gICAgbGV0IG5ld0xvYWRzID0gMDtcbiAgICBsZXQgc3RhdGUsIHRpbGUsIHRpbGVLZXk7XG4gICAgd2hpbGUgKFxuICAgICAgdGhpcy50aWxlc0xvYWRpbmdfIDwgbWF4VG90YWxMb2FkaW5nICYmXG4gICAgICBuZXdMb2FkcyA8IG1heE5ld0xvYWRzICYmXG4gICAgICB0aGlzLmdldENvdW50KCkgPiAwXG4gICAgKSB7XG4gICAgICB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZGVxdWV1ZSgpWzBdKTtcbiAgICAgIHRpbGVLZXkgPSB0aWxlLmdldEtleSgpO1xuICAgICAgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICBpZiAoc3RhdGUgPT09IFRpbGVTdGF0ZS5JRExFICYmICEodGlsZUtleSBpbiB0aGlzLnRpbGVzTG9hZGluZ0tleXNfKSkge1xuICAgICAgICB0aGlzLnRpbGVzTG9hZGluZ0tleXNfW3RpbGVLZXldID0gdHJ1ZTtcbiAgICAgICAgKyt0aGlzLnRpbGVzTG9hZGluZ187XG4gICAgICAgICsrbmV3TG9hZHM7XG4gICAgICAgIHRpbGUubG9hZCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaWxlUXVldWU7XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoJy4vTWFwLmpzJykuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0aWxlU291cmNlS2V5IFRpbGUgc291cmNlIGtleS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRpbGVDZW50ZXIgVGlsZSBjZW50ZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gdGlsZVJlc29sdXRpb24gVGlsZSByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHByaW9yaXR5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGlsZVByaW9yaXR5KFxuICBmcmFtZVN0YXRlLFxuICB0aWxlLFxuICB0aWxlU291cmNlS2V5LFxuICB0aWxlQ2VudGVyLFxuICB0aWxlUmVzb2x1dGlvblxuKSB7XG4gIC8vIEZpbHRlciBvdXQgdGlsZXMgYXQgaGlnaGVyIHpvb20gbGV2ZWxzIHRoYW4gdGhlIGN1cnJlbnQgem9vbSBsZXZlbCwgb3IgdGhhdFxuICAvLyBhcmUgb3V0c2lkZSB0aGUgdmlzaWJsZSBleHRlbnQuXG4gIGlmICghZnJhbWVTdGF0ZSB8fCAhKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS53YW50ZWRUaWxlcykpIHtcbiAgICByZXR1cm4gRFJPUDtcbiAgfVxuICBpZiAoIWZyYW1lU3RhdGUud2FudGVkVGlsZXNbdGlsZVNvdXJjZUtleV1bdGlsZS5nZXRLZXkoKV0pIHtcbiAgICByZXR1cm4gRFJPUDtcbiAgfVxuICAvLyBQcmlvcml0aXplIHRoZSBoaWdoZXN0IHpvb20gbGV2ZWwgdGlsZXMgY2xvc2VzdCB0byB0aGUgZm9jdXMuXG4gIC8vIFRpbGVzIGF0IGhpZ2hlciB6b29tIGxldmVscyBhcmUgcHJpb3JpdGl6ZWQgdXNpbmcgTWF0aC5sb2codGlsZVJlc29sdXRpb24pLlxuICAvLyBXaXRoaW4gYSB6b29tIGxldmVsLCB0aWxlcyBhcmUgcHJpb3JpdGl6ZWQgYnkgdGhlIGRpc3RhbmNlIGluIHBpeGVscyBiZXR3ZWVuXG4gIC8vIHRoZSBjZW50ZXIgb2YgdGhlIHRpbGUgYW5kIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXdwb3J0LiAgVGhlIGZhY3RvciBvZiA2NTUzNlxuICAvLyBtZWFucyB0aGF0IHRoZSBwcmlvcml0aXphdGlvbiBzaG91bGQgYmVoYXZlIGFzIGRlc2lyZWQgZm9yIHRpbGVzIHVwIHRvXG4gIC8vIDY1NTM2ICogTWF0aC5sb2coMikgPSA0NTQyNiBwaXhlbHMgZnJvbSB0aGUgZm9jdXMuXG4gIGNvbnN0IGNlbnRlciA9IGZyYW1lU3RhdGUudmlld1N0YXRlLmNlbnRlcjtcbiAgY29uc3QgZGVsdGFYID0gdGlsZUNlbnRlclswXSAtIGNlbnRlclswXTtcbiAgY29uc3QgZGVsdGFZID0gdGlsZUNlbnRlclsxXSAtIGNlbnRlclsxXTtcbiAgcmV0dXJuIChcbiAgICA2NTUzNiAqIE1hdGgubG9nKHRpbGVSZXNvbHV0aW9uKSArXG4gICAgTWF0aC5zcXJ0KGRlbHRhWCAqIGRlbHRhWCArIGRlbHRhWSAqIGRlbHRhWSkgLyB0aWxlUmVzb2x1dGlvblxuICApO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvQ29udHJvbFxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IE1hcEV2ZW50VHlwZSBmcm9tICcuLi9NYXBFdmVudFR5cGUuanMnO1xuaW1wb3J0IHtWT0lEfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQge3JlbW92ZU5vZGV9IGZyb20gJy4uL2RvbS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH0gW2VsZW1lbnRdIFRoZSBlbGVtZW50IGlzIHRoZSBjb250cm9sJ3NcbiAqIGNvbnRhaW5lciBlbGVtZW50LiBUaGlzIG9ubHkgbmVlZHMgdG8gYmUgc3BlY2lmaWVkIGlmIHlvdSdyZSBkZXZlbG9waW5nXG4gKiBhIGN1c3RvbSBjb250cm9sLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlblxuICogdGhlIGNvbnRyb2wgc2hvdWxkIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXG4gKiBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50XG4gKiB0aGUgY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgY29udHJvbCBpcyBhIHZpc2libGUgd2lkZ2V0IHdpdGggYSBET00gZWxlbWVudCBpbiBhIGZpeGVkIHBvc2l0aW9uIG9uIHRoZVxuICogc2NyZWVuLiBUaGV5IGNhbiBpbnZvbHZlIHVzZXIgaW5wdXQgKGJ1dHRvbnMpLCBvciBiZSBpbmZvcm1hdGlvbmFsIG9ubHk7XG4gKiB0aGUgcG9zaXRpb24gaXMgZGV0ZXJtaW5lZCB1c2luZyBDU1MuIEJ5IGRlZmF1bHQgdGhlc2UgYXJlIHBsYWNlZCBpbiB0aGVcbiAqIGNvbnRhaW5lciB3aXRoIENTUyBjbGFzcyBuYW1lIGBvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudGAsIGJ1dCBjYW4gdXNlXG4gKiBhbnkgb3V0c2lkZSBET00gZWxlbWVudC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBiYXNlIGNsYXNzIGZvciBjb250cm9scy4gWW91IGNhbiB1c2UgaXQgZm9yIHNpbXBsZSBjdXN0b21cbiAqIGNvbnRyb2xzIGJ5IGNyZWF0aW5nIHRoZSBlbGVtZW50IHdpdGggbGlzdGVuZXJzLCBjcmVhdGluZyBhbiBpbnN0YW5jZTpcbiAqIGBgYGpzXG4gKiBjb25zdCBteUNvbnRyb2wgPSBuZXcgQ29udHJvbCh7ZWxlbWVudDogbXlFbGVtZW50fSk7XG4gKiBgYGBcbiAqIGFuZCB0aGVuIGFkZGluZyB0aGlzIHRvIHRoZSBtYXAuXG4gKlxuICogVGhlIG1haW4gYWR2YW50YWdlIG9mIGhhdmluZyB0aGlzIGFzIGEgY29udHJvbCByYXRoZXIgdGhhbiBhIHNpbXBsZSBzZXBhcmF0ZVxuICogRE9NIGVsZW1lbnQgaXMgdGhhdCBwcmV2ZW50aW5nIHByb3BhZ2F0aW9uIGlzIGhhbmRsZWQgZm9yIHlvdS4gQ29udHJvbHNcbiAqIHdpbGwgYWxzbyBiZSBvYmplY3RzIGluIGEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LCBzbyB5b3UgY2FuIHVzZSB0aGVpciBtZXRob2RzLlxuICpcbiAqIFlvdSBjYW4gYWxzbyBleHRlbmQgdGhpcyBiYXNlIGZvciB5b3VyIG93biBjb250cm9sIGNsYXNzLiBTZWVcbiAqIGV4YW1wbGVzL2N1c3RvbS1jb250cm9scyBmb3IgYW4gZXhhbXBsZSBvZiBob3cgdG8gZG8gdGhpcy5cbiAqXG4gKiBAYXBpXG4gKi9cbmNsYXNzIENvbnRyb2wgZXh0ZW5kcyBCYXNlT2JqZWN0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBDb250cm9sIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGNvbnN0IGVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQ7XG4gICAgaWYgKGVsZW1lbnQgJiYgIW9wdGlvbnMudGFyZ2V0ICYmICFlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMpIHtcbiAgICAgIGVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQgPyBlbGVtZW50IDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdHxudWxsfVxuICAgICAqL1xuICAgIHRoaXMubWFwXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLmxpc3RlbmVyS2V5cyA9IFtdO1xuXG4gICAgaWYgKG9wdGlvbnMucmVuZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlciA9IG9wdGlvbnMucmVuZGVyO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgdGhpcy5zZXRUYXJnZXQob3B0aW9ucy50YXJnZXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cC5cbiAgICovXG4gIGRpc3Bvc2VJbnRlcm5hbCgpIHtcbiAgICByZW1vdmVOb2RlKHRoaXMuZWxlbWVudCk7XG4gICAgc3VwZXIuZGlzcG9zZUludGVybmFsKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgY29udHJvbC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR8bnVsbH0gTWFwLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRNYXAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwXztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGNvbnRyb2wgZnJvbSBpdHMgY3VycmVudCBtYXAgYW5kIGF0dGFjaCBpdCB0byB0aGUgbmV3IG1hcC5cbiAgICogUGFzcyBgbnVsbGAgdG8ganVzdCByZW1vdmUgdGhlIGNvbnRyb2wgZnJvbSB0aGUgY3VycmVudCBtYXAuXG4gICAqIFN1YmNsYXNzZXMgbWF5IHNldCB1cCBldmVudCBoYW5kbGVycyB0byBnZXQgbm90aWZpZWQgYWJvdXQgY2hhbmdlcyB0b1xuICAgKiB0aGUgbWFwIGhlcmUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR8bnVsbH0gbWFwIE1hcC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0TWFwKG1hcCkge1xuICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgIHJlbW92ZU5vZGUodGhpcy5lbGVtZW50KTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdGhpcy5saXN0ZW5lcktleXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmxpc3RlbmVyS2V5c1tpXSk7XG4gICAgfVxuICAgIHRoaXMubGlzdGVuZXJLZXlzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5tYXBfID0gbWFwO1xuICAgIGlmIChtYXApIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMudGFyZ2V0X1xuICAgICAgICA/IHRoaXMudGFyZ2V0X1xuICAgICAgICA6IG1hcC5nZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50KCk7XG4gICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgIGlmICh0aGlzLnJlbmRlciAhPT0gVk9JRCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5wdXNoKFxuICAgICAgICAgIGxpc3RlbihtYXAsIE1hcEV2ZW50VHlwZS5QT1NUUkVOREVSLCB0aGlzLnJlbmRlciwgdGhpcylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgY29udHJvbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIHJlbmRlcihtYXBFdmVudCkge31cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHNldCBhIHRhcmdldCBlbGVtZW50IGZvciB0aGUgY29udHJvbC4gSXQgaGFzIG5vXG4gICAqIGVmZmVjdCBpZiBpdCBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGNvbnRyb2wgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIG1hcCAoaS5lLlxuICAgKiBhZnRlciBgc2V0TWFwYCBpcyBjYWxsZWQgb24gdGhlIGNvbnRyb2wpLiBJZiBubyBgdGFyZ2V0YCBpcyBzZXQgaW4gdGhlXG4gICAqIG9wdGlvbnMgcGFzc2VkIHRvIHRoZSBjb250cm9sIGNvbnN0cnVjdG9yIGFuZCBpZiBgc2V0VGFyZ2V0YCBpcyBub3QgY2FsbGVkXG4gICAqIHRoZW4gdGhlIGNvbnRyb2wgaXMgYWRkZWQgdG8gdGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fHN0cmluZ30gdGFyZ2V0IFRhcmdldC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0VGFyZ2V0KHRhcmdldCkge1xuICAgIHRoaXMudGFyZ2V0XyA9XG4gICAgICB0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldCkgOiB0YXJnZXQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udHJvbDtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL0F0dHJpYnV0aW9uXG4gKi9cbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtDTEFTU19DT0xMQVBTRUQsIENMQVNTX0NPTlRST0wsIENMQVNTX1VOU0VMRUNUQUJMRX0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7ZXF1YWxzfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQge3JlbW92ZUNoaWxkcmVuLCByZXBsYWNlTm9kZX0gZnJvbSAnLi4vZG9tLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtYXR0cmlidXRpb24nXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdVxuICogd2FudCB0aGUgY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAnc1xuICogdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb2xsYXBzaWJsZV0gU3BlY2lmeSBpZiBhdHRyaWJ1dGlvbnMgY2FuXG4gKiBiZSBjb2xsYXBzZWQuIElmIG5vdCBzcGVjaWZpZWQsIHNvdXJjZXMgY29udHJvbCB0aGlzIGJlaGF2aW9yIHdpdGggdGhlaXJcbiAqIGBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZWAgc2V0dGluZy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbGxhcHNlZD10cnVlXSBTcGVjaWZ5IGlmIGF0dHJpYnV0aW9ucyBzaG91bGRcbiAqIGJlIGNvbGxhcHNlZCBhdCBzdGFydHVwLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0aXBMYWJlbD0nQXR0cmlidXRpb25zJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSBidXR0b24gdGlwLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFtsYWJlbD0naSddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGVcbiAqIGNvbGxhcHNlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2V4cGFuZENsYXNzTmFtZT1jbGFzc05hbWUgKyAnLWV4cGFuZCddIENTUyBjbGFzcyBuYW1lIGZvciB0aGVcbiAqIGNvbGxhcHNlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFtjb2xsYXBzZUxhYmVsPSfigLonXSBUZXh0IGxhYmVsIHRvIHVzZVxuICogZm9yIHRoZSBleHBhbmRlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NvbGxhcHNlQ2xhc3NOYW1lPWNsYXNzTmFtZSArICctY29sbGFwc2UnXSBDU1MgY2xhc3MgbmFtZSBmb3IgdGhlXG4gKiBleHBhbmRlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlblxuICogdGhlIGNvbnRyb2wgc2hvdWxkIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXG4gKiBjYWxsYmFjay5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENvbnRyb2wgdG8gc2hvdyBhbGwgdGhlIGF0dHJpYnV0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhlIGxheWVyIHNvdXJjZXNcbiAqIGluIHRoZSBtYXAuIFRoaXMgY29udHJvbCBpcyBvbmUgb2YgdGhlIGRlZmF1bHQgY29udHJvbHMgaW5jbHVkZWQgaW4gbWFwcy5cbiAqIEJ5IGRlZmF1bHQgaXQgd2lsbCBzaG93IGluIHRoZSBib3R0b20gcmlnaHQgcG9ydGlvbiBvZiB0aGUgbWFwLCBidXQgdGhpcyBjYW5cbiAqIGJlIGNoYW5nZWQgYnkgdXNpbmcgYSBjc3Mgc2VsZWN0b3IgZm9yIGAub2wtYXR0cmlidXRpb25gLlxuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgQXR0cmlidXRpb24gZXh0ZW5kcyBDb250cm9sIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIEF0dHJpYnV0aW9uIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICBzdXBlcih7XG4gICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgIHJlbmRlcjogb3B0aW9ucy5yZW5kZXIsXG4gICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy51bEVsZW1lbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5jb2xsYXBzZWRfID1cbiAgICAgIG9wdGlvbnMuY29sbGFwc2VkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNlZCA6IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMudXNlckNvbGxhcHNlZF8gPSB0aGlzLmNvbGxhcHNlZF87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMub3ZlcnJpZGVDb2xsYXBzaWJsZV8gPSBvcHRpb25zLmNvbGxhcHNpYmxlICE9PSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuY29sbGFwc2libGVfID1cbiAgICAgIG9wdGlvbnMuY29sbGFwc2libGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGFwc2libGUgOiB0cnVlO1xuXG4gICAgaWYgKCF0aGlzLmNvbGxhcHNpYmxlXykge1xuICAgICAgdGhpcy5jb2xsYXBzZWRfID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgY2xhc3NOYW1lID1cbiAgICAgIG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1hdHRyaWJ1dGlvbic7XG5cbiAgICBjb25zdCB0aXBMYWJlbCA9XG4gICAgICBvcHRpb25zLnRpcExhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpcExhYmVsIDogJ0F0dHJpYnV0aW9ucyc7XG5cbiAgICBjb25zdCBleHBhbmRDbGFzc05hbWUgPVxuICAgICAgb3B0aW9ucy5leHBhbmRDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuZXhwYW5kQ2xhc3NOYW1lXG4gICAgICAgIDogY2xhc3NOYW1lICsgJy1leHBhbmQnO1xuXG4gICAgY29uc3QgY29sbGFwc2VMYWJlbCA9XG4gICAgICBvcHRpb25zLmNvbGxhcHNlTGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGFwc2VMYWJlbCA6ICdcXHUyMDNBJztcblxuICAgIGNvbnN0IGNvbGxhcHNlQ2xhc3NOYW1lID1cbiAgICAgIG9wdGlvbnMuY29sbGFwc2VDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuY29sbGFwc2VDbGFzc05hbWVcbiAgICAgICAgOiBjbGFzc05hbWUgKyAnLWNvbGxhcHNlJztcblxuICAgIGlmICh0eXBlb2YgY29sbGFwc2VMYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8qKlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAqL1xuICAgICAgdGhpcy5jb2xsYXBzZUxhYmVsXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIHRoaXMuY29sbGFwc2VMYWJlbF8udGV4dENvbnRlbnQgPSBjb2xsYXBzZUxhYmVsO1xuICAgICAgdGhpcy5jb2xsYXBzZUxhYmVsXy5jbGFzc05hbWUgPSBjb2xsYXBzZUNsYXNzTmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb2xsYXBzZUxhYmVsXyA9IGNvbGxhcHNlTGFiZWw7XG4gICAgfVxuXG4gICAgY29uc3QgbGFiZWwgPSBvcHRpb25zLmxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxhYmVsIDogJ2knO1xuXG4gICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8qKlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAqL1xuICAgICAgdGhpcy5sYWJlbF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICB0aGlzLmxhYmVsXy50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgICAgdGhpcy5sYWJlbF8uY2xhc3NOYW1lID0gZXhwYW5kQ2xhc3NOYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxhYmVsXyA9IGxhYmVsO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGl2ZUxhYmVsID1cbiAgICAgIHRoaXMuY29sbGFwc2libGVfICYmICF0aGlzLmNvbGxhcHNlZF8gPyB0aGlzLmNvbGxhcHNlTGFiZWxfIDogdGhpcy5sYWJlbF87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLnRvZ2dsZUJ1dHRvbl8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvbl8uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBTdHJpbmcoIXRoaXMuY29sbGFwc2VkXykpO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uXy50aXRsZSA9IHRpcExhYmVsO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uXy5hcHBlbmRDaGlsZChhY3RpdmVMYWJlbCk7XG5cbiAgICB0aGlzLnRvZ2dsZUJ1dHRvbl8uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIEV2ZW50VHlwZS5DTElDSyxcbiAgICAgIHRoaXMuaGFuZGxlQ2xpY2tfLmJpbmQodGhpcyksXG4gICAgICBmYWxzZVxuICAgICk7XG5cbiAgICBjb25zdCBjc3NDbGFzc2VzID1cbiAgICAgIGNsYXNzTmFtZSArXG4gICAgICAnICcgK1xuICAgICAgQ0xBU1NfVU5TRUxFQ1RBQkxFICtcbiAgICAgICcgJyArXG4gICAgICBDTEFTU19DT05UUk9MICtcbiAgICAgICh0aGlzLmNvbGxhcHNlZF8gJiYgdGhpcy5jb2xsYXBzaWJsZV8gPyAnICcgKyBDTEFTU19DT0xMQVBTRUQgOiAnJykgK1xuICAgICAgKHRoaXMuY29sbGFwc2libGVfID8gJycgOiAnIG9sLXVuY29sbGFwc2libGUnKTtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudG9nZ2xlQnV0dG9uXyk7XG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnVsRWxlbWVudF8pO1xuXG4gICAgLyoqXG4gICAgICogQSBsaXN0IG9mIGN1cnJlbnRseSByZW5kZXJlZCByZXNvbHV0aW9ucy5cbiAgICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRBdHRyaWJ1dGlvbnNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlXyA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ29sbGVjdCBhIGxpc3Qgb2YgdmlzaWJsZSBhdHRyaWJ1dGlvbnMgYW5kIHNldCB0aGUgY29sbGFwc2libGUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IEF0dHJpYnV0aW9ucy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfKGZyYW1lU3RhdGUpIHtcbiAgICBjb25zdCB2aXNpYmxlQXR0cmlidXRpb25zID0gQXJyYXkuZnJvbShcbiAgICAgIG5ldyBTZXQoXG4gICAgICAgIHRoaXMuZ2V0TWFwKClcbiAgICAgICAgICAuZ2V0QWxsTGF5ZXJzKClcbiAgICAgICAgICAuZmxhdE1hcCgobGF5ZXIpID0+IGxheWVyLmdldEF0dHJpYnV0aW9ucyhmcmFtZVN0YXRlKSlcbiAgICAgIClcbiAgICApO1xuXG4gICAgY29uc3QgY29sbGFwc2libGUgPSAhdGhpcy5nZXRNYXAoKVxuICAgICAgLmdldEFsbExheWVycygpXG4gICAgICAuc29tZShcbiAgICAgICAgKGxheWVyKSA9PlxuICAgICAgICAgIGxheWVyLmdldFNvdXJjZSgpICYmXG4gICAgICAgICAgbGF5ZXIuZ2V0U291cmNlKCkuZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUoKSA9PT0gZmFsc2VcbiAgICAgICk7XG4gICAgaWYgKCF0aGlzLm92ZXJyaWRlQ29sbGFwc2libGVfKSB7XG4gICAgICB0aGlzLnNldENvbGxhcHNpYmxlKGNvbGxhcHNpYmxlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZpc2libGVBdHRyaWJ1dGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqL1xuICB1cGRhdGVFbGVtZW50XyhmcmFtZVN0YXRlKSB7XG4gICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICBpZiAodGhpcy5yZW5kZXJlZFZpc2libGVfKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhdHRyaWJ1dGlvbnMgPSB0aGlzLmNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfKGZyYW1lU3RhdGUpO1xuXG4gICAgY29uc3QgdmlzaWJsZSA9IGF0dHJpYnV0aW9ucy5sZW5ndGggPiAwO1xuICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZV8gIT0gdmlzaWJsZSkge1xuICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gJycgOiAnbm9uZSc7XG4gICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB2aXNpYmxlO1xuICAgIH1cblxuICAgIGlmIChlcXVhbHMoYXR0cmlidXRpb25zLCB0aGlzLnJlbmRlcmVkQXR0cmlidXRpb25zXykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLnVsRWxlbWVudF8pO1xuXG4gICAgLy8gYXBwZW5kIHRoZSBhdHRyaWJ1dGlvbnNcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBhdHRyaWJ1dGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICBlbGVtZW50LmlubmVySFRNTCA9IGF0dHJpYnV0aW9uc1tpXTtcbiAgICAgIHRoaXMudWxFbGVtZW50Xy5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcmVkQXR0cmlidXRpb25zXyA9IGF0dHJpYnV0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUNsaWNrXyhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5oYW5kbGVUb2dnbGVfKCk7XG4gICAgdGhpcy51c2VyQ29sbGFwc2VkXyA9IHRoaXMuY29sbGFwc2VkXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlVG9nZ2xlXygpIHtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShDTEFTU19DT0xMQVBTRUQpO1xuICAgIGlmICh0aGlzLmNvbGxhcHNlZF8pIHtcbiAgICAgIHJlcGxhY2VOb2RlKHRoaXMuY29sbGFwc2VMYWJlbF8sIHRoaXMubGFiZWxfKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVwbGFjZU5vZGUodGhpcy5sYWJlbF8sIHRoaXMuY29sbGFwc2VMYWJlbF8pO1xuICAgIH1cbiAgICB0aGlzLmNvbGxhcHNlZF8gPSAhdGhpcy5jb2xsYXBzZWRfO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBTdHJpbmcoIXRoaXMuY29sbGFwc2VkXykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGF0dHJpYnV0aW9uIGlzIGNvbGxhcHNpYmxlLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNpYmxlLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRDb2xsYXBzaWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb2xsYXBzaWJsZV87XG4gIH1cblxuICAvKipcbiAgICogU2V0IHdoZXRoZXIgdGhlIGF0dHJpYnV0aW9uIHNob3VsZCBiZSBjb2xsYXBzaWJsZS5cbiAgICogQHBhcmFtIHtib29sZWFufSBjb2xsYXBzaWJsZSBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2libGUuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldENvbGxhcHNpYmxlKGNvbGxhcHNpYmxlKSB7XG4gICAgaWYgKHRoaXMuY29sbGFwc2libGVfID09PSBjb2xsYXBzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmNvbGxhcHNpYmxlXyA9IGNvbGxhcHNpYmxlO1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdvbC11bmNvbGxhcHNpYmxlJyk7XG4gICAgaWYgKHRoaXMudXNlckNvbGxhcHNlZF8pIHtcbiAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsYXBzZSBvciBleHBhbmQgdGhlIGF0dHJpYnV0aW9uIGFjY29yZGluZyB0byB0aGUgcGFzc2VkIHBhcmFtZXRlci4gV2lsbFxuICAgKiBub3QgZG8gYW55dGhpbmcgaWYgdGhlIGF0dHJpYnV0aW9uIGlzbid0IGNvbGxhcHNpYmxlIG9yIGlmIHRoZSBjdXJyZW50XG4gICAqIGNvbGxhcHNlZCBzdGF0ZSBpcyBhbHJlYWR5IHRoZSBvbmUgcmVxdWVzdGVkLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbGxhcHNlZCBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2VkLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRDb2xsYXBzZWQoY29sbGFwc2VkKSB7XG4gICAgdGhpcy51c2VyQ29sbGFwc2VkXyA9IGNvbGxhcHNlZDtcbiAgICBpZiAoIXRoaXMuY29sbGFwc2libGVfIHx8IHRoaXMuY29sbGFwc2VkXyA9PT0gY29sbGFwc2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBgdHJ1ZWAgd2hlbiB0aGUgYXR0cmlidXRpb24gaXMgY3VycmVudGx5IGNvbGxhcHNlZCBvciBgZmFsc2VgXG4gICAqIG90aGVyd2lzZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNlZC5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0Q29sbGFwc2VkKCkge1xuICAgIHJldHVybiB0aGlzLmNvbGxhcHNlZF87XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBhdHRyaWJ1dGlvbiBlbGVtZW50LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICByZW5kZXIobWFwRXZlbnQpIHtcbiAgICB0aGlzLnVwZGF0ZUVsZW1lbnRfKG1hcEV2ZW50LmZyYW1lU3RhdGUpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF0dHJpYnV0aW9uO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvUm90YXRlXG4gKi9cbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtDTEFTU19DT05UUk9MLCBDTEFTU19ISURERU4sIENMQVNTX1VOU0VMRUNUQUJMRX0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7ZWFzZU91dH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtcm90YXRlJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW2xhYmVsPSfih6cnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHJvdGF0ZSBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGlwTGFiZWw9J1Jlc2V0IHJvdGF0aW9uJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSByb3RhdGUgdGlwLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjb21wYXNzQ2xhc3NOYW1lPSdvbC1jb21wYXNzJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZSBjb21wYXNzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdXRvSGlkZT10cnVlXSBIaWRlIHRoZSBjb250cm9sIHdoZW4gcm90YXRpb24gaXMgMC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIGNvbnRyb2wgc2hvdWxkXG4gKiBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKTp2b2lkfSBbcmVzZXROb3J0aF0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIGNvbnRyb2wgaXMgY2xpY2tlZC5cbiAqIFRoaXMgd2lsbCBvdmVycmlkZSB0aGUgZGVmYXVsdCBgcmVzZXROb3J0aGAuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGUgY29udHJvbCB0byBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGJ1dHRvbiBjb250cm9sIHRvIHJlc2V0IHJvdGF0aW9uIHRvIDAuXG4gKiBUbyBzdHlsZSB0aGlzIGNvbnRyb2wgdXNlIGNzcyBzZWxlY3RvciBgLm9sLXJvdGF0ZWAuIEEgYC5vbC1oaWRkZW5gIGNzc1xuICogc2VsZWN0b3IgaXMgYWRkZWQgdG8gdGhlIGJ1dHRvbiB3aGVuIHRoZSByb3RhdGlvbiBpcyAwLlxuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgUm90YXRlIGV4dGVuZHMgQ29udHJvbCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSBSb3RhdGUgb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcblxuICAgIHN1cGVyKHtcbiAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgcmVuZGVyOiBvcHRpb25zLnJlbmRlcixcbiAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgfSk7XG5cbiAgICBjb25zdCBjbGFzc05hbWUgPVxuICAgICAgb3B0aW9ucy5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xhc3NOYW1lIDogJ29sLXJvdGF0ZSc7XG5cbiAgICBjb25zdCBsYWJlbCA9IG9wdGlvbnMubGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGFiZWwgOiAnXFx1MjFFNyc7XG5cbiAgICBjb25zdCBjb21wYXNzQ2xhc3NOYW1lID1cbiAgICAgIG9wdGlvbnMuY29tcGFzc0NsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy5jb21wYXNzQ2xhc3NOYW1lXG4gICAgICAgIDogJ29sLWNvbXBhc3MnO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5sYWJlbF8gPSBudWxsO1xuXG4gICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMubGFiZWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgdGhpcy5sYWJlbF8uY2xhc3NOYW1lID0gY29tcGFzc0NsYXNzTmFtZTtcbiAgICAgIHRoaXMubGFiZWxfLnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGFiZWxfID0gbGFiZWw7XG4gICAgICB0aGlzLmxhYmVsXy5jbGFzc0xpc3QuYWRkKGNvbXBhc3NDbGFzc05hbWUpO1xuICAgIH1cblxuICAgIGNvbnN0IHRpcExhYmVsID0gb3B0aW9ucy50aXBMYWJlbCA/IG9wdGlvbnMudGlwTGFiZWwgOiAnUmVzZXQgcm90YXRpb24nO1xuXG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgYnV0dG9uLmNsYXNzTmFtZSA9IGNsYXNzTmFtZSArICctcmVzZXQnO1xuICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgYnV0dG9uLnRpdGxlID0gdGlwTGFiZWw7XG4gICAgYnV0dG9uLmFwcGVuZENoaWxkKHRoaXMubGFiZWxfKTtcblxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgRXZlbnRUeXBlLkNMSUNLLFxuICAgICAgdGhpcy5oYW5kbGVDbGlja18uYmluZCh0aGlzKSxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIGNvbnN0IGNzc0NsYXNzZXMgPVxuICAgICAgY2xhc3NOYW1lICsgJyAnICsgQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyAnICsgQ0xBU1NfQ09OVFJPTDtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cbiAgICB0aGlzLmNhbGxSZXNldE5vcnRoXyA9IG9wdGlvbnMucmVzZXROb3J0aCA/IG9wdGlvbnMucmVzZXROb3J0aCA6IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYXV0b0hpZGVfID0gb3B0aW9ucy5hdXRvSGlkZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hdXRvSGlkZSA6IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMucm90YXRpb25fID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKHRoaXMuYXV0b0hpZGVfKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19ISURERU4pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUNsaWNrXyhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKHRoaXMuY2FsbFJlc2V0Tm9ydGhfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuY2FsbFJlc2V0Tm9ydGhfKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzZXROb3J0aF8oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlc2V0Tm9ydGhfKCkge1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgaWYgKCF2aWV3KSB7XG4gICAgICAvLyB0aGUgbWFwIGRvZXMgbm90IGhhdmUgYSB2aWV3LCBzbyB3ZSBjYW4ndCBhY3RcbiAgICAgIC8vIHVwb24gaXRcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgcm90YXRpb24gPSB2aWV3LmdldFJvdGF0aW9uKCk7XG4gICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICh0aGlzLmR1cmF0aW9uXyA+IDAgJiYgcm90YXRpb24gJSAoMiAqIE1hdGguUEkpICE9PSAwKSB7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgcm90YXRpb246IDAsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aWV3LnNldFJvdGF0aW9uKDApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHJvdGF0ZSBjb250cm9sIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwRXZlbnQgTWFwIGV2ZW50LlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHJlbmRlcihtYXBFdmVudCkge1xuICAgIGNvbnN0IGZyYW1lU3RhdGUgPSBtYXBFdmVudC5mcmFtZVN0YXRlO1xuICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCByb3RhdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uO1xuICAgIGlmIChyb3RhdGlvbiAhPSB0aGlzLnJvdGF0aW9uXykge1xuICAgICAgY29uc3QgdHJhbnNmb3JtID0gJ3JvdGF0ZSgnICsgcm90YXRpb24gKyAncmFkKSc7XG4gICAgICBpZiAodGhpcy5hdXRvSGlkZV8pIHtcbiAgICAgICAgY29uc3QgY29udGFpbnMgPSB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX0hJRERFTik7XG4gICAgICAgIGlmICghY29udGFpbnMgJiYgcm90YXRpb24gPT09IDApIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19ISURERU4pO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbnRhaW5zICYmIHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfSElEREVOKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5sYWJlbF8uc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgIH1cbiAgICB0aGlzLnJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJvdGF0ZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL1pvb21cbiAqL1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9Db250cm9sLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge0NMQVNTX0NPTlRST0wsIENMQVNTX1VOU0VMRUNUQUJMRX0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7ZWFzZU91dH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC16b29tJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3pvb21JbkNsYXNzTmFtZT1jbGFzc05hbWUgKyAnLWluJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZSB6b29tLWluIGJ1dHRvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbU91dENsYXNzTmFtZT1jbGFzc05hbWUgKyAnLW91dCddIENTUyBjbGFzcyBuYW1lIGZvciB0aGUgem9vbS1vdXQgYnV0dG9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFt6b29tSW5MYWJlbD0nKyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgem9vbS1pblxuICogYnV0dG9uLiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbem9vbU91dExhYmVsPSfigJMnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHpvb20tb3V0IGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt6b29tSW5UaXBMYWJlbD0nWm9vbSBpbiddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbU91dFRpcExhYmVsPSdab29tIG91dCddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gZGVsdGEgYXBwbGllZCBvbiBlYWNoIGNsaWNrLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnQgdGhlIGNvbnRyb2wgdG8gYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb250cm9sIHdpdGggMiBidXR0b25zLCBvbmUgZm9yIHpvb20gaW4gYW5kIG9uZSBmb3Igem9vbSBvdXQuXG4gKiBUaGlzIGNvbnRyb2wgaXMgb25lIG9mIHRoZSBkZWZhdWx0IGNvbnRyb2xzIG9mIGEgbWFwLiBUbyBzdHlsZSB0aGlzIGNvbnRyb2xcbiAqIHVzZSBjc3Mgc2VsZWN0b3JzIGAub2wtem9vbS1pbmAgYW5kIGAub2wtem9vbS1vdXRgLlxuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgWm9vbSBleHRlbmRzIENvbnRyb2wge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc10gWm9vbSBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gICAgc3VwZXIoe1xuICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuICAgIH0pO1xuXG4gICAgY29uc3QgY2xhc3NOYW1lID1cbiAgICAgIG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC16b29tJztcblxuICAgIGNvbnN0IGRlbHRhID0gb3B0aW9ucy5kZWx0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kZWx0YSA6IDE7XG5cbiAgICBjb25zdCB6b29tSW5DbGFzc05hbWUgPVxuICAgICAgb3B0aW9ucy56b29tSW5DbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuem9vbUluQ2xhc3NOYW1lXG4gICAgICAgIDogY2xhc3NOYW1lICsgJy1pbic7XG5cbiAgICBjb25zdCB6b29tT3V0Q2xhc3NOYW1lID1cbiAgICAgIG9wdGlvbnMuem9vbU91dENsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy56b29tT3V0Q2xhc3NOYW1lXG4gICAgICAgIDogY2xhc3NOYW1lICsgJy1vdXQnO1xuXG4gICAgY29uc3Qgem9vbUluTGFiZWwgPVxuICAgICAgb3B0aW9ucy56b29tSW5MYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tSW5MYWJlbCA6ICcrJztcbiAgICBjb25zdCB6b29tT3V0TGFiZWwgPVxuICAgICAgb3B0aW9ucy56b29tT3V0TGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbU91dExhYmVsIDogJ1xcdTIwMTMnO1xuXG4gICAgY29uc3Qgem9vbUluVGlwTGFiZWwgPVxuICAgICAgb3B0aW9ucy56b29tSW5UaXBMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tSW5UaXBMYWJlbCA6ICdab29tIGluJztcbiAgICBjb25zdCB6b29tT3V0VGlwTGFiZWwgPVxuICAgICAgb3B0aW9ucy56b29tT3V0VGlwTGFiZWwgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuem9vbU91dFRpcExhYmVsXG4gICAgICAgIDogJ1pvb20gb3V0JztcblxuICAgIGNvbnN0IGluRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGluRWxlbWVudC5jbGFzc05hbWUgPSB6b29tSW5DbGFzc05hbWU7XG4gICAgaW5FbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICBpbkVsZW1lbnQudGl0bGUgPSB6b29tSW5UaXBMYWJlbDtcbiAgICBpbkVsZW1lbnQuYXBwZW5kQ2hpbGQoXG4gICAgICB0eXBlb2Ygem9vbUluTGFiZWwgPT09ICdzdHJpbmcnXG4gICAgICAgID8gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoem9vbUluTGFiZWwpXG4gICAgICAgIDogem9vbUluTGFiZWxcbiAgICApO1xuXG4gICAgaW5FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBFdmVudFR5cGUuQ0xJQ0ssXG4gICAgICB0aGlzLmhhbmRsZUNsaWNrXy5iaW5kKHRoaXMsIGRlbHRhKSxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIGNvbnN0IG91dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBvdXRFbGVtZW50LmNsYXNzTmFtZSA9IHpvb21PdXRDbGFzc05hbWU7XG4gICAgb3V0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgb3V0RWxlbWVudC50aXRsZSA9IHpvb21PdXRUaXBMYWJlbDtcbiAgICBvdXRFbGVtZW50LmFwcGVuZENoaWxkKFxuICAgICAgdHlwZW9mIHpvb21PdXRMYWJlbCA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh6b29tT3V0TGFiZWwpXG4gICAgICAgIDogem9vbU91dExhYmVsXG4gICAgKTtcblxuICAgIG91dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIEV2ZW50VHlwZS5DTElDSyxcbiAgICAgIHRoaXMuaGFuZGxlQ2xpY2tfLmJpbmQodGhpcywgLWRlbHRhKSxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIGNvbnN0IGNzc0NsYXNzZXMgPVxuICAgICAgY2xhc3NOYW1lICsgJyAnICsgQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyAnICsgQ0xBU1NfQ09OVFJPTDtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKGluRWxlbWVudCk7XG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZChvdXRFbGVtZW50KTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFpvb20gZGVsdGEuXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIGhhbmRsZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlQ2xpY2tfKGRlbHRhLCBldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy56b29tQnlEZWx0YV8oZGVsdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBab29tIGRlbHRhLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgem9vbUJ5RGVsdGFfKGRlbHRhKSB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAoIXZpZXcpIHtcbiAgICAgIC8vIHRoZSBtYXAgZG9lcyBub3QgaGF2ZSBhIHZpZXcsIHNvIHdlIGNhbid0IGFjdFxuICAgICAgLy8gdXBvbiBpdFxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjdXJyZW50Wm9vbSA9IHZpZXcuZ2V0Wm9vbSgpO1xuICAgIGlmIChjdXJyZW50Wm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBuZXdab29tID0gdmlldy5nZXRDb25zdHJhaW5lZFpvb20oY3VycmVudFpvb20gKyBkZWx0YSk7XG4gICAgICBpZiAodGhpcy5kdXJhdGlvbl8gPiAwKSB7XG4gICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICB6b29tOiBuZXdab29tLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uXyxcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmlldy5zZXRab29tKG5ld1pvb20pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBab29tO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1Byb3BlcnR5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIEFDVElWRTogJ2FjdGl2ZScsXG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb25Qcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7ZWFzZU91dCwgbGluZWFyfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTphY3RpdmUnLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmFjdGl2ZScsIFJldHVybj59IEludGVyYWN0aW9uT25TaWduYXR1cmVcbiAqL1xuXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIGludGVyYWN0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEludGVyYWN0aW9uT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gaGFuZGxlRXZlbnRcbiAqIE1ldGhvZCBjYWxsZWQgYnkgdGhlIG1hcCB0byBub3RpZnkgdGhlIGludGVyYWN0aW9uIHRoYXQgYSBicm93c2VyIGV2ZW50IHdhc1xuICogZGlzcGF0Y2hlZCB0byB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBwcm9wYWdhdGlvbiBvZlxuICogdGhlIGV2ZW50IHRvIG90aGVyIGludGVyYWN0aW9ucyBpbiB0aGUgbWFwJ3MgaW50ZXJhY3Rpb25zIGNoYWluIHdpbGwgYmVcbiAqIHByZXZlbnRlZCAodGhpcyBpbmNsdWRlcyBmdW5jdGlvbnMgd2l0aCBubyBleHBsaWNpdCByZXR1cm4pLiBUaGUgaW50ZXJhY3Rpb25zXG4gKiBhcmUgdHJhdmVyc2VkIGluIHJldmVyc2Ugb3JkZXIgb2YgdGhlIGludGVyYWN0aW9ucyBjb2xsZWN0aW9uIG9mIHRoZSBtYXAuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBVc2VyIGFjdGlvbnMgdGhhdCBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBtYXAuIFNvbWUgYXJlIHNpbWlsYXIgdG8gY29udHJvbHMsXG4gKiBidXQgYXJlIG5vdCBhc3NvY2lhdGVkIHdpdGggYSBET00gZWxlbWVudC5cbiAqIEZvciBleGFtcGxlLCB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219IGlzXG4gKiBmdW5jdGlvbmFsbHkgdGhlIHNhbWUgYXMge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0sIGJ1dCB0cmlnZ2VyZWRcbiAqIGJ5IGEga2V5Ym9hcmQgZXZlbnQgbm90IGEgYnV0dG9uIGVsZW1lbnQgZXZlbnQuXG4gKiBBbHRob3VnaCBpbnRlcmFjdGlvbnMgZG8gbm90IGhhdmUgYSBET00gZWxlbWVudCwgc29tZSBvZiB0aGVtIGRvIHJlbmRlclxuICogdmVjdG9ycyBhbmQgc28gYXJlIHZpc2libGUgb24gdGhlIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xuY2xhc3MgSW50ZXJhY3Rpb24gZXh0ZW5kcyBCYXNlT2JqZWN0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7SW50ZXJhY3Rpb25PcHRpb25zfSBbb3B0aW9uc10gT3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtJbnRlcmFjdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub247XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge0ludGVyYWN0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbmNlO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtJbnRlcmFjdGlvbk9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAqL1xuICAgIHRoaXMudW47XG5cbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmhhbmRsZUV2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZUV2ZW50ID0gb3B0aW9ucy5oYW5kbGVFdmVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdHxudWxsfVxuICAgICAqL1xuICAgIHRoaXMubWFwXyA9IG51bGw7XG5cbiAgICB0aGlzLnNldEFjdGl2ZSh0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGUgaW50ZXJhY3Rpb24gaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBpbnRlcmFjdGlvbiBpcyBhY3RpdmUsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRBY3RpdmUoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KEludGVyYWN0aW9uUHJvcGVydHkuQUNUSVZFKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW50ZXJhY3Rpb24uXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fG51bGx9IE1hcC5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0TWFwKCkge1xuICAgIHJldHVybiB0aGlzLm1hcF87XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGhhbmRsZUV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIG9yIGRlYWN0aXZhdGUgdGhlIGludGVyYWN0aW9uLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFjdGl2ZSBBY3RpdmUuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldEFjdGl2ZShhY3RpdmUpIHtcbiAgICB0aGlzLnNldChJbnRlcmFjdGlvblByb3BlcnR5LkFDVElWRSwgYWN0aXZlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGludGVyYWN0aW9uIGZyb20gaXRzIGN1cnJlbnQgbWFwIGFuZCBhdHRhY2ggaXQgdG8gdGhlIG5ldyBtYXAuXG4gICAqIFN1YmNsYXNzZXMgbWF5IHNldCB1cCBldmVudCBoYW5kbGVycyB0byBnZXQgbm90aWZpZWQgYWJvdXQgY2hhbmdlcyB0b1xuICAgKiB0aGUgbWFwIGhlcmUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR8bnVsbH0gbWFwIE1hcC5cbiAgICovXG4gIHNldE1hcChtYXApIHtcbiAgICB0aGlzLm1hcF8gPSBtYXA7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1ZpZXcuanNcIikuZGVmYXVsdH0gdmlldyBWaWV3LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRlbHRhIERlbHRhLlxuICogQHBhcmFtIHtudW1iZXJ9IFtkdXJhdGlvbl0gRHVyYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYW4odmlldywgZGVsdGEsIGR1cmF0aW9uKSB7XG4gIGNvbnN0IGN1cnJlbnRDZW50ZXIgPSB2aWV3LmdldENlbnRlckludGVybmFsKCk7XG4gIGlmIChjdXJyZW50Q2VudGVyKSB7XG4gICAgY29uc3QgY2VudGVyID0gW2N1cnJlbnRDZW50ZXJbMF0gKyBkZWx0YVswXSwgY3VycmVudENlbnRlclsxXSArIGRlbHRhWzFdXTtcbiAgICB2aWV3LmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICBkdXJhdGlvbjogZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IGR1cmF0aW9uIDogMjUwLFxuICAgICAgZWFzaW5nOiBsaW5lYXIsXG4gICAgICBjZW50ZXI6IHZpZXcuZ2V0Q29uc3RyYWluZWRDZW50ZXIoY2VudGVyKSxcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgRGVsdGEgZnJvbSBwcmV2aW91cyB6b29tIGxldmVsLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIEFuY2hvciBjb29yZGluYXRlIGluIHRoZSB1c2VyIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW2R1cmF0aW9uXSBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCBhbmNob3IsIGR1cmF0aW9uKSB7XG4gIGNvbnN0IGN1cnJlbnRab29tID0gdmlldy5nZXRab29tKCk7XG5cbiAgaWYgKGN1cnJlbnRab29tID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBuZXdab29tID0gdmlldy5nZXRDb25zdHJhaW5lZFpvb20oY3VycmVudFpvb20gKyBkZWx0YSk7XG4gIGNvbnN0IG5ld1Jlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb25Gb3Jab29tKG5ld1pvb20pO1xuXG4gIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gIH1cbiAgdmlldy5hbmltYXRlKHtcbiAgICByZXNvbHV0aW9uOiBuZXdSZXNvbHV0aW9uLFxuICAgIGFuY2hvcjogYW5jaG9yLFxuICAgIGR1cmF0aW9uOiBkdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gZHVyYXRpb24gOiAyNTAsXG4gICAgZWFzaW5nOiBlYXNlT3V0LFxuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSW50ZXJhY3Rpb247XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tXG4gKi9cbmltcG9ydCBJbnRlcmFjdGlvbiwge3pvb21CeURlbHRhfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZWx0YT0xXSBUaGUgem9vbSBkZWx0YSBhcHBsaWVkIG9uIGVhY2ggZG91YmxlIGNsaWNrLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gYnkgZG91YmxlLWNsaWNraW5nIG9uIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbmNsYXNzIERvdWJsZUNsaWNrWm9vbSBleHRlbmRzIEludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZGVsdGFfID0gb3B0aW9ucy5kZWx0YSA/IG9wdGlvbnMuZGVsdGEgOiAxO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IChpZiBpdCB3YXMgYVxuICAgKiBkb3VibGVjbGljaykgYW5kIGV2ZW50dWFsbHkgem9vbXMgdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAqL1xuICBoYW5kbGVFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBsZXQgc3RvcEV2ZW50ID0gZmFsc2U7XG4gICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0spIHtcbiAgICAgIGNvbnN0IGJyb3dzZXJFdmVudCA9IC8qKiBAdHlwZSB7TW91c2VFdmVudH0gKi8gKFxuICAgICAgICBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudFxuICAgICAgKTtcbiAgICAgIGNvbnN0IG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICBjb25zdCBhbmNob3IgPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICAgIGNvbnN0IGRlbHRhID0gYnJvd3NlckV2ZW50LnNoaWZ0S2V5ID8gLXRoaXMuZGVsdGFfIDogdGhpcy5kZWx0YV87XG4gICAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCBhbmNob3IsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgIGJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRG91YmxlQ2xpY2tab29tO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1BvaW50ZXJcbiAqL1xuaW1wb3J0IEludGVyYWN0aW9uIGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZURvd25FdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZG93blwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIHRoZW4gYSBkcmFnXG4gKiBzZXF1ZW5jZSBpcyBzdGFydGVkLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW2hhbmRsZURyYWdFdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZHJhZ1wiIGV2ZW50cy4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gXCJtb3ZlXCIgZXZlbnRzXG4gKiBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZUV2ZW50XVxuICogTWV0aG9kIGNhbGxlZCBieSB0aGUgbWFwIHRvIG5vdGlmeSB0aGUgaW50ZXJhY3Rpb24gdGhhdCBhIGJyb3dzZXIgZXZlbnQgd2FzXG4gKiBkaXNwYXRjaGVkIHRvIHRoZSBtYXAuIFRoZSBmdW5jdGlvbiBtYXkgcmV0dXJuIGBmYWxzZWAgdG8gcHJldmVudCB0aGVcbiAqIHByb3BhZ2F0aW9uIG9mIHRoZSBldmVudCB0byBvdGhlciBpbnRlcmFjdGlvbnMgaW4gdGhlIG1hcCdzIGludGVyYWN0aW9uc1xuICogY2hhaW4uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbaGFuZGxlTW92ZUV2ZW50XVxuICogRnVuY3Rpb24gaGFuZGxpbmcgXCJtb3ZlXCIgZXZlbnRzLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBcIm1vdmVcIiBldmVudHMuXG4gKiBUaGlzIGZ1bmN0aW9ucyBpcyBhbHNvIGNhbGxlZCBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLCBzbyBkdXJpbmcgYSBkcmFnXG4gKiBzZXF1ZW5jZSBib3RoIHRoZSBgaGFuZGxlRHJhZ0V2ZW50YCBmdW5jdGlvbiBhbmQgdGhpcyBmdW5jdGlvbiBhcmUgY2FsbGVkLlxuICogSWYgYGhhbmRsZURvd25FdmVudGAgaXMgZGVmaW5lZCBhbmQgaXQgcmV0dXJucyB0cnVlIHRoaXMgZnVuY3Rpb24gd2lsbCBub3RcbiAqIGJlIGNhbGxlZCBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZVVwRXZlbnRdXG4gKiAgRnVuY3Rpb24gaGFuZGxpbmcgXCJ1cFwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCB0aGVuIHRoZVxuICogY3VycmVudCBkcmFnIHNlcXVlbmNlIGlzIHN0b3BwZWQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOmJvb2xlYW59IFtzdG9wRG93bl1cbiAqIFNob3VsZCB0aGUgZG93biBldmVudCBiZSBwcm9wYWdhdGVkIHRvIG90aGVyIGludGVyYWN0aW9ucywgb3Igc2hvdWxkIGJlXG4gKiBzdG9wcGVkP1xuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyB0aGF0IGNhbGxzIHVzZXItZGVmaW5lZCBmdW5jdGlvbnMgb24gYGRvd25gLCBgbW92ZWAgYW5kIGB1cGBcbiAqIGV2ZW50cy4gVGhpcyBjbGFzcyBhbHNvIG1hbmFnZXMgXCJkcmFnIHNlcXVlbmNlc1wiLlxuICpcbiAqIFdoZW4gdGhlIGBoYW5kbGVEb3duRXZlbnRgIHVzZXIgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWAgYSBkcmFnIHNlcXVlbmNlIGlzXG4gKiBzdGFydGVkLiBEdXJpbmcgYSBkcmFnIHNlcXVlbmNlIHRoZSBgaGFuZGxlRHJhZ0V2ZW50YCB1c2VyIGZ1bmN0aW9uIGlzXG4gKiBjYWxsZWQgb24gYG1vdmVgIGV2ZW50cy4gVGhlIGRyYWcgc2VxdWVuY2UgZW5kcyB3aGVuIHRoZSBgaGFuZGxlVXBFdmVudGBcbiAqIHVzZXIgZnVuY3Rpb24gaXMgY2FsbGVkIGFuZCByZXR1cm5zIGBmYWxzZWAuXG4gKiBAYXBpXG4gKi9cbmNsYXNzIFBvaW50ZXJJbnRlcmFjdGlvbiBleHRlbmRzIEludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICBzdXBlcihcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIChvcHRpb25zKVxuICAgICk7XG5cbiAgICBpZiAob3B0aW9ucy5oYW5kbGVEb3duRXZlbnQpIHtcbiAgICAgIHRoaXMuaGFuZGxlRG93bkV2ZW50ID0gb3B0aW9ucy5oYW5kbGVEb3duRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZURyYWdFdmVudCA9IG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50O1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmhhbmRsZU1vdmVFdmVudCkge1xuICAgICAgdGhpcy5oYW5kbGVNb3ZlRXZlbnQgPSBvcHRpb25zLmhhbmRsZU1vdmVFdmVudDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5oYW5kbGVVcEV2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZVVwRXZlbnQgPSBvcHRpb25zLmhhbmRsZVVwRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgIHRoaXMuc3RvcERvd24gPSBvcHRpb25zLnN0b3BEb3duO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxQb2ludGVyRXZlbnQ+fVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLnRhcmdldFBvaW50ZXJzID0gW107XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCBudW1iZXIgb2YgcG9pbnRlcnMgaW52b2x2ZWQgaW4gdGhlIGludGVyYWN0aW9uLFxuICAgKiBlLmcuIGAyYCB3aGVuIHR3byBmaW5nZXJzIGFyZSB1c2VkLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgcG9pbnRlcnMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFBvaW50ZXJDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgaGFuZGxlRG93bkV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBoYW5kbGVEcmFnRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7fVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGFuZCBtYXkgY2FsbCBpbnRvXG4gICAqIG90aGVyIGZ1bmN0aW9ucywgaWYgZXZlbnQgc2VxdWVuY2VzIGxpa2UgZS5nLiAnZHJhZycgb3IgJ2Rvd24tdXAnIGV0Yy4gYXJlXG4gICAqIGRldGVjdGVkLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgbGV0IHN0b3BFdmVudCA9IGZhbHNlO1xuICAgIHRoaXMudXBkYXRlVHJhY2tlZFBvaW50ZXJzXyhtYXBCcm93c2VyRXZlbnQpO1xuICAgIGlmICh0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRHJhZ0V2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIC8vIHByZXZlbnQgcGFnZSBzY3JvbGxpbmcgZHVyaW5nIGRyYWdnaW5nXG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9IGVsc2UgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZWRVcCA9IHRoaXMuaGFuZGxlVXBFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPVxuICAgICAgICAgIGhhbmRsZWRVcCAmJiB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZWQgPSB0aGlzLmhhbmRsZURvd25FdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBoYW5kbGVkO1xuICAgICAgICBzdG9wRXZlbnQgPSB0aGlzLnN0b3BEb3duKGhhbmRsZWQpO1xuICAgICAgfSBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlTW92ZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIG1vdmUgZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGhhbmRsZU1vdmVFdmVudChtYXBCcm93c2VyRXZlbnQpIHt9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBoYW5kbGVVcEV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIFwiZG93blwiIGV2ZW50cyBzaG91bGQgYmUgcHJvcGFnYXRlZFxuICAgKiB0byBvdGhlciBpbnRlcmFjdGlvbnMgb3Igc2hvdWxkIGJlIHN0b3BwZWQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFuZGxlZCBXYXMgdGhlIGV2ZW50IGhhbmRsZWQgYnkgdGhlIGludGVyYWN0aW9uP1xuICAgKiBAcmV0dXJuIHtib29sZWFufSBTaG91bGQgdGhlIGBkb3duYCBldmVudCBiZSBzdG9wcGVkP1xuICAgKi9cbiAgc3RvcERvd24oaGFuZGxlZCkge1xuICAgIHJldHVybiBoYW5kbGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVwZGF0ZVRyYWNrZWRQb2ludGVyc18obWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKG1hcEJyb3dzZXJFdmVudC5hY3RpdmVQb2ludGVycykge1xuICAgICAgdGhpcy50YXJnZXRQb2ludGVycyA9IG1hcEJyb3dzZXJFdmVudC5hY3RpdmVQb2ludGVycztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFBvaW50ZXJFdmVudD59IHBvaW50ZXJFdmVudHMgTGlzdCBvZiBldmVudHMuXG4gKiBAcmV0dXJuIHt7Y2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXJ9fSBDZW50cm9pZCBwaXhlbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNlbnRyb2lkKHBvaW50ZXJFdmVudHMpIHtcbiAgY29uc3QgbGVuZ3RoID0gcG9pbnRlckV2ZW50cy5sZW5ndGg7XG4gIGxldCBjbGllbnRYID0gMDtcbiAgbGV0IGNsaWVudFkgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgY2xpZW50WCArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFg7XG4gICAgY2xpZW50WSArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFk7XG4gIH1cbiAgcmV0dXJuIHtjbGllbnRYOiBjbGllbnRYIC8gbGVuZ3RoLCBjbGllbnRZOiBjbGllbnRZIC8gbGVuZ3RofTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9pbnRlckludGVyYWN0aW9uO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9jb25kaXRpb25cbiAqL1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQge0ZBTFNFLCBUUlVFfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHtNQUMsIFdFQktJVH0gZnJvbSAnLi4vaGFzLmpzJztcbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuLi9hc3NlcnRzLmpzJztcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBge2Jvb2xlYW59YC4gSWYgdGhlIGNvbmRpdGlvbiBpcyBtZXQsIHRydWUgc2hvdWxkIGJlIHJldHVybmVkLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbih0aGlzOiA/LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IENvbmRpdGlvblxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIGNvbmRpdGlvbiBmdW5jdGlvbiB0aGF0IHBhc3NlcyB3aGVuIGFsbCBwcm92aWRlZCBjb25kaXRpb25zIHBhc3MuXG4gKiBAcGFyYW0gey4uLkNvbmRpdGlvbn0gdmFyX2FyZ3MgQ29uZGl0aW9ucyB0byBjaGVjay5cbiAqIEByZXR1cm4ge0NvbmRpdGlvbn0gQ29uZGl0aW9uIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWxsKHZhcl9hcmdzKSB7XG4gIGNvbnN0IGNvbmRpdGlvbnMgPSBhcmd1bWVudHM7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQWxsIGNvbmRpdGlvbnMgcGFzc2VkLlxuICAgKi9cbiAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGxldCBwYXNzID0gdHJ1ZTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBjb25kaXRpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHBhc3MgPSBwYXNzICYmIGNvbmRpdGlvbnNbaV0oZXZlbnQpO1xuICAgICAgaWYgKCFwYXNzKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFzcztcbiAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIGFsdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2UgKGUuZy4gd2hlblxuICogYWRkaXRpb25hbGx5IHRoZSBzaGlmdC1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBhbHQga2V5IGlzIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBhbHRLZXlPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKFxuICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50XG4gICk7XG4gIHJldHVybiAoXG4gICAgb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXlcbiAgKTtcbn07XG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBhbHQta2V5IGFuZCBzaGlmdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2VcbiAqIChlLmcuIHdoZW4gYWRkaXRpb25hbGx5IHRoZSBwbGF0Zm9ybS1tb2RpZmllci1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBhbHQgYW5kIHNoaWZ0IGtleXMgYXJlIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBhbHRTaGlmdEtleXNPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKFxuICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50XG4gICk7XG4gIHJldHVybiAoXG4gICAgb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgb3JpZ2luYWxFdmVudC5zaGlmdEtleVxuICApO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy4gVGhpcyBjb25kaXRpb24gcmVxdWlyZXMgYSBtYXAgdGFyZ2V0XG4gKiBlbGVtZW50IHdpdGggYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSwgZS5nLiBgPGRpdiBpZD1cIm1hcFwiIHRhYmluZGV4PVwiMVwiPmAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBmb2N1cyA9IGZ1bmN0aW9uIChldmVudCkge1xuICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZXZlbnQubWFwLmdldFRhcmdldEVsZW1lbnQoKTtcbiAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGV2ZW50Lm1hcC5nZXRPd25lckRvY3VtZW50KCkuYWN0aXZlRWxlbWVudDtcbiAgcmV0dXJuIHRhcmdldEVsZW1lbnQuY29udGFpbnMoYWN0aXZlRWxlbWVudCk7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIG1hcCBoYXMgdGhlIGZvY3VzIG9yIG5vICd0YWJpbmRleCcgYXR0cmlidXRlIHNldC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBtYXAgY29udGFpbmVyIGhhcyB0aGUgZm9jdXMgb3Igbm8gJ3RhYmluZGV4JyBhdHRyaWJ1dGUuXG4gKi9cbmV4cG9ydCBjb25zdCBmb2N1c1dpdGhUYWJpbmRleCA9IGZ1bmN0aW9uIChldmVudCkge1xuICByZXR1cm4gZXZlbnQubWFwLmdldFRhcmdldEVsZW1lbnQoKS5oYXNBdHRyaWJ1dGUoJ3RhYmluZGV4JylcbiAgICA/IGZvY3VzKGV2ZW50KVxuICAgIDogdHJ1ZTtcbn07XG5cbi8qKlxuICogUmV0dXJuIGFsd2F5cyB0cnVlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBhbHdheXMgPSBUUlVFO1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgYGNsaWNrYCBldmVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGNsaWNrYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGNvbnN0IGNsaWNrID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5DTElDSztcbn07XG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFzIGFuIFwiYWN0aW9uXCItcHJvZHVjaW5nIG1vdXNlIGJ1dHRvbi5cbiAqXG4gKiBCeSBkZWZpbml0aW9uLCB0aGlzIGluY2x1ZGVzIGxlZnQtY2xpY2sgb24gd2luZG93cy9saW51eCwgYW5kIGxlZnQtY2xpY2tcbiAqIHdpdGhvdXQgdGhlIGN0cmwga2V5IG9uIE1hY3MuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHJlc3VsdC5cbiAqL1xuZXhwb3J0IGNvbnN0IG1vdXNlQWN0aW9uQnV0dG9uID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqLyAoXG4gICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnRcbiAgKTtcbiAgcmV0dXJuIG9yaWdpbmFsRXZlbnQuYnV0dG9uID09IDAgJiYgIShXRUJLSVQgJiYgTUFDICYmIG9yaWdpbmFsRXZlbnQuY3RybEtleSk7XG59O1xuXG4vKipcbiAqIFJldHVybiBhbHdheXMgZmFsc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gRmFsc2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBuZXZlciA9IEZBTFNFO1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGJyb3dzZXIgZXZlbnQgaXMgYSBgcG9pbnRlcm1vdmVgIGV2ZW50LCBgZmFsc2VgXG4gKiBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgYnJvd3NlciBldmVudCBpcyBhIGBwb2ludGVybW92ZWAgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBwb2ludGVyTW92ZSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09ICdwb2ludGVybW92ZSc7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBzaW5nbGVDbGljayA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuU0lOR0xFQ0xJQ0s7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBkYmxjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBkYmxjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBkb3VibGVDbGljayA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0s7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgbm8gbW9kaWZpZXIga2V5IChhbHQtLCBzaGlmdC0gb3IgcGxhdGZvcm0tbW9kaWZpZXIta2V5KSBpc1xuICogcHJlc3NlZC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIG9ubHkgaWYgdGhlcmUgbm8gbW9kaWZpZXIga2V5cyBhcmUgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGNvbnN0IG5vTW9kaWZpZXJLZXlzID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKFxuICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50XG4gICk7XG4gIHJldHVybiAoXG4gICAgIW9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICFvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5XG4gICk7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5ICh0aGUgbWV0YS1rZXkgb24gTWFjLFxuICogY3RybC1rZXkgb3RoZXJ3aXNlKSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseVxuICogdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIHBsYXRmb3JtIG1vZGlmaWVyIGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgY29uc3QgcGxhdGZvcm1Nb2RpZmllcktleU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gIGNvbnN0IG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAoXG4gICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnRcbiAgKTtcbiAgcmV0dXJuIChcbiAgICAhb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAoTUFDID8gb3JpZ2luYWxFdmVudC5tZXRhS2V5IDogb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICFvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5XG4gICk7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgc2hpZnQta2V5IGlzIHByZXNzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlIChlLmcuIHdoZW5cbiAqIGFkZGl0aW9uYWxseSB0aGUgYWx0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIHNoaWZ0IGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgY29uc3Qgc2hpZnRLZXlPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKFxuICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50XG4gICk7XG4gIHJldHVybiAoXG4gICAgIW9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgIG9yaWdpbmFsRXZlbnQuc2hpZnRLZXlcbiAgKTtcbn07XG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgbm90IGVkaXRhYmxlLCBpLmUuIG5vdCBhbiBgaW5wdXRgLFxuICogYHNlbGVjdGAsIG9yIGB0ZXh0YXJlYWAgZWxlbWVudCBhbmQgbm8gYGNvbnRlbnRlZGl0YWJsZWAgYXR0cmlidXRlIGlzXG4gKiBzZXQgb3IgaW5oZXJpdGVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIG9ubHkgaWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIG5vdCBlZGl0YWJsZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGNvbnN0IHRhcmdldE5vdEVkaXRhYmxlID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKFxuICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50XG4gICk7XG4gIGNvbnN0IHRhZ05hbWUgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChvcmlnaW5hbEV2ZW50LnRhcmdldCkudGFnTmFtZTtcbiAgcmV0dXJuIChcbiAgICB0YWdOYW1lICE9PSAnSU5QVVQnICYmXG4gICAgdGFnTmFtZSAhPT0gJ1NFTEVDVCcgJiZcbiAgICB0YWdOYW1lICE9PSAnVEVYVEFSRUEnICYmXG4gICAgLy8gYGlzQ29udGVudEVkaXRhYmxlYCBpcyBvbmx5IGF2YWlsYWJsZSBvbiBgSFRNTEVsZW1lbnRgLCBidXQgaXQgbWF5IGFsc28gYmUgYVxuICAgIC8vIGRpZmZlcmVudCB0eXBlIGxpa2UgYFNWR0VsZW1lbnRgLlxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICAhb3JpZ2luYWxFdmVudC50YXJnZXQuaXNDb250ZW50RWRpdGFibGVcbiAgKTtcbn07XG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgbW91c2UgZGV2aWNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIG1vdXNlIGRldmljZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGNvbnN0IG1vdXNlT25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgY29uc3QgcG9pbnRlckV2ZW50ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdH0gKi8gKFxuICAgIG1hcEJyb3dzZXJFdmVudFxuICApLm9yaWdpbmFsRXZlbnQ7XG4gIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgLy8gc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyN3aWRsLVBvaW50ZXJFdmVudC1wb2ludGVyVHlwZVxuICByZXR1cm4gcG9pbnRlckV2ZW50LnBvaW50ZXJUeXBlID09ICdtb3VzZSc7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHRvdWNoYWJsZSBkZXZpY2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgdG91Y2hhYmxlIGRldmljZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGNvbnN0IHRvdWNoT25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgY29uc3QgcG9pbnRlckV2dCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChcbiAgICBtYXBCcm93c2VyRXZlbnRcbiAgKS5vcmlnaW5hbEV2ZW50O1xuICBhc3NlcnQocG9pbnRlckV2dCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAvLyBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI3dpZGwtUG9pbnRlckV2ZW50LXBvaW50ZXJUeXBlXG4gIHJldHVybiBwb2ludGVyRXZ0LnBvaW50ZXJUeXBlID09PSAndG91Y2gnO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBkaWdpdGFsIHBlbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBkaWdpdGFsIHBlbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGNvbnN0IHBlbk9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gIGNvbnN0IHBvaW50ZXJFdnQgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAoXG4gICAgbWFwQnJvd3NlckV2ZW50XG4gICkub3JpZ2luYWxFdmVudDtcbiAgYXNzZXJ0KHBvaW50ZXJFdnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgLy8gc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyN3aWRsLVBvaW50ZXJFdmVudC1wb2ludGVyVHlwZVxuICByZXR1cm4gcG9pbnRlckV2dC5wb2ludGVyVHlwZSA9PT0gJ3Blbic7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHByaW1hcnkgcG9pbnRlciBpblxuICogY29udGFjdCB3aXRoIHRoZSBzdXJmYWNlIG9yIGlmIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBpcyBwcmVzc2VkLlxuICogU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyNidXR0b24tc3RhdGVzLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHByaW1hcnkgcG9pbnRlci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGNvbnN0IHByaW1hcnlBY3Rpb24gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gIGNvbnN0IHBvaW50ZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChcbiAgICBtYXBCcm93c2VyRXZlbnRcbiAgKS5vcmlnaW5hbEV2ZW50O1xuICBhc3NlcnQocG9pbnRlckV2ZW50ICE9PSB1bmRlZmluZWQsIDU2KTsgLy8gbWFwQnJvd3NlckV2ZW50IG11c3Qgb3JpZ2luYXRlIGZyb20gYSBwb2ludGVyIGV2ZW50XG4gIHJldHVybiBwb2ludGVyRXZlbnQuaXNQcmltYXJ5ICYmIHBvaW50ZXJFdmVudC5idXR0b24gPT09IDA7XG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdQYW5cbiAqL1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiwge1xuICBjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVycyxcbn0gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7RkFMU0V9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge1xuICBhbGwsXG4gIGZvY3VzV2l0aFRhYmluZGV4LFxuICBub01vZGlmaWVyS2V5cyxcbiAgcHJpbWFyeUFjdGlvbixcbn0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQge2Vhc2VPdXR9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG5pbXBvcnQge1xuICByb3RhdGUgYXMgcm90YXRlQ29vcmRpbmF0ZSxcbiAgc2NhbGUgYXMgc2NhbGVDb29yZGluYXRlLFxufSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLm5vTW9kaWZpZXJLZXlzfSBhbmQge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLnByaW1hcnlBY3Rpb259LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb25Gb2N1c09ubHk9ZmFsc2VdIFdoZW4gdGhlIG1hcCdzIHRhcmdldCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSBzZXQsXG4gKiB0aGUgaW50ZXJhY3Rpb24gd2lsbCBvbmx5IGhhbmRsZSBldmVudHMgd2hlbiB0aGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL0tpbmV0aWMuanNcIikuZGVmYXVsdH0gW2tpbmV0aWNdIEtpbmV0aWMgaW5lcnRpYSB0byBhcHBseSB0byB0aGUgcGFuLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHBhbiB0aGUgbWFwIGJ5IGRyYWdnaW5nIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbmNsYXNzIERyYWdQYW4gZXh0ZW5kcyBQb2ludGVySW50ZXJhY3Rpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc10gT3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcih7XG4gICAgICBzdG9wRG93bjogRkFMU0UsXG4gICAgfSk7XG5cbiAgICBvcHRpb25zID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL0tpbmV0aWMuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5raW5ldGljXyA9IG9wdGlvbnMua2luZXRpYztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubGFzdFBvaW50ZXJzQ291bnRfO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5wYW5uaW5nXyA9IGZhbHNlO1xuXG4gICAgY29uc3QgY29uZGl0aW9uID0gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgID8gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgIDogYWxsKG5vTW9kaWZpZXJLZXlzLCBwcmltYXJ5QWN0aW9uKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMub25Gb2N1c09ubHlcbiAgICAgID8gYWxsKGZvY3VzV2l0aFRhYmluZGV4LCBjb25kaXRpb24pXG4gICAgICA6IGNvbmRpdGlvbjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5ub0tpbmV0aWNfID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICovXG4gIGhhbmRsZURyYWdFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBjb25zdCBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIGlmICghdGhpcy5wYW5uaW5nXykge1xuICAgICAgdGhpcy5wYW5uaW5nXyA9IHRydWU7XG4gICAgICBtYXAuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0UG9pbnRlcnMgPSB0aGlzLnRhcmdldFBvaW50ZXJzO1xuICAgIGNvbnN0IGNlbnRyb2lkID0gbWFwLmdldEV2ZW50UGl4ZWwoY2VudHJvaWRGcm9tUG9pbnRlcnModGFyZ2V0UG9pbnRlcnMpKTtcbiAgICBpZiAodGFyZ2V0UG9pbnRlcnMubGVuZ3RoID09IHRoaXMubGFzdFBvaW50ZXJzQ291bnRfKSB7XG4gICAgICBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICB0aGlzLmtpbmV0aWNfLnVwZGF0ZShjZW50cm9pZFswXSwgY2VudHJvaWRbMV0pO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubGFzdENlbnRyb2lkKSB7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gW1xuICAgICAgICAgIHRoaXMubGFzdENlbnRyb2lkWzBdIC0gY2VudHJvaWRbMF0sXG4gICAgICAgICAgY2VudHJvaWRbMV0gLSB0aGlzLmxhc3RDZW50cm9pZFsxXSxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIHNjYWxlQ29vcmRpbmF0ZShkZWx0YSwgdmlldy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgICAgICByb3RhdGVDb29yZGluYXRlKGRlbHRhLCB2aWV3LmdldFJvdGF0aW9uKCkpO1xuICAgICAgICB2aWV3LmFkanVzdENlbnRlckludGVybmFsKGRlbHRhKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgIC8vIHJlc2V0IHNvIHdlIGRvbid0IG92ZXJlc3RpbWF0ZSB0aGUga2luZXRpYyBlbmVyZ3kgYWZ0ZXJcbiAgICAgIC8vIGFmdGVyIG9uZSBmaW5nZXIgZG93biwgdGlueSBkcmFnLCBzZWNvbmQgZmluZ2VyIGRvd25cbiAgICAgIHRoaXMua2luZXRpY18uYmVnaW4oKTtcbiAgICB9XG4gICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBjZW50cm9pZDtcbiAgICB0aGlzLmxhc3RQb2ludGVyc0NvdW50XyA9IHRhcmdldFBvaW50ZXJzLmxlbmd0aDtcbiAgICBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgKi9cbiAgaGFuZGxlVXBFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBjb25zdCBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIGNvbnN0IHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaWYgKCF0aGlzLm5vS2luZXRpY18gJiYgdGhpcy5raW5ldGljXyAmJiB0aGlzLmtpbmV0aWNfLmVuZCgpKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gdGhpcy5raW5ldGljXy5nZXREaXN0YW5jZSgpO1xuICAgICAgICBjb25zdCBhbmdsZSA9IHRoaXMua2luZXRpY18uZ2V0QW5nbGUoKTtcbiAgICAgICAgY29uc3QgY2VudGVyID0gdmlldy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgICAgICBjb25zdCBjZW50ZXJweCA9IG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlSW50ZXJuYWwoY2VudGVyKTtcbiAgICAgICAgY29uc3QgZGVzdCA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwoW1xuICAgICAgICAgIGNlbnRlcnB4WzBdIC0gZGlzdGFuY2UgKiBNYXRoLmNvcyhhbmdsZSksXG4gICAgICAgICAgY2VudGVycHhbMV0gLSBkaXN0YW5jZSAqIE1hdGguc2luKGFuZ2xlKSxcbiAgICAgICAgXSk7XG4gICAgICAgIHZpZXcuYW5pbWF0ZUludGVybmFsKHtcbiAgICAgICAgICBjZW50ZXI6IHZpZXcuZ2V0Q29uc3RyYWluZWRDZW50ZXIoZGVzdCksXG4gICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucGFubmluZ18pIHtcbiAgICAgICAgdGhpcy5wYW5uaW5nXyA9IGZhbHNlO1xuICAgICAgICB2aWV3LmVuZEludGVyYWN0aW9uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAvLyByZXNldCBzbyB3ZSBkb24ndCBvdmVyZXN0aW1hdGUgdGhlIGtpbmV0aWMgZW5lcmd5IGFmdGVyXG4gICAgICAvLyBhZnRlciBvbmUgZmluZ2VyIHVwLCB0aW55IGRyYWcsIHNlY29uZCBmaW5nZXIgdXBcbiAgICAgIHRoaXMua2luZXRpY18uYmVnaW4oKTtcbiAgICB9XG4gICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAqL1xuICBoYW5kbGVEb3duRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMCAmJiB0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgY29uc3QgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIGNvbnN0IHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuICAgICAgLy8gc3RvcCBhbnkgY3VycmVudCBhbmltYXRpb25cbiAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgICAgfVxuICAgICAgLy8gTm8ga2luZXRpYyBhcyBzb29uIGFzIG1vcmUgdGhhbiBvbmUgcG9pbnRlciBvbiB0aGUgc2NyZWVuIGlzXG4gICAgICAvLyBkZXRlY3RlZC4gVGhpcyBpcyB0byBwcmV2ZW50IG5hc3R5IHBhbnMgYWZ0ZXIgcGluY2guXG4gICAgICB0aGlzLm5vS2luZXRpY18gPSB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDE7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERyYWdQYW47XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZVxuICovXG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uIGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQge0ZBTFNFfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHtcbiAgYWx0U2hpZnRLZXlzT25seSxcbiAgbW91c2VBY3Rpb25CdXR0b24sXG4gIG1vdXNlT25seSxcbn0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQge2Rpc2FibGV9IGZyb20gJy4uL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24uYWx0U2hpZnRLZXlzT25seX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byByb3RhdGUgdGhlIG1hcCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiB0aGUgYWx0IGFuZCBzaGlmdCBrZXlzIGFyZSBoZWxkIGRvd24uXG4gKlxuICogVGhpcyBpbnRlcmFjdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgbW91c2UgZGV2aWNlcy5cbiAqIEBhcGlcbiAqL1xuY2xhc3MgRHJhZ1JvdGF0ZSBleHRlbmRzIFBvaW50ZXJJbnRlcmFjdGlvbiB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSBPcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gICAgc3VwZXIoe1xuICAgICAgc3RvcERvd246IEZBTFNFLFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICovXG4gICAgdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IGFsdFNoaWZ0S2V5c09ubHk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICovXG4gIGhhbmRsZURyYWdFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAodmlldy5nZXRDb25zdHJhaW50cygpLnJvdGF0aW9uID09PSBkaXNhYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xuICAgIGNvbnN0IG9mZnNldCA9IG1hcEJyb3dzZXJFdmVudC5waXhlbDtcbiAgICBjb25zdCB0aGV0YSA9IE1hdGguYXRhbjIoc2l6ZVsxXSAvIDIgLSBvZmZzZXRbMV0sIG9mZnNldFswXSAtIHNpemVbMF0gLyAyKTtcbiAgICBpZiAodGhpcy5sYXN0QW5nbGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IGRlbHRhID0gdGhldGEgLSB0aGlzLmxhc3RBbmdsZV87XG4gICAgICB2aWV3LmFkanVzdFJvdGF0aW9uSW50ZXJuYWwoLWRlbHRhKTtcbiAgICB9XG4gICAgdGhpcy5sYXN0QW5nbGVfID0gdGhldGE7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAqL1xuICBoYW5kbGVVcEV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgdmlldy5lbmRJbnRlcmFjdGlvbih0aGlzLmR1cmF0aW9uXyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAqL1xuICBoYW5kbGVEb3duRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIG1vdXNlQWN0aW9uQnV0dG9uKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgIHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpXG4gICAgKSB7XG4gICAgICBjb25zdCBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgbWFwLmdldFZpZXcoKS5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERyYWdSb3RhdGU7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL0JveFxuICovXG5cbmltcG9ydCBEaXNwb3NhYmxlIGZyb20gJy4uL0Rpc3Bvc2FibGUuanMnO1xuaW1wb3J0IFBvbHlnb24gZnJvbSAnLi4vZ2VvbS9Qb2x5Z29uLmpzJztcblxuY2xhc3MgUmVuZGVyQm94IGV4dGVuZHMgRGlzcG9zYWJsZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIENTUyBjbGFzcyBuYW1lLlxuICAgKi9cbiAgY29uc3RydWN0b3IoY2xhc3NOYW1lKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZ2VvbWV0cnlfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmVsZW1lbnRfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICB0aGlzLmVsZW1lbnRfLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG4gICAgdGhpcy5lbGVtZW50Xy5jbGFzc05hbWUgPSAnb2wtYm94ICcgKyBjbGFzc05hbWU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdHxudWxsfVxuICAgICAqL1xuICAgIHRoaXMubWFwXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0UGl4ZWxfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAqL1xuICAgIHRoaXMuZW5kUGl4ZWxfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cC5cbiAgICovXG4gIGRpc3Bvc2VJbnRlcm5hbCgpIHtcbiAgICB0aGlzLnNldE1hcChudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVuZGVyXygpIHtcbiAgICBjb25zdCBzdGFydFBpeGVsID0gdGhpcy5zdGFydFBpeGVsXztcbiAgICBjb25zdCBlbmRQaXhlbCA9IHRoaXMuZW5kUGl4ZWxfO1xuICAgIGNvbnN0IHB4ID0gJ3B4JztcbiAgICBjb25zdCBzdHlsZSA9IHRoaXMuZWxlbWVudF8uc3R5bGU7XG4gICAgc3R5bGUubGVmdCA9IE1hdGgubWluKHN0YXJ0UGl4ZWxbMF0sIGVuZFBpeGVsWzBdKSArIHB4O1xuICAgIHN0eWxlLnRvcCA9IE1hdGgubWluKHN0YXJ0UGl4ZWxbMV0sIGVuZFBpeGVsWzFdKSArIHB4O1xuICAgIHN0eWxlLndpZHRoID0gTWF0aC5hYnMoZW5kUGl4ZWxbMF0gLSBzdGFydFBpeGVsWzBdKSArIHB4O1xuICAgIHN0eWxlLmhlaWdodCA9IE1hdGguYWJzKGVuZFBpeGVsWzFdIC0gc3RhcnRQaXhlbFsxXSkgKyBweDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fG51bGx9IG1hcCBNYXAuXG4gICAqL1xuICBzZXRNYXAobWFwKSB7XG4gICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgdGhpcy5tYXBfLmdldE92ZXJsYXlDb250YWluZXIoKS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5lbGVtZW50Xy5zdHlsZTtcbiAgICAgIHN0eWxlLmxlZnQgPSAnaW5oZXJpdCc7XG4gICAgICBzdHlsZS50b3AgPSAnaW5oZXJpdCc7XG4gICAgICBzdHlsZS53aWR0aCA9ICdpbmhlcml0JztcbiAgICAgIHN0eWxlLmhlaWdodCA9ICdpbmhlcml0JztcbiAgICB9XG4gICAgdGhpcy5tYXBfID0gbWFwO1xuICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgIHRoaXMubWFwXy5nZXRPdmVybGF5Q29udGFpbmVyKCkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50Xyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHN0YXJ0UGl4ZWwgU3RhcnQgcGl4ZWwuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IGVuZFBpeGVsIEVuZCBwaXhlbC5cbiAgICovXG4gIHNldFBpeGVscyhzdGFydFBpeGVsLCBlbmRQaXhlbCkge1xuICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBzdGFydFBpeGVsO1xuICAgIHRoaXMuZW5kUGl4ZWxfID0gZW5kUGl4ZWw7XG4gICAgdGhpcy5jcmVhdGVPclVwZGF0ZUdlb21ldHJ5KCk7XG4gICAgdGhpcy5yZW5kZXJfKCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBvciB1cGRhdGVzIHRoZSBjYWNoZWQgZ2VvbWV0cnkuXG4gICAqL1xuICBjcmVhdGVPclVwZGF0ZUdlb21ldHJ5KCkge1xuICAgIGNvbnN0IHN0YXJ0UGl4ZWwgPSB0aGlzLnN0YXJ0UGl4ZWxfO1xuICAgIGNvbnN0IGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgY29uc3QgcGl4ZWxzID0gW1xuICAgICAgc3RhcnRQaXhlbCxcbiAgICAgIFtzdGFydFBpeGVsWzBdLCBlbmRQaXhlbFsxXV0sXG4gICAgICBlbmRQaXhlbCxcbiAgICAgIFtlbmRQaXhlbFswXSwgc3RhcnRQaXhlbFsxXV0sXG4gICAgXTtcbiAgICBjb25zdCBjb29yZGluYXRlcyA9IHBpeGVscy5tYXAoXG4gICAgICB0aGlzLm1hcF8uZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsLFxuICAgICAgdGhpcy5tYXBfXG4gICAgKTtcbiAgICAvLyBjbG9zZSB0aGUgcG9seWdvblxuICAgIGNvb3JkaW5hdGVzWzRdID0gY29vcmRpbmF0ZXNbMF0uc2xpY2UoKTtcbiAgICBpZiAoIXRoaXMuZ2VvbWV0cnlfKSB7XG4gICAgICB0aGlzLmdlb21ldHJ5XyA9IG5ldyBQb2x5Z29uKFtjb29yZGluYXRlc10pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdlb21ldHJ5Xy5zZXRDb29yZGluYXRlcyhbY29vcmRpbmF0ZXNdKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5LlxuICAgKi9cbiAgZ2V0R2VvbWV0cnkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2VvbWV0cnlfO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlckJveDtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnQm94XG4gKi9cbi8vIEZJWE1FIGRyYXcgZHJhZyBib3hcbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IFJlbmRlckJveCBmcm9tICcuLi9yZW5kZXIvQm94LmpzJztcbmltcG9ydCB7bW91c2VBY3Rpb25CdXR0b259IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHR3b1xuICoge0BsaW5rIG1vZHVsZTpvbC9waXhlbH5QaXhlbH1zIGFuZCByZXR1cm5zIGEgYHtib29sZWFufWAuIElmIHRoZSBjb25kaXRpb24gaXMgbWV0LFxuICogdHJ1ZSBzaG91bGQgYmUgcmV0dXJuZWQuXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24odGhpczogPywgaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQsIGltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsLCBpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbCk6Ym9vbGVhbn0gRW5kQ29uZGl0aW9uXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtZHJhZ2JveCddIENTUyBjbGFzcyBuYW1lIGZvciBzdHlsaW5nIHRoZSBib3guXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG9sL2V2ZW50cy9jb25kaXRpb25+bW91c2VBY3Rpb25CdXR0b259LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5BcmVhPTY0XSBUaGUgbWluaW11bSBhcmVhIG9mIHRoZSBib3ggaW4gcGl4ZWwsIHRoaXMgdmFsdWUgaXMgdXNlZCBieSB0aGUgZGVmYXVsdFxuICogYGJveEVuZENvbmRpdGlvbmAgZnVuY3Rpb24uXG4gKiBAcHJvcGVydHkge0VuZENvbmRpdGlvbn0gW2JveEVuZENvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgdHdvXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3BpeGVsflBpeGVsfXMgdG8gaW5kaWNhdGUgd2hldGhlciBhIGBib3hlbmRgIGV2ZW50IHNob3VsZCBiZSBmaXJlZC5cbiAqIERlZmF1bHQgaXMgYHRydWVgIGlmIHRoZSBhcmVhIG9mIHRoZSBib3ggaXMgYmlnZ2VyIHRoYW4gdGhlIGBtaW5BcmVhYCBvcHRpb24uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKHRoaXM6RHJhZ0JveCwgaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtvbkJveEVuZF0gQ29kZSB0byBleGVjdXRlIGp1c3RcbiAqIGJlZm9yZSBgYm94ZW5kYCBpcyBmaXJlZC5cbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmNvbnN0IERyYWdCb3hFdmVudFR5cGUgPSB7XG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgdXBvbiBkcmFnIGJveCBzdGFydC5cbiAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hzdGFydFxuICAgKiBAYXBpXG4gICAqL1xuICBCT1hTVEFSVDogJ2JveHN0YXJ0JyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIG9uIGRyYWcgd2hlbiBib3ggaXMgYWN0aXZlLlxuICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveGRyYWdcbiAgICogQGFwaVxuICAgKi9cbiAgQk9YRFJBRzogJ2JveGRyYWcnLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgdXBvbiBkcmFnIGJveCBlbmQuXG4gICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94ZW5kXG4gICAqIEBhcGlcbiAgICovXG4gIEJPWEVORDogJ2JveGVuZCcsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB1cG9uIGRyYWcgYm94IGNhbmNlbGVkLlxuICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveGNhbmNlbFxuICAgKiBAYXBpXG4gICAqL1xuICBCT1hDQU5DRUw6ICdib3hjYW5jZWwnLFxufTtcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdCb3h+RHJhZ0JveH0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2ZcbiAqIHRoaXMgdHlwZS5cbiAqL1xuZXhwb3J0IGNsYXNzIERyYWdCb3hFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBldmVudCB0eXBlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgZXZlbnQgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE9yaWdpbmF0aW5nIGV2ZW50LlxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSwgY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSB7XG4gICAgc3VwZXIodHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29vcmRpbmF0ZSBvZiB0aGUgZHJhZyBldmVudC5cbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmNvb3JkaW5hdGUgPSBjb29yZGluYXRlO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0XG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLm1hcEJyb3dzZXJFdmVudCA9IG1hcEJyb3dzZXJFdmVudDtcbiAgfVxufVxuXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTphY3RpdmUnLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPCdib3hjYW5jZWwnfCdib3hkcmFnJ3wnYm94ZW5kJ3wnYm94c3RhcnQnLCBEcmFnQm94RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmFjdGl2ZSd8J2JveGNhbmNlbCd8J2JveGRyYWcnfCdib3hlbmQnLCBSZXR1cm4+fSBEcmFnQm94T25TaWduYXR1cmVcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBkcmF3IGEgdmVjdG9yIGJveCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiB0aGUgc2hpZnQgb3Igb3RoZXIga2V5IGlzIGhlbGQgZG93bi4gVGhpcyBpcyB1c2VkLCBmb3IgZXhhbXBsZSxcbiAqIGZvciB6b29taW5nIHRvIGEgc3BlY2lmaWMgYXJlYSBvZiB0aGUgbWFwXG4gKiAoc2VlIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21+RHJhZ1pvb219IGFuZFxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnUm90YXRlQW5kWm9vbX5EcmFnUm90YXRlQW5kWm9vbX0pLlxuICpcbiAqIEBmaXJlcyBEcmFnQm94RXZlbnRcbiAqIEBhcGlcbiAqL1xuY2xhc3MgRHJhZ0JveCBleHRlbmRzIFBvaW50ZXJJbnRlcmFjdGlvbiB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSBPcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge0RyYWdCb3hPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtEcmFnQm94T25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbmNlO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtEcmFnQm94T25TaWduYXR1cmU8dm9pZD59XG4gICAgICovXG4gICAgdGhpcy51bjtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3JlbmRlci9Cb3guanNcIikuZGVmYXVsdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYm94XyA9IG5ldyBSZW5kZXJCb3gob3B0aW9ucy5jbGFzc05hbWUgfHwgJ29sLWRyYWdib3gnKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1pbkFyZWFfID0gb3B0aW9ucy5taW5BcmVhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pbkFyZWEgOiA2NDtcblxuICAgIGlmIChvcHRpb25zLm9uQm94RW5kKSB7XG4gICAgICB0aGlzLm9uQm94RW5kID0gb3B0aW9ucy5vbkJveEVuZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0UGl4ZWxfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBtb3VzZUFjdGlvbkJ1dHRvbjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0VuZENvbmRpdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLmJveEVuZENvbmRpdGlvbl8gPSBvcHRpb25zLmJveEVuZENvbmRpdGlvblxuICAgICAgPyBvcHRpb25zLmJveEVuZENvbmRpdGlvblxuICAgICAgOiB0aGlzLmRlZmF1bHRCb3hFbmRDb25kaXRpb247XG4gIH1cblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgY29uZGl0aW9uIGZvciBkZXRlcm1pbmluZyB3aGV0aGVyIHRoZSBib3hlbmQgZXZlbnRcbiAgICogc2hvdWxkIGZpcmUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBUaGUgb3JpZ2luYXRpbmcgTWFwQnJvd3NlckV2ZW50XG4gICAqICAgICBsZWFkaW5nIHRvIHRoZSBib3ggZW5kLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBzdGFydFBpeGVsIFRoZSBzdGFydGluZyBwaXhlbCBvZiB0aGUgYm94LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBlbmRQaXhlbCBUaGUgZW5kIHBpeGVsIG9mIHRoZSBib3guXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSBib3hlbmQgY29uZGl0aW9uIHNob3VsZCBiZSBmaXJlZC5cbiAgICovXG4gIGRlZmF1bHRCb3hFbmRDb25kaXRpb24obWFwQnJvd3NlckV2ZW50LCBzdGFydFBpeGVsLCBlbmRQaXhlbCkge1xuICAgIGNvbnN0IHdpZHRoID0gZW5kUGl4ZWxbMF0gLSBzdGFydFBpeGVsWzBdO1xuICAgIGNvbnN0IGhlaWdodCA9IGVuZFBpeGVsWzFdIC0gc3RhcnRQaXhlbFsxXTtcbiAgICByZXR1cm4gd2lkdGggKiB3aWR0aCArIGhlaWdodCAqIGhlaWdodCA+PSB0aGlzLm1pbkFyZWFfO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgZ2VvbWV0cnkgb2YgbGFzdCBkcmF3biBib3guXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0R2VvbWV0cnkoKSB7XG4gICAgcmV0dXJuIHRoaXMuYm94Xy5nZXRHZW9tZXRyeSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqL1xuICBoYW5kbGVEcmFnRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdGhpcy5ib3hfLnNldFBpeGVscyh0aGlzLnN0YXJ0UGl4ZWxfLCBtYXBCcm93c2VyRXZlbnQucGl4ZWwpO1xuXG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IERyYWdCb3hFdmVudChcbiAgICAgICAgRHJhZ0JveEV2ZW50VHlwZS5CT1hEUkFHLFxuICAgICAgICBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSxcbiAgICAgICAgbWFwQnJvd3NlckV2ZW50XG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICovXG4gIGhhbmRsZVVwRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdGhpcy5ib3hfLnNldE1hcChudWxsKTtcblxuICAgIGNvbnN0IGNvbXBsZXRlQm94ID0gdGhpcy5ib3hFbmRDb25kaXRpb25fKFxuICAgICAgbWFwQnJvd3NlckV2ZW50LFxuICAgICAgdGhpcy5zdGFydFBpeGVsXyxcbiAgICAgIG1hcEJyb3dzZXJFdmVudC5waXhlbFxuICAgICk7XG4gICAgaWYgKGNvbXBsZXRlQm94KSB7XG4gICAgICB0aGlzLm9uQm94RW5kKG1hcEJyb3dzZXJFdmVudCk7XG4gICAgfVxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBEcmFnQm94RXZlbnQoXG4gICAgICAgIGNvbXBsZXRlQm94ID8gRHJhZ0JveEV2ZW50VHlwZS5CT1hFTkQgOiBEcmFnQm94RXZlbnRUeXBlLkJPWENBTkNFTCxcbiAgICAgICAgbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGUsXG4gICAgICAgIG1hcEJyb3dzZXJFdmVudFxuICAgICAgKVxuICAgICk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAqL1xuICBoYW5kbGVEb3duRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICB0aGlzLnN0YXJ0UGl4ZWxfID0gbWFwQnJvd3NlckV2ZW50LnBpeGVsO1xuICAgICAgdGhpcy5ib3hfLnNldE1hcChtYXBCcm93c2VyRXZlbnQubWFwKTtcbiAgICAgIHRoaXMuYm94Xy5zZXRQaXhlbHModGhpcy5zdGFydFBpeGVsXywgdGhpcy5zdGFydFBpeGVsXyk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIG5ldyBEcmFnQm94RXZlbnQoXG4gICAgICAgICAgRHJhZ0JveEV2ZW50VHlwZS5CT1hTVEFSVCxcbiAgICAgICAgICBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSxcbiAgICAgICAgICBtYXBCcm93c2VyRXZlbnRcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRnVuY3Rpb24gdG8gZXhlY3V0ZSBqdXN0IGJlZm9yZSBgb25ib3hlbmRgIGlzIGZpcmVkXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgKi9cbiAgb25Cb3hFbmQoZXZlbnQpIHt9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERyYWdCb3g7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21cbiAqL1xuaW1wb3J0IERyYWdCb3ggZnJvbSAnLi9EcmFnQm94LmpzJztcbmltcG9ydCB7ZWFzZU91dH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7c2hpZnRLZXlPbmx5fSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtZHJhZ3pvb20nXSBDU1MgY2xhc3MgbmFtZSBmb3Igc3R5bGluZyB0aGVcbiAqIGJveC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLnNoaWZ0S2V5T25seX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTIwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW291dD1mYWxzZV0gVXNlIGludGVyYWN0aW9uIGZvciB6b29taW5nIG91dC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluQXJlYT02NF0gVGhlIG1pbmltdW0gYXJlYSBvZiB0aGUgYm94IGluIHBpeGVsLCB0aGlzIHZhbHVlIGlzIHVzZWQgYnkgdGhlIHBhcmVudCBkZWZhdWx0XG4gKiBgYm94RW5kQ29uZGl0aW9uYCBmdW5jdGlvbi5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgY2xpY2tpbmcgYW5kIGRyYWdnaW5nIG9uIHRoZSBtYXAsXG4gKiBub3JtYWxseSBjb21iaW5lZCB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn0gdGhhdCBsaW1pdHNcbiAqIGl0IHRvIHdoZW4gYSBrZXksIHNoaWZ0IGJ5IGRlZmF1bHQsIGlzIGhlbGQgZG93bi5cbiAqXG4gKiBUbyBjaGFuZ2UgdGhlIHN0eWxlIG9mIHRoZSBib3gsIHVzZSBDU1MgYW5kIHRoZSBgLm9sLWRyYWd6b29tYCBzZWxlY3Rvciwgb3JcbiAqIHlvdXIgY3VzdG9tIG9uZSBjb25maWd1cmVkIHdpdGggYGNsYXNzTmFtZWAuXG4gKiBAYXBpXG4gKi9cbmNsYXNzIERyYWdab29tIGV4dGVuZHMgRHJhZ0JveCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSBPcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gICAgY29uc3QgY29uZGl0aW9uID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IHNoaWZ0S2V5T25seTtcblxuICAgIHN1cGVyKHtcbiAgICAgIGNvbmRpdGlvbjogY29uZGl0aW9uLFxuICAgICAgY2xhc3NOYW1lOiBvcHRpb25zLmNsYXNzTmFtZSB8fCAnb2wtZHJhZ3pvb20nLFxuICAgICAgbWluQXJlYTogb3B0aW9ucy5taW5BcmVhLFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDIwMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5vdXRfID0gb3B0aW9ucy5vdXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3V0IDogZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRnVuY3Rpb24gdG8gZXhlY3V0ZSBqdXN0IGJlZm9yZSBgb25ib3hlbmRgIGlzIGZpcmVkXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgKi9cbiAgb25Cb3hFbmQoZXZlbnQpIHtcbiAgICBjb25zdCBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIGNvbnN0IHZpZXcgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9ICovIChtYXAuZ2V0VmlldygpKTtcbiAgICBsZXQgZ2VvbWV0cnkgPSB0aGlzLmdldEdlb21ldHJ5KCk7XG5cbiAgICBpZiAodGhpcy5vdXRfKSB7XG4gICAgICBjb25zdCByb3RhdGVkRXh0ZW50ID0gdmlldy5yb3RhdGVkRXh0ZW50Rm9yR2VvbWV0cnkoZ2VvbWV0cnkpO1xuICAgICAgY29uc3QgcmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsKHJvdGF0ZWRFeHRlbnQpO1xuICAgICAgY29uc3QgZmFjdG9yID0gdmlldy5nZXRSZXNvbHV0aW9uKCkgLyByZXNvbHV0aW9uO1xuICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeS5jbG9uZSgpO1xuICAgICAgZ2VvbWV0cnkuc2NhbGUoZmFjdG9yICogZmFjdG9yKTtcbiAgICB9XG5cbiAgICB2aWV3LmZpdEludGVybmFsKGdlb21ldHJ5LCB7XG4gICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8sXG4gICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRHJhZ1pvb207XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW5cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiwge3Bhbn0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgS2V5Q29kZSBmcm9tICcuLi9ldmVudHMvS2V5Q29kZS5qcyc7XG5pbXBvcnQge25vTW9kaWZpZXJLZXlzLCB0YXJnZXROb3RFZGl0YWJsZX0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQge3JvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5ub01vZGlmaWVyS2V5c30gYW5kXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24udGFyZ2V0Tm90RWRpdGFibGV9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3BpeGVsRGVsdGE9MTI4XSBUaGUgYW1vdW50IG9mIHBpeGVscyB0byBwYW4gb24gZWFjaCBrZXlcbiAqIHByZXNzLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHBhbiB0aGUgbWFwIHVzaW5nIGtleWJvYXJkIGFycm93cy5cbiAqIE5vdGUgdGhhdCwgYWx0aG91Z2ggdGhpcyBpbnRlcmFjdGlvbiBpcyBieSBkZWZhdWx0IGluY2x1ZGVkIGluIG1hcHMsXG4gKiB0aGUga2V5cyBjYW4gb25seSBiZSB1c2VkIHdoZW4gYnJvd3NlciBmb2N1cyBpcyBvbiB0aGUgZWxlbWVudCB0byB3aGljaFxuICogdGhlIGtleWJvYXJkIGV2ZW50cyBhcmUgYXR0YWNoZWQuIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIG1hcCBkaXYsXG4gKiB0aG91Z2ggeW91IGNhbiBjaGFuZ2UgdGhpcyB3aXRoIHRoZSBga2V5Ym9hcmRFdmVudFRhcmdldGAgaW5cbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0uIGBkb2N1bWVudGAgbmV2ZXIgbG9zZXMgZm9jdXMgYnV0LCBmb3IgYW55IG90aGVyXG4gKiBlbGVtZW50LCBmb2N1cyB3aWxsIGhhdmUgdG8gYmUgb24sIGFuZCByZXR1cm5lZCB0bywgdGhpcyBlbGVtZW50IGlmIHRoZSBrZXlzXG4gKiBhcmUgdG8gZnVuY3Rpb24uXG4gKiBTZWUgYWxzbyB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219LlxuICogQGFwaVxuICovXG5jbGFzcyBLZXlib2FyZFBhbiBleHRlbmRzIEludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgQnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb21iaW5lZCBjb25kaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIHRoaXMuZGVmYXVsdENvbmRpdGlvbl8gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBub01vZGlmaWVyS2V5cyhtYXBCcm93c2VyRXZlbnQpICYmIHRhcmdldE5vdEVkaXRhYmxlKG1hcEJyb3dzZXJFdmVudClcbiAgICAgICk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9XG4gICAgICBvcHRpb25zLmNvbmRpdGlvbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgICAgOiB0aGlzLmRlZmF1bHRDb25kaXRpb25fO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBpeGVsRGVsdGFfID1cbiAgICAgIG9wdGlvbnMucGl4ZWxEZWx0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waXhlbERlbHRhIDogMTI4O1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gaWYgaXQgd2FzIGFcbiAgICogYEtleUV2ZW50YCwgYW5kIGRlY2lkZXMgdGhlIGRpcmVjdGlvbiB0byBwYW4gdG8gKGlmIGFuIGFycm93IGtleSB3YXNcbiAgICogcHJlc3NlZCkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgKi9cbiAgaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgbGV0IHN0b3BFdmVudCA9IGZhbHNlO1xuICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZRE9XTikge1xuICAgICAgY29uc3Qga2V5RXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR9ICovIChcbiAgICAgICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnRcbiAgICAgICk7XG4gICAgICBjb25zdCBrZXlDb2RlID0ga2V5RXZlbnQua2V5Q29kZTtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgKGtleUNvZGUgPT0gS2V5Q29kZS5ET1dOIHx8XG4gICAgICAgICAga2V5Q29kZSA9PSBLZXlDb2RlLkxFRlQgfHxcbiAgICAgICAgICBrZXlDb2RlID09IEtleUNvZGUuUklHSFQgfHxcbiAgICAgICAgICBrZXlDb2RlID09IEtleUNvZGUuVVApXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGNvbnN0IG1hcFVuaXRzRGVsdGEgPSB2aWV3LmdldFJlc29sdXRpb24oKSAqIHRoaXMucGl4ZWxEZWx0YV87XG4gICAgICAgIGxldCBkZWx0YVggPSAwLFxuICAgICAgICAgIGRlbHRhWSA9IDA7XG4gICAgICAgIGlmIChrZXlDb2RlID09IEtleUNvZGUuRE9XTikge1xuICAgICAgICAgIGRlbHRhWSA9IC1tYXBVbml0c0RlbHRhO1xuICAgICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT0gS2V5Q29kZS5MRUZUKSB7XG4gICAgICAgICAgZGVsdGFYID0gLW1hcFVuaXRzRGVsdGE7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5Q29kZSA9PSBLZXlDb2RlLlJJR0hUKSB7XG4gICAgICAgICAgZGVsdGFYID0gbWFwVW5pdHNEZWx0YTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWx0YVkgPSBtYXBVbml0c0RlbHRhO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlbHRhID0gW2RlbHRhWCwgZGVsdGFZXTtcbiAgICAgICAgcm90YXRlQ29vcmRpbmF0ZShkZWx0YSwgdmlldy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgcGFuKHZpZXcsIGRlbHRhLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgIGtleUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHN0b3BFdmVudCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEtleWJvYXJkUGFuO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9LZXlDb2RlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgTEVGVDogMzcsXG4gIFVQOiAzOCxcbiAgUklHSFQ6IDM5LFxuICBET1dOOiA0MCxcbn07XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHt6b29tQnlEZWx0YX0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQge3RhcmdldE5vdEVkaXRhYmxlfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gRGVmYXVsdCBpc1xuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLnRhcmdldE5vdEVkaXRhYmxlfS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gbGV2ZWwgZGVsdGEgb24gZWFjaCBrZXkgcHJlc3MuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIHVzaW5nIGtleWJvYXJkICsgYW5kIC0uXG4gKiBOb3RlIHRoYXQsIGFsdGhvdWdoIHRoaXMgaW50ZXJhY3Rpb24gaXMgYnkgZGVmYXVsdCBpbmNsdWRlZCBpbiBtYXBzLFxuICogdGhlIGtleXMgY2FuIG9ubHkgYmUgdXNlZCB3aGVuIGJyb3dzZXIgZm9jdXMgaXMgb24gdGhlIGVsZW1lbnQgdG8gd2hpY2hcbiAqIHRoZSBrZXlib2FyZCBldmVudHMgYXJlIGF0dGFjaGVkLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSBtYXAgZGl2LFxuICogdGhvdWdoIHlvdSBjYW4gY2hhbmdlIHRoaXMgd2l0aCB0aGUgYGtleWJvYXJkRXZlbnRUYXJnZXRgIGluXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9LiBgZG9jdW1lbnRgIG5ldmVyIGxvc2VzIGZvY3VzIGJ1dCwgZm9yIGFueSBvdGhlclxuICogZWxlbWVudCwgZm9jdXMgd2lsbCBoYXZlIHRvIGJlIG9uLCBhbmQgcmV0dXJuZWQgdG8sIHRoaXMgZWxlbWVudCBpZiB0aGUga2V5c1xuICogYXJlIHRvIGZ1bmN0aW9uLlxuICogU2VlIGFsc28ge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbn5LZXlib2FyZFBhbn0uXG4gKiBAYXBpXG4gKi9cbmNsYXNzIEtleWJvYXJkWm9vbSBleHRlbmRzIEludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICovXG4gICAgdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IHRhcmdldE5vdEVkaXRhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZGVsdGFfID0gb3B0aW9ucy5kZWx0YSA/IG9wdGlvbnMuZGVsdGEgOiAxO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGlmIGl0IHdhcyBhXG4gICAqIGBLZXlFdmVudGAsIGFuZCBkZWNpZGVzIHdoZXRoZXIgdG8gem9vbSBpbiBvciBvdXQgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZVxuICAgKiBrZXkgcHJlc3NlZCB3YXMgJysnIG9yICctJykuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgKi9cbiAgaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgbGV0IHN0b3BFdmVudCA9IGZhbHNlO1xuICAgIGlmIChcbiAgICAgIG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5LRVlET1dOIHx8XG4gICAgICBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZUFJFU1NcbiAgICApIHtcbiAgICAgIGNvbnN0IGtleUV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fSAqLyAoXG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50XG4gICAgICApO1xuICAgICAgY29uc3Qga2V5ID0ga2V5RXZlbnQua2V5O1xuICAgICAgaWYgKHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpICYmIChrZXkgPT09ICcrJyB8fCBrZXkgPT09ICctJykpIHtcbiAgICAgICAgY29uc3QgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgY29uc3QgZGVsdGEgPSBrZXkgPT09ICcrJyA/IHRoaXMuZGVsdGFfIDogLXRoaXMuZGVsdGFfO1xuICAgICAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIHVuZGVmaW5lZCwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICBrZXlFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gIXN0b3BFdmVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBLZXlib2FyZFpvb207XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb21cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiwge3pvb21CeURlbHRhfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCB7REVWSUNFX1BJWEVMX1JBVElPLCBGSVJFRk9YfSBmcm9tICcuLi9oYXMuanMnO1xuaW1wb3J0IHthbGwsIGFsd2F5cywgZm9jdXNXaXRoVGFiaW5kZXh9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHtjbGFtcH0gZnJvbSAnLi4vbWF0aC5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYgeyd0cmFja3BhZCcgfCAnd2hlZWwnfSBNb2RlXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5hbHdheXN9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb25Gb2N1c09ubHk9ZmFsc2VdIFdoZW4gdGhlIG1hcCdzIHRhcmdldCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSBzZXQsXG4gKiB0aGUgaW50ZXJhY3Rpb24gd2lsbCBvbmx5IGhhbmRsZSBldmVudHMgd2hlbiB0aGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heERlbHRhPTFdIE1heGltdW0gbW91c2Ugd2hlZWwgZGVsdGEuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGltZW91dD04MF0gTW91c2Ugd2hlZWwgdGltZW91dCBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VBbmNob3I9dHJ1ZV0gRW5hYmxlIHpvb21pbmcgdXNpbmcgdGhlIG1vdXNlJ3NcbiAqIGxvY2F0aW9uIGFzIHRoZSBhbmNob3IuIFdoZW4gc2V0IHRvIGBmYWxzZWAsIHpvb21pbmcgaW4gYW5kIG91dCB3aWxsIHpvb20gdG9cbiAqIHRoZSBjZW50ZXIgb2YgdGhlIHNjcmVlbiBpbnN0ZWFkIG9mIHpvb21pbmcgb24gdGhlIG1vdXNlJ3MgbG9jYXRpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb25zdHJhaW5SZXNvbHV0aW9uPWZhbHNlXSBJZiB0cnVlLCB0aGUgbW91c2Ugd2hlZWwgem9vbVxuICogZXZlbnQgd2lsbCBhbHdheXMgYW5pbWF0ZSB0byB0aGUgY2xvc2VzdCB6b29tIGxldmVsIGFmdGVyIGFuIGludGVyYWN0aW9uO1xuICogZmFsc2UgbWVhbnMgaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzIGFyZSBhbGxvd2VkLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCBieSBzY3JvbGxpbmcgdGhlIG1vdXNlIHdoZWVsLlxuICogQGFwaVxuICovXG5jbGFzcyBNb3VzZVdoZWVsWm9vbSBleHRlbmRzIEludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICBzdXBlcihcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIChvcHRpb25zKVxuICAgICk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50b3RhbERlbHRhXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5sYXN0RGVsdGFfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heERlbHRhXyA9IG9wdGlvbnMubWF4RGVsdGEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4RGVsdGEgOiAxO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbWVvdXRfID0gb3B0aW9ucy50aW1lb3V0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbWVvdXQgOiA4MDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy51c2VBbmNob3JfID1cbiAgICAgIG9wdGlvbnMudXNlQW5jaG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnVzZUFuY2hvciA6IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8gPVxuICAgICAgb3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb25cbiAgICAgICAgOiBmYWxzZTtcblxuICAgIGNvbnN0IGNvbmRpdGlvbiA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHdheXM7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLm9uRm9jdXNPbmx5XG4gICAgICA/IGFsbChmb2N1c1dpdGhUYWJpbmRleCwgY29uZGl0aW9uKVxuICAgICAgOiBjb25kaXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqL1xuICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0VGltZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIHRoaXMudGltZW91dElkXztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge01vZGV8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMubW9kZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBUcmFja3BhZCBldmVudHMgc2VwYXJhdGVkIGJ5IHRoaXMgZGVsYXkgd2lsbCBiZSBjb25zaWRlcmVkIHNlcGFyYXRlXG4gICAgICogaW50ZXJhY3Rpb25zLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50cmFja3BhZEV2ZW50R2FwXyA9IDQwMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIHRoaXMudHJhY2twYWRUaW1lb3V0SWRfO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBkZWx0YSB2YWx1ZXMgcGVyIHpvb20gbGV2ZWxcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kZWx0YVBlclpvb21fID0gMzAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBlbmRJbnRlcmFjdGlvbl8oKSB7XG4gICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgY29uc3QgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICBpZiAoIW1hcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICB2aWV3LmVuZEludGVyYWN0aW9uKFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgdGhpcy5sYXN0RGVsdGFfID8gKHRoaXMubGFzdERlbHRhXyA+IDAgPyAxIDogLTEpIDogMCxcbiAgICAgIHRoaXMubGFzdEFuY2hvcl9cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gKGlmIGl0IHdhcyBhIG1vdXNld2hlZWwtZXZlbnQpIGFuZCBldmVudHVhbGx5XG4gICAqIHpvb21zIHRoZSBtYXAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgKi9cbiAgaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHR5cGUgPSBtYXBCcm93c2VyRXZlbnQudHlwZTtcbiAgICBpZiAodHlwZSAhPT0gRXZlbnRUeXBlLldIRUVMKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIGNvbnN0IHdoZWVsRXZlbnQgPSAvKiogQHR5cGUge1doZWVsRXZlbnR9ICovIChcbiAgICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50XG4gICAgKTtcbiAgICB3aGVlbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZiAodGhpcy51c2VBbmNob3JfKSB7XG4gICAgICB0aGlzLmxhc3RBbmNob3JfID0gbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGU7XG4gICAgfVxuXG4gICAgLy8gRGVsdGEgbm9ybWFsaXNhdGlvbiBpbnNwaXJlZCBieVxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvbWFwYm94LWdsLWpzL2Jsb2IvMDAxYzdiOS9qcy91aS9oYW5kbGVyL3Njcm9sbF96b29tLmpzXG4gICAgbGV0IGRlbHRhO1xuICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuV0hFRUwpIHtcbiAgICAgIGRlbHRhID0gd2hlZWxFdmVudC5kZWx0YVk7XG4gICAgICBpZiAoRklSRUZPWCAmJiB3aGVlbEV2ZW50LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUElYRUwpIHtcbiAgICAgICAgZGVsdGEgLz0gREVWSUNFX1BJWEVMX1JBVElPO1xuICAgICAgfVxuICAgICAgaWYgKHdoZWVsRXZlbnQuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FKSB7XG4gICAgICAgIGRlbHRhICo9IDQwO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWx0YSA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmxhc3REZWx0YV8gPSBkZWx0YTtcblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBpZiAodGhpcy5zdGFydFRpbWVfID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IG5vdztcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubW9kZV8gfHwgbm93IC0gdGhpcy5zdGFydFRpbWVfID4gdGhpcy50cmFja3BhZEV2ZW50R2FwXykge1xuICAgICAgdGhpcy5tb2RlXyA9IE1hdGguYWJzKGRlbHRhKSA8IDQgPyAndHJhY2twYWQnIDogJ3doZWVsJztcbiAgICB9XG5cbiAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAoXG4gICAgICB0aGlzLm1vZGVfID09PSAndHJhY2twYWQnICYmXG4gICAgICAhKHZpZXcuZ2V0Q29uc3RyYWluUmVzb2x1dGlvbigpIHx8IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8pXG4gICAgKSB7XG4gICAgICBpZiAodGhpcy50cmFja3BhZFRpbWVvdXRJZF8pIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudHJhY2twYWRUaW1lb3V0SWRfKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmlldy5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnRyYWNrcGFkVGltZW91dElkXyA9IHNldFRpbWVvdXQoXG4gICAgICAgIHRoaXMuZW5kSW50ZXJhY3Rpb25fLmJpbmQodGhpcyksXG4gICAgICAgIHRoaXMudGltZW91dF9cbiAgICAgICk7XG4gICAgICB2aWV3LmFkanVzdFpvb20oLWRlbHRhIC8gdGhpcy5kZWx0YVBlclpvb21fLCB0aGlzLmxhc3RBbmNob3JfKTtcbiAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IG5vdztcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLnRvdGFsRGVsdGFfICs9IGRlbHRhO1xuXG4gICAgY29uc3QgdGltZUxlZnQgPSBNYXRoLm1heCh0aGlzLnRpbWVvdXRfIC0gKG5vdyAtIHRoaXMuc3RhcnRUaW1lXyksIDApO1xuXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkXyk7XG4gICAgdGhpcy50aW1lb3V0SWRfID0gc2V0VGltZW91dChcbiAgICAgIHRoaXMuaGFuZGxlV2hlZWxab29tXy5iaW5kKHRoaXMsIG1hcCksXG4gICAgICB0aW1lTGVmdFxuICAgICk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICovXG4gIGhhbmRsZVdoZWVsWm9vbV8obWFwKSB7XG4gICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgIH1cbiAgICBsZXQgZGVsdGEgPVxuICAgICAgLWNsYW1wKFxuICAgICAgICB0aGlzLnRvdGFsRGVsdGFfLFxuICAgICAgICAtdGhpcy5tYXhEZWx0YV8gKiB0aGlzLmRlbHRhUGVyWm9vbV8sXG4gICAgICAgIHRoaXMubWF4RGVsdGFfICogdGhpcy5kZWx0YVBlclpvb21fXG4gICAgICApIC8gdGhpcy5kZWx0YVBlclpvb21fO1xuICAgIGlmICh2aWV3LmdldENvbnN0cmFpblJlc29sdXRpb24oKSB8fCB0aGlzLmNvbnN0cmFpblJlc29sdXRpb25fKSB7XG4gICAgICAvLyB2aWV3IGhhcyBhIHpvb20gY29uc3RyYWludCwgem9vbSBieSAxXG4gICAgICBkZWx0YSA9IGRlbHRhID8gKGRlbHRhID4gMCA/IDEgOiAtMSkgOiAwO1xuICAgIH1cbiAgICB6b29tQnlEZWx0YSh2aWV3LCBkZWx0YSwgdGhpcy5sYXN0QW5jaG9yXywgdGhpcy5kdXJhdGlvbl8pO1xuXG4gICAgdGhpcy5tb2RlXyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnRvdGFsRGVsdGFfID0gMDtcbiAgICB0aGlzLmxhc3RBbmNob3JfID0gbnVsbDtcbiAgICB0aGlzLnN0YXJ0VGltZV8gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy50aW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBvciBkaXNhYmxlIHVzaW5nIHRoZSBtb3VzZSdzIGxvY2F0aW9uIGFzIGFuIGFuY2hvciB3aGVuIHpvb21pbmdcbiAgICogQHBhcmFtIHtib29sZWFufSB1c2VBbmNob3IgdHJ1ZSB0byB6b29tIHRvIHRoZSBtb3VzZSdzIGxvY2F0aW9uLCBmYWxzZVxuICAgKiB0byB6b29tIHRvIHRoZSBjZW50ZXIgb2YgdGhlIG1hcFxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRNb3VzZUFuY2hvcih1c2VBbmNob3IpIHtcbiAgICB0aGlzLnVzZUFuY2hvcl8gPSB1c2VBbmNob3I7XG4gICAgaWYgKCF1c2VBbmNob3IpIHtcbiAgICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNb3VzZVdoZWVsWm9vbTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZVxuICovXG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uLCB7XG4gIGNlbnRyb2lkIGFzIGNlbnRyb2lkRnJvbVBvaW50ZXJzLFxufSBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHtGQUxTRX0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7ZGlzYWJsZX0gZnJvbSAnLi4vcm90YXRpb25jb25zdHJhaW50LmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW5cbiAqIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGhyZXNob2xkPTAuM10gTWluaW1hbCBhbmdsZSBpbiByYWRpYW5zIHRvIHN0YXJ0IGEgcm90YXRpb24uXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gcm90YXRlIHRoZSBtYXAgYnkgdHdpc3Rpbmcgd2l0aCB0d28gZmluZ2Vyc1xuICogb24gYSB0b3VjaCBzY3JlZW4uXG4gKiBAYXBpXG4gKi9cbmNsYXNzIFBpbmNoUm90YXRlIGV4dGVuZHMgUG9pbnRlckludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICBjb25zdCBwb2ludGVyT3B0aW9ucyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Qb2ludGVyLmpzXCIpLk9wdGlvbnN9ICovIChcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuXG4gICAgaWYgKCFwb2ludGVyT3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgcG9pbnRlck9wdGlvbnMuc3RvcERvd24gPSBGQUxTRTtcbiAgICB9XG5cbiAgICBzdXBlcihwb2ludGVyT3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICovXG4gICAgdGhpcy5hbmNob3JfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJvdGF0aW5nXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucm90YXRpb25EZWx0YV8gPSAwLjA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50aHJlc2hvbGRfID0gb3B0aW9ucy50aHJlc2hvbGQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGhyZXNob2xkIDogMC4zO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKi9cbiAgaGFuZGxlRHJhZ0V2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGxldCByb3RhdGlvbkRlbHRhID0gMC4wO1xuXG4gICAgY29uc3QgdG91Y2gwID0gdGhpcy50YXJnZXRQb2ludGVyc1swXTtcbiAgICBjb25zdCB0b3VjaDEgPSB0aGlzLnRhcmdldFBvaW50ZXJzWzFdO1xuXG4gICAgLy8gYW5nbGUgYmV0d2VlbiB0b3VjaGVzXG4gICAgY29uc3QgYW5nbGUgPSBNYXRoLmF0YW4yKFxuICAgICAgdG91Y2gxLmNsaWVudFkgLSB0b3VjaDAuY2xpZW50WSxcbiAgICAgIHRvdWNoMS5jbGllbnRYIC0gdG91Y2gwLmNsaWVudFhcbiAgICApO1xuXG4gICAgaWYgKHRoaXMubGFzdEFuZ2xlXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBkZWx0YSA9IGFuZ2xlIC0gdGhpcy5sYXN0QW5nbGVfO1xuICAgICAgdGhpcy5yb3RhdGlvbkRlbHRhXyArPSBkZWx0YTtcbiAgICAgIGlmICghdGhpcy5yb3RhdGluZ18gJiYgTWF0aC5hYnModGhpcy5yb3RhdGlvbkRlbHRhXykgPiB0aGlzLnRocmVzaG9sZF8pIHtcbiAgICAgICAgdGhpcy5yb3RhdGluZ18gPSB0cnVlO1xuICAgICAgfVxuICAgICAgcm90YXRpb25EZWx0YSA9IGRlbHRhO1xuICAgIH1cbiAgICB0aGlzLmxhc3RBbmdsZV8gPSBhbmdsZTtcblxuICAgIGNvbnN0IG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgaWYgKHZpZXcuZ2V0Q29uc3RyYWludHMoKS5yb3RhdGlvbiA9PT0gZGlzYWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHJvdGF0ZSBhbmNob3IgcG9pbnQuXG4gICAgLy8gRklYTUU6IHNob3VsZCBiZSB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGJldHdlZW4gdGhlIGxpbmVzOlxuICAgIC8vICAgICB0b3VjaDAsdG91Y2gxIGFuZCBwcmV2aW91c1RvdWNoMCxwcmV2aW91c1RvdWNoMVxuICAgIHRoaXMuYW5jaG9yXyA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwoXG4gICAgICBtYXAuZ2V0RXZlbnRQaXhlbChjZW50cm9pZEZyb21Qb2ludGVycyh0aGlzLnRhcmdldFBvaW50ZXJzKSlcbiAgICApO1xuXG4gICAgLy8gcm90YXRlXG4gICAgaWYgKHRoaXMucm90YXRpbmdfKSB7XG4gICAgICBtYXAucmVuZGVyKCk7XG4gICAgICB2aWV3LmFkanVzdFJvdGF0aW9uSW50ZXJuYWwocm90YXRpb25EZWx0YSwgdGhpcy5hbmNob3JfKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAqL1xuICBoYW5kbGVVcEV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA8IDIpIHtcbiAgICAgIGNvbnN0IG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24odGhpcy5kdXJhdGlvbl8pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgKi9cbiAgaGFuZGxlRG93bkV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+PSAyKSB7XG4gICAgICBjb25zdCBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMucm90YXRpbmdfID0gZmFsc2U7XG4gICAgICB0aGlzLnJvdGF0aW9uRGVsdGFfID0gMC4wO1xuICAgICAgaWYgKCF0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgICAgbWFwLmdldFZpZXcoKS5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBpbmNoUm90YXRlO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1BpbmNoWm9vbVxuICovXG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uLCB7XG4gIGNlbnRyb2lkIGFzIGNlbnRyb2lkRnJvbVBvaW50ZXJzLFxufSBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHtGQUxTRX0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTQwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgcGluY2hpbmcgd2l0aCB0d28gZmluZ2Vyc1xuICogb24gYSB0b3VjaCBzY3JlZW4uXG4gKiBAYXBpXG4gKi9cbmNsYXNzIFBpbmNoWm9vbSBleHRlbmRzIFBvaW50ZXJJbnRlcmFjdGlvbiB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSBPcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gICAgY29uc3QgcG9pbnRlck9wdGlvbnMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vUG9pbnRlci5qc1wiKS5PcHRpb25zfSAqLyAoXG4gICAgICBvcHRpb25zXG4gICAgKTtcblxuICAgIGlmICghcG9pbnRlck9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgIHBvaW50ZXJPcHRpb25zLnN0b3BEb3duID0gRkFMU0U7XG4gICAgfVxuXG4gICAgc3VwZXIocG9pbnRlck9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqL1xuICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogNDAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSAxO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqL1xuICBoYW5kbGVEcmFnRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgbGV0IHNjYWxlRGVsdGEgPSAxLjA7XG5cbiAgICBjb25zdCB0b3VjaDAgPSB0aGlzLnRhcmdldFBvaW50ZXJzWzBdO1xuICAgIGNvbnN0IHRvdWNoMSA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMV07XG4gICAgY29uc3QgZHggPSB0b3VjaDAuY2xpZW50WCAtIHRvdWNoMS5jbGllbnRYO1xuICAgIGNvbnN0IGR5ID0gdG91Y2gwLmNsaWVudFkgLSB0b3VjaDEuY2xpZW50WTtcblxuICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gdG91Y2hlc1xuICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcblxuICAgIGlmICh0aGlzLmxhc3REaXN0YW5jZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgc2NhbGVEZWx0YSA9IHRoaXMubGFzdERpc3RhbmNlXyAvIGRpc3RhbmNlO1xuICAgIH1cbiAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSBkaXN0YW5jZTtcblxuICAgIGNvbnN0IG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG5cbiAgICBpZiAoc2NhbGVEZWx0YSAhPSAxLjApIHtcbiAgICAgIHRoaXMubGFzdFNjYWxlRGVsdGFfID0gc2NhbGVEZWx0YTtcbiAgICB9XG5cbiAgICAvLyBzY2FsZSBhbmNob3IgcG9pbnQuXG4gICAgdGhpcy5hbmNob3JfID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChcbiAgICAgIG1hcC5nZXRFdmVudFBpeGVsKGNlbnRyb2lkRnJvbVBvaW50ZXJzKHRoaXMudGFyZ2V0UG9pbnRlcnMpKVxuICAgICk7XG5cbiAgICAvLyBzY2FsZSwgYnlwYXNzIHRoZSByZXNvbHV0aW9uIGNvbnN0cmFpbnRcbiAgICBtYXAucmVuZGVyKCk7XG4gICAgdmlldy5hZGp1c3RSZXNvbHV0aW9uSW50ZXJuYWwoc2NhbGVEZWx0YSwgdGhpcy5hbmNob3JfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICovXG4gIGhhbmRsZVVwRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoIDwgMikge1xuICAgICAgY29uc3QgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIGNvbnN0IHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5sYXN0U2NhbGVEZWx0YV8gPiAxID8gMSA6IC0xO1xuICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbih0aGlzLmR1cmF0aW9uXywgZGlyZWN0aW9uKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICovXG4gIGhhbmRsZURvd25FdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPj0gMikge1xuICAgICAgY29uc3QgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmxhc3RTY2FsZURlbHRhXyA9IDE7XG4gICAgICBpZiAoIXRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgICBtYXAuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGluY2hab29tO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcFxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBDb21wb3NpdGVNYXBSZW5kZXJlciBmcm9tICcuL3JlbmRlcmVyL0NvbXBvc2l0ZS5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTGF5ZXIgZnJvbSAnLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQgTGF5ZXJHcm91cCwge0dyb3VwRXZlbnR9IGZyb20gJy4vbGF5ZXIvR3JvdXAuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudCBmcm9tICcuL01hcEJyb3dzZXJFdmVudC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50SGFuZGxlciBmcm9tICcuL01hcEJyb3dzZXJFdmVudEhhbmRsZXIuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCBNYXBFdmVudCBmcm9tICcuL01hcEV2ZW50LmpzJztcbmltcG9ydCBNYXBFdmVudFR5cGUgZnJvbSAnLi9NYXBFdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcFByb3BlcnR5IGZyb20gJy4vTWFwUHJvcGVydHkuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUG9pbnRlckV2ZW50VHlwZSBmcm9tICcuL3BvaW50ZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBUaWxlUXVldWUsIHtnZXRUaWxlUHJpb3JpdHl9IGZyb20gJy4vVGlsZVF1ZXVlLmpzJztcbmltcG9ydCBWaWV3IGZyb20gJy4vVmlldy5qcyc7XG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi9WaWV3SGludC5qcyc7XG5pbXBvcnQge0RFVklDRV9QSVhFTF9SQVRJTywgUEFTU0lWRV9FVkVOVF9MSVNURU5FUlN9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7VFJVRX0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHtcbiAgYXBwbHkgYXMgYXBwbHlUcmFuc2Zvcm0sXG4gIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sXG59IGZyb20gJy4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtcbiAgY2xvbmUsXG4gIGNyZWF0ZU9yVXBkYXRlRW1wdHksXG4gIGVxdWFscyBhcyBlcXVhbHNFeHRlbnQsXG4gIGdldEZvclZpZXdBbmRTaXplLFxuICBpc0VtcHR5LFxufSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQge2RlZmF1bHRzIGFzIGRlZmF1bHRDb250cm9sc30gZnJvbSAnLi9jb250cm9sL2RlZmF1bHRzLmpzJztcbmltcG9ydCB7ZGVmYXVsdHMgYXMgZGVmYXVsdEludGVyYWN0aW9uc30gZnJvbSAnLi9pbnRlcmFjdGlvbi9kZWZhdWx0cy5qcyc7XG5pbXBvcnQge2VxdWFsc30gZnJvbSAnLi9hcnJheS5qcyc7XG5pbXBvcnQge2Zyb21Vc2VyQ29vcmRpbmF0ZSwgdG9Vc2VyQ29vcmRpbmF0ZX0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuL3V0aWwuanMnO1xuaW1wb3J0IHtoYXNBcmVhfSBmcm9tICcuL3NpemUuanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4vZXZlbnRzLmpzJztcbmltcG9ydCB7cmVtb3ZlTm9kZX0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHt3YXJufSBmcm9tICcuL2NvbnNvbGUuanMnO1xuXG4vKipcbiAqIFN0YXRlIG9mIHRoZSBjdXJyZW50IGZyYW1lLiBPbmx5IGBwaXhlbFJhdGlvYCwgYHRpbWVgIGFuZCBgdmlld1N0YXRlYCBzaG91bGRcbiAqIGJlIHVzZWQgaW4gYXBwbGljYXRpb25zLlxuICogQHR5cGVkZWYge09iamVjdH0gRnJhbWVTdGF0ZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHBpeGVsUmF0aW8gVGhlIHBpeGVsIHJhdGlvIG9mIHRoZSBmcmFtZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lIFRoZSB0aW1lIHdoZW4gcmVuZGVyaW5nIG9mIHRoZSBmcmFtZSB3YXMgcmVxdWVzdGVkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1ZpZXcuanNcIikuU3RhdGV9IHZpZXdTdGF0ZSBUaGUgc3RhdGUgb2YgdGhlIGN1cnJlbnQgdmlldy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYW5pbWF0ZSBBbmltYXRlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtIENvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCJyYnVzaFwiKS5kZWZhdWx0fSBkZWNsdXR0ZXJUcmVlIERlY2x1dHRlclRyZWUuXG4gKiBAcHJvcGVydHkge251bGx8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtuZXh0RXh0ZW50XSBOZXh0IGV4dGVudCBkdXJpbmcgYW4gYW5pbWF0aW9uIHNlcmllcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5TdGF0ZT59IGxheWVyU3RhdGVzQXJyYXkgTGF5ZXJTdGF0ZXNBcnJheS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsYXllckluZGV4IExheWVySW5kZXguXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gcGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0gUGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0uXG4gKiBAcHJvcGVydHkge0FycmF5PFBvc3RSZW5kZXJGdW5jdGlvbj59IHBvc3RSZW5kZXJGdW5jdGlvbnMgUG9zdFJlbmRlckZ1bmN0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgU2l6ZS5cbiAqIEBwcm9wZXJ0eSB7VGlsZVF1ZXVlfSB0aWxlUXVldWUgVGlsZVF1ZXVlLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgT2JqZWN0PHN0cmluZywgYm9vbGVhbj4+fSB1c2VkVGlsZXMgVXNlZFRpbGVzLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSB2aWV3SGludHMgVmlld0hpbnRzLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgT2JqZWN0PHN0cmluZywgYm9vbGVhbj4+fSB3YW50ZWRUaWxlcyBXYW50ZWRUaWxlcy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBtYXBJZCBUaGUgaWQgb2YgdGhlIG1hcC5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHJlbmRlclRhcmdldHMgSWRlbnRpZmllcnMgb2YgcHJldmlvdXNseSByZW5kZXJlZCBlbGVtZW50cy5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihNYXAsID9GcmFtZVN0YXRlKTogYW55fSBQb3N0UmVuZGVyRnVuY3Rpb25cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEF0UGl4ZWxPcHRpb25zXG4gKiBAcHJvcGVydHkge3VuZGVmaW5lZHxmdW5jdGlvbihpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9zb3VyY2UvU291cmNlXCIpLmRlZmF1bHQ+KTogYm9vbGVhbn0gW2xheWVyRmlsdGVyXSBMYXllciBmaWx0ZXJcbiAqIGZ1bmN0aW9uLiBUaGUgZmlsdGVyIGZ1bmN0aW9uIHdpbGwgcmVjZWl2ZSBvbmUgYXJndW1lbnQsIHRoZVxuICoge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciBsYXllci1jYW5kaWRhdGV9IGFuZCBpdCBzaG91bGQgcmV0dXJuIGEgYm9vbGVhbiB2YWx1ZS5cbiAqIE9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYFxuICogd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZSBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2hpdFRvbGVyYW5jZT0wXSBIaXQtZGV0ZWN0aW9uIHRvbGVyYW5jZSBpbiBjc3MgcGl4ZWxzLiBQaXhlbHNcbiAqIGluc2lkZSB0aGUgcmFkaXVzIGFyb3VuZCB0aGUgZ2l2ZW4gcG9zaXRpb24gd2lsbCBiZSBjaGVja2VkIGZvciBmZWF0dXJlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NoZWNrV3JhcHBlZD10cnVlXSBDaGVjay1XcmFwcGVkIFdpbGwgY2hlY2sgZm9yIHdyYXBwZWQgZ2VvbWV0cmllcyBpbnNpZGUgdGhlIHJhbmdlIG9mXG4gKiAgICsvLSAxIHdvcmxkIHdpZHRoLiBXb3JrcyBvbmx5IGlmIGEgcHJvamVjdGlvbiBpcyB1c2VkIHRoYXQgY2FuIGJlIHdyYXBwZWQuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNYXBPcHRpb25zSW50ZXJuYWxcbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gW2NvbnRyb2xzXSBDb250cm9scy5cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBbaW50ZXJhY3Rpb25zXSBJbnRlcmFjdGlvbnMuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fERvY3VtZW50fSBrZXlib2FyZEV2ZW50VGFyZ2V0IEtleWJvYXJkRXZlbnRUYXJnZXQuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSBvdmVybGF5cyBPdmVybGF5cy5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IHZhbHVlcyBWYWx1ZXMuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8J2NoYW5nZTpsYXllcmdyb3VwJ3wnY2hhbmdlOnNpemUnfCdjaGFuZ2U6dGFyZ2V0J3wnY2hhbmdlOnZpZXcnfSBNYXBPYmplY3RFdmVudFR5cGVzXG4gKi9cblxuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8TWFwT2JqZWN0RXZlbnRUeXBlcywgaW1wb3J0KFwiLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vTWFwQnJvd3NlckV2ZW50VHlwZVwiKS5UeXBlcywgaW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9NYXBFdmVudFR5cGVcIikuVHlwZXMsIGltcG9ydChcIi4vTWFwRXZlbnRcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9yZW5kZXIvRXZlbnRUeXBlXCIpLk1hcFJlbmRlckV2ZW50VHlwZXMsIGltcG9ydChcIi4vcmVuZGVyL0V2ZW50XCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8TWFwT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgICAgaW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnRUeXBlXCIpLlR5cGVzfGltcG9ydChcIi4vTWFwRXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICBpbXBvcnQoXCIuL3JlbmRlci9FdmVudFR5cGVcIikuTWFwUmVuZGVyRXZlbnRUeXBlcywgUmV0dXJuPn0gTWFwRXZlbnRIYW5kbGVyXG4gKi9cblxuLyoqXG4gKiBPYmplY3QgbGl0ZXJhbCB3aXRoIGNvbmZpZyBvcHRpb25zIGZvciB0aGUgbWFwLlxuICogQHR5cGVkZWYge09iamVjdH0gTWFwT3B0aW9uc1xuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fEFycmF5PGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fSBbY29udHJvbHNdXG4gKiBDb250cm9scyBpbml0aWFsbHkgYWRkZWQgdG8gdGhlIG1hcC4gSWYgbm90IHNwZWNpZmllZCxcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9kZWZhdWx0cy5kZWZhdWx0c30gaXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcGl4ZWxSYXRpbz13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb10gVGhlIHJhdGlvIGJldHdlZW5cbiAqIHBoeXNpY2FsIHBpeGVscyBhbmQgZGV2aWNlLWluZGVwZW5kZW50IHBpeGVscyAoZGlwcykgb24gdGhlIGRldmljZS5cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fEFycmF5PGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IFtpbnRlcmFjdGlvbnNdXG4gKiBJbnRlcmFjdGlvbnMgdGhhdCBhcmUgaW5pdGlhbGx5IGFkZGVkIHRvIHRoZSBtYXAuIElmIG5vdCBzcGVjaWZpZWQsXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL2RlZmF1bHRzLmRlZmF1bHRzfSBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxEb2N1bWVudHxzdHJpbmd9IFtrZXlib2FyZEV2ZW50VGFyZ2V0XSBUaGUgZWxlbWVudCB0b1xuICogbGlzdGVuIHRvIGtleWJvYXJkIGV2ZW50cyBvbi4gVGhpcyBkZXRlcm1pbmVzIHdoZW4gdGhlIGBLZXlib2FyZFBhbmAgYW5kXG4gKiBgS2V5Ym9hcmRab29tYCBpbnRlcmFjdGlvbnMgdHJpZ2dlci4gRm9yIGV4YW1wbGUsIGlmIHRoaXMgb3B0aW9uIGlzIHNldCB0b1xuICogYGRvY3VtZW50YCB0aGUga2V5Ym9hcmQgaW50ZXJhY3Rpb25zIHdpbGwgYWx3YXlzIHRyaWdnZXIuIElmIHRoaXMgb3B0aW9uIGlzXG4gKiBub3Qgc3BlY2lmaWVkLCB0aGUgZWxlbWVudCB0aGUgbGlicmFyeSBsaXN0ZW5zIHRvIGtleWJvYXJkIGV2ZW50cyBvbiBpcyB0aGVcbiAqIG1hcCB0YXJnZXQgKGkuZS4gdGhlIHVzZXItcHJvdmlkZWQgZGl2IGZvciB0aGUgbWFwKS4gSWYgdGhpcyBpcyBub3RcbiAqIGBkb2N1bWVudGAsIHRoZSB0YXJnZXQgZWxlbWVudCBuZWVkcyB0byBiZSBmb2N1c2VkIGZvciBrZXkgZXZlbnRzIHRvIGJlXG4gKiBlbWl0dGVkLCByZXF1aXJpbmcgdGhhdCB0aGUgdGFyZ2V0IGVsZW1lbnQgaGFzIGEgYHRhYmluZGV4YCBhdHRyaWJ1dGUuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0PnxDb2xsZWN0aW9uPGltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0PnxMYXllckdyb3VwfSBbbGF5ZXJzXVxuICogTGF5ZXJzLiBJZiB0aGlzIGlzIG5vdCBkZWZpbmVkLCBhIG1hcCB3aXRoIG5vIGxheWVycyB3aWxsIGJlIHJlbmRlcmVkLiBOb3RlXG4gKiB0aGF0IGxheWVycyBhcmUgcmVuZGVyZWQgaW4gdGhlIG9yZGVyIHN1cHBsaWVkLCBzbyBpZiB5b3Ugd2FudCwgZm9yIGV4YW1wbGUsXG4gKiBhIHZlY3RvciBsYXllciB0byBhcHBlYXIgb24gdG9wIG9mIGEgdGlsZSBsYXllciwgaXQgbXVzdCBjb21lIGFmdGVyIHRoZSB0aWxlXG4gKiBsYXllci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4VGlsZXNMb2FkaW5nPTE2XSBNYXhpbXVtIG51bWJlciB0aWxlcyB0byBsb2FkXG4gKiBzaW11bHRhbmVvdXNseS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbW92ZVRvbGVyYW5jZT0xXSBUaGUgbWluaW11bSBkaXN0YW5jZSBpbiBwaXhlbHMgdGhlXG4gKiBjdXJzb3IgbXVzdCBtb3ZlIHRvIGJlIGRldGVjdGVkIGFzIGEgbWFwIG1vdmUgZXZlbnQgaW5zdGVhZCBvZiBhIGNsaWNrLlxuICogSW5jcmVhc2luZyB0aGlzIHZhbHVlIGNhbiBtYWtlIGl0IGVhc2llciB0byBjbGljayBvbiB0aGUgbWFwLlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0PnxBcnJheTxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59IFtvdmVybGF5c11cbiAqIE92ZXJsYXlzIGluaXRpYWxseSBhZGRlZCB0byB0aGUgbWFwLiBCeSBkZWZhdWx0LCBubyBvdmVybGF5cyBhcmUgYWRkZWQuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gVGhlIGNvbnRhaW5lciBmb3IgdGhlIG1hcCwgZWl0aGVyIHRoZVxuICogZWxlbWVudCBpdHNlbGYgb3IgdGhlIGBpZGAgb2YgdGhlIGVsZW1lbnQuIElmIG5vdCBzcGVjaWZpZWQgYXQgY29uc3RydWN0aW9uXG4gKiB0aW1lLCB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjc2V0VGFyZ2V0fSBtdXN0IGJlIGNhbGxlZCBmb3IgdGhlIG1hcCB0byBiZVxuICogcmVuZGVyZWQuIElmIHBhc3NlZCBieSBlbGVtZW50LCB0aGUgY29udGFpbmVyIGNhbiBiZSBpbiBhIHNlY29uZGFyeSBkb2N1bWVudC5cbiAqICoqTm90ZToqKiBDU1MgYHRyYW5zZm9ybWAgc3VwcG9ydCBmb3IgdGhlIHRhcmdldCBlbGVtZW50IGlzIGxpbWl0ZWQgdG8gYHNjYWxlYC5cbiAqIEBwcm9wZXJ0eSB7Vmlld3xQcm9taXNlPGltcG9ydChcIi4vVmlldy5qc1wiKS5WaWV3T3B0aW9ucz59IFt2aWV3XSBUaGUgbWFwJ3Mgdmlldy4gIE5vIGxheWVyIHNvdXJjZXMgd2lsbCBiZVxuICogZmV0Y2hlZCB1bmxlc3MgdGhpcyBpcyBzcGVjaWZpZWQgYXQgY29uc3RydWN0aW9uIHRpbWUgb3IgdGhyb3VnaFxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwI3NldFZpZXd9LlxuICovXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUxheWVyTWFwUHJvcGVydHkobGF5ZXIpIHtcbiAgaWYgKGxheWVyIGluc3RhbmNlb2YgTGF5ZXIpIHtcbiAgICBsYXllci5zZXRNYXBJbnRlcm5hbChudWxsKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGxheWVyIGluc3RhbmNlb2YgTGF5ZXJHcm91cCkge1xuICAgIGxheWVyLmdldExheWVycygpLmZvckVhY2gocmVtb3ZlTGF5ZXJNYXBQcm9wZXJ0eSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAqIEBwYXJhbSB7TWFwfSBtYXAgTWFwLlxuICovXG5mdW5jdGlvbiBzZXRMYXllck1hcFByb3BlcnR5KGxheWVyLCBtYXApIHtcbiAgaWYgKGxheWVyIGluc3RhbmNlb2YgTGF5ZXIpIHtcbiAgICBsYXllci5zZXRNYXBJbnRlcm5hbChtYXApO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMYXllckdyb3VwKSB7XG4gICAgY29uc3QgbGF5ZXJzID0gbGF5ZXIuZ2V0TGF5ZXJzKCkuZ2V0QXJyYXkoKTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBsYXllcnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgc2V0TGF5ZXJNYXBQcm9wZXJ0eShsYXllcnNbaV0sIG1hcCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogVGhlIG1hcCBpcyB0aGUgY29yZSBjb21wb25lbnQgb2YgT3BlbkxheWVycy4gRm9yIGEgbWFwIHRvIHJlbmRlciwgYSB2aWV3LFxuICogb25lIG9yIG1vcmUgbGF5ZXJzLCBhbmQgYSB0YXJnZXQgY29udGFpbmVyIGFyZSBuZWVkZWQ6XG4gKlxuICogICAgIGltcG9ydCBNYXAgZnJvbSAnb2wvTWFwLmpzJztcbiAqICAgICBpbXBvcnQgVmlldyBmcm9tICdvbC9WaWV3LmpzJztcbiAqICAgICBpbXBvcnQgVGlsZUxheWVyIGZyb20gJ29sL2xheWVyL1RpbGUuanMnO1xuICogICAgIGltcG9ydCBPU00gZnJvbSAnb2wvc291cmNlL09TTS5qcyc7XG4gKlxuICogICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoe1xuICogICAgICAgdmlldzogbmV3IFZpZXcoe1xuICogICAgICAgICBjZW50ZXI6IFswLCAwXSxcbiAqICAgICAgICAgem9vbTogMSxcbiAqICAgICAgIH0pLFxuICogICAgICAgbGF5ZXJzOiBbXG4gKiAgICAgICAgIG5ldyBUaWxlTGF5ZXIoe1xuICogICAgICAgICAgIHNvdXJjZTogbmV3IE9TTSgpLFxuICogICAgICAgICB9KSxcbiAqICAgICAgIF0sXG4gKiAgICAgICB0YXJnZXQ6ICdtYXAnLFxuICogICAgIH0pO1xuICpcbiAqIFRoZSBhYm92ZSBzbmlwcGV0IGNyZWF0ZXMgYSBtYXAgdXNpbmcgYSB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL1RpbGV+VGlsZUxheWVyfSB0b1xuICogZGlzcGxheSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9PU01+T1NNfSBPU00gZGF0YSBhbmQgcmVuZGVyIGl0IHRvIGEgRE9NXG4gKiBlbGVtZW50IHdpdGggdGhlIGlkIGBtYXBgLlxuICpcbiAqIFRoZSBjb25zdHJ1Y3RvciBwbGFjZXMgYSB2aWV3cG9ydCBjb250YWluZXIgKHdpdGggQ1NTIGNsYXNzIG5hbWVcbiAqIGBvbC12aWV3cG9ydGApIGluIHRoZSB0YXJnZXQgZWxlbWVudCAoc2VlIGBnZXRWaWV3cG9ydCgpYCksIGFuZCB0aGVuIHR3b1xuICogZnVydGhlciBlbGVtZW50cyB3aXRoaW4gdGhlIHZpZXdwb3J0OiBvbmUgd2l0aCBDU1MgY2xhc3MgbmFtZVxuICogYG9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50YCBmb3IgY29udHJvbHMgYW5kIHNvbWUgb3ZlcmxheXMsIGFuZCBvbmUgd2l0aFxuICogQ1NTIGNsYXNzIG5hbWUgYG9sLW92ZXJsYXljb250YWluZXJgIGZvciBvdGhlciBvdmVybGF5cyAoc2VlIHRoZSBgc3RvcEV2ZW50YFxuICogb3B0aW9uIG9mIHtAbGluayBtb2R1bGU6b2wvT3ZlcmxheX5PdmVybGF5fSBmb3IgdGhlIGRpZmZlcmVuY2UpLiBUaGUgbWFwXG4gKiBpdHNlbGYgaXMgcGxhY2VkIGluIGEgZnVydGhlciBlbGVtZW50IHdpdGhpbiB0aGUgdmlld3BvcnQuXG4gKlxuICogTGF5ZXJzIGFyZSBzdG9yZWQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gaW5cbiAqIGxheWVyR3JvdXBzLiBBIHRvcC1sZXZlbCBncm91cCBpcyBwcm92aWRlZCBieSB0aGUgbGlicmFyeS4gVGhpcyBpcyB3aGF0IGlzXG4gKiBhY2Nlc3NlZCBieSBgZ2V0TGF5ZXJHcm91cGAgYW5kIGBzZXRMYXllckdyb3VwYC4gTGF5ZXJzIGVudGVyZWQgaW4gdGhlXG4gKiBvcHRpb25zIGFyZSBhZGRlZCB0byB0aGlzIGdyb3VwLCBhbmQgYGFkZExheWVyYCBhbmQgYHJlbW92ZUxheWVyYCBjaGFuZ2UgdGhlXG4gKiBsYXllciBjb2xsZWN0aW9uIGluIHRoZSBncm91cC4gYGdldExheWVyc2AgaXMgYSBjb252ZW5pZW5jZSBmdW5jdGlvbiBmb3JcbiAqIGBnZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKClgLiBOb3RlIHRoYXQge0BsaW5rIG1vZHVsZTpvbC9sYXllci9Hcm91cH5MYXllckdyb3VwfVxuICogaXMgYSBzdWJjbGFzcyBvZiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2V+QmFzZUxheWVyfSwgc28gbGF5ZXJzIGVudGVyZWQgaW4gdGhlXG4gKiBvcHRpb25zIG9yIGFkZGVkIHdpdGggYGFkZExheWVyYCBjYW4gYmUgZ3JvdXBzLCB3aGljaCBjYW4gY29udGFpbiBmdXJ0aGVyXG4gKiBncm91cHMsIGFuZCBzbyBvbi5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnQuanNcIikuTWFwQnJvd3NlckV2ZW50XG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9NYXBFdmVudC5qc1wiKS5NYXBFdmVudFxuICogQGZpcmVzIGltcG9ydChcIi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHQjcHJlY29tcG9zZVxuICogQGZpcmVzIGltcG9ydChcIi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHQjcG9zdGNvbXBvc2VcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL3JlbmRlci9FdmVudC5qc1wiKS5kZWZhdWx0I3JlbmRlcmNvbXBsZXRlXG4gKiBAYXBpXG4gKi9cbmNsYXNzIE1hcCBleHRlbmRzIEJhc2VPYmplY3Qge1xuICAvKipcbiAgICogQHBhcmFtIHtNYXBPcHRpb25zfSBbb3B0aW9uc10gTWFwIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtNYXBFdmVudEhhbmRsZXI8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtNYXBFdmVudEhhbmRsZXI8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uY2U7XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge01hcEV2ZW50SGFuZGxlcjx2b2lkPn1cbiAgICAgKi9cbiAgICB0aGlzLnVuO1xuXG4gICAgY29uc3Qgb3B0aW9uc0ludGVybmFsID0gY3JlYXRlT3B0aW9uc0ludGVybmFsKG9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJDb21wbGV0ZV87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMubG9hZGVkXyA9IHRydWU7XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICB0aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50XyA9IHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LmJpbmQodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5tYXhUaWxlc0xvYWRpbmdfID1cbiAgICAgIG9wdGlvbnMubWF4VGlsZXNMb2FkaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFRpbGVzTG9hZGluZyA6IDE2O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWxSYXRpb18gPVxuICAgICAgb3B0aW9ucy5waXhlbFJhdGlvICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRpb25zLnBpeGVsUmF0aW9cbiAgICAgICAgOiBERVZJQ0VfUElYRUxfUkFUSU87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHsqfVxuICAgICAqL1xuICAgIHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5hbmltYXRpb25EZWxheV8gPSB0aGlzLmFuaW1hdGlvbkRlbGF5Xy5iaW5kKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICovXG4gICAgdGhpcy5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmZyYW1lSW5kZXhfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9GcmFtZVN0YXRlfVxuICAgICAqL1xuICAgIHRoaXMuZnJhbWVTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGV4dGVudCBhdCB0aGUgcHJldmlvdXMgJ21vdmVlbmQnIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLnByZXZpb3VzRXh0ZW50XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAqL1xuICAgIHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICovXG4gICAgdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9BcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy52aWV3cG9ydF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLnZpZXdwb3J0Xy5jbGFzc05hbWUgPVxuICAgICAgJ29sLXZpZXdwb3J0JyArICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgPyAnIG9sLXRvdWNoJyA6ICcnKTtcbiAgICB0aGlzLnZpZXdwb3J0Xy5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgdGhpcy52aWV3cG9ydF8uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICB0aGlzLnZpZXdwb3J0Xy5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICB0aGlzLnZpZXdwb3J0Xy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUuekluZGV4ID0gJzAnO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lcl8uY2xhc3NOYW1lID0gJ29sLW92ZXJsYXljb250YWluZXInO1xuICAgIHRoaXMudmlld3BvcnRfLmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheUNvbnRhaW5lcl8pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IUhUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLnpJbmRleCA9ICcwJztcbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLmNsYXNzTmFtZSA9ICdvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCc7XG4gICAgdGhpcy52aWV3cG9ydF8uYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtNYXBCcm93c2VyRXZlbnRIYW5kbGVyfVxuICAgICAqL1xuICAgIHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubW92ZVRvbGVyYW5jZV8gPSBvcHRpb25zLm1vdmVUb2xlcmFuY2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudHxEb2N1bWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfID0gb3B0aW9uc0ludGVybmFsLmtleWJvYXJkRXZlbnRUYXJnZXQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLnRhcmdldENoYW5nZUhhbmRsZXJLZXlzXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudHxudWxsfVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0RWxlbWVudF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge1Jlc2l6ZU9ic2VydmVyfVxuICAgICAqL1xuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXJfID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHRoaXMudXBkYXRlU2l6ZSgpKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLmNvbnRyb2xzID0gb3B0aW9uc0ludGVybmFsLmNvbnRyb2xzIHx8IGRlZmF1bHRDb250cm9scygpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgdGhpcy5pbnRlcmFjdGlvbnMgPVxuICAgICAgb3B0aW9uc0ludGVybmFsLmludGVyYWN0aW9ucyB8fFxuICAgICAgZGVmYXVsdEludGVyYWN0aW9ucyh7XG4gICAgICAgIG9uRm9jdXNPbmx5OiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm92ZXJsYXlzXyA9IG9wdGlvbnNJbnRlcm5hbC5vdmVybGF5cztcblxuICAgIC8qKlxuICAgICAqIEEgbG9va3VwIG9mIG92ZXJsYXlzIGJ5IGlkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKi9cbiAgICB0aGlzLm92ZXJsYXlJZEluZGV4XyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR8bnVsbH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZXJfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgeyFBcnJheTxQb3N0UmVuZGVyRnVuY3Rpb24+fVxuICAgICAqL1xuICAgIHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1RpbGVRdWV1ZX1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVRdWV1ZV8gPSBuZXcgVGlsZVF1ZXVlKFxuICAgICAgdGhpcy5nZXRUaWxlUHJpb3JpdHkuYmluZCh0aGlzKSxcbiAgICAgIHRoaXMuaGFuZGxlVGlsZUNoYW5nZV8uYmluZCh0aGlzKVxuICAgICk7XG5cbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKFxuICAgICAgTWFwUHJvcGVydHkuTEFZRVJHUk9VUCxcbiAgICAgIHRoaXMuaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfXG4gICAgKTtcbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKE1hcFByb3BlcnR5LlZJRVcsIHRoaXMuaGFuZGxlVmlld0NoYW5nZWRfKTtcbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKE1hcFByb3BlcnR5LlNJWkUsIHRoaXMuaGFuZGxlU2l6ZUNoYW5nZWRfKTtcbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKE1hcFByb3BlcnR5LlRBUkdFVCwgdGhpcy5oYW5kbGVUYXJnZXRDaGFuZ2VkXyk7XG5cbiAgICAvLyBzZXRQcm9wZXJ0aWVzIHdpbGwgdHJpZ2dlciB0aGUgcmVuZGVyaW5nIG9mIHRoZSBtYXAgaWYgdGhlIG1hcFxuICAgIC8vIGlzIFwiZGVmaW5lZFwiIGFscmVhZHkuXG4gICAgdGhpcy5zZXRQcm9wZXJ0aWVzKG9wdGlvbnNJbnRlcm5hbC52YWx1ZXMpO1xuXG4gICAgY29uc3QgbWFwID0gdGhpcztcbiAgICBpZiAob3B0aW9ucy52aWV3ICYmICEob3B0aW9ucy52aWV3IGluc3RhbmNlb2YgVmlldykpIHtcbiAgICAgIG9wdGlvbnMudmlldy50aGVuKGZ1bmN0aW9uICh2aWV3T3B0aW9ucykge1xuICAgICAgICBtYXAuc2V0VmlldyhuZXcgVmlldyh2aWV3T3B0aW9ucykpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250cm9scy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudDxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50XG4gICAgICAgKi9cbiAgICAgIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcCh0aGlzKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgdGhpcy5jb250cm9scy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudDxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICovXG4gICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAobnVsbCk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIHRoaXMuaW50ZXJhY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCxcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50PGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAqL1xuICAgICAgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKHRoaXMpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICB0aGlzLmludGVyYWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudDxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgKi9cbiAgICAgIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcChudWxsKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgdGhpcy5vdmVybGF5c18uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIENvbGxlY3Rpb25FdmVudFR5cGUuQURELFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnQ8aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgKi9cbiAgICAgIChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLmFkZE92ZXJsYXlJbnRlcm5hbF8oZXZlbnQuZWxlbWVudCk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIHRoaXMub3ZlcmxheXNfLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSxcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50PGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICovXG4gICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBldmVudC5lbGVtZW50LmdldElkKCk7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMub3ZlcmxheUlkSW5kZXhfW2lkLnRvU3RyaW5nKCldO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKG51bGwpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRyb2xzLmZvckVhY2goXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdH0gY29udHJvbCBDb250cm9sLlxuICAgICAgICovXG4gICAgICAoY29udHJvbCkgPT4ge1xuICAgICAgICBjb250cm9sLnNldE1hcCh0aGlzKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgdGhpcy5pbnRlcmFjdGlvbnMuZm9yRWFjaChcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR9IGludGVyYWN0aW9uIEludGVyYWN0aW9uLlxuICAgICAgICovXG4gICAgICAoaW50ZXJhY3Rpb24pID0+IHtcbiAgICAgICAgaW50ZXJhY3Rpb24uc2V0TWFwKHRoaXMpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICB0aGlzLm92ZXJsYXlzXy5mb3JFYWNoKHRoaXMuYWRkT3ZlcmxheUludGVybmFsXy5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdGhlIGdpdmVuIGNvbnRyb2wgdG8gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fSBjb250cm9sIENvbnRyb2wuXG4gICAqIEBhcGlcbiAgICovXG4gIGFkZENvbnRyb2woY29udHJvbCkge1xuICAgIHRoaXMuZ2V0Q29udHJvbHMoKS5wdXNoKGNvbnRyb2wpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCB0aGUgZ2l2ZW4gaW50ZXJhY3Rpb24gdG8gdGhlIG1hcC4gSWYgeW91IHdhbnQgdG8gYWRkIGFuIGludGVyYWN0aW9uXG4gICAqIGF0IGFub3RoZXIgcG9pbnQgb2YgdGhlIGNvbGxlY3Rpb24gdXNlIGBnZXRJbnRlcmFjdGlvbnMoKWAgYW5kIHRoZSBtZXRob2RzXG4gICAqIGF2YWlsYWJsZSBvbiB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0uIFRoaXMgY2FuIGJlIHVzZWQgdG9cbiAgICogc3RvcCB0aGUgZXZlbnQgcHJvcGFnYXRpb24gZnJvbSB0aGUgaGFuZGxlRXZlbnQgZnVuY3Rpb24uIFRoZSBpbnRlcmFjdGlvbnNcbiAgICogZ2V0IHRvIGhhbmRsZSB0aGUgZXZlbnRzIGluIHRoZSByZXZlcnNlIG9yZGVyIG9mIHRoaXMgY29sbGVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR9IGludGVyYWN0aW9uIEludGVyYWN0aW9uIHRvIGFkZC5cbiAgICogQGFwaVxuICAgKi9cbiAgYWRkSW50ZXJhY3Rpb24oaW50ZXJhY3Rpb24pIHtcbiAgICB0aGlzLmdldEludGVyYWN0aW9ucygpLnB1c2goaW50ZXJhY3Rpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIGdpdmVuIGxheWVyIHRvIHRoZSB0b3Agb2YgdGhpcyBtYXAuIElmIHlvdSB3YW50IHRvIGFkZCBhIGxheWVyXG4gICAqIGVsc2V3aGVyZSBpbiB0aGUgc3RhY2ssIHVzZSBgZ2V0TGF5ZXJzKClgIGFuZCB0aGUgbWV0aG9kcyBhdmFpbGFibGUgb25cbiAgICoge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICogQGFwaVxuICAgKi9cbiAgYWRkTGF5ZXIobGF5ZXIpIHtcbiAgICBjb25zdCBsYXllcnMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgICBsYXllcnMucHVzaChsYXllcik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0dyb3VwLmpzXCIpLkdyb3VwRXZlbnR9IGV2ZW50IFRoZSBsYXllciBhZGQgZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVMYXllckFkZF8oZXZlbnQpIHtcbiAgICBzZXRMYXllck1hcFByb3BlcnR5KGV2ZW50LmxheWVyLCB0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdGhlIGdpdmVuIG92ZXJsYXkgdG8gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgKiBAYXBpXG4gICAqL1xuICBhZGRPdmVybGF5KG92ZXJsYXkpIHtcbiAgICB0aGlzLmdldE92ZXJsYXlzKCkucHVzaChvdmVybGF5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGRlYWxzIHdpdGggbWFwJ3Mgb3ZlcmxheSBjb2xsZWN0aW9uIGNoYW5nZXMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9IG92ZXJsYXkgT3ZlcmxheS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFkZE92ZXJsYXlJbnRlcm5hbF8ob3ZlcmxheSkge1xuICAgIGNvbnN0IGlkID0gb3ZlcmxheS5nZXRJZCgpO1xuICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm92ZXJsYXlJZEluZGV4X1tpZC50b1N0cmluZygpXSA9IG92ZXJsYXk7XG4gICAgfVxuICAgIG92ZXJsYXkuc2V0TWFwKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIENsZWFuIHVwLlxuICAgKi9cbiAgZGlzcG9zZUludGVybmFsKCkge1xuICAgIHRoaXMuY29udHJvbHMuY2xlYXIoKTtcbiAgICB0aGlzLmludGVyYWN0aW9ucy5jbGVhcigpO1xuICAgIHRoaXMub3ZlcmxheXNfLmNsZWFyKCk7XG4gICAgdGhpcy5yZXNpemVPYnNlcnZlcl8uZGlzY29ubmVjdCgpO1xuICAgIHRoaXMuc2V0VGFyZ2V0KG51bGwpO1xuICAgIHN1cGVyLmRpc3Bvc2VJbnRlcm5hbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVjdCBmZWF0dXJlcyB0aGF0IGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydCwgYW5kIGV4ZWN1dGUgYVxuICAgKiBjYWxsYmFjayB3aXRoIGVhY2ggaW50ZXJzZWN0aW5nIGZlYXR1cmUuIExheWVycyBpbmNsdWRlZCBpbiB0aGUgZGV0ZWN0aW9uIGNhblxuICAgKiBiZSBjb25maWd1cmVkIHRocm91Z2ggdGhlIGBsYXllckZpbHRlcmAgb3B0aW9uIGluIGBvcHRpb25zYC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2UsIGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL3NvdXJjZS9Tb3VyY2VcIikuZGVmYXVsdD4sIGltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0KTogVH0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay4gVGhlIGNhbGxiYWNrIHdpbGwgYmVcbiAgICogICAgIGNhbGxlZCB3aXRoIHR3byBhcmd1bWVudHMuIFRoZSBmaXJzdCBhcmd1bWVudCBpcyBvbmVcbiAgICogICAgIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZX5GZWF0dXJlIGZlYXR1cmV9IG9yXG4gICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9GZWF0dXJlflJlbmRlckZlYXR1cmUgcmVuZGVyIGZlYXR1cmV9IGF0IHRoZSBwaXhlbCwgdGhlIHNlY29uZCBpc1xuICAgKiAgICAgdGhlIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIgbGF5ZXJ9IG9mIHRoZSBmZWF0dXJlIGFuZCB3aWxsIGJlIG51bGwgZm9yXG4gICAqICAgICB1bm1hbmFnZWQgbGF5ZXJzLiBUbyBzdG9wIGRldGVjdGlvbiwgY2FsbGJhY2sgZnVuY3Rpb25zIGNhbiByZXR1cm4gYVxuICAgKiAgICAgdHJ1dGh5IHZhbHVlLlxuICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zfSBbb3B0aW9uc10gT3B0aW9uYWwgb3B0aW9ucy5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdCwgaS5lLiB0aGUgcmV0dXJuIHZhbHVlIG9mIGxhc3RcbiAgICogY2FsbGJhY2sgZXhlY3V0aW9uLCBvciB0aGUgZmlyc3QgdHJ1dGh5IGNhbGxiYWNrIHJldHVybiB2YWx1ZS5cbiAgICogQHRlbXBsYXRlIFRcbiAgICogQGFwaVxuICAgKi9cbiAgZm9yRWFjaEZlYXR1cmVBdFBpeGVsKHBpeGVsLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXyB8fCAhdGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29vcmRpbmF0ZSA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHBpeGVsKTtcbiAgICBvcHRpb25zID0gb3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucyA6IHt9O1xuICAgIGNvbnN0IGhpdFRvbGVyYW5jZSA9XG4gICAgICBvcHRpb25zLmhpdFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5oaXRUb2xlcmFuY2UgOiAwO1xuICAgIGNvbnN0IGxheWVyRmlsdGVyID1cbiAgICAgIG9wdGlvbnMubGF5ZXJGaWx0ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGF5ZXJGaWx0ZXIgOiBUUlVFO1xuICAgIGNvbnN0IGNoZWNrV3JhcHBlZCA9IG9wdGlvbnMuY2hlY2tXcmFwcGVkICE9PSBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoXG4gICAgICBjb29yZGluYXRlLFxuICAgICAgdGhpcy5mcmFtZVN0YXRlXyxcbiAgICAgIGhpdFRvbGVyYW5jZSxcbiAgICAgIGNoZWNrV3JhcHBlZCxcbiAgICAgIGNhbGxiYWNrLFxuICAgICAgbnVsbCxcbiAgICAgIGxheWVyRmlsdGVyLFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBmZWF0dXJlcyB0aGF0IGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZT59IFRoZSBkZXRlY3RlZCBmZWF0dXJlcyBvclxuICAgKiBhbiBlbXB0eSBhcnJheSBpZiBub25lIHdlcmUgZm91bmQuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEZlYXR1cmVzQXRQaXhlbChwaXhlbCwgb3B0aW9ucykge1xuICAgIGNvbnN0IGZlYXR1cmVzID0gW107XG4gICAgdGhpcy5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwoXG4gICAgICBwaXhlbCxcbiAgICAgIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgICB9LFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gICAgcmV0dXJuIGZlYXR1cmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgbGF5ZXJzIGZyb20gYWxsIGxheWVyIGdyb3Vwcy5cbiAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0Pn0gTGF5ZXJzLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRBbGxMYXllcnMoKSB7XG4gICAgY29uc3QgbGF5ZXJzID0gW107XG4gICAgZnVuY3Rpb24gYWRkTGF5ZXJzRnJvbShsYXllckdyb3VwKSB7XG4gICAgICBsYXllckdyb3VwLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgIGlmIChsYXllciBpbnN0YW5jZW9mIExheWVyR3JvdXApIHtcbiAgICAgICAgICBhZGRMYXllcnNGcm9tKGxheWVyLmdldExheWVycygpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXllcnMucHVzaChsYXllcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRMYXllcnNGcm9tKHRoaXMuZ2V0TGF5ZXJzKCkpO1xuICAgIHJldHVybiBsYXllcnM7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IGlmIGZlYXR1cmVzIGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydC4gTGF5ZXJzIGluY2x1ZGVkIGluIHRoZVxuICAgKiBkZXRlY3Rpb24gY2FuIGJlIGNvbmZpZ3VyZWQgdGhyb3VnaCB0aGUgYGxheWVyRmlsdGVyYCBvcHRpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnN9IFtvcHRpb25zXSBPcHRpb25hbCBvcHRpb25zLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyB0aGVyZSBhIGZlYXR1cmUgYXQgdGhlIGdpdmVuIHBpeGVsP1xuICAgKiBAYXBpXG4gICAqL1xuICBoYXNGZWF0dXJlQXRQaXhlbChwaXhlbCwgb3B0aW9ucykge1xuICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXyB8fCAhdGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgY29vcmRpbmF0ZSA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHBpeGVsKTtcbiAgICBvcHRpb25zID0gb3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucyA6IHt9O1xuICAgIGNvbnN0IGxheWVyRmlsdGVyID1cbiAgICAgIG9wdGlvbnMubGF5ZXJGaWx0ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGF5ZXJGaWx0ZXIgOiBUUlVFO1xuICAgIGNvbnN0IGhpdFRvbGVyYW5jZSA9XG4gICAgICBvcHRpb25zLmhpdFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5oaXRUb2xlcmFuY2UgOiAwO1xuICAgIGNvbnN0IGNoZWNrV3JhcHBlZCA9IG9wdGlvbnMuY2hlY2tXcmFwcGVkICE9PSBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZShcbiAgICAgIGNvb3JkaW5hdGUsXG4gICAgICB0aGlzLmZyYW1lU3RhdGVfLFxuICAgICAgaGl0VG9sZXJhbmNlLFxuICAgICAgY2hlY2tXcmFwcGVkLFxuICAgICAgbGF5ZXJGaWx0ZXIsXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb29yZGluYXRlIGluIHVzZXIgcHJvamVjdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50LlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0RXZlbnRDb29yZGluYXRlKGV2ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCh0aGlzLmdldEV2ZW50UGl4ZWwoZXZlbnQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb29yZGluYXRlIGluIHZpZXcgcHJvamVjdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50LlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAgICovXG4gIGdldEV2ZW50Q29vcmRpbmF0ZUludGVybmFsKGV2ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHRoaXMuZ2V0RXZlbnRQaXhlbChldmVudCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1hcCBwaXhlbCBwb3NpdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50IHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydC5cbiAgICogQHBhcmFtIHtVSUV2ZW50fHtjbGllbnRYOiBudW1iZXIsIGNsaWVudFk6IG51bWJlcn19IGV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBQaXhlbC5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0RXZlbnRQaXhlbChldmVudCkge1xuICAgIGNvbnN0IHZpZXdwb3J0ID0gdGhpcy52aWV3cG9ydF87XG4gICAgY29uc3Qgdmlld3BvcnRQb3NpdGlvbiA9IHZpZXdwb3J0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IHZpZXdwb3J0U2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpO1xuICAgIGNvbnN0IHNjYWxlWCA9IHZpZXdwb3J0UG9zaXRpb24ud2lkdGggLyB2aWV3cG9ydFNpemVbMF07XG4gICAgY29uc3Qgc2NhbGVZID0gdmlld3BvcnRQb3NpdGlvbi5oZWlnaHQgLyB2aWV3cG9ydFNpemVbMV07XG4gICAgY29uc3QgZXZlbnRQb3NpdGlvbiA9XG4gICAgICAvL0ZJWE1FIEFyZSB3ZSByZWFsbHkgY2FsbGluZyB0aGlzIHdpdGggYSBUb3VjaEV2ZW50IGFueXdoZXJlP1xuICAgICAgJ2NoYW5nZWRUb3VjaGVzJyBpbiBldmVudFxuICAgICAgICA/IC8qKiBAdHlwZSB7VG91Y2hFdmVudH0gKi8gKGV2ZW50KS5jaGFuZ2VkVG91Y2hlc1swXVxuICAgICAgICA6IC8qKiBAdHlwZSB7TW91c2VFdmVudH0gKi8gKGV2ZW50KTtcblxuICAgIHJldHVybiBbXG4gICAgICAoZXZlbnRQb3NpdGlvbi5jbGllbnRYIC0gdmlld3BvcnRQb3NpdGlvbi5sZWZ0KSAvIHNjYWxlWCxcbiAgICAgIChldmVudFBvc2l0aW9uLmNsaWVudFkgLSB2aWV3cG9ydFBvc2l0aW9uLnRvcCkgLyBzY2FsZVksXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRhcmdldCBpbiB3aGljaCB0aGlzIG1hcCBpcyByZW5kZXJlZC5cbiAgICogTm90ZSB0aGF0IHRoaXMgcmV0dXJucyB3aGF0IGlzIGVudGVyZWQgYXMgYW4gb3B0aW9uIG9yIGluIHNldFRhcmdldDpcbiAgICogaWYgdGhhdCB3YXMgYW4gZWxlbWVudCwgaXQgcmV0dXJucyBhbiBlbGVtZW50OyBpZiBhIHN0cmluZywgaXQgcmV0dXJucyB0aGF0LlxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudHxzdHJpbmd8dW5kZWZpbmVkfSBUaGUgRWxlbWVudCBvciBpZCBvZiB0aGUgRWxlbWVudCB0aGF0IHRoZVxuICAgKiAgICAgbWFwIGlzIHJlbmRlcmVkIGluLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRUYXJnZXQoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR8c3RyaW5nfHVuZGVmaW5lZH0gKi8gKFxuICAgICAgdGhpcy5nZXQoTWFwUHJvcGVydHkuVEFSR0VUKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBET00gZWxlbWVudCBpbnRvIHdoaWNoIHRoaXMgbWFwIGlzIHJlbmRlcmVkLiBJbiBjb250cmFzdCB0b1xuICAgKiBgZ2V0VGFyZ2V0YCB0aGlzIG1ldGhvZCBhbHdheXMgcmV0dXJuIGFuIGBFbGVtZW50YCwgb3IgYG51bGxgIGlmIHRoZVxuICAgKiBtYXAgaGFzIG5vIHRhcmdldC5cbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSBlbGVtZW50IHRoYXQgdGhlIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0VGFyZ2V0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy50YXJnZXRFbGVtZW50XztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvb3JkaW5hdGUgZm9yIGEgZ2l2ZW4gcGl4ZWwuICBUaGlzIHJldHVybnMgYSBjb29yZGluYXRlIGluIHRoZVxuICAgKiB1c2VyIHByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRoZSBjb29yZGluYXRlIGZvciB0aGUgcGl4ZWwgcG9zaXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldENvb3JkaW5hdGVGcm9tUGl4ZWwocGl4ZWwpIHtcbiAgICByZXR1cm4gdG9Vc2VyQ29vcmRpbmF0ZShcbiAgICAgIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHBpeGVsKSxcbiAgICAgIHRoaXMuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjb29yZGluYXRlIGZvciBhIGdpdmVuIHBpeGVsLiAgVGhpcyByZXR1cm5zIGEgY29vcmRpbmF0ZSBpbiB0aGVcbiAgICogbWFwIHZpZXcgcHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGhlIGNvb3JkaW5hdGUgZm9yIHRoZSBwaXhlbCBwb3NpdGlvbi5cbiAgICovXG4gIGdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChwaXhlbCkge1xuICAgIGNvbnN0IGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBwaXhlbC5zbGljZSgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1hcCBjb250cm9scy4gTW9kaWZ5aW5nIHRoaXMgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBjb250cm9sc1xuICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gQ29udHJvbHMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldENvbnRyb2xzKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWFwIG92ZXJsYXlzLiBNb2RpZnlpbmcgdGhpcyBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIG92ZXJsYXlzXG4gICAqIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWFwLlxuICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gT3ZlcmxheXMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE92ZXJsYXlzKCkge1xuICAgIHJldHVybiB0aGlzLm92ZXJsYXlzXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYW4gb3ZlcmxheSBieSBpdHMgaWRlbnRpZmllciAodGhlIHZhbHVlIHJldHVybmVkIGJ5IG92ZXJsYXkuZ2V0SWQoKSkuXG4gICAqIE5vdGUgdGhhdCB0aGUgaW5kZXggdHJlYXRzIHN0cmluZyBhbmQgbnVtZXJpYyBpZGVudGlmaWVycyBhcyB0aGUgc2FtZS4gU29cbiAgICogYG1hcC5nZXRPdmVybGF5QnlJZCgyKWAgd2lsbCByZXR1cm4gYW4gb3ZlcmxheSB3aXRoIGlkIGAnMidgIG9yIGAyYC5cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBpZCBPdmVybGF5IGlkZW50aWZpZXIuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBPdmVybGF5LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRPdmVybGF5QnlJZChpZCkge1xuICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLm92ZXJsYXlJZEluZGV4X1tpZC50b1N0cmluZygpXTtcbiAgICByZXR1cm4gb3ZlcmxheSAhPT0gdW5kZWZpbmVkID8gb3ZlcmxheSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXAgaW50ZXJhY3Rpb25zLiBNb2RpZnlpbmcgdGhpcyBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIGludGVyYWN0aW9uc1xuICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICpcbiAgICogSW50ZXJhY3Rpb25zIGFyZSB1c2VkIGZvciBlLmcuIHBhbiwgem9vbSBhbmQgcm90YXRlLlxuICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IEludGVyYWN0aW9ucy5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0SW50ZXJhY3Rpb25zKCkge1xuICAgIHJldHVybiB0aGlzLmludGVyYWN0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxheWVyZ3JvdXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFwLlxuICAgKiBAcmV0dXJuIHtMYXllckdyb3VwfSBBIGxheWVyIGdyb3VwIGNvbnRhaW5pbmcgdGhlIGxheWVycyBpbiB0aGlzIG1hcC5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0TGF5ZXJHcm91cCgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtMYXllckdyb3VwfSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFueSBleGlzdGluZyBsYXllcnMgYW5kIGFkZCBsYXllcnMgdG8gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD58Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD59IGxheWVycyBUaGUgbGF5ZXJzIHRvIGJlIGFkZGVkIHRvIHRoZSBtYXAuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldExheWVycyhsYXllcnMpIHtcbiAgICBjb25zdCBncm91cCA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpO1xuICAgIGlmIChsYXllcnMgaW5zdGFuY2VvZiBDb2xsZWN0aW9uKSB7XG4gICAgICBncm91cC5zZXRMYXllcnMobGF5ZXJzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZ3JvdXAuZ2V0TGF5ZXJzKCk7XG4gICAgY29sbGVjdGlvbi5jbGVhcigpO1xuICAgIGNvbGxlY3Rpb24uZXh0ZW5kKGxheWVycyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjb2xsZWN0aW9uIG9mIGxheWVycyBhc3NvY2lhdGVkIHdpdGggdGhpcyBtYXAuXG4gICAqIEByZXR1cm4geyFDb2xsZWN0aW9uPGltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0Pn0gTGF5ZXJzLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRMYXllcnMoKSB7XG4gICAgY29uc3QgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgcmV0dXJuIGxheWVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllcnMgaGF2ZSBzb3VyY2VzIHRoYXQgYXJlIHN0aWxsIGxvYWRpbmcuXG4gICAqL1xuICBnZXRMb2FkaW5nT3JOb3RSZWFkeSgpIHtcbiAgICBjb25zdCBsYXllclN0YXRlc0FycmF5ID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJTdGF0ZXNBcnJheSgpO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3Qgc3RhdGUgPSBsYXllclN0YXRlc0FycmF5W2ldO1xuICAgICAgaWYgKCFzdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVuZGVyZXIgPSBzdGF0ZS5sYXllci5nZXRSZW5kZXJlcigpO1xuICAgICAgaWYgKHJlbmRlcmVyICYmICFyZW5kZXJlci5yZWFkeSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNvdXJjZSA9IHN0YXRlLmxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgaWYgKHNvdXJjZSAmJiBzb3VyY2UubG9hZGluZykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcGl4ZWwgZm9yIGEgY29vcmRpbmF0ZS4gIFRoaXMgdGFrZXMgYSBjb29yZGluYXRlIGluIHRoZSB1c2VyXG4gICAqIHByb2plY3Rpb24gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcGl4ZWwuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQSBtYXAgY29vcmRpbmF0ZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gQSBwaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRQaXhlbEZyb21Db29yZGluYXRlKGNvb3JkaW5hdGUpIHtcbiAgICBjb25zdCB2aWV3Q29vcmRpbmF0ZSA9IGZyb21Vc2VyQ29vcmRpbmF0ZShcbiAgICAgIGNvb3JkaW5hdGUsXG4gICAgICB0aGlzLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKClcbiAgICApO1xuICAgIHJldHVybiB0aGlzLmdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbCh2aWV3Q29vcmRpbmF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBwaXhlbCBmb3IgYSBjb29yZGluYXRlLiAgVGhpcyB0YWtlcyBhIGNvb3JkaW5hdGUgaW4gdGhlIG1hcCB2aWV3XG4gICAqIHByb2plY3Rpb24gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcGl4ZWwuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQSBtYXAgY29vcmRpbmF0ZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gQSBwaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgKi9cbiAgZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsKGNvb3JkaW5hdGUpIHtcbiAgICBjb25zdCBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oXG4gICAgICBmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLFxuICAgICAgY29vcmRpbmF0ZS5zbGljZSgwLCAyKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXAgcmVuZGVyZXIuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR8bnVsbH0gUmVuZGVyZXJcbiAgICovXG4gIGdldFJlbmRlcmVyKCkge1xuICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNpemUgb2YgdGhpcyBtYXAuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBtYXAgaW4gdGhlIERPTS5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0U2l6ZSgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9ICovIChcbiAgICAgIHRoaXMuZ2V0KE1hcFByb3BlcnR5LlNJWkUpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFwLiBBIHZpZXcgbWFuYWdlcyBwcm9wZXJ0aWVzIHN1Y2ggYXNcbiAgICogY2VudGVyIGFuZCByZXNvbHV0aW9uLlxuICAgKiBAcmV0dXJuIHtWaWV3fSBUaGUgdmlldyB0aGF0IGNvbnRyb2xzIHRoaXMgbWFwLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRWaWV3KCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge1ZpZXd9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5WSUVXKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIHRoZSBtYXAgdmlld3BvcnQuXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBWaWV3cG9ydC5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0Vmlld3BvcnQoKSB7XG4gICAgcmV0dXJuIHRoaXMudmlld3BvcnRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZWxlbWVudCB0aGF0IHNlcnZlcyBhcyB0aGUgY29udGFpbmVyIGZvciBvdmVybGF5cy4gIEVsZW1lbnRzIGFkZGVkIHRvXG4gICAqIHRoaXMgY29udGFpbmVyIHdpbGwgbGV0IG1vdXNlZG93biBhbmQgdG91Y2hzdGFydCBldmVudHMgdGhyb3VnaCB0byB0aGUgbWFwLFxuICAgKiBzbyBjbGlja3MgYW5kIGdlc3R1cmVzIG9uIGFuIG92ZXJsYXkgd2lsbCB0cmlnZ2VyIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH1cbiAgICogZXZlbnRzLlxuICAgKiBAcmV0dXJuIHshSFRNTEVsZW1lbnR9IFRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lci5cbiAgICovXG4gIGdldE92ZXJsYXlDb250YWluZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lcl87XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIGEgY29udGFpbmVyIGZvciBvdmVybGF5cyB0aGF0IGRvbid0IGFsbG93XG4gICAqIGV2ZW50IHByb3BhZ2F0aW9uLiBFbGVtZW50cyBhZGRlZCB0byB0aGlzIGNvbnRhaW5lciB3b24ndCBsZXQgbW91c2Vkb3duIGFuZFxuICAgKiB0b3VjaHN0YXJ0IGV2ZW50cyB0aHJvdWdoIHRvIHRoZSBtYXAsIHNvIGNsaWNrcyBhbmQgZ2VzdHVyZXMgb24gYW4gb3ZlcmxheVxuICAgKiBkb24ndCB0cmlnZ2VyIGFueSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9LlxuICAgKiBAcmV0dXJuIHshSFRNTEVsZW1lbnR9IFRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lciB0aGF0IHN0b3BzIGV2ZW50cy5cbiAgICovXG4gIGdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IURvY3VtZW50fSBUaGUgZG9jdW1lbnQgd2hlcmUgdGhlIG1hcCBpcyBkaXNwbGF5ZWQuXG4gICAqL1xuICBnZXRPd25lckRvY3VtZW50KCkge1xuICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSB0aGlzLmdldFRhcmdldEVsZW1lbnQoKTtcbiAgICByZXR1cm4gdGFyZ2V0RWxlbWVudCA/IHRhcmdldEVsZW1lbnQub3duZXJEb2N1bWVudCA6IGRvY3VtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRpbGVTb3VyY2VLZXkgVGlsZSBzb3VyY2Uga2V5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB0aWxlQ2VudGVyIFRpbGUgY2VudGVyLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGlsZVJlc29sdXRpb24gVGlsZSByZXNvbHV0aW9uLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcHJpb3JpdHkuXG4gICAqL1xuICBnZXRUaWxlUHJpb3JpdHkodGlsZSwgdGlsZVNvdXJjZUtleSwgdGlsZUNlbnRlciwgdGlsZVJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gZ2V0VGlsZVByaW9yaXR5KFxuICAgICAgdGhpcy5mcmFtZVN0YXRlXyxcbiAgICAgIHRpbGUsXG4gICAgICB0aWxlU291cmNlS2V5LFxuICAgICAgdGlsZUNlbnRlcixcbiAgICAgIHRpbGVSZXNvbHV0aW9uXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1VJRXZlbnR9IGJyb3dzZXJFdmVudCBCcm93c2VyIGV2ZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVdIFR5cGUuXG4gICAqL1xuICBoYW5kbGVCcm93c2VyRXZlbnQoYnJvd3NlckV2ZW50LCB0eXBlKSB7XG4gICAgdHlwZSA9IHR5cGUgfHwgYnJvd3NlckV2ZW50LnR5cGU7XG4gICAgY29uc3QgbWFwQnJvd3NlckV2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudCh0eXBlLCB0aGlzLCBicm93c2VyRXZlbnQpO1xuICAgIHRoaXMuaGFuZGxlTWFwQnJvd3NlckV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtNYXBCcm93c2VyRXZlbnR9IG1hcEJyb3dzZXJFdmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlLlxuICAgKi9cbiAgaGFuZGxlTWFwQnJvd3NlckV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgLy8gV2l0aCBubyB2aWV3IGRlZmluZWQsIHdlIGNhbm5vdCB0cmFuc2xhdGUgcGl4ZWxzIGludG8gZ2VvZ3JhcGhpY2FsXG4gICAgICAvLyBjb29yZGluYXRlcyBzbyBpbnRlcmFjdGlvbnMgY2Fubm90IGJlIHVzZWQuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge1BvaW50ZXJFdmVudH0gKi8gKFxuICAgICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnRcbiAgICApO1xuICAgIGNvbnN0IGV2ZW50VHlwZSA9IG9yaWdpbmFsRXZlbnQudHlwZTtcbiAgICBpZiAoXG4gICAgICBldmVudFR5cGUgPT09IFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUkRPV04gfHxcbiAgICAgIGV2ZW50VHlwZSA9PT0gRXZlbnRUeXBlLldIRUVMIHx8XG4gICAgICBldmVudFR5cGUgPT09IEV2ZW50VHlwZS5LRVlET1dOXG4gICAgKSB7XG4gICAgICBjb25zdCBkb2MgPSB0aGlzLmdldE93bmVyRG9jdW1lbnQoKTtcbiAgICAgIGNvbnN0IHJvb3ROb2RlID0gdGhpcy52aWV3cG9ydF8uZ2V0Um9vdE5vZGVcbiAgICAgICAgPyB0aGlzLnZpZXdwb3J0Xy5nZXRSb290Tm9kZSgpXG4gICAgICAgIDogZG9jO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gLyoqIEB0eXBlIHtOb2RlfSAqLyAob3JpZ2luYWxFdmVudC50YXJnZXQpO1xuICAgICAgaWYgKFxuICAgICAgICAvLyBBYm9ydCBpZiB0aGUgdGFyZ2V0IGlzIGEgY2hpbGQgb2YgdGhlIGNvbnRhaW5lciBmb3IgZWxlbWVudHMgd2hvc2UgZXZlbnRzIGFyZSBub3QgbWVhbnRcbiAgICAgICAgLy8gdG8gYmUgaGFuZGxlZCBieSBtYXAgaW50ZXJhY3Rpb25zLlxuICAgICAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLmNvbnRhaW5zKHRhcmdldCkgfHxcbiAgICAgICAgLy8gQWJvcnQgaWYgdGhlIGV2ZW50IHRhcmdldCBpcyBhIGNoaWxkIG9mIHRoZSBjb250YWluZXIgdGhhdCBpcyBubyBsb25nZXIgaW4gdGhlIHBhZ2UuXG4gICAgICAgIC8vIEl0J3MgcG9zc2libGUgZm9yIHRoZSB0YXJnZXQgdG8gbm8gbG9uZ2VyIGJlIGluIHRoZSBwYWdlIGlmIGl0IGhhcyBiZWVuIHJlbW92ZWQgaW4gYW5cbiAgICAgICAgLy8gZXZlbnQgbGlzdGVuZXIsIHRoaXMgbWlnaHQgaGFwcGVuIGluIGEgQ29udHJvbCB0aGF0IHJlY3JlYXRlcyBpdCdzIGNvbnRlbnQgYmFzZWQgb25cbiAgICAgICAgLy8gdXNlciBpbnRlcmFjdGlvbiBlaXRoZXIgbWFudWFsbHkgb3IgdmlhIGEgcmVuZGVyIGluIHNvbWV0aGluZyBsaWtlIGh0dHBzOi8vcmVhY3Rqcy5vcmcvXG4gICAgICAgICEocm9vdE5vZGUgPT09IGRvYyA/IGRvYy5kb2N1bWVudEVsZW1lbnQgOiByb290Tm9kZSkuY29udGFpbnModGFyZ2V0KVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgbWFwQnJvd3NlckV2ZW50LmZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgIGlmICh0aGlzLmRpc3BhdGNoRXZlbnQobWFwQnJvd3NlckV2ZW50KSAhPT0gZmFsc2UpIHtcbiAgICAgIGNvbnN0IGludGVyYWN0aW9uc0FycmF5ID0gdGhpcy5nZXRJbnRlcmFjdGlvbnMoKS5nZXRBcnJheSgpLnNsaWNlKCk7XG4gICAgICBmb3IgKGxldCBpID0gaW50ZXJhY3Rpb25zQXJyYXkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgY29uc3QgaW50ZXJhY3Rpb24gPSBpbnRlcmFjdGlvbnNBcnJheVtpXTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGludGVyYWN0aW9uLmdldE1hcCgpICE9PSB0aGlzIHx8XG4gICAgICAgICAgIWludGVyYWN0aW9uLmdldEFjdGl2ZSgpIHx8XG4gICAgICAgICAgIXRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnQgPSBpbnRlcmFjdGlvbi5oYW5kbGVFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICBpZiAoIWNvbnQgfHwgbWFwQnJvd3NlckV2ZW50LnByb3BhZ2F0aW9uU3RvcHBlZCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGhhbmRsZVBvc3RSZW5kZXIoKSB7XG4gICAgY29uc3QgZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG5cbiAgICAvLyBNYW5hZ2UgdGhlIHRpbGUgcXVldWVcbiAgICAvLyBJbWFnZSBsb2FkcyBhcmUgZXhwZW5zaXZlIGFuZCBhIGxpbWl0ZWQgcmVzb3VyY2UsIHNvIHRyeSB0byB1c2UgdGhlbVxuICAgIC8vIGVmZmljaWVudGx5OlxuICAgIC8vICogV2hlbiB0aGUgdmlldyBpcyBzdGF0aWMgd2UgYWxsb3cgYSBsYXJnZSBudW1iZXIgb2YgcGFyYWxsZWwgdGlsZSBsb2Fkc1xuICAgIC8vICAgdG8gY29tcGxldGUgdGhlIGZyYW1lIGFzIHF1aWNrbHkgYXMgcG9zc2libGUuXG4gICAgLy8gKiBXaGVuIGFuaW1hdGluZyBvciBpbnRlcmFjdGluZywgaW1hZ2UgbG9hZHMgY2FuIGNhdXNlIGphbmtzLCBzbyB3ZSByZWR1Y2VcbiAgICAvLyAgIHRoZSBtYXhpbXVtIG51bWJlciBvZiBsb2FkcyBwZXIgZnJhbWUgYW5kIGxpbWl0IHRoZSBudW1iZXIgb2YgcGFyYWxsZWxcbiAgICAvLyAgIHRpbGUgbG9hZHMgdG8gcmVtYWluIHJlYWN0aXZlIHRvIHZpZXcgY2hhbmdlcyBhbmQgdG8gcmVkdWNlIHRoZSBjaGFuY2Ugb2ZcbiAgICAvLyAgIGxvYWRpbmcgdGlsZXMgdGhhdCB3aWxsIHF1aWNrbHkgZGlzYXBwZWFyIGZyb20gdmlldy5cbiAgICBjb25zdCB0aWxlUXVldWUgPSB0aGlzLnRpbGVRdWV1ZV87XG4gICAgaWYgKCF0aWxlUXVldWUuaXNFbXB0eSgpKSB7XG4gICAgICBsZXQgbWF4VG90YWxMb2FkaW5nID0gdGhpcy5tYXhUaWxlc0xvYWRpbmdfO1xuICAgICAgbGV0IG1heE5ld0xvYWRzID0gbWF4VG90YWxMb2FkaW5nO1xuICAgICAgaWYgKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgY29uc3QgaGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcbiAgICAgICAgaWYgKGhpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gfHwgaGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddKSB7XG4gICAgICAgICAgY29uc3QgbG93T25GcmFtZUJ1ZGdldCA9IERhdGUubm93KCkgLSBmcmFtZVN0YXRlLnRpbWUgPiA4O1xuICAgICAgICAgIG1heFRvdGFsTG9hZGluZyA9IGxvd09uRnJhbWVCdWRnZXQgPyAwIDogODtcbiAgICAgICAgICBtYXhOZXdMb2FkcyA9IGxvd09uRnJhbWVCdWRnZXQgPyAwIDogMjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRpbGVRdWV1ZS5nZXRUaWxlc0xvYWRpbmcoKSA8IG1heFRvdGFsTG9hZGluZykge1xuICAgICAgICB0aWxlUXVldWUucmVwcmlvcml0aXplKCk7IC8vIEZJWE1FIG9ubHkgY2FsbCBpZiB2aWV3IGhhcyBjaGFuZ2VkXG4gICAgICAgIHRpbGVRdWV1ZS5sb2FkTW9yZVRpbGVzKG1heFRvdGFsTG9hZGluZywgbWF4TmV3TG9hZHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChmcmFtZVN0YXRlICYmIHRoaXMucmVuZGVyZXJfICYmICFmcmFtZVN0YXRlLmFuaW1hdGUpIHtcbiAgICAgIGlmICh0aGlzLnJlbmRlckNvbXBsZXRlXyA9PT0gdHJ1ZSkge1xuICAgICAgICBpZiAodGhpcy5oYXNMaXN0ZW5lcihSZW5kZXJFdmVudFR5cGUuUkVOREVSQ09NUExFVEUpKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJlcl8uZGlzcGF0Y2hSZW5kZXJFdmVudChcbiAgICAgICAgICAgIFJlbmRlckV2ZW50VHlwZS5SRU5ERVJDT01QTEVURSxcbiAgICAgICAgICAgIGZyYW1lU3RhdGVcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxvYWRlZF8gPT09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy5sb2FkZWRfID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICBuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLkxPQURFTkQsIHRoaXMsIGZyYW1lU3RhdGUpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmxvYWRlZF8gPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5sb2FkZWRfID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICBuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLkxPQURTVEFSVCwgdGhpcywgZnJhbWVTdGF0ZSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwb3N0UmVuZGVyRnVuY3Rpb25zID0gdGhpcy5wb3N0UmVuZGVyRnVuY3Rpb25zXztcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBwb3N0UmVuZGVyRnVuY3Rpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHBvc3RSZW5kZXJGdW5jdGlvbnNbaV0odGhpcywgZnJhbWVTdGF0ZSk7XG4gICAgfVxuICAgIHBvc3RSZW5kZXJGdW5jdGlvbnMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlU2l6ZUNoYW5nZWRfKCkge1xuICAgIGlmICh0aGlzLmdldFZpZXcoKSAmJiAhdGhpcy5nZXRWaWV3KCkuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgIHRoaXMuZ2V0VmlldygpLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVUYXJnZXRDaGFuZ2VkXygpIHtcbiAgICBpZiAodGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXykge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdGhpcy50YXJnZXRDaGFuZ2VIYW5kbGVyS2V5c18ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMudGFyZ2V0Q2hhbmdlSGFuZGxlcktleXNfW2ldKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudGFyZ2V0Q2hhbmdlSGFuZGxlcktleXNfID0gbnVsbDtcbiAgICAgIHRoaXMudmlld3BvcnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgIEV2ZW50VHlwZS5DT05URVhUTUVOVSxcbiAgICAgICAgdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF9cbiAgICAgICk7XG4gICAgICB0aGlzLnZpZXdwb3J0Xy5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICBFdmVudFR5cGUuV0hFRUwsXG4gICAgICAgIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfXG4gICAgICApO1xuICAgICAgdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXy5kaXNwb3NlKCk7XG4gICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcbiAgICAgIHJlbW92ZU5vZGUodGhpcy52aWV3cG9ydF8pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRhcmdldEVsZW1lbnRfKSB7XG4gICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyXy51bm9ic2VydmUodGhpcy50YXJnZXRFbGVtZW50Xyk7XG4gICAgICBjb25zdCByb290Tm9kZSA9IHRoaXMudGFyZ2V0RWxlbWVudF8uZ2V0Um9vdE5vZGUoKTtcbiAgICAgIGlmIChyb290Tm9kZSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QpIHtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlcl8udW5vYnNlcnZlKHJvb3ROb2RlLmhvc3QpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHRhcmdldCBtYXkgYmUgdW5kZWZpbmVkLCBudWxsLCBhIHN0cmluZyBvciBhbiBFbGVtZW50LlxuICAgIC8vIElmIGl0J3MgYSBzdHJpbmcgd2UgY29udmVydCBpdCB0byBhbiBFbGVtZW50IGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgIC8vIElmIGl0J3Mgbm90IG5vdyBhbiBFbGVtZW50IHdlIHJlbW92ZSB0aGUgdmlld3BvcnQgZnJvbSB0aGUgRE9NLlxuICAgIC8vIElmIGl0J3MgYW4gRWxlbWVudCB3ZSBhcHBlbmQgdGhlIHZpZXdwb3J0IGVsZW1lbnQgdG8gaXQuXG5cbiAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmdldFRhcmdldCgpO1xuICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPVxuICAgICAgdHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQpIDogdGFyZ2V0O1xuICAgIHRoaXMudGFyZ2V0RWxlbWVudF8gPSB0YXJnZXRFbGVtZW50O1xuICAgIGlmICghdGFyZ2V0RWxlbWVudCkge1xuICAgICAgaWYgKHRoaXMucmVuZGVyZXJfKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyk7XG4gICAgICAgIHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMucmVuZGVyZXJfLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKSB7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25EZWxheUtleV8gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWV3cG9ydF8pO1xuICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyXykge1xuICAgICAgICB0aGlzLnJlbmRlcmVyXyA9IG5ldyBDb21wb3NpdGVNYXBSZW5kZXJlcih0aGlzKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXyA9IG5ldyBNYXBCcm93c2VyRXZlbnRIYW5kbGVyKFxuICAgICAgICB0aGlzLFxuICAgICAgICB0aGlzLm1vdmVUb2xlcmFuY2VfXG4gICAgICApO1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gTWFwQnJvd3NlckV2ZW50VHlwZSkge1xuICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZVtrZXldLFxuICAgICAgICAgIHRoaXMuaGFuZGxlTWFwQnJvd3NlckV2ZW50LmJpbmQodGhpcylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudmlld3BvcnRfLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIEV2ZW50VHlwZS5DT05URVhUTUVOVSxcbiAgICAgICAgdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8sXG4gICAgICAgIGZhbHNlXG4gICAgICApO1xuICAgICAgdGhpcy52aWV3cG9ydF8uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgRXZlbnRUeXBlLldIRUVMLFxuICAgICAgICB0aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50XyxcbiAgICAgICAgUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMgPyB7cGFzc2l2ZTogZmFsc2V9IDogZmFsc2VcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGtleWJvYXJkRXZlbnRUYXJnZXQgPSAhdGhpcy5rZXlib2FyZEV2ZW50VGFyZ2V0X1xuICAgICAgICA/IHRhcmdldEVsZW1lbnRcbiAgICAgICAgOiB0aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfO1xuICAgICAgdGhpcy50YXJnZXRDaGFuZ2VIYW5kbGVyS2V5c18gPSBbXG4gICAgICAgIGxpc3RlbihcbiAgICAgICAgICBrZXlib2FyZEV2ZW50VGFyZ2V0LFxuICAgICAgICAgIEV2ZW50VHlwZS5LRVlET1dOLFxuICAgICAgICAgIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LFxuICAgICAgICAgIHRoaXNcbiAgICAgICAgKSxcbiAgICAgICAgbGlzdGVuKFxuICAgICAgICAgIGtleWJvYXJkRXZlbnRUYXJnZXQsXG4gICAgICAgICAgRXZlbnRUeXBlLktFWVBSRVNTLFxuICAgICAgICAgIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LFxuICAgICAgICAgIHRoaXNcbiAgICAgICAgKSxcbiAgICAgIF07XG4gICAgICBjb25zdCByb290Tm9kZSA9IHRhcmdldEVsZW1lbnQuZ2V0Um9vdE5vZGUoKTtcbiAgICAgIGlmIChyb290Tm9kZSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QpIHtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlcl8ub2JzZXJ2ZShyb290Tm9kZS5ob3N0KTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXJfLm9ic2VydmUodGFyZ2V0RWxlbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVTaXplKCk7XG4gICAgLy8gdXBkYXRlU2l6ZSBjYWxscyBzZXRTaXplLCBzbyBubyBuZWVkIHRvIGNhbGwgdGhpcy5yZW5kZXJcbiAgICAvLyBvdXJzZWx2ZXMgaGVyZS5cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlVGlsZUNoYW5nZV8oKSB7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8oKSB7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlVmlld0NoYW5nZWRfKCkge1xuICAgIGlmICh0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5Xykge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5Xyk7XG4gICAgICB0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8pIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfKTtcbiAgICAgIHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmdldFZpZXcoKTtcbiAgICBpZiAodmlldykge1xuICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydFNpemVfKCk7XG5cbiAgICAgIHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbGlzdGVuKFxuICAgICAgICB2aWV3LFxuICAgICAgICBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsXG4gICAgICAgIHRoaXMuaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8sXG4gICAgICAgIHRoaXNcbiAgICAgICk7XG4gICAgICB0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8gPSBsaXN0ZW4oXG4gICAgICAgIHZpZXcsXG4gICAgICAgIEV2ZW50VHlwZS5DSEFOR0UsXG4gICAgICAgIHRoaXMuaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8sXG4gICAgICAgIHRoaXNcbiAgICAgICk7XG5cbiAgICAgIHZpZXcucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVMYXllckdyb3VwQ2hhbmdlZF8oKSB7XG4gICAgaWYgKHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXykge1xuICAgICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICB0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18gPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCBsYXllckdyb3VwID0gdGhpcy5nZXRMYXllckdyb3VwKCk7XG4gICAgaWYgKGxheWVyR3JvdXApIHtcbiAgICAgIHRoaXMuaGFuZGxlTGF5ZXJBZGRfKG5ldyBHcm91cEV2ZW50KCdhZGRsYXllcicsIGxheWVyR3JvdXApKTtcbiAgICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyA9IFtcbiAgICAgICAgbGlzdGVuKGxheWVyR3JvdXAsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5yZW5kZXIsIHRoaXMpLFxuICAgICAgICBsaXN0ZW4obGF5ZXJHcm91cCwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5yZW5kZXIsIHRoaXMpLFxuICAgICAgICBsaXN0ZW4obGF5ZXJHcm91cCwgJ2FkZGxheWVyJywgdGhpcy5oYW5kbGVMYXllckFkZF8sIHRoaXMpLFxuICAgICAgICBsaXN0ZW4obGF5ZXJHcm91cCwgJ3JlbW92ZWxheWVyJywgdGhpcy5oYW5kbGVMYXllclJlbW92ZV8sIHRoaXMpLFxuICAgICAgXTtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyByZW5kZXJlZC5cbiAgICovXG4gIGlzUmVuZGVyZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5mcmFtZVN0YXRlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYW5pbWF0aW9uRGVsYXlfKCkge1xuICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmVuZGVyRnJhbWVfKERhdGUubm93KCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3RzIGFuIGltbWVkaWF0ZSByZW5kZXIgaW4gYSBzeW5jaHJvbm91cyBtYW5uZXIuXG4gICAqIEBhcGlcbiAgICovXG4gIHJlbmRlclN5bmMoKSB7XG4gICAgaWYgKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkRlbGF5S2V5Xyk7XG4gICAgfVxuICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlfKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVkcmF3cyBhbGwgdGV4dCBhZnRlciBuZXcgZm9udHMgaGF2ZSBsb2FkZWRcbiAgICovXG4gIHJlZHJhd1RleHQoKSB7XG4gICAgY29uc3QgbGF5ZXJTdGF0ZXMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllclN0YXRlc0FycmF5KCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3QgbGF5ZXIgPSBsYXllclN0YXRlc1tpXS5sYXllcjtcbiAgICAgIGlmIChsYXllci5oYXNSZW5kZXJlcigpKSB7XG4gICAgICAgIGxheWVyLmdldFJlbmRlcmVyKCkuaGFuZGxlRm9udHNDaGFuZ2VkKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgYSBtYXAgcmVuZGVyaW5nIChhdCB0aGUgbmV4dCBhbmltYXRpb24gZnJhbWUpLlxuICAgKiBAYXBpXG4gICAqL1xuICByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMucmVuZGVyZXJfICYmIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlfKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBnaXZlbiBjb250cm9sIGZyb20gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fSBjb250cm9sIENvbnRyb2wuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBjb250cm9sIChvciB1bmRlZmluZWRcbiAgICogICAgIGlmIHRoZSBjb250cm9sIHdhcyBub3QgZm91bmQpLlxuICAgKiBAYXBpXG4gICAqL1xuICByZW1vdmVDb250cm9sKGNvbnRyb2wpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDb250cm9scygpLnJlbW92ZShjb250cm9sKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGdpdmVuIGludGVyYWN0aW9uIGZyb20gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR9IGludGVyYWN0aW9uIEludGVyYWN0aW9uIHRvIHJlbW92ZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgaW50ZXJhY3Rpb24gKG9yXG4gICAqICAgICB1bmRlZmluZWQgaWYgdGhlIGludGVyYWN0aW9uIHdhcyBub3QgZm91bmQpLlxuICAgKiBAYXBpXG4gICAqL1xuICByZW1vdmVJbnRlcmFjdGlvbihpbnRlcmFjdGlvbikge1xuICAgIHJldHVybiB0aGlzLmdldEludGVyYWN0aW9ucygpLnJlbW92ZShpbnRlcmFjdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgZ2l2ZW4gbGF5ZXIgZnJvbSB0aGUgbWFwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBsYXllciAob3IgdW5kZWZpbmVkIGlmIHRoZVxuICAgKiAgICAgbGF5ZXIgd2FzIG5vdCBmb3VuZCkuXG4gICAqIEBhcGlcbiAgICovXG4gIHJlbW92ZUxheWVyKGxheWVyKSB7XG4gICAgY29uc3QgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgcmV0dXJuIGxheWVycy5yZW1vdmUobGF5ZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9sYXllci9Hcm91cC5qc1wiKS5Hcm91cEV2ZW50fSBldmVudCBUaGUgbGF5ZXIgcmVtb3ZlIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlTGF5ZXJSZW1vdmVfKGV2ZW50KSB7XG4gICAgcmVtb3ZlTGF5ZXJNYXBQcm9wZXJ0eShldmVudC5sYXllcik7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBnaXZlbiBvdmVybGF5IGZyb20gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIG92ZXJsYXkgKG9yIHVuZGVmaW5lZFxuICAgKiAgICAgaWYgdGhlIG92ZXJsYXkgd2FzIG5vdCBmb3VuZCkuXG4gICAqIEBhcGlcbiAgICovXG4gIHJlbW92ZU92ZXJsYXkob3ZlcmxheSkge1xuICAgIHJldHVybiB0aGlzLmdldE92ZXJsYXlzKCkucmVtb3ZlKG92ZXJsYXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIFRpbWUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZW5kZXJGcmFtZV8odGltZSkge1xuICAgIGNvbnN0IHNpemUgPSB0aGlzLmdldFNpemUoKTtcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XG4gICAgY29uc3QgcHJldmlvdXNGcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAvKiogQHR5cGUgez9GcmFtZVN0YXRlfSAqL1xuICAgIGxldCBmcmFtZVN0YXRlID0gbnVsbDtcbiAgICBpZiAoc2l6ZSAhPT0gdW5kZWZpbmVkICYmIGhhc0FyZWEoc2l6ZSkgJiYgdmlldyAmJiB2aWV3LmlzRGVmKCkpIHtcbiAgICAgIGNvbnN0IHZpZXdIaW50cyA9IHZpZXcuZ2V0SGludHMoXG4gICAgICAgIHRoaXMuZnJhbWVTdGF0ZV8gPyB0aGlzLmZyYW1lU3RhdGVfLnZpZXdIaW50cyA6IHVuZGVmaW5lZFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHZpZXdTdGF0ZSA9IHZpZXcuZ2V0U3RhdGUoKTtcbiAgICAgIGZyYW1lU3RhdGUgPSB7XG4gICAgICAgIGFuaW1hdGU6IGZhbHNlLFxuICAgICAgICBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybTogdGhpcy5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybV8sXG4gICAgICAgIGRlY2x1dHRlclRyZWU6IG51bGwsXG4gICAgICAgIGV4dGVudDogZ2V0Rm9yVmlld0FuZFNpemUoXG4gICAgICAgICAgdmlld1N0YXRlLmNlbnRlcixcbiAgICAgICAgICB2aWV3U3RhdGUucmVzb2x1dGlvbixcbiAgICAgICAgICB2aWV3U3RhdGUucm90YXRpb24sXG4gICAgICAgICAgc2l6ZVxuICAgICAgICApLFxuICAgICAgICBpbmRleDogdGhpcy5mcmFtZUluZGV4XysrLFxuICAgICAgICBsYXllckluZGV4OiAwLFxuICAgICAgICBsYXllclN0YXRlc0FycmF5OiB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllclN0YXRlc0FycmF5KCksXG4gICAgICAgIHBpeGVsUmF0aW86IHRoaXMucGl4ZWxSYXRpb18sXG4gICAgICAgIHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtOiB0aGlzLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXyxcbiAgICAgICAgcG9zdFJlbmRlckZ1bmN0aW9uczogW10sXG4gICAgICAgIHNpemU6IHNpemUsXG4gICAgICAgIHRpbGVRdWV1ZTogdGhpcy50aWxlUXVldWVfLFxuICAgICAgICB0aW1lOiB0aW1lLFxuICAgICAgICB1c2VkVGlsZXM6IHt9LFxuICAgICAgICB2aWV3U3RhdGU6IHZpZXdTdGF0ZSxcbiAgICAgICAgdmlld0hpbnRzOiB2aWV3SGludHMsXG4gICAgICAgIHdhbnRlZFRpbGVzOiB7fSxcbiAgICAgICAgbWFwSWQ6IGdldFVpZCh0aGlzKSxcbiAgICAgICAgcmVuZGVyVGFyZ2V0czoge30sXG4gICAgICB9O1xuICAgICAgaWYgKHZpZXdTdGF0ZS5uZXh0Q2VudGVyICYmIHZpZXdTdGF0ZS5uZXh0UmVzb2x1dGlvbikge1xuICAgICAgICBjb25zdCByb3RhdGlvbiA9IGlzTmFOKHZpZXdTdGF0ZS5uZXh0Um90YXRpb24pXG4gICAgICAgICAgPyB2aWV3U3RhdGUucm90YXRpb25cbiAgICAgICAgICA6IHZpZXdTdGF0ZS5uZXh0Um90YXRpb247XG5cbiAgICAgICAgZnJhbWVTdGF0ZS5uZXh0RXh0ZW50ID0gZ2V0Rm9yVmlld0FuZFNpemUoXG4gICAgICAgICAgdmlld1N0YXRlLm5leHRDZW50ZXIsXG4gICAgICAgICAgdmlld1N0YXRlLm5leHRSZXNvbHV0aW9uLFxuICAgICAgICAgIHJvdGF0aW9uLFxuICAgICAgICAgIHNpemVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmZyYW1lU3RhdGVfID0gZnJhbWVTdGF0ZTtcbiAgICB0aGlzLnJlbmRlcmVyXy5yZW5kZXJGcmFtZShmcmFtZVN0YXRlKTtcblxuICAgIGlmIChmcmFtZVN0YXRlKSB7XG4gICAgICBpZiAoZnJhbWVTdGF0ZS5hbmltYXRlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9XG4gICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShcbiAgICAgICAgdGhpcy5wb3N0UmVuZGVyRnVuY3Rpb25zXyxcbiAgICAgICAgZnJhbWVTdGF0ZS5wb3N0UmVuZGVyRnVuY3Rpb25zXG4gICAgICApO1xuXG4gICAgICBpZiAocHJldmlvdXNGcmFtZVN0YXRlKSB7XG4gICAgICAgIGNvbnN0IG1vdmVTdGFydCA9XG4gICAgICAgICAgIXRoaXMucHJldmlvdXNFeHRlbnRfIHx8XG4gICAgICAgICAgKCFpc0VtcHR5KHRoaXMucHJldmlvdXNFeHRlbnRfKSAmJlxuICAgICAgICAgICAgIWVxdWFsc0V4dGVudChmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pKTtcbiAgICAgICAgaWYgKG1vdmVTdGFydCkge1xuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgIG5ldyBNYXBFdmVudChNYXBFdmVudFR5cGUuTU9WRVNUQVJULCB0aGlzLCBwcmV2aW91c0ZyYW1lU3RhdGUpXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLnByZXZpb3VzRXh0ZW50XyA9IGNyZWF0ZU9yVXBkYXRlRW1wdHkodGhpcy5wcmV2aW91c0V4dGVudF8pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlkbGUgPVxuICAgICAgICB0aGlzLnByZXZpb3VzRXh0ZW50XyAmJlxuICAgICAgICAhZnJhbWVTdGF0ZS52aWV3SGludHNbVmlld0hpbnQuQU5JTUFUSU5HXSAmJlxuICAgICAgICAhZnJhbWVTdGF0ZS52aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddICYmXG4gICAgICAgICFlcXVhbHNFeHRlbnQoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKTtcblxuICAgICAgaWYgKGlkbGUpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgIG5ldyBNYXBFdmVudChNYXBFdmVudFR5cGUuTU9WRUVORCwgdGhpcywgZnJhbWVTdGF0ZSlcbiAgICAgICAgKTtcbiAgICAgICAgY2xvbmUoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5QT1NUUkVOREVSLCB0aGlzLCBmcmFtZVN0YXRlKSk7XG5cbiAgICB0aGlzLnJlbmRlckNvbXBsZXRlXyA9XG4gICAgICB0aGlzLmhhc0xpc3RlbmVyKE1hcEV2ZW50VHlwZS5MT0FEU1RBUlQpIHx8XG4gICAgICB0aGlzLmhhc0xpc3RlbmVyKE1hcEV2ZW50VHlwZS5MT0FERU5EKSB8fFxuICAgICAgdGhpcy5oYXNMaXN0ZW5lcihSZW5kZXJFdmVudFR5cGUuUkVOREVSQ09NUExFVEUpXG4gICAgICAgID8gIXRoaXMudGlsZVF1ZXVlXy5nZXRUaWxlc0xvYWRpbmcoKSAmJlxuICAgICAgICAgICF0aGlzLnRpbGVRdWV1ZV8uZ2V0Q291bnQoKSAmJlxuICAgICAgICAgICF0aGlzLmdldExvYWRpbmdPck5vdFJlYWR5KClcbiAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIXRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfKSB7XG4gICAgICB0aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5oYW5kbGVQb3N0UmVuZGVyKCk7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbGF5ZXJncm91cCBvZiB0aGlzIG1hcC5cbiAgICogQHBhcmFtIHtMYXllckdyb3VwfSBsYXllckdyb3VwIEEgbGF5ZXIgZ3JvdXAgY29udGFpbmluZyB0aGUgbGF5ZXJzIGluIHRoaXMgbWFwLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRMYXllckdyb3VwKGxheWVyR3JvdXApIHtcbiAgICBjb25zdCBvbGRMYXllckdyb3VwID0gdGhpcy5nZXRMYXllckdyb3VwKCk7XG4gICAgaWYgKG9sZExheWVyR3JvdXApIHtcbiAgICAgIHRoaXMuaGFuZGxlTGF5ZXJSZW1vdmVfKG5ldyBHcm91cEV2ZW50KCdyZW1vdmVsYXllcicsIG9sZExheWVyR3JvdXApKTtcbiAgICB9XG4gICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCwgbGF5ZXJHcm91cCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBzaXplIG9mIHRoaXMgbWFwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gc2l6ZSBUaGUgc2l6ZSBpbiBwaXhlbHMgb2YgdGhlIG1hcCBpbiB0aGUgRE9NLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRTaXplKHNpemUpIHtcbiAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5TSVpFLCBzaXplKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHRhcmdldCBlbGVtZW50IHRvIHJlbmRlciB0aGlzIG1hcCBpbnRvLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gVGhlIEVsZW1lbnQgb3IgaWQgb2YgdGhlIEVsZW1lbnRcbiAgICogICAgIHRoYXQgdGhlIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgc2V0VGFyZ2V0KHRhcmdldCkge1xuICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlRBUkdFVCwgdGFyZ2V0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZpZXcgZm9yIHRoaXMgbWFwLlxuICAgKiBAcGFyYW0ge1ZpZXd8UHJvbWlzZTxpbXBvcnQoXCIuL1ZpZXcuanNcIikuVmlld09wdGlvbnM+fSB2aWV3IFRoZSB2aWV3IHRoYXQgY29udHJvbHMgdGhpcyBtYXAuXG4gICAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gcGFzcyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBvcHRpb25zIGZvciBjb25zdHJ1Y3RpbmcgYSB2aWV3LiAgVGhpc1xuICAgKiBhbHRlcm5hdGl2ZSBhbGxvd3MgdmlldyBwcm9wZXJ0aWVzIHRvIGJlIHJlc29sdmVkIGJ5IHNvdXJjZXMgb3Igb3RoZXIgY29tcG9uZW50cyB0aGF0IGxvYWRcbiAgICogdmlldy1yZWxhdGVkIG1ldGFkYXRhLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRWaWV3KHZpZXcpIHtcbiAgICBpZiAoIXZpZXcgfHwgdmlldyBpbnN0YW5jZW9mIFZpZXcpIHtcbiAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlZJRVcsIHZpZXcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5WSUVXLCBuZXcgVmlldygpKTtcblxuICAgIGNvbnN0IG1hcCA9IHRoaXM7XG4gICAgdmlldy50aGVuKGZ1bmN0aW9uICh2aWV3T3B0aW9ucykge1xuICAgICAgbWFwLnNldFZpZXcobmV3IFZpZXcodmlld09wdGlvbnMpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JjZSBhIHJlY2FsY3VsYXRpb24gb2YgdGhlIG1hcCB2aWV3cG9ydCBzaXplLiAgVGhpcyBzaG91bGQgYmUgY2FsbGVkIHdoZW5cbiAgICogdGhpcmQtcGFydHkgY29kZSBjaGFuZ2VzIHRoZSBzaXplIG9mIHRoZSBtYXAgdmlld3BvcnQuXG4gICAqIEBhcGlcbiAgICovXG4gIHVwZGF0ZVNpemUoKSB7XG4gICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IHRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpO1xuXG4gICAgbGV0IHNpemUgPSB1bmRlZmluZWQ7XG4gICAgaWYgKHRhcmdldEVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldEVsZW1lbnQpO1xuICAgICAgY29uc3Qgd2lkdGggPVxuICAgICAgICB0YXJnZXRFbGVtZW50Lm9mZnNldFdpZHRoIC1cbiAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJMZWZ0V2lkdGgnXSkgLVxuICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdMZWZ0J10pIC1cbiAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nUmlnaHQnXSkgLVxuICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlclJpZ2h0V2lkdGgnXSk7XG4gICAgICBjb25zdCBoZWlnaHQgPVxuICAgICAgICB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCAtXG4gICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyVG9wV2lkdGgnXSkgLVxuICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdUb3AnXSkgLVxuICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdCb3R0b20nXSkgLVxuICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlckJvdHRvbVdpZHRoJ10pO1xuICAgICAgaWYgKCFpc05hTih3aWR0aCkgJiYgIWlzTmFOKGhlaWdodCkpIHtcbiAgICAgICAgc2l6ZSA9IFt3aWR0aCwgaGVpZ2h0XTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFoYXNBcmVhKHNpemUpICYmXG4gICAgICAgICAgISEoXG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50Lm9mZnNldFdpZHRoIHx8XG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCB8fFxuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aFxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgd2FybihcbiAgICAgICAgICAgIFwiTm8gbWFwIHZpc2libGUgYmVjYXVzZSB0aGUgbWFwIGNvbnRhaW5lcidzIHdpZHRoIG9yIGhlaWdodCBhcmUgMC5cIlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBvbGRTaXplID0gdGhpcy5nZXRTaXplKCk7XG4gICAgaWYgKHNpemUgJiYgKCFvbGRTaXplIHx8ICFlcXVhbHMoc2l6ZSwgb2xkU2l6ZSkpKSB7XG4gICAgICB0aGlzLnNldFNpemUoc2l6ZSk7XG4gICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0U2l6ZV8oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVjb21wdXRlcyB0aGUgdmlld3BvcnQgc2l6ZSBhbmQgc2F2ZSBpdCBvbiB0aGUgdmlldyBvYmplY3QgKGlmIGFueSlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVwZGF0ZVZpZXdwb3J0U2l6ZV8oKSB7XG4gICAgY29uc3QgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xuICAgIGlmICh2aWV3KSB7XG4gICAgICBsZXQgc2l6ZSA9IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMudmlld3BvcnRfKTtcbiAgICAgIGlmIChjb21wdXRlZFN0eWxlLndpZHRoICYmIGNvbXB1dGVkU3R5bGUuaGVpZ2h0KSB7XG4gICAgICAgIHNpemUgPSBbXG4gICAgICAgICAgcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS53aWR0aCwgMTApLFxuICAgICAgICAgIHBhcnNlSW50KGNvbXB1dGVkU3R5bGUuaGVpZ2h0LCAxMCksXG4gICAgICAgIF07XG4gICAgICB9XG4gICAgICB2aWV3LnNldFZpZXdwb3J0U2l6ZShzaXplKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge01hcE9wdGlvbnN9IG9wdGlvbnMgTWFwIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtNYXBPcHRpb25zSW50ZXJuYWx9IEludGVybmFsIG1hcCBvcHRpb25zLlxuICovXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zSW50ZXJuYWwob3B0aW9ucykge1xuICAvKipcbiAgICogQHR5cGUge0hUTUxFbGVtZW50fERvY3VtZW50fVxuICAgKi9cbiAgbGV0IGtleWJvYXJkRXZlbnRUYXJnZXQgPSBudWxsO1xuICBpZiAob3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBrZXlib2FyZEV2ZW50VGFyZ2V0ID1cbiAgICAgIHR5cGVvZiBvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQgPT09ICdzdHJpbmcnXG4gICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0KVxuICAgICAgICA6IG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAqL1xuICBjb25zdCB2YWx1ZXMgPSB7fTtcblxuICBjb25zdCBsYXllckdyb3VwID1cbiAgICBvcHRpb25zLmxheWVycyAmJlxuICAgIHR5cGVvZiAoLyoqIEB0eXBlIHs/fSAqLyAob3B0aW9ucy5sYXllcnMpLmdldExheWVycykgPT09ICdmdW5jdGlvbidcbiAgICAgID8gLyoqIEB0eXBlIHtMYXllckdyb3VwfSAqLyAob3B0aW9ucy5sYXllcnMpXG4gICAgICA6IG5ldyBMYXllckdyb3VwKHtcbiAgICAgICAgICBsYXllcnM6XG4gICAgICAgICAgICAvKiogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fEFycmF5PGltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0Pn0gKi8gKFxuICAgICAgICAgICAgICBvcHRpb25zLmxheWVyc1xuICAgICAgICAgICAgKSxcbiAgICAgICAgfSk7XG4gIHZhbHVlc1tNYXBQcm9wZXJ0eS5MQVlFUkdST1VQXSA9IGxheWVyR3JvdXA7XG5cbiAgdmFsdWVzW01hcFByb3BlcnR5LlRBUkdFVF0gPSBvcHRpb25zLnRhcmdldDtcblxuICB2YWx1ZXNbTWFwUHJvcGVydHkuVklFV10gPVxuICAgIG9wdGlvbnMudmlldyBpbnN0YW5jZW9mIFZpZXcgPyBvcHRpb25zLnZpZXcgOiBuZXcgVmlldygpO1xuXG4gIC8qKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gKi9cbiAgbGV0IGNvbnRyb2xzO1xuICBpZiAob3B0aW9ucy5jb250cm9scyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5jb250cm9scykpIHtcbiAgICAgIGNvbnRyb2xzID0gbmV3IENvbGxlY3Rpb24ob3B0aW9ucy5jb250cm9scy5zbGljZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KFxuICAgICAgICB0eXBlb2YgKC8qKiBAdHlwZSB7P30gKi8gKG9wdGlvbnMuY29udHJvbHMpLmdldEFycmF5KSA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgNDdcbiAgICAgICk7IC8vIEV4cGVjdGVkIGBjb250cm9sc2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYGltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uYFxuICAgICAgY29udHJvbHMgPSBvcHRpb25zLmNvbnRyb2xzO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uXCIpLmRlZmF1bHQ+fSAqL1xuICBsZXQgaW50ZXJhY3Rpb25zO1xuICBpZiAob3B0aW9ucy5pbnRlcmFjdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMuaW50ZXJhY3Rpb25zKSkge1xuICAgICAgaW50ZXJhY3Rpb25zID0gbmV3IENvbGxlY3Rpb24ob3B0aW9ucy5pbnRlcmFjdGlvbnMuc2xpY2UoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgdHlwZW9mICgvKiogQHR5cGUgez99ICovIChvcHRpb25zLmludGVyYWN0aW9ucykuZ2V0QXJyYXkpID09PVxuICAgICAgICAgICdmdW5jdGlvbicsXG4gICAgICAgIDQ4XG4gICAgICApOyAvLyBFeHBlY3RlZCBgaW50ZXJhY3Rpb25zYCB0byBiZSBhbiBhcnJheSBvciBhbiBgaW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25gXG4gICAgICBpbnRlcmFjdGlvbnMgPSBvcHRpb25zLmludGVyYWN0aW9ucztcbiAgICB9XG4gIH1cblxuICAvKiogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSAqL1xuICBsZXQgb3ZlcmxheXM7XG4gIGlmIChvcHRpb25zLm92ZXJsYXlzICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLm92ZXJsYXlzKSkge1xuICAgICAgb3ZlcmxheXMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLm92ZXJsYXlzLnNsaWNlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHR5cGVvZiAoLyoqIEB0eXBlIHs/fSAqLyAob3B0aW9ucy5vdmVybGF5cykuZ2V0QXJyYXkpID09PSAnZnVuY3Rpb24nLFxuICAgICAgICA0OVxuICAgICAgKTsgLy8gRXhwZWN0ZWQgYG92ZXJsYXlzYCB0byBiZSBhbiBhcnJheSBvciBhbiBgaW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25gXG4gICAgICBvdmVybGF5cyA9IG9wdGlvbnMub3ZlcmxheXM7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG92ZXJsYXlzID0gbmV3IENvbGxlY3Rpb24oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgY29udHJvbHM6IGNvbnRyb2xzLFxuICAgIGludGVyYWN0aW9uczogaW50ZXJhY3Rpb25zLFxuICAgIGtleWJvYXJkRXZlbnRUYXJnZXQ6IGtleWJvYXJkRXZlbnRUYXJnZXQsXG4gICAgb3ZlcmxheXM6IG92ZXJsYXlzLFxuICAgIHZhbHVlczogdmFsdWVzLFxuICB9O1xufVxuZXhwb3J0IGRlZmF1bHQgTWFwO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvZGVmYXVsdHNcbiAqL1xuaW1wb3J0IEF0dHJpYnV0aW9uIGZyb20gJy4vQXR0cmlidXRpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgUm90YXRlIGZyb20gJy4vUm90YXRlLmpzJztcbmltcG9ydCBab29tIGZyb20gJy4vWm9vbS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRGVmYXVsdHNPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbj10cnVlXSBJbmNsdWRlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0F0dHJpYnV0aW9uLmpzXCIpLk9wdGlvbnN9IFthdHRyaWJ1dGlvbk9wdGlvbnNdXG4gKiBPcHRpb25zIGZvciB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcm90YXRlPXRydWVdIEluY2x1ZGVcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Sb3RhdGUuanNcIikuT3B0aW9uc30gW3JvdGF0ZU9wdGlvbnNdIE9wdGlvbnNcbiAqIGZvciB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvUm90YXRlflJvdGF0ZX0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt6b29tXSBJbmNsdWRlIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1pvb20uanNcIikuT3B0aW9uc30gW3pvb21PcHRpb25zXSBPcHRpb25zIGZvclxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0uXG4gKi9cblxuLyoqXG4gKiBTZXQgb2YgY29udHJvbHMgaW5jbHVkZWQgaW4gbWFwcyBieSBkZWZhdWx0LiBVbmxlc3MgY29uZmlndXJlZCBvdGhlcndpc2UsXG4gKiB0aGlzIHJldHVybnMgYSBjb2xsZWN0aW9uIGNvbnRhaW5pbmcgYW4gaW5zdGFuY2Ugb2YgZWFjaCBvZiB0aGUgZm9sbG93aW5nXG4gKiBjb250cm9sczpcbiAqICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1JvdGF0ZX5Sb3RhdGV9XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9BdHRyaWJ1dGlvbn5BdHRyaWJ1dGlvbn1cbiAqXG4gKiBAcGFyYW0ge0RlZmF1bHRzT3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMgZm9yIHRoZSBkZWZhdWx0IGNvbnRyb2xzLlxuICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL0NvbnRyb2wuanNcIikuZGVmYXVsdD59IEEgY29sbGVjdGlvbiBvZiBjb250cm9sc1xuICogdG8gYmUgdXNlZCB3aXRoIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9IGNvbnN0cnVjdG9yJ3MgYGNvbnRyb2xzYCBvcHRpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gIC8qKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL0NvbnRyb2wuanNcIikuZGVmYXVsdD59ICovXG4gIGNvbnN0IGNvbnRyb2xzID0gbmV3IENvbGxlY3Rpb24oKTtcblxuICBjb25zdCB6b29tQ29udHJvbCA9IG9wdGlvbnMuem9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tIDogdHJ1ZTtcbiAgaWYgKHpvb21Db250cm9sKSB7XG4gICAgY29udHJvbHMucHVzaChuZXcgWm9vbShvcHRpb25zLnpvb21PcHRpb25zKSk7XG4gIH1cblxuICBjb25zdCByb3RhdGVDb250cm9sID0gb3B0aW9ucy5yb3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRlIDogdHJ1ZTtcbiAgaWYgKHJvdGF0ZUNvbnRyb2wpIHtcbiAgICBjb250cm9scy5wdXNoKG5ldyBSb3RhdGUob3B0aW9ucy5yb3RhdGVPcHRpb25zKSk7XG4gIH1cblxuICBjb25zdCBhdHRyaWJ1dGlvbkNvbnRyb2wgPVxuICAgIG9wdGlvbnMuYXR0cmlidXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYXR0cmlidXRpb24gOiB0cnVlO1xuICBpZiAoYXR0cmlidXRpb25Db250cm9sKSB7XG4gICAgY29udHJvbHMucHVzaChuZXcgQXR0cmlidXRpb24ob3B0aW9ucy5hdHRyaWJ1dGlvbk9wdGlvbnMpKTtcbiAgfVxuXG4gIHJldHVybiBjb250cm9scztcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9kZWZhdWx0c1xuICovXG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBEb3VibGVDbGlja1pvb20gZnJvbSAnLi9Eb3VibGVDbGlja1pvb20uanMnO1xuaW1wb3J0IERyYWdQYW4gZnJvbSAnLi9EcmFnUGFuLmpzJztcbmltcG9ydCBEcmFnUm90YXRlIGZyb20gJy4vRHJhZ1JvdGF0ZS5qcyc7XG5pbXBvcnQgRHJhZ1pvb20gZnJvbSAnLi9EcmFnWm9vbS5qcyc7XG5pbXBvcnQgS2V5Ym9hcmRQYW4gZnJvbSAnLi9LZXlib2FyZFBhbi5qcyc7XG5pbXBvcnQgS2V5Ym9hcmRab29tIGZyb20gJy4vS2V5Ym9hcmRab29tLmpzJztcbmltcG9ydCBLaW5ldGljIGZyb20gJy4uL0tpbmV0aWMuanMnO1xuaW1wb3J0IE1vdXNlV2hlZWxab29tIGZyb20gJy4vTW91c2VXaGVlbFpvb20uanMnO1xuaW1wb3J0IFBpbmNoUm90YXRlIGZyb20gJy4vUGluY2hSb3RhdGUuanMnO1xuaW1wb3J0IFBpbmNoWm9vbSBmcm9tICcuL1BpbmNoWm9vbS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRGVmYXVsdHNPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthbHRTaGlmdERyYWdSb3RhdGU9dHJ1ZV0gV2hldGhlciBBbHQtU2hpZnQtZHJhZyByb3RhdGUgaXNcbiAqIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvbkZvY3VzT25seT1mYWxzZV0gSW50ZXJhY3Qgb25seSB3aGVuIHRoZSBtYXAgaGFzIHRoZVxuICogZm9jdXMuIFRoaXMgYWZmZWN0cyB0aGUgYE1vdXNlV2hlZWxab29tYCBhbmQgYERyYWdQYW5gIGludGVyYWN0aW9ucyBhbmQgaXNcbiAqIHVzZWZ1bCB3aGVuIHBhZ2Ugc2Nyb2xsIGlzIGRlc2lyZWQgZm9yIG1hcHMgdGhhdCBkbyBub3QgaGF2ZSB0aGUgYnJvd3NlcidzXG4gKiBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2RvdWJsZUNsaWNrWm9vbT10cnVlXSBXaGV0aGVyIGRvdWJsZSBjbGljayB6b29tIGlzXG4gKiBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBba2V5Ym9hcmQ9dHJ1ZV0gV2hldGhlciBrZXlib2FyZCBpbnRlcmFjdGlvbiBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbW91c2VXaGVlbFpvb209dHJ1ZV0gV2hldGhlciBtb3VzZXdoZWVsIHpvb20gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NoaWZ0RHJhZ1pvb209dHJ1ZV0gV2hldGhlciBTaGlmdC1kcmFnIHpvb20gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2RyYWdQYW49dHJ1ZV0gV2hldGhlciBkcmFnIHBhbiBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcGluY2hSb3RhdGU9dHJ1ZV0gV2hldGhlciBwaW5jaCByb3RhdGUgaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3BpbmNoWm9vbT10cnVlXSBXaGV0aGVyIHBpbmNoIHpvb20gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbURlbHRhXSBab29tIGxldmVsIGRlbHRhIHdoZW4gdXNpbmcga2V5Ym9hcmQgb3IgZG91YmxlIGNsaWNrIHpvb20uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21EdXJhdGlvbl0gRHVyYXRpb24gb2YgdGhlIHpvb20gYW5pbWF0aW9uIGluXG4gKiBtaWxsaXNlY29uZHMuXG4gKi9cblxuLyoqXG4gKiBTZXQgb2YgaW50ZXJhY3Rpb25zIGluY2x1ZGVkIGluIG1hcHMgYnkgZGVmYXVsdC4gU3BlY2lmaWMgaW50ZXJhY3Rpb25zIGNhbiBiZVxuICogZXhjbHVkZWQgYnkgc2V0dGluZyB0aGUgYXBwcm9wcmlhdGUgb3B0aW9uIHRvIGZhbHNlIGluIHRoZSBjb25zdHJ1Y3RvclxuICogb3B0aW9ucywgYnV0IHRoZSBvcmRlciBvZiB0aGUgaW50ZXJhY3Rpb25zIGlzIGZpeGVkLiAgSWYgeW91IHdhbnQgdG8gc3BlY2lmeVxuICogYSBkaWZmZXJlbnQgb3JkZXIgZm9yIGludGVyYWN0aW9ucywgeW91IHdpbGwgbmVlZCB0byBjcmVhdGUgeW91ciBvd25cbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb25+SW50ZXJhY3Rpb259IGluc3RhbmNlcyBhbmQgaW5zZXJ0XG4gKiB0aGVtIGludG8gYSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gaW4gdGhlIG9yZGVyIHlvdSB3YW50XG4gKiBiZWZvcmUgY3JlYXRpbmcgeW91ciB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9IGluc3RhbmNlLiBDaGFuZ2luZyB0aGUgb3JkZXIgY2FuXG4gKiBiZSBvZiBpbnRlcmVzdCBpZiB0aGUgZXZlbnQgcHJvcGFnYXRpb24gbmVlZHMgdG8gYmUgc3RvcHBlZCBhdCBhIHBvaW50LlxuICogVGhlIGRlZmF1bHQgc2V0IG9mIGludGVyYWN0aW9ucywgaW4gc2VxdWVuY2UsIGlzOlxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGV+RHJhZ1JvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb21+RG91YmxlQ2xpY2tab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdQYW5+RHJhZ1Bhbn1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZX5QaW5jaFJvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9QaW5jaFpvb21+UGluY2hab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFufktleWJvYXJkUGFufVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb21+TW91c2VXaGVlbFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21+RHJhZ1pvb219XG4gKlxuICogQHBhcmFtIHtEZWZhdWx0c09wdGlvbnN9IFtvcHRpb25zXSBEZWZhdWx0cyBvcHRpb25zLlxuICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICogQSBjb2xsZWN0aW9uIG9mIGludGVyYWN0aW9ucyB0byBiZSB1c2VkIHdpdGggdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH1cbiAqIGNvbnN0cnVjdG9yJ3MgYGludGVyYWN0aW9uc2Agb3B0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdHMob3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcblxuICAvKiogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn0gKi9cbiAgY29uc3QgaW50ZXJhY3Rpb25zID0gbmV3IENvbGxlY3Rpb24oKTtcblxuICBjb25zdCBraW5ldGljID0gbmV3IEtpbmV0aWMoLTAuMDA1LCAwLjA1LCAxMDApO1xuXG4gIGNvbnN0IGFsdFNoaWZ0RHJhZ1JvdGF0ZSA9XG4gICAgb3B0aW9ucy5hbHRTaGlmdERyYWdSb3RhdGUgIT09IHVuZGVmaW5lZFxuICAgICAgPyBvcHRpb25zLmFsdFNoaWZ0RHJhZ1JvdGF0ZVxuICAgICAgOiB0cnVlO1xuICBpZiAoYWx0U2hpZnREcmFnUm90YXRlKSB7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERyYWdSb3RhdGUoKSk7XG4gIH1cblxuICBjb25zdCBkb3VibGVDbGlja1pvb20gPVxuICAgIG9wdGlvbnMuZG91YmxlQ2xpY2tab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRvdWJsZUNsaWNrWm9vbSA6IHRydWU7XG4gIGlmIChkb3VibGVDbGlja1pvb20pIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChcbiAgICAgIG5ldyBEb3VibGVDbGlja1pvb20oe1xuICAgICAgICBkZWx0YTogb3B0aW9ucy56b29tRGVsdGEsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGRyYWdQYW4gPSBvcHRpb25zLmRyYWdQYW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHJhZ1BhbiA6IHRydWU7XG4gIGlmIChkcmFnUGFuKSB7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2goXG4gICAgICBuZXcgRHJhZ1Bhbih7XG4gICAgICAgIG9uRm9jdXNPbmx5OiBvcHRpb25zLm9uRm9jdXNPbmx5LFxuICAgICAgICBraW5ldGljOiBraW5ldGljLFxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgY29uc3QgcGluY2hSb3RhdGUgPVxuICAgIG9wdGlvbnMucGluY2hSb3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGluY2hSb3RhdGUgOiB0cnVlO1xuICBpZiAocGluY2hSb3RhdGUpIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgUGluY2hSb3RhdGUoKSk7XG4gIH1cblxuICBjb25zdCBwaW5jaFpvb20gPSBvcHRpb25zLnBpbmNoWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waW5jaFpvb20gOiB0cnVlO1xuICBpZiAocGluY2hab29tKSB7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2goXG4gICAgICBuZXcgUGluY2hab29tKHtcbiAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uLFxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgY29uc3Qga2V5Ym9hcmQgPSBvcHRpb25zLmtleWJvYXJkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmtleWJvYXJkIDogdHJ1ZTtcbiAgaWYgKGtleWJvYXJkKSB7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IEtleWJvYXJkUGFuKCkpO1xuICAgIGludGVyYWN0aW9ucy5wdXNoKFxuICAgICAgbmV3IEtleWJvYXJkWm9vbSh7XG4gICAgICAgIGRlbHRhOiBvcHRpb25zLnpvb21EZWx0YSxcbiAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uLFxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgY29uc3QgbW91c2VXaGVlbFpvb20gPVxuICAgIG9wdGlvbnMubW91c2VXaGVlbFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubW91c2VXaGVlbFpvb20gOiB0cnVlO1xuICBpZiAobW91c2VXaGVlbFpvb20pIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChcbiAgICAgIG5ldyBNb3VzZVdoZWVsWm9vbSh7XG4gICAgICAgIG9uRm9jdXNPbmx5OiBvcHRpb25zLm9uRm9jdXNPbmx5LFxuICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBjb25zdCBzaGlmdERyYWdab29tID1cbiAgICBvcHRpb25zLnNoaWZ0RHJhZ1pvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc2hpZnREcmFnWm9vbSA6IHRydWU7XG4gIGlmIChzaGlmdERyYWdab29tKSB7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2goXG4gICAgICBuZXcgRHJhZ1pvb20oe1xuICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gaW50ZXJhY3Rpb25zO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0tpbmV0aWNcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEltcGxlbWVudGF0aW9uIG9mIGluZXJ0aWFsIGRlY2VsZXJhdGlvbiBmb3IgbWFwIG1vdmVtZW50LlxuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgS2luZXRpYyB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVjYXkgUmF0ZSBvZiBkZWNheSAobXVzdCBiZSBuZWdhdGl2ZSkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5WZWxvY2l0eSBNaW5pbXVtIHZlbG9jaXR5IChwaXhlbHMvbWlsbGlzZWNvbmQpLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsYXkgRGVsYXkgdG8gY29uc2lkZXIgdG8gY2FsY3VsYXRlIHRoZSBraW5ldGljXG4gICAqICAgICBpbml0aWFsIHZhbHVlcyAobWlsbGlzZWNvbmRzKS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlY2F5LCBtaW5WZWxvY2l0eSwgZGVsYXkpIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kZWNheV8gPSBkZWNheTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1pblZlbG9jaXR5XyA9IG1pblZlbG9jaXR5O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZGVsYXlfID0gZGVsYXk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMucG9pbnRzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuYW5nbGVfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgKi9cbiAgYmVnaW4oKSB7XG4gICAgdGhpcy5wb2ludHNfLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5hbmdsZV8gPSAwO1xuICAgIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICovXG4gIHVwZGF0ZSh4LCB5KSB7XG4gICAgdGhpcy5wb2ludHNfLnB1c2goeCwgeSwgRGF0ZS5ub3coKSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB3ZSBzaG91bGQgZG8ga2luZXRpYyBhbmltYXRpb24uXG4gICAqL1xuICBlbmQoKSB7XG4gICAgaWYgKHRoaXMucG9pbnRzXy5sZW5ndGggPCA2KSB7XG4gICAgICAvLyBhdCBsZWFzdCAyIHBvaW50cyBhcmUgcmVxdWlyZWQgKGkuZS4gdGhlcmUgbXVzdCBiZSBhdCBsZWFzdCA2IGVsZW1lbnRzXG4gICAgICAvLyBpbiB0aGUgYXJyYXkpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGRlbGF5ID0gRGF0ZS5ub3coKSAtIHRoaXMuZGVsYXlfO1xuICAgIGNvbnN0IGxhc3RJbmRleCA9IHRoaXMucG9pbnRzXy5sZW5ndGggLSAzO1xuICAgIGlmICh0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMl0gPCBkZWxheSkge1xuICAgICAgLy8gdGhlIGxhc3QgdHJhY2tlZCBwb2ludCBpcyB0b28gb2xkLCB3aGljaCBtZWFucyB0aGF0IHRoZSB1c2VyIHN0b3BwZWRcbiAgICAgIC8vIHBhbm5pbmcgYmVmb3JlIHJlbGVhc2luZyB0aGUgbWFwXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gZ2V0IHRoZSBmaXJzdCBwb2ludCB3aGljaCBzdGlsbCBmYWxscyBpbnRvIHRoZSBkZWxheSB0aW1lXG4gICAgbGV0IGZpcnN0SW5kZXggPSBsYXN0SW5kZXggLSAzO1xuICAgIHdoaWxlIChmaXJzdEluZGV4ID4gMCAmJiB0aGlzLnBvaW50c19bZmlyc3RJbmRleCArIDJdID4gZGVsYXkpIHtcbiAgICAgIGZpcnN0SW5kZXggLT0gMztcbiAgICB9XG5cbiAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAyXSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl07XG4gICAgLy8gd2UgZG9uJ3Qgd2FudCBhIGR1cmF0aW9uIG9mIDAgKGRpdmlkZSBieSB6ZXJvKVxuICAgIC8vIHdlIGFsc28gbWFrZSBzdXJlIHRoZSB1c2VyIHBhbm5lZCBmb3IgYSBkdXJhdGlvbiBvZiBhdCBsZWFzdCBvbmUgZnJhbWVcbiAgICAvLyAoMS82MHMpIHRvIGNvbXB1dGUgc2FuZSBkaXNwbGFjZW1lbnQgdmFsdWVzXG4gICAgaWYgKGR1cmF0aW9uIDwgMTAwMCAvIDYwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgZHggPSB0aGlzLnBvaW50c19bbGFzdEluZGV4XSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4XTtcbiAgICBjb25zdCBkeSA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAxXSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMV07XG4gICAgdGhpcy5hbmdsZV8gPSBNYXRoLmF0YW4yKGR5LCBkeCk7XG4gICAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KSAvIGR1cmF0aW9uO1xuICAgIHJldHVybiB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPiB0aGlzLm1pblZlbG9jaXR5XztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRvdGFsIGRpc3RhbmNlIHRyYXZlbGxlZCAocGl4ZWxzKS5cbiAgICovXG4gIGdldERpc3RhbmNlKCkge1xuICAgIHJldHVybiAodGhpcy5taW5WZWxvY2l0eV8gLSB0aGlzLmluaXRpYWxWZWxvY2l0eV8pIC8gdGhpcy5kZWNheV87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBvZiB0aGUga2luZXRpYyBwYW5uaW5nIGFuaW1hdGlvbiAocmFkaWFucykuXG4gICAqL1xuICBnZXRBbmdsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5hbmdsZV87XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgS2luZXRpYztcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9PYmplY3RcbiAqL1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IE9ic2VydmFibGUgZnJvbSAnLi9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuL3V0aWwuanMnO1xuaW1wb3J0IHtpc0VtcHR5fSBmcm9tICcuL29iai5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICovXG5leHBvcnQgY2xhc3MgT2JqZWN0RXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgcHJvcGVydHkgbmFtZS5cbiAgICogQHBhcmFtIHsqfSBvbGRWYWx1ZSBUaGUgb2xkIHZhbHVlIGZvciBga2V5YC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGUsIGtleSwgb2xkVmFsdWUpIHtcbiAgICBzdXBlcih0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB3aG9zZSB2YWx1ZSBpcyBjaGFuZ2luZy5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmtleSA9IGtleTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBvbGQgdmFsdWUuIFRvIGdldCB0aGUgbmV3IHZhbHVlIHVzZSBgZS50YXJnZXQuZ2V0KGUua2V5KWAgd2hlcmVcbiAgICAgKiBgZWAgaXMgdGhlIGV2ZW50IG9iamVjdC5cbiAgICAgKiBAdHlwZSB7Kn1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5vbGRWYWx1ZSA9IG9sZFZhbHVlO1xuICB9XG59XG5cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzLCBPYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlcywgUmV0dXJuPn0gT2JqZWN0T25TaWduYXR1cmVcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIE1vc3Qgbm9uLXRyaXZpYWwgY2xhc3NlcyBpbmhlcml0IGZyb20gdGhpcy5cbiAqXG4gKiBUaGlzIGV4dGVuZHMge0BsaW5rIG1vZHVsZTpvbC9PYnNlcnZhYmxlfk9ic2VydmFibGV9IHdpdGggb2JzZXJ2YWJsZVxuICogcHJvcGVydGllcywgd2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyBvYnNlcnZhYmxlIGFzIHdlbGwgYXMgdGhlIG9iamVjdCBhcyBhXG4gKiB3aG9sZS5cbiAqXG4gKiBDbGFzc2VzIHRoYXQgaW5oZXJpdCBmcm9tIHRoaXMgaGF2ZSBwcmUtZGVmaW5lZCBwcm9wZXJ0aWVzLCB0byB3aGljaCB5b3UgY2FuXG4gKiBhZGQgeW91ciBvd25zLiBUaGUgcHJlLWRlZmluZWQgcHJvcGVydGllcyBhcmUgbGlzdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbiBhc1xuICogJ09ic2VydmFibGUgUHJvcGVydGllcycsIGFuZCBoYXZlIHRoZWlyIG93biBhY2Nlc3NvcnM7IGZvciBleGFtcGxlLFxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfSBoYXMgYSBgdGFyZ2V0YCBwcm9wZXJ0eSwgYWNjZXNzZWQgd2l0aFxuICogYGdldFRhcmdldCgpYCBhbmQgY2hhbmdlZCB3aXRoIGBzZXRUYXJnZXQoKWAuIE5vdCBhbGwgcHJvcGVydGllcyBhcmUgaG93ZXZlclxuICogc2V0dGFibGUuIFRoZXJlIGFyZSBhbHNvIGdlbmVyYWwtcHVycG9zZSBhY2Nlc3NvcnMgYGdldCgpYCBhbmQgYHNldCgpYC4gRm9yXG4gKiBleGFtcGxlLCBgZ2V0KCd0YXJnZXQnKWAgaXMgZXF1aXZhbGVudCB0byBgZ2V0VGFyZ2V0KClgLlxuICpcbiAqIFRoZSBgc2V0YCBhY2Nlc3NvcnMgdHJpZ2dlciBhIGNoYW5nZSBldmVudCwgYW5kIHlvdSBjYW4gbW9uaXRvciB0aGlzIGJ5XG4gKiByZWdpc3RlcmluZyBhIGxpc3RlbmVyLiBGb3IgZXhhbXBsZSwge0BsaW5rIG1vZHVsZTpvbC9WaWV3flZpZXd9IGhhcyBhXG4gKiBgY2VudGVyYCBwcm9wZXJ0eSwgc28gYHZpZXcub24oJ2NoYW5nZTpjZW50ZXInLCBmdW5jdGlvbihldnQpIHsuLi59KTtgIHdvdWxkXG4gKiBjYWxsIHRoZSBmdW5jdGlvbiB3aGVuZXZlciB0aGUgdmFsdWUgb2YgdGhlIGNlbnRlciBwcm9wZXJ0eSBjaGFuZ2VzLiBXaXRoaW5cbiAqIHRoZSBmdW5jdGlvbiwgYGV2dC50YXJnZXRgIHdvdWxkIGJlIHRoZSB2aWV3LCBzbyBgZXZ0LnRhcmdldC5nZXRDZW50ZXIoKWBcbiAqIHdvdWxkIHJldHVybiB0aGUgbmV3IGNlbnRlci5cbiAqXG4gKiBZb3UgY2FuIGFkZCB5b3VyIG93biBvYnNlcnZhYmxlIHByb3BlcnRpZXMgd2l0aFxuICogYG9iamVjdC5zZXQoJ3Byb3AnLCAndmFsdWUnKWAsIGFuZCByZXRyaWV2ZSB0aGF0IHdpdGggYG9iamVjdC5nZXQoJ3Byb3AnKWAuXG4gKiBZb3UgY2FuIGxpc3RlbiBmb3IgY2hhbmdlcyBvbiB0aGF0IHByb3BlcnR5IHZhbHVlIHdpdGhcbiAqIGBvYmplY3Qub24oJ2NoYW5nZTpwcm9wJywgbGlzdGVuZXIpYC4gWW91IGNhbiBnZXQgYSBsaXN0IG9mIGFsbFxuICogcHJvcGVydGllcyB3aXRoIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3QjZ2V0UHJvcGVydGllc30uXG4gKlxuICogTm90ZSB0aGF0IHRoZSBvYnNlcnZhYmxlIHByb3BlcnRpZXMgYXJlIHNlcGFyYXRlIGZyb20gc3RhbmRhcmQgSlMgcHJvcGVydGllcy5cbiAqIFlvdSBjYW4sIGZvciBleGFtcGxlLCBnaXZlIHlvdXIgbWFwIG9iamVjdCBhIHRpdGxlIHdpdGhcbiAqIGBtYXAudGl0bGU9J05ldyB0aXRsZSdgIGFuZCB3aXRoIGBtYXAuc2V0KCd0aXRsZScsICdBbm90aGVyIHRpdGxlJylgLiBUaGVcbiAqIGZpcnN0IHdpbGwgYmUgYSBgaGFzT3duUHJvcGVydHlgOyB0aGUgc2Vjb25kIHdpbGwgYXBwZWFyIGluXG4gKiBgZ2V0UHJvcGVydGllcygpYC4gT25seSB0aGUgc2Vjb25kIGlzIG9ic2VydmFibGUuXG4gKlxuICogUHJvcGVydGllcyBjYW4gYmUgZGVsZXRlZCBieSB1c2luZyB0aGUgdW5zZXQgbWV0aG9kLiBFLmcuXG4gKiBvYmplY3QudW5zZXQoJ2ZvbycpLlxuICpcbiAqIEBmaXJlcyBPYmplY3RFdmVudFxuICogQGFwaVxuICovXG5jbGFzcyBCYXNlT2JqZWN0IGV4dGVuZHMgT2JzZXJ2YWJsZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsICo+fSBbdmFsdWVzXSBBbiBvYmplY3Qgd2l0aCBrZXktdmFsdWUgcGFpcnMuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih2YWx1ZXMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtPYmplY3RPblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub247XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge09iamVjdE9uU2lnbmF0dXJlPGltcG9ydChcIi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbmNlO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtPYmplY3RPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgKi9cbiAgICB0aGlzLnVuO1xuXG4gICAgLy8gQ2FsbCB7QGxpbmsgbW9kdWxlOm9sL3V0aWwuZ2V0VWlkfSB0byBlbnN1cmUgdGhhdCB0aGUgb3JkZXIgb2Ygb2JqZWN0cycgaWRzIGlzXG4gICAgLy8gdGhlIHNhbWUgYXMgdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgd2VyZSBjcmVhdGVkLiAgVGhpcyBhbHNvIGhlbHBzIHRvXG4gICAgLy8gZW5zdXJlIHRoYXQgb2JqZWN0IHByb3BlcnRpZXMgYXJlIGFsd2F5cyBhZGRlZCBpbiB0aGUgc2FtZSBvcmRlciwgd2hpY2hcbiAgICAvLyBoZWxwcyBtYW55IEphdmFTY3JpcHQgZW5naW5lcyBnZW5lcmF0ZSBmYXN0ZXIgY29kZS5cbiAgICBnZXRVaWQodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICAgKi9cbiAgICB0aGlzLnZhbHVlc18gPSBudWxsO1xuXG4gICAgaWYgKHZhbHVlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnNldFByb3BlcnRpZXModmFsdWVzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIHZhbHVlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgKiBAcmV0dXJuIHsqfSBWYWx1ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0KGtleSkge1xuICAgIGxldCB2YWx1ZTtcbiAgICBpZiAodGhpcy52YWx1ZXNfICYmIHRoaXMudmFsdWVzXy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICB2YWx1ZSA9IHRoaXMudmFsdWVzX1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBvYmplY3QgcHJvcGVydHkgbmFtZXMuXG4gICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IExpc3Qgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEtleXMoKSB7XG4gICAgcmV0dXJuICh0aGlzLnZhbHVlc18gJiYgT2JqZWN0LmtleXModGhpcy52YWx1ZXNfKSkgfHwgW107XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFuIG9iamVjdCBvZiBhbGwgcHJvcGVydHkgbmFtZXMgYW5kIHZhbHVlcy5cbiAgICogQHJldHVybiB7T2JqZWN0PHN0cmluZywgKj59IE9iamVjdC5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0UHJvcGVydGllcygpIHtcbiAgICByZXR1cm4gKHRoaXMudmFsdWVzXyAmJiBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnZhbHVlc18pKSB8fCB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgb2JqZWN0IGhhcyBwcm9wZXJ0aWVzLlxuICAgKi9cbiAgaGFzUHJvcGVydGllcygpIHtcbiAgICByZXR1cm4gISF0aGlzLnZhbHVlc187XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICogQHBhcmFtIHsqfSBvbGRWYWx1ZSBPbGQgdmFsdWUuXG4gICAqL1xuICBub3RpZnkoa2V5LCBvbGRWYWx1ZSkge1xuICAgIGxldCBldmVudFR5cGU7XG4gICAgZXZlbnRUeXBlID0gYGNoYW5nZToke2tleX1gO1xuICAgIGlmICh0aGlzLmhhc0xpc3RlbmVyKGV2ZW50VHlwZSkpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT2JqZWN0RXZlbnQoZXZlbnRUeXBlLCBrZXksIG9sZFZhbHVlKSk7XG4gICAgfVxuICAgIGV2ZW50VHlwZSA9IE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRTtcbiAgICBpZiAodGhpcy5oYXNMaXN0ZW5lcihldmVudFR5cGUpKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9iamVjdEV2ZW50KGV2ZW50VHlwZSwga2V5LCBvbGRWYWx1ZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyfSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICovXG4gIGFkZENoYW5nZUxpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYGNoYW5nZToke2tleX1gLCBsaXN0ZW5lcik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAqL1xuICByZW1vdmVDaGFuZ2VMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGBjaGFuZ2U6JHtrZXl9YCwgbGlzdGVuZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYSB2YWx1ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZS5cbiAgICogQHBhcmFtIHtib29sZWFufSBbc2lsZW50XSBVcGRhdGUgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGV2ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXQoa2V5LCB2YWx1ZSwgc2lsZW50KSB7XG4gICAgY29uc3QgdmFsdWVzID0gdGhpcy52YWx1ZXNfIHx8ICh0aGlzLnZhbHVlc18gPSB7fSk7XG4gICAgaWYgKHNpbGVudCkge1xuICAgICAgdmFsdWVzW2tleV0gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgb2xkVmFsdWUgPSB2YWx1ZXNba2V5XTtcbiAgICAgIHZhbHVlc1trZXldID0gdmFsdWU7XG4gICAgICBpZiAob2xkVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRoaXMubm90aWZ5KGtleSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGEgY29sbGVjdGlvbiBvZiBrZXktdmFsdWUgcGFpcnMuICBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIGFueSBleGlzdGluZ1xuICAgKiBwcm9wZXJ0aWVzIGFuZCBhZGRzIG5ldyBvbmVzIChpdCBkb2VzIG5vdCByZW1vdmUgYW55IGV4aXN0aW5nIHByb3BlcnRpZXMpLlxuICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsICo+fSB2YWx1ZXMgVmFsdWVzLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzaWxlbnRdIFVwZGF0ZSB3aXRob3V0IHRyaWdnZXJpbmcgYW4gZXZlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFByb3BlcnRpZXModmFsdWVzLCBzaWxlbnQpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB2YWx1ZXMpIHtcbiAgICAgIHRoaXMuc2V0KGtleSwgdmFsdWVzW2tleV0sIHNpbGVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGFueSBwcm9wZXJ0aWVzIGZyb20gYW5vdGhlciBvYmplY3Qgd2l0aG91dCB0cmlnZ2VyaW5nIGV2ZW50cy5cbiAgICogQHBhcmFtIHtCYXNlT2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGFwcGx5UHJvcGVydGllcyhzb3VyY2UpIHtcbiAgICBpZiAoIXNvdXJjZS52YWx1ZXNfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24odGhpcy52YWx1ZXNfIHx8ICh0aGlzLnZhbHVlc18gPSB7fSksIHNvdXJjZS52YWx1ZXNfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnNldHMgYSBwcm9wZXJ0eS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICogQHBhcmFtIHtib29sZWFufSBbc2lsZW50XSBVbnNldCB3aXRob3V0IHRyaWdnZXJpbmcgYW4gZXZlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIHVuc2V0KGtleSwgc2lsZW50KSB7XG4gICAgaWYgKHRoaXMudmFsdWVzXyAmJiBrZXkgaW4gdGhpcy52YWx1ZXNfKSB7XG4gICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgZGVsZXRlIHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgaWYgKGlzRW1wdHkodGhpcy52YWx1ZXNfKSkge1xuICAgICAgICB0aGlzLnZhbHVlc18gPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKCFzaWxlbnQpIHtcbiAgICAgICAgdGhpcy5ub3RpZnkoa2V5LCBvbGRWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJhc2VPYmplY3Q7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvT2JqZWN0RXZlbnRUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHByb3BlcnR5IGlzIGNoYW5nZWQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvT2JqZWN0Lk9iamVjdEV2ZW50I3Byb3BlcnR5Y2hhbmdlXG4gICAqIEBhcGlcbiAgICovXG4gIFBST1BFUlRZQ0hBTkdFOiAncHJvcGVydHljaGFuZ2UnLFxufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7J3Byb3BlcnR5Y2hhbmdlJ30gVHlwZXNcbiAqL1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL09ic2VydmFibGVcbiAqL1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2xpc3RlbiwgbGlzdGVuT25jZSwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi9ldmVudHMuanMnO1xuXG4vKioqXG4gKiBAdGVtcGxhdGUge3N0cmluZ30gVHlwZVxuICogQHRlbXBsYXRlIHtFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBFdmVudENsYXNzXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7KHR5cGU6IFR5cGUsIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50Q2xhc3MpID0+ID8pID0+IFJldHVybn0gT25TaWduYXR1cmVcbiAqL1xuXG4vKioqXG4gKiBAdGVtcGxhdGUge3N0cmluZ30gVHlwZVxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYgeyh0eXBlOiBUeXBlW10sIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpID0+ID8pID0+IFJldHVybiBleHRlbmRzIHZvaWQgPyB2b2lkIDogUmV0dXJuW119IENvbWJpbmVkT25TaWduYXR1cmVcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHsnY2hhbmdlJ3wnZXJyb3InfSBFdmVudFR5cGVzXG4gKi9cblxuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge09uU2lnbmF0dXJlPEV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJiBDb21iaW5lZE9uU2lnbmF0dXJlPEV2ZW50VHlwZXMsIFJldHVybj59IE9ic2VydmFibGVPblNpZ25hdHVyZVxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQW4gZXZlbnQgdGFyZ2V0IHByb3ZpZGluZyBjb252ZW5pZW50IG1ldGhvZHMgZm9yIGxpc3RlbmVyIHJlZ2lzdHJhdGlvblxuICogYW5kIHVucmVnaXN0cmF0aW9uLiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgYWx3YXlzIGF2YWlsYWJsZSB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV+T2JzZXJ2YWJsZSNjaGFuZ2VkfS5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdFxuICogQGFwaVxuICovXG5jbGFzcyBPYnNlcnZhYmxlIGV4dGVuZHMgRXZlbnRUYXJnZXQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5vbiA9XG4gICAgICAvKiogQHR5cGUge09ic2VydmFibGVPblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fSAqLyAoXG4gICAgICAgIHRoaXMub25JbnRlcm5hbFxuICAgICAgKTtcblxuICAgIHRoaXMub25jZSA9XG4gICAgICAvKiogQHR5cGUge09ic2VydmFibGVPblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fSAqLyAoXG4gICAgICAgIHRoaXMub25jZUludGVybmFsXG4gICAgICApO1xuXG4gICAgdGhpcy51biA9IC8qKiBAdHlwZSB7T2JzZXJ2YWJsZU9uU2lnbmF0dXJlPHZvaWQ+fSAqLyAodGhpcy51bkludGVybmFsKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnJldmlzaW9uXyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogSW5jcmVhc2VzIHRoZSByZXZpc2lvbiBjb3VudGVyIGFuZCBkaXNwYXRjaGVzIGEgJ2NoYW5nZScgZXZlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIGNoYW5nZWQoKSB7XG4gICAgKyt0aGlzLnJldmlzaW9uXztcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2ZXJzaW9uIG51bWJlciBmb3IgdGhpcyBvYmplY3QuICBFYWNoIHRpbWUgdGhlIG9iamVjdCBpcyBtb2RpZmllZCxcbiAgICogaXRzIHZlcnNpb24gbnVtYmVyIHdpbGwgYmUgaW5jcmVtZW50ZWQuXG4gICAqIEByZXR1cm4ge251bWJlcn0gUmV2aXNpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFJldmlzaW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJldmlzaW9uXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFR5cGUuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpKTogP30gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fSBFdmVudCBrZXkuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIG9uSW50ZXJuYWwodHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgY29uc3QgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICBjb25zdCBrZXlzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIGtleXNbaV0gPSBsaXN0ZW4odGhpcywgdHlwZVtpXSwgbGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGtleXM7XG4gICAgfVxuICAgIHJldHVybiBsaXN0ZW4odGhpcywgLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0eXBlKSwgbGlzdGVuZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVHlwZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IEV2ZW50IGtleS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgb25jZUludGVybmFsKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgbGV0IGtleTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgY29uc3QgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICBrZXkgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAga2V5W2ldID0gbGlzdGVuT25jZSh0aGlzLCB0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSA9IGxpc3Rlbk9uY2UodGhpcywgLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0eXBlKSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICAvKiogQHR5cGUge09iamVjdH0gKi8gKGxpc3RlbmVyKS5vbF9rZXkgPSBrZXk7XG4gICAgcmV0dXJuIGtleTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbmxpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVHlwZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgdW5JbnRlcm5hbCh0eXBlLCBsaXN0ZW5lcikge1xuICAgIGNvbnN0IGtleSA9IC8qKiBAdHlwZSB7T2JqZWN0fSAqLyAobGlzdGVuZXIpLm9sX2tleTtcbiAgICBpZiAoa2V5KSB7XG4gICAgICB1bkJ5S2V5KGtleSk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB0eXBlLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGVbaV0sIGxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBMaXN0ZW4gZm9yIGEgY2VydGFpbiB0eXBlIG9mIGV2ZW50LlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLiBJZlxuICogICAgIGNhbGxlZCB3aXRoIGFuIGFycmF5IG9mIGV2ZW50IHR5cGVzIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgdGhlIHJldHVyblxuICogICAgIHdpbGwgYmUgYW4gYXJyYXkgb2Yga2V5cy5cbiAqIEBhcGlcbiAqL1xuT2JzZXJ2YWJsZS5wcm90b3R5cGUub247XG5cbi8qKlxuICogTGlzdGVuIG9uY2UgZm9yIGEgY2VydGFpbiB0eXBlIG9mIGV2ZW50LlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLiBJZlxuICogICAgIGNhbGxlZCB3aXRoIGFuIGFycmF5IG9mIGV2ZW50IHR5cGVzIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgdGhlIHJldHVyblxuICogICAgIHdpbGwgYmUgYW4gYXJyYXkgb2Yga2V5cy5cbiAqIEBhcGlcbiAqL1xuT2JzZXJ2YWJsZS5wcm90b3R5cGUub25jZTtcblxuLyoqXG4gKiBVbmxpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVGhlIGV2ZW50IHR5cGUgb3IgYXJyYXkgb2YgZXZlbnQgdHlwZXMuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKChFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudFwiKS5kZWZhdWx0KSk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuT2JzZXJ2YWJsZS5wcm90b3R5cGUudW47XG5cbi8qKlxuICogUmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lciB1c2luZyB0aGUga2V5IHJldHVybmVkIGJ5IGBvbigpYCBvciBgb25jZSgpYC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IGtleSBUaGUga2V5IHJldHVybmVkIGJ5IGBvbigpYFxuICogICAgIG9yIGBvbmNlKClgIChvciBhbiBhcnJheSBvZiBrZXlzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuQnlLZXkoa2V5KSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBrZXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdW5saXN0ZW5CeUtleShrZXlbaV0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB1bmxpc3RlbkJ5S2V5KC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fSAqLyAoa2V5KSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgT2JzZXJ2YWJsZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9UaWxlXG4gKi9cbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQge2Fic3RyYWN0fSBmcm9tICcuL3V0aWwuanMnO1xuaW1wb3J0IHtlYXNlSW59IGZyb20gJy4vZWFzaW5nLmpzJztcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9UaWxlflRpbGV9IGZvciB0aGUgdGlsZSBhbmQgYVxuICogYHtzdHJpbmd9YCBmb3IgdGhlIHVybCBhcyBhcmd1bWVudHMuIFRoZSBkZWZhdWx0IGlzXG4gKiBgYGBqc1xuICogc291cmNlLnNldFRpbGVMb2FkRnVuY3Rpb24oZnVuY3Rpb24odGlsZSwgc3JjKSB7XG4gKiAgIHRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9KTtcbiAqIGBgYFxuICogRm9yIG1vcmUgZmluZSBncmFpbmVkIGNvbnRyb2wsIHRoZSBsb2FkIGZ1bmN0aW9uIGNhbiB1c2UgZmV0Y2ggb3IgWE1MSHR0cFJlcXVlc3QgYW5kIGludm9sdmVcbiAqIGVycm9yIGhhbmRsaW5nOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgVGlsZVN0YXRlIGZyb20gJ29sL1RpbGVTdGF0ZS5qcyc7XG4gKlxuICogc291cmNlLnNldFRpbGVMb2FkRnVuY3Rpb24oZnVuY3Rpb24odGlsZSwgc3JjKSB7XG4gKiAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICogICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InO1xuICogICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsIGZ1bmN0aW9uIChldnQpIHtcbiAqICAgICBjb25zdCBkYXRhID0gdGhpcy5yZXNwb25zZTtcbiAqICAgICBpZiAoZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gKiAgICAgICB0aWxlLmdldEltYWdlKCkuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChkYXRhKTtcbiAqICAgICB9IGVsc2Uge1xuICogICAgICAgdGlsZS5zZXRTdGF0ZShUaWxlU3RhdGUuRVJST1IpO1xuICogICAgIH1cbiAqICAgfSk7XG4gKiAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAqICAgICB0aWxlLnNldFN0YXRlKFRpbGVTdGF0ZS5FUlJPUik7XG4gKiAgIH0pO1xuICogICB4aHIub3BlbignR0VUJywgc3JjKTtcbiAqICAgeGhyLnNlbmQoKTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKFRpbGUsIHN0cmluZyk6IHZvaWR9IExvYWRGdW5jdGlvblxuICogQGFwaVxuICovXG5cbi8qKlxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZX5UaWxlU291cmNlfSBzb3VyY2VzIHVzZSBhIGZ1bmN0aW9uIG9mIHRoaXMgdHlwZSB0byBnZXRcbiAqIHRoZSB1cmwgdGhhdCBwcm92aWRlcyBhIHRpbGUgZm9yIGEgZ2l2ZW4gdGlsZSBjb29yZGluYXRlLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC90aWxlY29vcmR+VGlsZUNvb3JkfSBmb3IgdGhlIHRpbGVcbiAqIGNvb3JkaW5hdGUsIGEgYHtudW1iZXJ9YCByZXByZXNlbnRpbmcgdGhlIHBpeGVsIHJhdGlvIGFuZCBhXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBmb3IgdGhlIHByb2plY3Rpb24gIGFzIGFyZ3VtZW50c1xuICogYW5kIHJldHVybnMgYSBge3N0cmluZ31gIHJlcHJlc2VudGluZyB0aGUgdGlsZSBVUkwsIG9yIHVuZGVmaW5lZCBpZiBubyB0aWxlXG4gKiBzaG91bGQgYmUgcmVxdWVzdGVkIGZvciB0aGUgcGFzc2VkIHRpbGUgY29vcmRpbmF0ZS5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkLCBudW1iZXIsXG4gKiAgICAgICAgICAgaW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdCk6IChzdHJpbmd8dW5kZWZpbmVkKX0gVXJsRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbj0yNTBdIEEgZHVyYXRpb24gZm9yIHRpbGUgb3BhY2l0eVxuICogdHJhbnNpdGlvbnMgaW4gbWlsbGlzZWNvbmRzLiBBIGR1cmF0aW9uIG9mIDAgZGlzYWJsZXMgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbi5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ludGVycG9sYXRlPWZhbHNlXSBVc2UgaW50ZXJwb2xhdGVkIHZhbHVlcyB3aGVuIHJlc2FtcGxpbmcuICBCeSBkZWZhdWx0LFxuICogdGhlIG5lYXJlc3QgbmVpZ2hib3IgaXMgdXNlZCB3aGVuIHJlc2FtcGxpbmcuXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZvciB0aWxlcy5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqL1xuY2xhc3MgVGlsZSBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSBUaWxlIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0aWxlQ29vcmQsIHN0YXRlLCBvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVDb29yZCA9IHRpbGVDb29yZDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG5cbiAgICAvKipcbiAgICAgKiBBbiBcImludGVyaW1cIiB0aWxlIGZvciB0aGlzIHRpbGUuIFRoZSBpbnRlcmltIHRpbGUgbWF5IGJlIHVzZWQgd2hpbGUgdGhpc1xuICAgICAqIG9uZSBpcyBsb2FkaW5nLCBmb3IgXCJzbW9vdGhcIiB0cmFuc2l0aW9ucyB3aGVuIGNoYW5naW5nIHBhcmFtcy9kaW1lbnNpb25zXG4gICAgICogb24gdGhlIHNvdXJjZS5cbiAgICAgKiBAdHlwZSB7VGlsZX1cbiAgICAgKi9cbiAgICB0aGlzLmludGVyaW1UaWxlID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEEga2V5IGFzc2lnbmVkIHRvIHRoZSB0aWxlLiBUaGlzIGlzIHVzZWQgYnkgdGhlIHRpbGUgc291cmNlIHRvIGRldGVybWluZVxuICAgICAqIGlmIHRoaXMgdGlsZSBjYW4gZWZmZWN0aXZlbHkgYmUgdXNlZCwgb3IgaWYgYSBuZXcgdGlsZSBzaG91bGQgYmUgY3JlYXRlZFxuICAgICAqIGFuZCB0aGlzIG9uZSBiZSB1c2VkIGFzIGFuIGludGVyaW0gdGlsZSBmb3IgdGhpcyBuZXcgdGlsZS5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMua2V5ID0gJyc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZHVyYXRpb24gZm9yIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24uXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRyYW5zaXRpb25fID1cbiAgICAgIG9wdGlvbnMudHJhbnNpdGlvbiA9PT0gdW5kZWZpbmVkID8gMjUwIDogb3B0aW9ucy50cmFuc2l0aW9uO1xuXG4gICAgLyoqXG4gICAgICogTG9va3VwIG9mIHN0YXJ0IHRpbWVzIGZvciByZW5kZXJpbmcgdHJhbnNpdGlvbnMuICBJZiB0aGUgc3RhcnQgdGltZSBpc1xuICAgICAqIGVxdWFsIHRvIC0xLCB0aGUgdHJhbnNpdGlvbiBpcyBjb21wbGV0ZS5cbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgKi9cbiAgICB0aGlzLnRyYW5zaXRpb25TdGFydHNfID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmludGVycG9sYXRlID0gISFvcHRpb25zLmludGVycG9sYXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGNoYW5nZWQoKSB7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KEV2ZW50VHlwZS5DSEFOR0UpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCBieSB0aGUgdGlsZSBjYWNoZSB3aGVuIHRoZSB0aWxlIGlzIHJlbW92ZWQgZnJvbSB0aGUgY2FjaGUgZHVlIHRvIGV4cGlyeVxuICAgKi9cbiAgcmVsZWFzZSgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gVGlsZVN0YXRlLkVSUk9SKSB7XG4gICAgICAvLyB0byByZW1vdmUgdGhlIGBjaGFuZ2VgIGxpc3RlbmVyIG9uIHRoaXMgdGlsZSBpbiBgb2wvVGlsZVF1ZXVlI2hhbmRsZVRpbGVDaGFuZ2VgXG4gICAgICB0aGlzLnNldFN0YXRlKFRpbGVTdGF0ZS5FTVBUWSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICAgKi9cbiAgZ2V0S2V5KCkge1xuICAgIHJldHVybiB0aGlzLmtleSArICcvJyArIHRoaXMudGlsZUNvb3JkO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaW50ZXJpbSB0aWxlIG1vc3Qgc3VpdGFibGUgZm9yIHJlbmRlcmluZyB1c2luZyB0aGUgY2hhaW4gb2YgaW50ZXJpbVxuICAgKiB0aWxlcy4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgIG1vc3QgcmVjZW50IHRpbGUgdGhhdCBoYXMgYmVlbiBsb2FkZWQsIGlmIG5vXG4gICAqIHN1Y2ggdGlsZSBleGlzdHMsIHRoZSBvcmlnaW5hbCB0aWxlIGlzIHJldHVybmVkLlxuICAgKiBAcmV0dXJuIHshVGlsZX0gQmVzdCB0aWxlIGZvciByZW5kZXJpbmcuXG4gICAqL1xuICBnZXRJbnRlcmltVGlsZSgpIHtcbiAgICBpZiAoIXRoaXMuaW50ZXJpbVRpbGUpIHtcbiAgICAgIC8vZW1wdHkgY2hhaW5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBsZXQgdGlsZSA9IHRoaXMuaW50ZXJpbVRpbGU7XG5cbiAgICAvLyBmaW5kIHRoZSBmaXJzdCBsb2FkZWQgdGlsZSBhbmQgcmV0dXJuIGl0LiBTaW5jZSB0aGUgY2hhaW4gaXMgc29ydGVkIGluXG4gICAgLy8gZGVjcmVhc2luZyBvcmRlciBvZiBjcmVhdGlvbiB0aW1lLCB0aGVyZSBpcyBubyBuZWVkIHRvIHNlYXJjaCB0aGUgcmVtYWluZGVyXG4gICAgLy8gb2YgdGhlIGxpc3QgKGFsbCB0aG9zZSB0aWxlcyBjb3JyZXNwb25kIHRvIG9sZGVyIHJlcXVlc3RzIGFuZCB3aWxsIGJlXG4gICAgLy8gY2xlYW5lZCB1cCBieSByZWZyZXNoSW50ZXJpbUNoYWluKVxuICAgIGRvIHtcbiAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAvLyBTaG93IHRpbGUgaW1tZWRpYXRlbHkgaW5zdGVhZCBvZiBmYWRpbmcgaXQgaW4gYWZ0ZXIgbG9hZGluZywgYmVjYXVzZVxuICAgICAgICAvLyB0aGUgaW50ZXJpbSB0aWxlIGlzIGluIHBsYWNlIGFscmVhZHlcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uXyA9IDA7XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgICAgfVxuICAgICAgdGlsZSA9IHRpbGUuaW50ZXJpbVRpbGU7XG4gICAgfSB3aGlsZSAodGlsZSk7XG5cbiAgICAvLyB3ZSBjYW4gbm90IGZpbmQgYSBiZXR0ZXIgdGlsZVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdvZXMgdGhyb3VnaCB0aGUgY2hhaW4gb2YgaW50ZXJpbSB0aWxlcyBhbmQgZGlzY2FyZHMgc2VjdGlvbnMgb2YgdGhlIGNoYWluXG4gICAqIHRoYXQgYXJlIG5vIGxvbmdlciByZWxldmFudC5cbiAgICovXG4gIHJlZnJlc2hJbnRlcmltQ2hhaW4oKSB7XG4gICAgaWYgKCF0aGlzLmludGVyaW1UaWxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHRpbGUgPSB0aGlzLmludGVyaW1UaWxlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge1RpbGV9XG4gICAgICovXG4gICAgbGV0IHByZXYgPSB0aGlzO1xuXG4gICAgZG8ge1xuICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgIC8vd2UgaGF2ZSBhIGxvYWRlZCB0aWxlLCB3ZSBjYW4gZGlzY2FyZCB0aGUgcmVzdCBvZiB0aGUgbGlzdFxuICAgICAgICAvL3dlIHdvdWxkIGNvdWxkIGFib3J0IGFueSBMT0FESU5HIHRpbGUgcmVxdWVzdFxuICAgICAgICAvL29sZGVyIHRoYW4gdGhpcyB0aWxlIChpLmUuIGFueSBMT0FESU5HIHRpbGUgZm9sbG93aW5nIHRoaXMgZW50cnkgaW4gdGhlIGNoYWluKVxuICAgICAgICB0aWxlLmludGVyaW1UaWxlID0gbnVsbDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2UgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgICAvL2tlZXAgdGhpcyBMT0FESU5HIHRpbGUgYW55IGxvYWRlZCB0aWxlcyBsYXRlciBpbiB0aGUgY2hhaW4gYXJlXG4gICAgICAgIC8vb2xkZXIgdGhhbiB0aGlzIHRpbGUsIHNvIHdlJ3JlIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhlIHJlcXVlc3RcbiAgICAgICAgcHJldiA9IHRpbGU7XG4gICAgICB9IGVsc2UgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAvL3RoZSBoZWFkIG9mIHRoZSBsaXN0IGlzIHRoZSBtb3N0IGN1cnJlbnQgdGlsZSwgd2UgZG9uJ3QgbmVlZFxuICAgICAgICAvL3RvIHN0YXJ0IGFueSBvdGhlciByZXF1ZXN0cyBmb3IgdGhpcyBjaGFpblxuICAgICAgICBwcmV2LmludGVyaW1UaWxlID0gdGlsZS5pbnRlcmltVGlsZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByZXYgPSB0aWxlO1xuICAgICAgfVxuICAgICAgdGlsZSA9IHByZXYuaW50ZXJpbVRpbGU7XG4gICAgfSB3aGlsZSAodGlsZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB0aWxlIGNvb3JkaW5hdGUgZm9yIHRoaXMgdGlsZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaGUgdGlsZSBjb29yZGluYXRlLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRUaWxlQ29vcmQoKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZUNvb3JkO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IFN0YXRlLlxuICAgKi9cbiAgZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgc3RhdGUgb2YgdGhpcyB0aWxlLiBJZiB5b3Ugd3JpdGUgeW91ciBvd24ge0BsaW5rIG1vZHVsZTpvbC9UaWxlfkxvYWRGdW5jdGlvbiB0aWxlTG9hZEZ1bmN0aW9ufSAsXG4gICAqIGl0IGlzIGltcG9ydGFudCB0byBzZXQgdGhlIHN0YXRlIGNvcnJlY3RseSB0byB7QGxpbmsgbW9kdWxlOm9sL1RpbGVTdGF0ZX5FUlJPUn1cbiAgICogd2hlbiB0aGUgdGlsZSBjYW5ub3QgYmUgbG9hZGVkLiBPdGhlcndpc2UgdGhlIHRpbGUgY2Fubm90IGJlIHJlbW92ZWQgZnJvbVxuICAgKiB0aGUgdGlsZSBxdWV1ZSBhbmQgd2lsbCBibG9jayBvdGhlciByZXF1ZXN0cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fSBzdGF0ZSBTdGF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0U3RhdGUoc3RhdGUpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSAhPT0gVGlsZVN0YXRlLkVSUk9SICYmIHRoaXMuc3RhdGUgPiBzdGF0ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaWxlIGxvYWQgc2VxdWVuY2UgdmlvbGF0aW9uJyk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIHRoZSBpbWFnZSBvciByZXRyeSBpZiBsb2FkaW5nIHByZXZpb3VzbHkgZmFpbGVkLlxuICAgKiBMb2FkaW5nIGlzIHRha2VuIGNhcmUgb2YgYnkgdGhlIHRpbGUgcXVldWUsIGFuZCBjYWxsaW5nIHRoaXMgbWV0aG9kIGlzXG4gICAqIG9ubHkgbmVlZGVkIGZvciBwcmVsb2FkaW5nIG9yIGZvciByZWxvYWRpbmcgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICogQGFic3RyYWN0XG4gICAqIEBhcGlcbiAgICovXG4gIGxvYWQoKSB7XG4gICAgYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFscGhhIHZhbHVlIGZvciByZW5kZXJpbmcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBbiBpZCBmb3IgdGhlIHJlbmRlcmVyLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZSBUaGUgcmVuZGVyIGZyYW1lIHRpbWUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLlxuICAgKi9cbiAgZ2V0QWxwaGEoaWQsIHRpbWUpIHtcbiAgICBpZiAoIXRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIGxldCBzdGFydCA9IHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdO1xuICAgIGlmICghc3RhcnQpIHtcbiAgICAgIHN0YXJ0ID0gdGltZTtcbiAgICAgIHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdID0gc3RhcnQ7XG4gICAgfSBlbHNlIGlmIChzdGFydCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIGNvbnN0IGRlbHRhID0gdGltZSAtIHN0YXJ0ICsgMTAwMCAvIDYwOyAvLyBhdm9pZCByZW5kZXJpbmcgYXQgMFxuICAgIGlmIChkZWx0YSA+PSB0aGlzLnRyYW5zaXRpb25fKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgcmV0dXJuIGVhc2VJbihkZWx0YSAvIHRoaXMudHJhbnNpdGlvbl8pO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiBhIHRpbGUgaXMgaW4gYW4gYWxwaGEgdHJhbnNpdGlvbi4gIEEgdGlsZSBpcyBjb25zaWRlcmVkIGluXG4gICAqIHRyYW5zaXRpb24gaWYgdGlsZS5nZXRBbHBoYSgpIGhhcyBub3QgeWV0IGJlZW4gY2FsbGVkIG9yIGhhcyBiZWVuIGNhbGxlZFxuICAgKiBhbmQgcmV0dXJuZWQgMS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIEFuIGlkIGZvciB0aGUgcmVuZGVyZXIuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0aWxlIGlzIGluIHRyYW5zaXRpb24uXG4gICAqL1xuICBpblRyYW5zaXRpb24oaWQpIHtcbiAgICBpZiAoIXRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdICE9PSAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXJrIGEgdHJhbnNpdGlvbiBhcyBjb21wbGV0ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIEFuIGlkIGZvciB0aGUgcmVuZGVyZXIuXG4gICAqL1xuICBlbmRUcmFuc2l0aW9uKGlkKSB7XG4gICAgaWYgKHRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgIHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdID0gLTE7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpbGU7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvVGlsZVJhbmdlXG4gKi9cblxuLyoqXG4gKiBBIHJlcHJlc2VudGF0aW9uIG9mIGEgY29udGlndW91cyBibG9jayBvZiB0aWxlcy4gIEEgdGlsZSByYW5nZSBpcyBzcGVjaWZpZWRcbiAqIGJ5IGl0cyBtaW4vbWF4IHRpbGUgY29vcmRpbmF0ZXMgYW5kIGlzIGluY2x1c2l2ZSBvZiBjb29yZGluYXRlcy5cbiAqL1xuY2xhc3MgVGlsZVJhbmdlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5YIE1pbmltdW0gWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFggTWF4aW11bSBYLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhZIE1heGltdW0gWS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG1pblgsIG1heFgsIG1pblksIG1heFkpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWluWCA9IG1pblg7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4WCA9IG1heFg7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWluWSA9IG1pblk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4WSA9IG1heFk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIHRpbGUgY29vcmRpbmF0ZS5cbiAgICovXG4gIGNvbnRhaW5zKHRpbGVDb29yZCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5zWFkodGlsZUNvb3JkWzFdLCB0aWxlQ29vcmRbMl0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMuXG4gICAqL1xuICBjb250YWluc1RpbGVSYW5nZSh0aWxlUmFuZ2UpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5taW5YIDw9IHRpbGVSYW5nZS5taW5YICYmXG4gICAgICB0aWxlUmFuZ2UubWF4WCA8PSB0aGlzLm1heFggJiZcbiAgICAgIHRoaXMubWluWSA8PSB0aWxlUmFuZ2UubWluWSAmJlxuICAgICAgdGlsZVJhbmdlLm1heFkgPD0gdGhpcy5tYXhZXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGNvb3JkaW5hdGUuXG4gICAqL1xuICBjb250YWluc1hZKHgsIHkpIHtcbiAgICByZXR1cm4gdGhpcy5taW5YIDw9IHggJiYgeCA8PSB0aGlzLm1heFggJiYgdGhpcy5taW5ZIDw9IHkgJiYgeSA8PSB0aGlzLm1heFk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBFcXVhbHMuXG4gICAqL1xuICBlcXVhbHModGlsZVJhbmdlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubWluWCA9PSB0aWxlUmFuZ2UubWluWCAmJlxuICAgICAgdGhpcy5taW5ZID09IHRpbGVSYW5nZS5taW5ZICYmXG4gICAgICB0aGlzLm1heFggPT0gdGlsZVJhbmdlLm1heFggJiZcbiAgICAgIHRoaXMubWF4WSA9PSB0aWxlUmFuZ2UubWF4WVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgKi9cbiAgZXh0ZW5kKHRpbGVSYW5nZSkge1xuICAgIGlmICh0aWxlUmFuZ2UubWluWCA8IHRoaXMubWluWCkge1xuICAgICAgdGhpcy5taW5YID0gdGlsZVJhbmdlLm1pblg7XG4gICAgfVxuICAgIGlmICh0aWxlUmFuZ2UubWF4WCA+IHRoaXMubWF4WCkge1xuICAgICAgdGhpcy5tYXhYID0gdGlsZVJhbmdlLm1heFg7XG4gICAgfVxuICAgIGlmICh0aWxlUmFuZ2UubWluWSA8IHRoaXMubWluWSkge1xuICAgICAgdGhpcy5taW5ZID0gdGlsZVJhbmdlLm1pblk7XG4gICAgfVxuICAgIGlmICh0aWxlUmFuZ2UubWF4WSA+IHRoaXMubWF4WSkge1xuICAgICAgdGhpcy5tYXhZID0gdGlsZVJhbmdlLm1heFk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gSGVpZ2h0LlxuICAgKi9cbiAgZ2V0SGVpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLm1heFkgLSB0aGlzLm1pblkgKyAxO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBTaXplLlxuICAgKi9cbiAgZ2V0U2l6ZSgpIHtcbiAgICByZXR1cm4gW3RoaXMuZ2V0V2lkdGgoKSwgdGhpcy5nZXRIZWlnaHQoKV07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBXaWR0aC5cbiAgICovXG4gIGdldFdpZHRoKCkge1xuICAgIHJldHVybiB0aGlzLm1heFggLSB0aGlzLm1pblggKyAxO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSW50ZXJzZWN0cy5cbiAgICovXG4gIGludGVyc2VjdHModGlsZVJhbmdlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubWluWCA8PSB0aWxlUmFuZ2UubWF4WCAmJlxuICAgICAgdGhpcy5tYXhYID49IHRpbGVSYW5nZS5taW5YICYmXG4gICAgICB0aGlzLm1pblkgPD0gdGlsZVJhbmdlLm1heFkgJiZcbiAgICAgIHRoaXMubWF4WSA+PSB0aWxlUmFuZ2UubWluWVxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWCBNaW5pbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WCBNYXhpbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WSBNYXhpbXVtIFkuXG4gKiBAcGFyYW0ge1RpbGVSYW5nZX0gW3RpbGVSYW5nZV0gVGlsZVJhbmdlLlxuICogQHJldHVybiB7VGlsZVJhbmdlfSBUaWxlIHJhbmdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGUobWluWCwgbWF4WCwgbWluWSwgbWF4WSwgdGlsZVJhbmdlKSB7XG4gIGlmICh0aWxlUmFuZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgIHRpbGVSYW5nZS5taW5YID0gbWluWDtcbiAgICB0aWxlUmFuZ2UubWF4WCA9IG1heFg7XG4gICAgdGlsZVJhbmdlLm1pblkgPSBtaW5ZO1xuICAgIHRpbGVSYW5nZS5tYXhZID0gbWF4WTtcbiAgICByZXR1cm4gdGlsZVJhbmdlO1xuICB9XG4gIHJldHVybiBuZXcgVGlsZVJhbmdlKG1pblgsIG1heFgsIG1pblksIG1heFkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBUaWxlUmFuZ2U7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvVGlsZVN0YXRlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIElETEU6IDAsXG4gIExPQURJTkc6IDEsXG4gIExPQURFRDogMixcbiAgLyoqXG4gICAqIEluZGljYXRlcyB0aGF0IHRpbGUgbG9hZGluZyBmYWlsZWRcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIEVSUk9SOiAzLFxuICBFTVBUWTogNCxcbn07XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvVmlld1Byb3BlcnR5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIENFTlRFUjogJ2NlbnRlcicsXG4gIFJFU09MVVRJT046ICdyZXNvbHV0aW9uJyxcbiAgUk9UQVRJT046ICdyb3RhdGlvbicsXG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NlbnRlcmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHtjbGFtcH0gZnJvbSAnLi9tYXRoLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZCksIG51bWJlciwgaW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemUsIGJvb2xlYW49LCBBcnJheTxudW1iZXI+PSk6IChpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWQpfSBUeXBlXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb25seUNlbnRlciBJZiB0cnVlLCB0aGUgY29uc3RyYWludCB3aWxsIG9ubHkgYXBwbHkgdG8gdGhlIHZpZXcgY2VudGVyLlxuICogQHBhcmFtIHtib29sZWFufSBzbW9vdGggSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIGdvIHNsaWdodGx5IG91dCBvZiB0aGUgZ2l2ZW4gZXh0ZW50XG4gKiAob25seSBkdXJpbmcgaW50ZXJhY3Rpb24gYW5kIGFuaW1hdGlvbikuXG4gKiBAcmV0dXJuIHtUeXBlfSBUaGUgY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUV4dGVudChleHRlbnQsIG9ubHlDZW50ZXIsIHNtb290aCkge1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgQ2VudGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZTsgdW51c2VkIGlmIGBvbmx5Q2VudGVyYCB3YXMgc3BlY2lmaWVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtjZW50ZXJTaGlmdF0gU2hpZnQgYmV0d2VlbiBtYXAgY2VudGVyIGFuZCB2aWV3cG9ydCBjZW50ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGNlbnRlciwgcmVzb2x1dGlvbiwgc2l6ZSwgaXNNb3ZpbmcsIGNlbnRlclNoaWZ0KSB7XG4gICAgICBpZiAoIWNlbnRlcikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKCFyZXNvbHV0aW9uICYmICFvbmx5Q2VudGVyKSB7XG4gICAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgICB9XG4gICAgICBjb25zdCB2aWV3V2lkdGggPSBvbmx5Q2VudGVyID8gMCA6IHNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgY29uc3Qgdmlld0hlaWdodCA9IG9ubHlDZW50ZXIgPyAwIDogc2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICBjb25zdCBzaGlmdFggPSBjZW50ZXJTaGlmdCA/IGNlbnRlclNoaWZ0WzBdIDogMDtcbiAgICAgIGNvbnN0IHNoaWZ0WSA9IGNlbnRlclNoaWZ0ID8gY2VudGVyU2hpZnRbMV0gOiAwO1xuICAgICAgbGV0IG1pblggPSBleHRlbnRbMF0gKyB2aWV3V2lkdGggLyAyICsgc2hpZnRYO1xuICAgICAgbGV0IG1heFggPSBleHRlbnRbMl0gLSB2aWV3V2lkdGggLyAyICsgc2hpZnRYO1xuICAgICAgbGV0IG1pblkgPSBleHRlbnRbMV0gKyB2aWV3SGVpZ2h0IC8gMiArIHNoaWZ0WTtcbiAgICAgIGxldCBtYXhZID0gZXh0ZW50WzNdIC0gdmlld0hlaWdodCAvIDIgKyBzaGlmdFk7XG5cbiAgICAgIC8vIG5vdGU6IHdoZW4gem9vbWluZyBvdXQgb2YgYm91bmRzLCBtaW4gYW5kIG1heCB2YWx1ZXMgZm9yIHggYW5kIHkgbWF5XG4gICAgICAvLyBlbmQgdXAgaW52ZXJ0ZWQgKG1pbiA+IG1heCk7IHRoaXMgaGFzIHRvIGJlIGFjY291bnRlZCBmb3JcbiAgICAgIGlmIChtaW5YID4gbWF4WCkge1xuICAgICAgICBtaW5YID0gKG1heFggKyBtaW5YKSAvIDI7XG4gICAgICAgIG1heFggPSBtaW5YO1xuICAgICAgfVxuICAgICAgaWYgKG1pblkgPiBtYXhZKSB7XG4gICAgICAgIG1pblkgPSAobWF4WSArIG1pblkpIC8gMjtcbiAgICAgICAgbWF4WSA9IG1pblk7XG4gICAgICB9XG5cbiAgICAgIGxldCB4ID0gY2xhbXAoY2VudGVyWzBdLCBtaW5YLCBtYXhYKTtcbiAgICAgIGxldCB5ID0gY2xhbXAoY2VudGVyWzFdLCBtaW5ZLCBtYXhZKTtcblxuICAgICAgLy8gZHVyaW5nIGFuIGludGVyYWN0aW9uLCBhbGxvdyBzb21lIG92ZXJzY3JvbGxcbiAgICAgIGlmIChpc01vdmluZyAmJiBzbW9vdGggJiYgcmVzb2x1dGlvbikge1xuICAgICAgICBjb25zdCByYXRpbyA9IDMwICogcmVzb2x1dGlvbjtcbiAgICAgICAgeCArPVxuICAgICAgICAgIC1yYXRpbyAqIE1hdGgubG9nKDEgKyBNYXRoLm1heCgwLCBtaW5YIC0gY2VudGVyWzBdKSAvIHJhdGlvKSArXG4gICAgICAgICAgcmF0aW8gKiBNYXRoLmxvZygxICsgTWF0aC5tYXgoMCwgY2VudGVyWzBdIC0gbWF4WCkgLyByYXRpbyk7XG4gICAgICAgIHkgKz1cbiAgICAgICAgICAtcmF0aW8gKiBNYXRoLmxvZygxICsgTWF0aC5tYXgoMCwgbWluWSAtIGNlbnRlclsxXSkgLyByYXRpbykgK1xuICAgICAgICAgIHJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIGNlbnRlclsxXSAtIG1heFkpIC8gcmF0aW8pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gW3gsIHldO1xuICAgIH1cbiAgKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBDZW50ZXIuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vbmUoY2VudGVyKSB7XG4gIHJldHVybiBjZW50ZXI7XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVzb2x1dGlvbmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHtjbGFtcH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7Z2V0SGVpZ2h0LCBnZXRXaWR0aH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHtsaW5lYXJGaW5kTmVhcmVzdH0gZnJvbSAnLi9hcnJheS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChudW1iZXJ8dW5kZWZpbmVkKSwgbnVtYmVyLCBpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZSwgYm9vbGVhbj0pOiAobnVtYmVyfHVuZGVmaW5lZCl9IFR5cGVcbiAqL1xuXG4vKipcbiAqIFJldHVybnMgYSBtb2RpZmllZCByZXNvbHV0aW9uIHRha2luZyBpbnRvIGFjY291bnQgdGhlIHZpZXdwb3J0IHNpemUgYW5kIG1heGltdW1cbiAqIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvblxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IG1heEV4dGVudCBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gdmlld3BvcnRTaXplIFZpZXdwb3J0IHNpemUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3dGdWxsRXh0ZW50IFdoZXRoZXIgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IENhcHBlZCByZXNvbHV0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKFxuICByZXNvbHV0aW9uLFxuICBtYXhFeHRlbnQsXG4gIHZpZXdwb3J0U2l6ZSxcbiAgc2hvd0Z1bGxFeHRlbnRcbikge1xuICBjb25zdCB4UmVzb2x1dGlvbiA9IGdldFdpZHRoKG1heEV4dGVudCkgLyB2aWV3cG9ydFNpemVbMF07XG4gIGNvbnN0IHlSZXNvbHV0aW9uID0gZ2V0SGVpZ2h0KG1heEV4dGVudCkgLyB2aWV3cG9ydFNpemVbMV07XG5cbiAgaWYgKHNob3dGdWxsRXh0ZW50KSB7XG4gICAgcmV0dXJuIE1hdGgubWluKHJlc29sdXRpb24sIE1hdGgubWF4KHhSZXNvbHV0aW9uLCB5UmVzb2x1dGlvbikpO1xuICB9XG4gIHJldHVybiBNYXRoLm1pbihyZXNvbHV0aW9uLCBNYXRoLm1pbih4UmVzb2x1dGlvbiwgeVJlc29sdXRpb24pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbW9kaWZpZWQgcmVzb2x1dGlvbiB0byBiZSBiZXR3ZWVuIG1heFJlc29sdXRpb24gYW5kIG1pblJlc29sdXRpb24gd2hpbGVcbiAqIHN0aWxsIGFsbG93aW5nIHRoZSB2YWx1ZSB0byBiZSBzbGlnaHRseSBvdXQgb2YgYm91bmRzLlxuICogTm90ZTogdGhlIGNvbXB1dGF0aW9uIGlzIGJhc2VkIG9uIHRoZSBsb2dhcml0aG0gZnVuY3Rpb24gKGxuKTpcbiAqICAtIGF0IDEsIGxuKHgpIGlzIDBcbiAqICAtIGFib3ZlIDEsIGxuKHgpIGtlZXBzIGluY3JlYXNpbmcgYnV0IGF0IGEgbXVjaCBzbG93ZXIgcGFjZSB0aGFuIHhcbiAqIFRoZSBmaW5hbCByZXN1bHQgaXMgY2xhbXBlZCB0byBwcmV2ZW50IGdldHRpbmcgdG9vIGZhciBhd2F5IGZyb20gYm91bmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluIHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNtb290aGVkIHJlc29sdXRpb24uXG4gKi9cbmZ1bmN0aW9uIGdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24pIHtcbiAgbGV0IHJlc3VsdCA9IE1hdGgubWluKHJlc29sdXRpb24sIG1heFJlc29sdXRpb24pO1xuICBjb25zdCByYXRpbyA9IDUwO1xuXG4gIHJlc3VsdCAqPVxuICAgIE1hdGgubG9nKDEgKyByYXRpbyAqIE1hdGgubWF4KDAsIHJlc29sdXRpb24gLyBtYXhSZXNvbHV0aW9uIC0gMSkpIC8gcmF0aW8gK1xuICAgIDE7XG4gIGlmIChtaW5SZXNvbHV0aW9uKSB7XG4gICAgcmVzdWx0ID0gTWF0aC5tYXgocmVzdWx0LCBtaW5SZXNvbHV0aW9uKTtcbiAgICByZXN1bHQgLz1cbiAgICAgIE1hdGgubG9nKDEgKyByYXRpbyAqIE1hdGgubWF4KDAsIG1pblJlc29sdXRpb24gLyByZXNvbHV0aW9uIC0gMSkpIC9cbiAgICAgICAgcmF0aW8gK1xuICAgICAgMTtcbiAgfVxuICByZXR1cm4gY2xhbXAocmVzdWx0LCBtaW5SZXNvbHV0aW9uIC8gMiwgbWF4UmVzb2x1dGlvbiAqIDIpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gcmVzb2x1dGlvbnMgUmVzb2x1dGlvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtzbW9vdGhdIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYmUgYWJsZSB0byBzbGlnaHRseSBleGNlZWQgcmVzb2x1dGlvbiBsaW1pdHMuIERlZmF1bHQ6IHRydWUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW21heEV4dGVudF0gTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Nob3dGdWxsRXh0ZW50XSBJZiB0cnVlLCBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuIERlZmF1bHQ6IGZhbHNlLlxuICogQHJldHVybiB7VHlwZX0gWm9vbSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNuYXBUb1Jlc29sdXRpb25zKFxuICByZXNvbHV0aW9ucyxcbiAgc21vb3RoLFxuICBtYXhFeHRlbnQsXG4gIHNob3dGdWxsRXh0ZW50XG4pIHtcbiAgc21vb3RoID0gc21vb3RoICE9PSB1bmRlZmluZWQgPyBzbW9vdGggOiB0cnVlO1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBpc01vdmluZykge1xuICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBtYXhSZXNvbHV0aW9uID0gcmVzb2x1dGlvbnNbMF07XG4gICAgICAgIGNvbnN0IG1pblJlc29sdXRpb24gPSByZXNvbHV0aW9uc1tyZXNvbHV0aW9ucy5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgY2FwcGVkTWF4UmVzID0gbWF4RXh0ZW50XG4gICAgICAgICAgPyBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKFxuICAgICAgICAgICAgICBtYXhSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICBtYXhFeHRlbnQsXG4gICAgICAgICAgICAgIHNpemUsXG4gICAgICAgICAgICAgIHNob3dGdWxsRXh0ZW50XG4gICAgICAgICAgICApXG4gICAgICAgICAgOiBtYXhSZXNvbHV0aW9uO1xuXG4gICAgICAgIC8vIGR1cmluZyBpbnRlcmFjdGluZyBvciBhbmltYXRpbmcsIGFsbG93IGludGVybWVkaWFyeSB2YWx1ZXNcbiAgICAgICAgaWYgKGlzTW92aW5nKSB7XG4gICAgICAgICAgaWYgKCFzbW9vdGgpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGFtcChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24oXG4gICAgICAgICAgICByZXNvbHV0aW9uLFxuICAgICAgICAgICAgY2FwcGVkTWF4UmVzLFxuICAgICAgICAgICAgbWluUmVzb2x1dGlvblxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYXBwZWQgPSBNYXRoLm1pbihjYXBwZWRNYXhSZXMsIHJlc29sdXRpb24pO1xuICAgICAgICBjb25zdCB6ID0gTWF0aC5mbG9vcihsaW5lYXJGaW5kTmVhcmVzdChyZXNvbHV0aW9ucywgY2FwcGVkLCBkaXJlY3Rpb24pKTtcbiAgICAgICAgaWYgKHJlc29sdXRpb25zW3pdID4gY2FwcGVkTWF4UmVzICYmIHogPCByZXNvbHV0aW9ucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdXRpb25zW3ogKyAxXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzb2x1dGlvbnNbel07XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gcG93ZXIgUG93ZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4UmVzb2x1dGlvbiBNYXhpbXVtIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW21pblJlc29sdXRpb25dIE1pbmltdW0gcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Ntb290aF0gSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIHNsaWdodGx5IGV4Y2VlZCByZXNvbHV0aW9uIGxpbWl0cy4gRGVmYXVsdDogdHJ1ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbbWF4RXh0ZW50XSBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFufSBbc2hvd0Z1bGxFeHRlbnRdIElmIHRydWUsIGFsbG93cyB1cyB0byBzaG93IHRoZSBmdWxsIGV4dGVudC4gRGVmYXVsdDogZmFsc2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBab29tIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvUG93ZXIoXG4gIHBvd2VyLFxuICBtYXhSZXNvbHV0aW9uLFxuICBtaW5SZXNvbHV0aW9uLFxuICBzbW9vdGgsXG4gIG1heEV4dGVudCxcbiAgc2hvd0Z1bGxFeHRlbnRcbikge1xuICBzbW9vdGggPSBzbW9vdGggIT09IHVuZGVmaW5lZCA/IHNtb290aCA6IHRydWU7XG4gIG1pblJlc29sdXRpb24gPSBtaW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBtaW5SZXNvbHV0aW9uIDogMDtcblxuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBpc01vdmluZykge1xuICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBjYXBwZWRNYXhSZXMgPSBtYXhFeHRlbnRcbiAgICAgICAgICA/IGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24oXG4gICAgICAgICAgICAgIG1heFJlc29sdXRpb24sXG4gICAgICAgICAgICAgIG1heEV4dGVudCxcbiAgICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgICAgc2hvd0Z1bGxFeHRlbnRcbiAgICAgICAgICAgIClcbiAgICAgICAgICA6IG1heFJlc29sdXRpb247XG5cbiAgICAgICAgLy8gZHVyaW5nIGludGVyYWN0aW5nIG9yIGFuaW1hdGluZywgYWxsb3cgaW50ZXJtZWRpYXJ5IHZhbHVlc1xuICAgICAgICBpZiAoaXNNb3ZpbmcpIHtcbiAgICAgICAgICBpZiAoIXNtb290aCkge1xuICAgICAgICAgICAgcmV0dXJuIGNsYW1wKHJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIGNhcHBlZE1heFJlcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbihcbiAgICAgICAgICAgIHJlc29sdXRpb24sXG4gICAgICAgICAgICBjYXBwZWRNYXhSZXMsXG4gICAgICAgICAgICBtaW5SZXNvbHV0aW9uXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRvbGVyYW5jZSA9IDFlLTk7XG4gICAgICAgIGNvbnN0IG1pblpvb21MZXZlbCA9IE1hdGguY2VpbChcbiAgICAgICAgICBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gY2FwcGVkTWF4UmVzKSAvIE1hdGgubG9nKHBvd2VyKSAtIHRvbGVyYW5jZVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSAtZGlyZWN0aW9uICogKDAuNSAtIHRvbGVyYW5jZSkgKyAwLjU7XG4gICAgICAgIGNvbnN0IGNhcHBlZCA9IE1hdGgubWluKGNhcHBlZE1heFJlcywgcmVzb2x1dGlvbik7XG4gICAgICAgIGNvbnN0IGNhcHBlZFpvb21MZXZlbCA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIGNhcHBlZCkgLyBNYXRoLmxvZyhwb3dlcikgKyBvZmZzZXRcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgem9vbUxldmVsID0gTWF0aC5tYXgobWluWm9vbUxldmVsLCBjYXBwZWRab29tTGV2ZWwpO1xuICAgICAgICBjb25zdCBuZXdSZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHBvd2VyLCB6b29tTGV2ZWwpO1xuICAgICAgICByZXR1cm4gY2xhbXAobmV3UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICApO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtzbW9vdGhdIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYmUgYWJsZSB0byBzbGlnaHRseSBleGNlZWQgcmVzb2x1dGlvbiBsaW1pdHMuIERlZmF1bHQ6IHRydWUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW21heEV4dGVudF0gTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Nob3dGdWxsRXh0ZW50XSBJZiB0cnVlLCBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuIERlZmF1bHQ6IGZhbHNlLlxuICogQHJldHVybiB7VHlwZX0gWm9vbSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1pbk1heFJlc29sdXRpb24oXG4gIG1heFJlc29sdXRpb24sXG4gIG1pblJlc29sdXRpb24sXG4gIHNtb290aCxcbiAgbWF4RXh0ZW50LFxuICBzaG93RnVsbEV4dGVudFxuKSB7XG4gIHNtb290aCA9IHNtb290aCAhPT0gdW5kZWZpbmVkID8gc21vb3RoIDogdHJ1ZTtcblxuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBpc01vdmluZykge1xuICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBjYXBwZWRNYXhSZXMgPSBtYXhFeHRlbnRcbiAgICAgICAgICA/IGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24oXG4gICAgICAgICAgICAgIG1heFJlc29sdXRpb24sXG4gICAgICAgICAgICAgIG1heEV4dGVudCxcbiAgICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgICAgc2hvd0Z1bGxFeHRlbnRcbiAgICAgICAgICAgIClcbiAgICAgICAgICA6IG1heFJlc29sdXRpb247XG5cbiAgICAgICAgaWYgKCFzbW9vdGggfHwgIWlzTW92aW5nKSB7XG4gICAgICAgICAgcmV0dXJuIGNsYW1wKHJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIGNhcHBlZE1heFJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uKFxuICAgICAgICAgIHJlc29sdXRpb24sXG4gICAgICAgICAgY2FwcGVkTWF4UmVzLFxuICAgICAgICAgIG1pblJlc29sdXRpb25cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICApO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1ZpZXdcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4vVmlld0hpbnQuanMnO1xuaW1wb3J0IFZpZXdQcm9wZXJ0eSBmcm9tICcuL1ZpZXdQcm9wZXJ0eS5qcyc7XG5pbXBvcnQge0RFRkFVTFRfVElMRV9TSVpFfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQge1xuICBNRVRFUlNfUEVSX1VOSVQsXG4gIGNyZWF0ZVByb2plY3Rpb24sXG4gIGRpc2FibGVDb29yZGluYXRlV2FybmluZyxcbiAgZnJvbVVzZXJDb29yZGluYXRlLFxuICBmcm9tVXNlckV4dGVudCxcbiAgZ2V0VXNlclByb2plY3Rpb24sXG4gIHRvVXNlckNvb3JkaW5hdGUsXG4gIHRvVXNlckV4dGVudCxcbn0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7Vk9JRH0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHtcbiAgYWRkIGFzIGFkZENvb3JkaW5hdGUsXG4gIGVxdWFscyBhcyBjb29yZGluYXRlc0VxdWFsLFxuICBlcXVhbHMsXG4gIHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlLFxufSBmcm9tICcuL2Nvb3JkaW5hdGUuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge25vbmUgYXMgY2VudGVyTm9uZSwgY3JlYXRlRXh0ZW50fSBmcm9tICcuL2NlbnRlcmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHtjbGFtcCwgbW9kdWxvfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHtcbiAgY3JlYXRlTWluTWF4UmVzb2x1dGlvbixcbiAgY3JlYXRlU25hcFRvUG93ZXIsXG4gIGNyZWF0ZVNuYXBUb1Jlc29sdXRpb25zLFxufSBmcm9tICcuL3Jlc29sdXRpb25jb25zdHJhaW50LmpzJztcbmltcG9ydCB7XG4gIGNyZWF0ZVNuYXBUb04sXG4gIGNyZWF0ZVNuYXBUb1plcm8sXG4gIGRpc2FibGUsXG4gIG5vbmUgYXMgcm90YXRpb25Ob25lLFxufSBmcm9tICcuL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQge2Vhc2VPdXQsIGluQW5kT3V0fSBmcm9tICcuL2Vhc2luZy5qcyc7XG5pbXBvcnQge1xuICBnZXRDZW50ZXIsXG4gIGdldEZvclZpZXdBbmRTaXplLFxuICBnZXRIZWlnaHQsXG4gIGdldFdpZHRoLFxuICBpc0VtcHR5LFxufSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQge2xpbmVhckZpbmROZWFyZXN0fSBmcm9tICcuL2FycmF5LmpzJztcbmltcG9ydCB7ZnJvbUV4dGVudCBhcyBwb2x5Z29uRnJvbUV4dGVudH0gZnJvbSAnLi9nZW9tL1BvbHlnb24uanMnO1xuXG4vKipcbiAqIEFuIGFuaW1hdGlvbiBjb25maWd1cmF0aW9uXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gQW5pbWF0aW9uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbc291cmNlQ2VudGVyXSBTb3VyY2UgY2VudGVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW3RhcmdldENlbnRlcl0gVGFyZ2V0IGNlbnRlci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc291cmNlUmVzb2x1dGlvbl0gU291cmNlIHJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RhcmdldFJlc29sdXRpb25dIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzb3VyY2VSb3RhdGlvbl0gU291cmNlIHJvdGF0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0YXJnZXRSb3RhdGlvbl0gVGFyZ2V0IHJvdGF0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gQW5jaG9yLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHN0YXJ0IFN0YXJ0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGR1cmF0aW9uIER1cmF0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBjb21wbGV0ZSBDb21wbGV0ZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IGVhc2luZyBFYXNpbmcuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOnZvaWR9IGNhbGxiYWNrIENhbGxiYWNrLlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQ29uc3RyYWludHNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jZW50ZXJjb25zdHJhaW50LmpzXCIpLlR5cGV9IGNlbnRlciBDZW50ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3JvdGF0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZpdE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtzaXplXSBUaGUgc2l6ZSBpbiBwaXhlbHMgb2YgdGhlIGJveCB0byBmaXRcbiAqIHRoZSBleHRlbnQgaW50by4gRGVmYXVsdCBpcyB0aGUgY3VycmVudCBzaXplIG9mIHRoZSBmaXJzdCBtYXAgaW4gdGhlIERPTSB0aGF0XG4gKiB1c2VzIHRoaXMgdmlldywgb3IgYFsxMDAsIDEwMF1gIGlmIG5vIHN1Y2ggbWFwIGlzIGZvdW5kLlxuICogQHByb3BlcnR5IHshQXJyYXk8bnVtYmVyPn0gW3BhZGRpbmc9WzAsIDAsIDAsIDBdXSBQYWRkaW5nIChpbiBwaXhlbHMpIHRvIGJlXG4gKiBjbGVhcmVkIGluc2lkZSB0aGUgdmlldy4gVmFsdWVzIGluIHRoZSBhcnJheSBhcmUgdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0XG4gKiBwYWRkaW5nLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbmVhcmVzdD1mYWxzZV0gSWYgdGhlIHZpZXcgYGNvbnN0cmFpblJlc29sdXRpb25gIG9wdGlvbiBpcyBgdHJ1ZWAsXG4gKiBnZXQgdGhlIG5lYXJlc3QgZXh0ZW50IGluc3RlYWQgb2YgdGhlIGNsb3Nlc3QgdGhhdCBhY3R1YWxseSBmaXRzIHRoZSB2aWV3LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uPTBdIE1pbmltdW0gcmVzb2x1dGlvbiB0aGF0IHdlIHpvb20gdG8uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIE1heGltdW0gem9vbSBsZXZlbCB0aGF0IHdlIHpvb20gdG8uIElmXG4gKiBgbWluUmVzb2x1dGlvbmAgaXMgZ2l2ZW4sIHRoaXMgcHJvcGVydHkgaXMgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb25dIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEJ5IGRlZmF1bHQsIHRoZXJlIGlzIG5vIGFuaW1hdGlvbiB0byB0aGUgdGFyZ2V0IGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IFtlYXNpbmddIFRoZSBlYXNpbmcgZnVuY3Rpb24gdXNlZCBkdXJpbmdcbiAqIHRoZSBhbmltYXRpb24gKGRlZmF1bHRzIHRvIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nLmluQW5kT3V0fSkuXG4gKiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggZnJhbWUgd2l0aCBhIG51bWJlciByZXByZXNlbnRpbmcgYVxuICogZnJhY3Rpb24gb2YgdGhlIGFuaW1hdGlvbidzIGR1cmF0aW9uLiAgVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXJcbiAqIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRvd2FyZCB0aGUgZGVzdGluYXRpb24gc3RhdGUuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOnZvaWR9IFtjYWxsYmFja10gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIHZpZXcgaXMgaW5cbiAqIGl0cyBmaW5hbCBwb3NpdGlvbi4gVGhlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHdpdGggYHRydWVgIGlmIHRoZSBhbmltYXRpb25cbiAqIHNlcmllcyBjb21wbGV0ZWQgb24gaXRzIG93biBvciBgZmFsc2VgIGlmIGl0IHdhcyBjYW5jZWxsZWQuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBWaWV3T3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2NlbnRlcl0gVGhlIGluaXRpYWwgY2VudGVyIGZvclxuICogdGhlIHZpZXcuIElmIGEgdXNlciBwcm9qZWN0aW9uIGlzIG5vdCBzZXQsIHRoZSBjb29yZGluYXRlIHN5c3RlbSBmb3IgdGhlIGNlbnRlciBpc1xuICogc3BlY2lmaWVkIHdpdGggdGhlIGBwcm9qZWN0aW9uYCBvcHRpb24uIExheWVyIHNvdXJjZXMgd2lsbCBub3QgYmUgZmV0Y2hlZCBpZiB0aGlzXG4gKiBpcyBub3Qgc2V0LCBidXQgdGhlIGNlbnRlciBjYW4gYmUgc2V0IGxhdGVyIHdpdGgge0BsaW5rICNzZXRDZW50ZXJ9LlxuICogQHByb3BlcnR5IHtib29sZWFufG51bWJlcn0gW2NvbnN0cmFpblJvdGF0aW9uPXRydWVdIFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKiBgZmFsc2VgIG1lYW5zIG5vIGNvbnN0cmFpbnQuIGB0cnVlYCBtZWFucyBubyBjb25zdHJhaW50LCBidXQgc25hcCB0byB6ZXJvXG4gKiBuZWFyIHplcm8uIEEgbnVtYmVyIGNvbnN0cmFpbnMgdGhlIHJvdGF0aW9uIHRvIHRoYXQgbnVtYmVyIG9mIHZhbHVlcy4gRm9yXG4gKiBleGFtcGxlLCBgNGAgd2lsbCBjb25zdHJhaW4gdGhlIHJvdGF0aW9uIHRvIDAsIDkwLCAxODAsIGFuZCAyNzAgZGVncmVlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2VuYWJsZVJvdGF0aW9uPXRydWVdIEVuYWJsZSByb3RhdGlvbi5cbiAqIElmIGBmYWxzZWAsIGEgcm90YXRpb24gY29uc3RyYWludCB0aGF0IGFsd2F5cyBzZXRzIHRoZSByb3RhdGlvbiB0byB6ZXJvIGlzXG4gKiB1c2VkLiBUaGUgYGNvbnN0cmFpblJvdGF0aW9uYCBvcHRpb24gaGFzIG5vIGVmZmVjdCBpZiBgZW5hYmxlUm90YXRpb25gIGlzXG4gKiBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBleHRlbnQgdGhhdCBjb25zdHJhaW5zIHRoZVxuICogdmlldywgaW4gb3RoZXIgd29yZHMsIG5vdGhpbmcgb3V0c2lkZSBvZiB0aGlzIGV4dGVudCBjYW4gYmUgdmlzaWJsZSBvbiB0aGUgbWFwLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluT25seUNlbnRlcj1mYWxzZV0gSWYgdHJ1ZSwgdGhlIGV4dGVudFxuICogY29uc3RyYWludCB3aWxsIG9ubHkgYXBwbHkgdG8gdGhlIHZpZXcgY2VudGVyIGFuZCBub3QgdGhlIHdob2xlIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Ntb290aEV4dGVudENvbnN0cmFpbnQ9dHJ1ZV0gSWYgdHJ1ZSwgdGhlIGV4dGVudFxuICogY29uc3RyYWludCB3aWxsIGJlIGFwcGxpZWQgc21vb3RobHksIGkuZS4gYWxsb3cgdGhlIHZpZXcgdG8gZ28gc2xpZ2h0bHkgb3V0c2lkZVxuICogb2YgdGhlIGdpdmVuIGBleHRlbnRgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1pblJlc29sdXRpb25gIChvclxuICogYG1heFpvb21gKSBhbmQgYHpvb21GYWN0b3JgLiBJZiB1bnNwZWNpZmllZCBpdCBpcyBjYWxjdWxhdGVkIGluIHN1Y2ggYSB3YXlcbiAqIHRoYXQgdGhlIHByb2plY3Rpb24ncyB2YWxpZGl0eSBleHRlbnQgZml0cyBpbiBhIDI1NngyNTYgcHggdGlsZS4gSWYgdGhlXG4gKiBwcm9qZWN0aW9uIGlzIFNwaGVyaWNhbCBNZXJjYXRvciAodGhlIGRlZmF1bHQpIHRoZW4gYG1heFJlc29sdXRpb25gIGRlZmF1bHRzXG4gKiB0byBgNDAwNzUwMTYuNjg1NTc4NDkgLyAyNTYgPSAxNTY1NDMuMDMzOTI4MDQwOTdgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiAgSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtYXhSZXNvbHV0aW9uYCAob3JcbiAqIGBtaW5ab29tYCkgYW5kIGB6b29tRmFjdG9yYC4gIElmIHVuc3BlY2lmaWVkIGl0IGlzIGNhbGN1bGF0ZWQgYXNzdW1pbmcgMjlcbiAqIHpvb20gbGV2ZWxzICh3aXRoIGEgZmFjdG9yIG9mIDIpLiBJZiB0aGUgcHJvamVjdGlvbiBpcyBTcGhlcmljYWwgTWVyY2F0b3JcbiAqICh0aGUgZGVmYXVsdCkgdGhlbiBgbWluUmVzb2x1dGlvbmAgZGVmYXVsdHMgdG9cbiAqIGA0MDA3NTAxNi42ODU1Nzg0OSAvIDI1NiAvIE1hdGgucG93KDIsIDI4KSA9IDAuMDAwNTgzMTY4MjQ1NTgzOTI1M2AuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209MjhdIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWluWm9vbWAgKG9yXG4gKiBgbWF4UmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1pblJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1heFpvb21gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWF4Wm9vbWAgKG9yXG4gKiBgbWluUmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1heFJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1pblpvb21gLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbXVsdGlXb3JsZD1mYWxzZV0gSWYgYGZhbHNlYCB0aGUgdmlldyBpcyBjb25zdHJhaW5lZCBzb1xuICogb25seSBvbmUgd29ybGQgaXMgdmlzaWJsZSwgYW5kIHlvdSBjYW5ub3QgcGFuIG9mZiB0aGUgZWRnZS4gIElmIGB0cnVlYCB0aGUgbWFwXG4gKiBtYXkgc2hvdyBtdWx0aXBsZSB3b3JsZHMgYXQgbG93IHpvb20gbGV2ZWxzLiAgT25seSB1c2VkIGlmIHRoZSBgcHJvamVjdGlvbmAgaXNcbiAqIGdsb2JhbC4gIE5vdGUgdGhhdCBpZiBgZXh0ZW50YCBpcyBhbHNvIHByb3ZpZGVkIGl0IGlzIGdpdmVuIHByZWNlZGVuY2UuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb25zdHJhaW5SZXNvbHV0aW9uPWZhbHNlXSBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGFsd2F5c1xuICogYW5pbWF0ZSB0byB0aGUgY2xvc2VzdCB6b29tIGxldmVsIGFmdGVyIGFuIGludGVyYWN0aW9uOyBmYWxzZSBtZWFuc1xuICogaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzIGFyZSBhbGxvd2VkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnQ9dHJ1ZV0gSWYgdHJ1ZSwgdGhlIHJlc29sdXRpb25cbiAqIG1pbi9tYXggdmFsdWVzIHdpbGwgYmUgYXBwbGllZCBzbW9vdGhseSwgaS4gZS4gYWxsb3cgdGhlIHZpZXcgdG8gZXhjZWVkIHNsaWdodGx5XG4gKiB0aGUgZ2l2ZW4gcmVzb2x1dGlvbiBvciB6b29tIGJvdW5kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Nob3dGdWxsRXh0ZW50PWZhbHNlXSBBbGxvdyB0aGUgdmlldyB0byBiZSB6b29tZWQgb3V0IHRvXG4gKiBzaG93IHRoZSBmdWxsIGNvbmZpZ3VyZWQgZXh0ZW50LiBCeSBkZWZhdWx0LCB3aGVuIGEgdmlldyBpcyBjb25maWd1cmVkIHdpdGggYW5cbiAqIGV4dGVudCwgdXNlcnMgd2lsbCBub3QgYmUgYWJsZSB0byB6b29tIG91dCBzbyB0aGUgdmlld3BvcnQgZXhjZWVkcyB0aGUgZXh0ZW50IGluXG4gKiBlaXRoZXIgZGltZW5zaW9uLiBUaGlzIG1lYW5zIHRoZSBmdWxsIGV4dGVudCBtYXkgbm90IGJlIHZpc2libGUgaWYgdGhlIHZpZXdwb3J0XG4gKiBpcyB0YWxsZXIgb3Igd2lkZXIgdGhhbiB0aGUgYXNwZWN0IHJhdGlvIG9mIHRoZSBjb25maWd1cmVkIGV4dGVudC4gSWZcbiAqIHNob3dGdWxsRXh0ZW50IGlzIHRydWUsIHRoZSB1c2VyIHdpbGwgYmUgYWJsZSB0byB6b29tIG91dCBzbyB0aGF0IHRoZSB2aWV3cG9ydFxuICogZXhjZWVkcyB0aGUgaGVpZ2h0IG9yIHdpZHRoIG9mIHRoZSBjb25maWd1cmVkIGV4dGVudCwgYnV0IG5vdCBib3RoLCBhbGxvd2luZyB0aGVcbiAqIGZ1bGwgZXh0ZW50IHRvIGJlIHNob3duLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXSBUaGVcbiAqIHByb2plY3Rpb24uIFRoZSBkZWZhdWx0IGlzIFNwaGVyaWNhbCBNZXJjYXRvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIGluaXRpYWwgcmVzb2x1dGlvbiBmb3IgdGhlIHZpZXcuIFRoZVxuICogdW5pdHMgYXJlIGBwcm9qZWN0aW9uYCB1bml0cyBwZXIgcGl4ZWwgKGUuZy4gbWV0ZXJzIHBlciBwaXhlbCkuIEFuXG4gKiBhbHRlcm5hdGl2ZSB0byBzZXR0aW5nIHRoaXMgaXMgdG8gc2V0IGB6b29tYC4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZVxuICogZmV0Y2hlZCBpZiBuZWl0aGVyIHRoaXMgbm9yIGB6b29tYCBhcmUgZGVmaW5lZCwgYnV0IHRoZXkgY2FuIGJlIHNldCBsYXRlclxuICogd2l0aCB7QGxpbmsgI3NldFpvb219IG9yIHtAbGluayAjc2V0UmVzb2x1dGlvbn0uXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtyZXNvbHV0aW9uc10gUmVzb2x1dGlvbnMgdGhhdCBkZXRlcm1pbmUgdGhlXG4gKiB6b29tIGxldmVscyBpZiBzcGVjaWZpZWQuIFRoZSBpbmRleCBpbiB0aGUgYXJyYXkgY29ycmVzcG9uZHMgdG8gdGhlIHpvb20gbGV2ZWwsXG4gKiB0aGVyZWZvcmUgdGhlIHJlc29sdXRpb24gdmFsdWVzIGhhdmUgdG8gYmUgaW4gZGVzY2VuZGluZyBvcmRlci4gSXQgYWxzbyBjb25zdHJhaW5zXG4gKiB0aGUgcmVzb2x1dGlvbiBieSB0aGUgbWluaW11bSBhbmQgbWF4aW11bSB2YWx1ZS4gSWYgc2V0IHRoZSBgbWF4UmVzb2x1dGlvbmAsXG4gKiBgbWluUmVzb2x1dGlvbmAsIGBtaW5ab29tYCwgYG1heFpvb21gLCBhbmQgYHpvb21GYWN0b3JgIG9wdGlvbnMgYXJlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uPTBdIFRoZSBpbml0aWFsIHJvdGF0aW9uIGZvciB0aGUgdmlldyBpbiByYWRpYW5zXG4gKiAocG9zaXRpdmUgcm90YXRpb24gY2xvY2t3aXNlLCAwIG1lYW5zIE5vcnRoKS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbV0gT25seSB1c2VkIGlmIGByZXNvbHV0aW9uYCBpcyBub3QgZGVmaW5lZC4gWm9vbVxuICogbGV2ZWwgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGluaXRpYWwgcmVzb2x1dGlvbiBmb3IgdGhlIHZpZXcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21GYWN0b3I9Ml0gVGhlIHpvb20gZmFjdG9yIHVzZWQgdG8gY29tcHV0ZSB0aGVcbiAqIGNvcnJlc3BvbmRpbmcgcmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IFtwYWRkaW5nPVswLCAwLCAwLCAwXV0gUGFkZGluZyAoaW4gY3NzIHBpeGVscykuXG4gKiBJZiB0aGUgbWFwIHZpZXdwb3J0IGlzIHBhcnRpYWxseSBjb3ZlcmVkIHdpdGggb3RoZXIgY29udGVudCAob3ZlcmxheXMpIGFsb25nXG4gKiBpdHMgZWRnZXMsIHRoaXMgc2V0dGluZyBhbGxvd3MgdG8gc2hpZnQgdGhlIGNlbnRlciBvZiB0aGUgdmlld3BvcnQgYXdheSBmcm9tXG4gKiB0aGF0IGNvbnRlbnQuIFRoZSBvcmRlciBvZiB0aGUgdmFsdWVzIGlzIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdC5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFuaW1hdGlvbk9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtjZW50ZXJdIFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZlxuICogdGhlIGFuaW1hdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbV0gVGhlIHpvb20gbGV2ZWwgb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZiB0aGVcbiAqIGFuaW1hdGlvbi4gVGhpcyB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYHJlc29sdXRpb25gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXNvbHV0aW9uXSBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdmlldyBhdCB0aGUgZW5kXG4gKiBvZiB0aGUgYW5pbWF0aW9uLiAgSWYgYHpvb21gIGlzIGFsc28gcHJvdmlkZWQsIHRoaXMgb3B0aW9uIHdpbGwgYmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb25dIFRoZSByb3RhdGlvbiBvZiB0aGUgdmlldyBhdCB0aGUgZW5kIG9mXG4gKiB0aGUgYW5pbWF0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gT3B0aW9uYWwgYW5jaG9yIHRvIHJlbWFpbiBmaXhlZFxuICogZHVyaW5nIGEgcm90YXRpb24gb3IgcmVzb2x1dGlvbiBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMDBdIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IFtlYXNpbmddIFRoZSBlYXNpbmcgZnVuY3Rpb24gdXNlZFxuICogZHVyaW5nIHRoZSBhbmltYXRpb24gKGRlZmF1bHRzIHRvIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nLmluQW5kT3V0fSkuXG4gKiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggZnJhbWUgd2l0aCBhIG51bWJlciByZXByZXNlbnRpbmcgYVxuICogZnJhY3Rpb24gb2YgdGhlIGFuaW1hdGlvbidzIGR1cmF0aW9uLiAgVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXJcbiAqIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRvd2FyZCB0aGUgZGVzdGluYXRpb24gc3RhdGUuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtuZXh0Q2VudGVyXSBUaGUgbmV4dCBjZW50ZXIgZHVyaW5nIGFuIGFuaW1hdGlvbiBzZXJpZXMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW25leHRSZXNvbHV0aW9uXSBUaGUgbmV4dCByZXNvbHV0aW9uIGR1cmluZyBhbiBhbmltYXRpb24gc2VyaWVzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtuZXh0Um90YXRpb25dIFRoZSBuZXh0IHJvdGF0aW9uIGR1cmluZyBhbiBhbmltYXRpb24gc2VyaWVzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHpvb20gWm9vbS5cbiAqL1xuXG4vKipcbiAqIExpa2Uge0BsaW5rIGltcG9ydChcIi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9LCBidXQganVzdCBgdmlld1N0YXRlYCBhbmQgYGV4dGVudGAuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBWaWV3U3RhdGVBbmRFeHRlbnRcbiAqIEBwcm9wZXJ0eSB7U3RhdGV9IHZpZXdTdGF0ZSBWaWV3IHN0YXRlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKi9cblxuLyoqXG4gKiBEZWZhdWx0IG1pbiB6b29tIGxldmVsIGZvciB0aGUgbWFwIHZpZXcuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5jb25zdCBERUZBVUxUX01JTl9aT09NID0gMDtcblxuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8J2NoYW5nZTpjZW50ZXInfCdjaGFuZ2U6cmVzb2x1dGlvbid8J2NoYW5nZTpyb3RhdGlvbid9IFZpZXdPYmplY3RFdmVudFR5cGVzXG4gKi9cblxuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxWaWV3T2JqZWN0RXZlbnRUeXBlcywgaW1wb3J0KFwiLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xWaWV3T2JqZWN0RXZlbnRUeXBlcywgUmV0dXJuPn0gVmlld09uU2lnbmF0dXJlXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIFZpZXcgb2JqZWN0IHJlcHJlc2VudHMgYSBzaW1wbGUgMkQgdmlldyBvZiB0aGUgbWFwLlxuICpcbiAqIFRoaXMgaXMgdGhlIG9iamVjdCB0byBhY3QgdXBvbiB0byBjaGFuZ2UgdGhlIGNlbnRlciwgcmVzb2x1dGlvbixcbiAqIGFuZCByb3RhdGlvbiBvZiB0aGUgbWFwLlxuICpcbiAqIEEgVmlldyBoYXMgYSBgcHJvamVjdGlvbmAuIFRoZSBwcm9qZWN0aW9uIGRldGVybWluZXMgdGhlXG4gKiBjb29yZGluYXRlIHN5c3RlbSBvZiB0aGUgY2VudGVyLCBhbmQgaXRzIHVuaXRzIGRldGVybWluZSB0aGUgdW5pdHMgb2YgdGhlXG4gKiByZXNvbHV0aW9uIChwcm9qZWN0aW9uIHVuaXRzIHBlciBwaXhlbCkuIFRoZSBkZWZhdWx0IHByb2plY3Rpb24gaXNcbiAqIFdlYiBNZXJjYXRvciAoRVBTRzozODU3KS5cbiAqXG4gKiAjIyMgVGhlIHZpZXcgc3RhdGVzXG4gKlxuICogQSBWaWV3IGlzIGRldGVybWluZWQgYnkgdGhyZWUgc3RhdGVzOiBgY2VudGVyYCwgYHJlc29sdXRpb25gLFxuICogYW5kIGByb3RhdGlvbmAuIEVhY2ggc3RhdGUgaGFzIGEgY29ycmVzcG9uZGluZyBnZXR0ZXIgYW5kIHNldHRlciwgZS5nLlxuICogYGdldENlbnRlcmAgYW5kIGBzZXRDZW50ZXJgIGZvciB0aGUgYGNlbnRlcmAgc3RhdGUuXG4gKlxuICogVGhlIGB6b29tYCBzdGF0ZSBpcyBhY3R1YWxseSBub3Qgc2F2ZWQgb24gdGhlIHZpZXc6IGFsbCBjb21wdXRhdGlvbnNcbiAqIGludGVybmFsbHkgdXNlIHRoZSBgcmVzb2x1dGlvbmAgc3RhdGUuIFN0aWxsLCB0aGUgYHNldFpvb21gIGFuZCBgZ2V0Wm9vbWBcbiAqIG1ldGhvZHMgYXJlIGF2YWlsYWJsZSwgYXMgd2VsbCBhcyBgZ2V0UmVzb2x1dGlvbkZvclpvb21gIGFuZFxuICogYGdldFpvb21Gb3JSZXNvbHV0aW9uYCB0byBzd2l0Y2ggZnJvbSBvbmUgc3lzdGVtIHRvIHRoZSBvdGhlci5cbiAqXG4gKiAjIyMgVGhlIGNvbnN0cmFpbnRzXG4gKlxuICogYHNldENlbnRlcmAsIGBzZXRSZXNvbHV0aW9uYCBhbmQgYHNldFJvdGF0aW9uYCBjYW4gYmUgdXNlZCB0byBjaGFuZ2UgdGhlXG4gKiBzdGF0ZXMgb2YgdGhlIHZpZXcsIGJ1dCBhbnkgY29uc3RyYWludCBkZWZpbmVkIGluIHRoZSBjb25zdHJ1Y3RvciB3aWxsXG4gKiBiZSBhcHBsaWVkIGFsb25nIHRoZSB3YXkuXG4gKlxuICogQSBWaWV3IG9iamVjdCBjYW4gaGF2ZSBhICpyZXNvbHV0aW9uIGNvbnN0cmFpbnQqLCBhICpyb3RhdGlvbiBjb25zdHJhaW50KlxuICogYW5kIGEgKmNlbnRlciBjb25zdHJhaW50Ki5cbiAqXG4gKiBUaGUgKnJlc29sdXRpb24gY29uc3RyYWludCogdHlwaWNhbGx5IHJlc3RyaWN0cyBtaW4vbWF4IHZhbHVlcyBhbmRcbiAqIHNuYXBzIHRvIHNwZWNpZmljIHJlc29sdXRpb25zLiBJdCBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBmb2xsb3dpbmdcbiAqIG9wdGlvbnM6IGByZXNvbHV0aW9uc2AsIGBtYXhSZXNvbHV0aW9uYCwgYG1heFpvb21gIGFuZCBgem9vbUZhY3RvcmAuXG4gKiBJZiBgcmVzb2x1dGlvbnNgIGlzIHNldCwgdGhlIG90aGVyIHRocmVlIG9wdGlvbnMgYXJlIGlnbm9yZWQuIFNlZVxuICogZG9jdW1lbnRhdGlvbiBmb3IgZWFjaCBvcHRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uIEJ5IGRlZmF1bHQsIHRoZSB2aWV3XG4gKiBvbmx5IGhhcyBhIG1pbi9tYXggcmVzdHJpY3Rpb24gYW5kIGFsbG93IGludGVybWVkaWFyeSB6b29tIGxldmVscyB3aGVuXG4gKiBwaW5jaC16b29taW5nIGZvciBleGFtcGxlLlxuICpcbiAqIFRoZSAqcm90YXRpb24gY29uc3RyYWludCogc25hcHMgdG8gc3BlY2lmaWMgYW5nbGVzLiBJdCBpcyBkZXRlcm1pbmVkXG4gKiBieSB0aGUgZm9sbG93aW5nIG9wdGlvbnM6IGBlbmFibGVSb3RhdGlvbmAgYW5kIGBjb25zdHJhaW5Sb3RhdGlvbmAuXG4gKiBCeSBkZWZhdWx0IHJvdGF0aW9uIGlzIGFsbG93ZWQgYW5kIGl0cyB2YWx1ZSBpcyBzbmFwcGVkIHRvIHplcm8gd2hlbiBhcHByb2FjaGluZyB0aGVcbiAqIGhvcml6b250YWwuXG4gKlxuICogVGhlICpjZW50ZXIgY29uc3RyYWludCogaXMgZGV0ZXJtaW5lZCBieSB0aGUgYGV4dGVudGAgb3B0aW9uLiBCeVxuICogZGVmYXVsdCB0aGUgdmlldyBjZW50ZXIgaXMgbm90IGNvbnN0cmFpbmVkIGF0IGFsbC5cbiAqXG4gKiAjIyMgQ2hhbmdpbmcgdGhlIHZpZXcgc3RhdGVcbiAqXG4gKiBJdCBpcyBpbXBvcnRhbnQgdG8gbm90ZSB0aGF0IGBzZXRab29tYCwgYHNldFJlc29sdXRpb25gLCBgc2V0Q2VudGVyYCBhbmRcbiAqIGBzZXRSb3RhdGlvbmAgYXJlIHN1YmplY3QgdG8gdGhlIGFib3ZlIG1lbnRpb25lZCBjb25zdHJhaW50cy4gQXMgc3VjaCwgaXRcbiAqIG1heSBzb21ldGltZXMgbm90IGJlIHBvc3NpYmxlIHRvIGtub3cgaW4gYWR2YW5jZSB0aGUgcmVzdWx0aW5nIHN0YXRlIG9mIHRoZVxuICogVmlldy4gRm9yIGV4YW1wbGUsIGNhbGxpbmcgYHNldFJlc29sdXRpb24oMTApYCBkb2VzIG5vdCBndWFyYW50ZWUgdGhhdFxuICogYGdldFJlc29sdXRpb24oKWAgd2lsbCByZXR1cm4gYDEwYC5cbiAqXG4gKiBBIGNvbnNlcXVlbmNlIG9mIHRoaXMgaXMgdGhhdCwgd2hlbiBhcHBseWluZyBhIGRlbHRhIG9uIHRoZSB2aWV3IHN0YXRlLCBvbmVcbiAqIHNob3VsZCB1c2UgYGFkanVzdENlbnRlcmAsIGBhZGp1c3RSb3RhdGlvbmAsIGBhZGp1c3Rab29tYCBhbmQgYGFkanVzdFJlc29sdXRpb25gXG4gKiByYXRoZXIgdGhhbiB0aGUgY29ycmVzcG9uZGluZyBzZXR0ZXJzLiBUaGlzIHdpbGwgbGV0IHZpZXcgZG8gaXRzIGludGVybmFsXG4gKiBjb21wdXRhdGlvbnMuIEJlc2lkZXMsIHRoZSBgYWRqdXN0KmAgbWV0aG9kcyBhbHNvIHRha2UgYW4gYGFuY2hvcmBcbiAqIGFyZ3VtZW50IHdoaWNoIGFsbG93cyBzcGVjaWZ5aW5nIGFuIG9yaWdpbiBmb3IgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICpcbiAqICMjIyBJbnRlcmFjdGluZyB3aXRoIHRoZSB2aWV3XG4gKlxuICogVmlldyBjb25zdHJhaW50cyBhcmUgdXN1YWxseSBvbmx5IGFwcGxpZWQgd2hlbiB0aGUgdmlldyBpcyAqYXQgcmVzdCosIG1lYW5pbmcgdGhhdFxuICogbm8gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIG9uZ29pbmcuIEFzIHN1Y2gsIGlmIHRoZSB1c2VyIHB1dHMgdGhlIHZpZXcgaW4gYVxuICogc3RhdGUgdGhhdCBpcyBub3QgZXF1aXZhbGVudCB0byBhIGNvbnN0cmFpbmVkIG9uZSAoZS5nLiByb3RhdGluZyB0aGUgdmlldyB3aGVuXG4gKiB0aGUgc25hcCBhbmdsZSBpcyAwKSwgYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkIGF0IHRoZSBpbnRlcmFjdGlvbiBlbmQgdG9cbiAqIHB1dCBiYWNrIHRoZSB2aWV3IHRvIGEgc3RhYmxlIHN0YXRlO1xuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgVmlldyBleHRlbmRzIEJhc2VPYmplY3Qge1xuICAvKipcbiAgICogQHBhcmFtIHtWaWV3T3B0aW9uc30gW29wdGlvbnNdIFZpZXcgb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtWaWV3T25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtWaWV3T25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uY2U7XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge1ZpZXdPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgKi9cbiAgICB0aGlzLnVuO1xuXG4gICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgKi9cbiAgICB0aGlzLmhpbnRzXyA9IFswLCAwXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PEFycmF5PEFuaW1hdGlvbj4+fVxuICAgICAqL1xuICAgIHRoaXMuYW5pbWF0aW9uc18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnByb2plY3Rpb25fID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAqL1xuICAgIHRoaXMudmlld3BvcnRTaXplXyA9IFsxMDAsIDEwMF07XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy50YXJnZXRDZW50ZXJfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy50YXJnZXRSb3RhdGlvbl87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLm5leHRDZW50ZXJfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm5leHRSZXNvbHV0aW9uXztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm5leHRSb3RhdGlvbl87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5jYW5jZWxBbmNob3JfID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKG9wdGlvbnMucHJvamVjdGlvbikge1xuICAgICAgZGlzYWJsZUNvb3JkaW5hdGVXYXJuaW5nKCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgb3B0aW9ucy5jZW50ZXIgPSBmcm9tVXNlckNvb3JkaW5hdGUob3B0aW9ucy5jZW50ZXIsIHRoaXMucHJvamVjdGlvbl8pO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5leHRlbnQpIHtcbiAgICAgIG9wdGlvbnMuZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQob3B0aW9ucy5leHRlbnQsIHRoaXMucHJvamVjdGlvbl8pO1xuICAgIH1cblxuICAgIHRoaXMuYXBwbHlPcHRpb25zXyhvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdXAgdGhlIHZpZXcgd2l0aCB0aGUgZ2l2ZW4gb3B0aW9ucy5cbiAgICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gICAqL1xuICBhcHBseU9wdGlvbnNfKG9wdGlvbnMpIHtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gVmlld1Byb3BlcnR5KSB7XG4gICAgICBkZWxldGUgcHJvcGVydGllc1trZXldO1xuICAgIH1cbiAgICB0aGlzLnNldFByb3BlcnRpZXMocHJvcGVydGllcywgdHJ1ZSk7XG5cbiAgICBjb25zdCByZXNvbHV0aW9uQ29uc3RyYWludEluZm8gPSBjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludChvcHRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heFJlc29sdXRpb25fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1heFJlc29sdXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5taW5SZXNvbHV0aW9uXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5taW5SZXNvbHV0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuem9vbUZhY3Rvcl8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uem9vbUZhY3RvcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMucmVzb2x1dGlvbnNfID0gb3B0aW9ucy5yZXNvbHV0aW9ucztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucGFkZGluZ18gPSBvcHRpb25zLnBhZGRpbmc7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5taW5ab29tXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5taW5ab29tO1xuXG4gICAgY29uc3QgY2VudGVyQ29uc3RyYWludCA9IGNyZWF0ZUNlbnRlckNvbnN0cmFpbnQob3B0aW9ucyk7XG4gICAgY29uc3QgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uY29uc3RyYWludDtcbiAgICBjb25zdCByb3RhdGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVSb3RhdGlvbkNvbnN0cmFpbnQob3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtDb25zdHJhaW50c31cbiAgICAgKi9cbiAgICB0aGlzLmNvbnN0cmFpbnRzXyA9IHtcbiAgICAgIGNlbnRlcjogY2VudGVyQ29uc3RyYWludCxcbiAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb25Db25zdHJhaW50LFxuICAgICAgcm90YXRpb246IHJvdGF0aW9uQ29uc3RyYWludCxcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRSb3RhdGlvbihvcHRpb25zLnJvdGF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnJvdGF0aW9uIDogMCk7XG4gICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChcbiAgICAgIG9wdGlvbnMuY2VudGVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNlbnRlciA6IG51bGxcbiAgICApO1xuICAgIGlmIChvcHRpb25zLnJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5zZXRSZXNvbHV0aW9uKG9wdGlvbnMucmVzb2x1dGlvbik7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5zZXRab29tKG9wdGlvbnMuem9vbSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBhZGRpbmcgKGluIGNzcyBwaXhlbHMpLlxuICAgKiBJZiB0aGUgbWFwIHZpZXdwb3J0IGlzIHBhcnRpYWxseSBjb3ZlcmVkIHdpdGggb3RoZXIgY29udGVudCAob3ZlcmxheXMpIGFsb25nXG4gICAqIGl0cyBlZGdlcywgdGhpcyBzZXR0aW5nIGFsbG93cyB0byBzaGlmdCB0aGUgY2VudGVyIG9mIHRoZSB2aWV3cG9ydCBhd2F5IGZyb20gdGhhdFxuICAgKiBjb250ZW50LiBUaGUgb3JkZXIgb2YgdGhlIHZhbHVlcyBpbiB0aGUgYXJyYXkgaXMgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LlxuICAgKiBUaGUgZGVmYXVsdCBpcyBubyBwYWRkaW5nLCB3aGljaCBpcyBlcXVpdmFsZW50IHRvIGBbMCwgMCwgMCwgMF1gLlxuICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9XG4gICAqIEBhcGlcbiAgICovXG4gIGdldCBwYWRkaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnBhZGRpbmdfO1xuICB9XG4gIHNldCBwYWRkaW5nKHBhZGRpbmcpIHtcbiAgICBsZXQgb2xkUGFkZGluZyA9IHRoaXMucGFkZGluZ187XG4gICAgdGhpcy5wYWRkaW5nXyA9IHBhZGRpbmc7XG4gICAgY29uc3QgY2VudGVyID0gdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgIGlmIChjZW50ZXIpIHtcbiAgICAgIGNvbnN0IG5ld1BhZGRpbmcgPSBwYWRkaW5nIHx8IFswLCAwLCAwLCAwXTtcbiAgICAgIG9sZFBhZGRpbmcgPSBvbGRQYWRkaW5nIHx8IFswLCAwLCAwLCAwXTtcbiAgICAgIGNvbnN0IHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICAgIGNvbnN0IG9mZnNldFggPVxuICAgICAgICAocmVzb2x1dGlvbiAvIDIpICpcbiAgICAgICAgKG5ld1BhZGRpbmdbM10gLSBvbGRQYWRkaW5nWzNdICsgb2xkUGFkZGluZ1sxXSAtIG5ld1BhZGRpbmdbMV0pO1xuICAgICAgY29uc3Qgb2Zmc2V0WSA9XG4gICAgICAgIChyZXNvbHV0aW9uIC8gMikgKlxuICAgICAgICAobmV3UGFkZGluZ1swXSAtIG9sZFBhZGRpbmdbMF0gKyBvbGRQYWRkaW5nWzJdIC0gbmV3UGFkZGluZ1syXSk7XG4gICAgICB0aGlzLnNldENlbnRlckludGVybmFsKFtjZW50ZXJbMF0gKyBvZmZzZXRYLCBjZW50ZXJbMV0gLSBvZmZzZXRZXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiB1cGRhdGVkIHZlcnNpb24gb2YgdGhlIHZpZXcgb3B0aW9ucyB1c2VkIHRvIGNvbnN0cnVjdCB0aGUgdmlldy4gIFRoZVxuICAgKiBjdXJyZW50IHJlc29sdXRpb24gKG9yIHpvb20pLCBjZW50ZXIsIGFuZCByb3RhdGlvbiBhcmUgYXBwbGllZCB0byBhbnkgc3RvcmVkXG4gICAqIG9wdGlvbnMuICBUaGUgcHJvdmlkZWQgb3B0aW9ucyBjYW4gYmUgdXNlZCB0byBhcHBseSBuZXcgbWluL21heCB6b29tIG9yXG4gICAqIHJlc29sdXRpb24gbGltaXRzLlxuICAgKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBuZXdPcHRpb25zIE5ldyBvcHRpb25zIHRvIGJlIGFwcGxpZWQuXG4gICAqIEByZXR1cm4ge1ZpZXdPcHRpb25zfSBOZXcgb3B0aW9ucyB1cGRhdGVkIHdpdGggdGhlIGN1cnJlbnQgdmlldyBzdGF0ZS5cbiAgICovXG4gIGdldFVwZGF0ZWRPcHRpb25zXyhuZXdPcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuZ2V0UHJvcGVydGllcygpO1xuXG4gICAgLy8gcHJlc2VydmUgcmVzb2x1dGlvbiAob3Igem9vbSlcbiAgICBpZiAob3B0aW9ucy5yZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdGlvbnMucmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLnpvb20gPSB0aGlzLmdldFpvb20oKTtcbiAgICB9XG5cbiAgICAvLyBwcmVzZXJ2ZSBjZW50ZXJcbiAgICBvcHRpb25zLmNlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcblxuICAgIC8vIHByZXNlcnZlIHJvdGF0aW9uXG4gICAgb3B0aW9ucy5yb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcblxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLCBuZXdPcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmltYXRlIHRoZSB2aWV3LiAgVGhlIHZpZXcncyBjZW50ZXIsIHpvb20gKG9yIHJlc29sdXRpb24pLCBhbmQgcm90YXRpb25cbiAgICogY2FuIGJlIGFuaW1hdGVkIGZvciBzbW9vdGggdHJhbnNpdGlvbnMgYmV0d2VlbiB2aWV3IHN0YXRlcy4gIEZvciBleGFtcGxlLFxuICAgKiB0byBhbmltYXRlIHRoZSB2aWV3IHRvIGEgbmV3IHpvb20gbGV2ZWw6XG4gICAqXG4gICAqICAgICB2aWV3LmFuaW1hdGUoe3pvb206IHZpZXcuZ2V0Wm9vbSgpICsgMX0pO1xuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGUgYW5pbWF0aW9uIGxhc3RzIG9uZSBzZWNvbmQgYW5kIHVzZXMgaW4tYW5kLW91dCBlYXNpbmcuICBZb3VcbiAgICogY2FuIGN1c3RvbWl6ZSB0aGlzIGJlaGF2aW9yIGJ5IGluY2x1ZGluZyBgZHVyYXRpb25gIChpbiBtaWxsaXNlY29uZHMpIGFuZFxuICAgKiBgZWFzaW5nYCBvcHRpb25zIChzZWUge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd9KS5cbiAgICpcbiAgICogVG8gY2hhaW4gdG9nZXRoZXIgbXVsdGlwbGUgYW5pbWF0aW9ucywgY2FsbCB0aGUgbWV0aG9kIHdpdGggbXVsdGlwbGVcbiAgICogYW5pbWF0aW9uIG9iamVjdHMuICBGb3IgZXhhbXBsZSwgdG8gZmlyc3Qgem9vbSBhbmQgdGhlbiBwYW46XG4gICAqXG4gICAqICAgICB2aWV3LmFuaW1hdGUoe3pvb206IDEwfSwge2NlbnRlcjogWzAsIDBdfSk7XG4gICAqXG4gICAqIElmIHlvdSBwcm92aWRlIGEgZnVuY3Rpb24gYXMgdGhlIGxhc3QgYXJndW1lbnQgdG8gdGhlIGFuaW1hdGUgbWV0aG9kLCBpdFxuICAgKiB3aWxsIGdldCBjYWxsZWQgYXQgdGhlIGVuZCBvZiBhbiBhbmltYXRpb24gc2VyaWVzLiAgVGhlIGNhbGxiYWNrIHdpbGwgYmVcbiAgICogY2FsbGVkIHdpdGggYHRydWVgIGlmIHRoZSBhbmltYXRpb24gc2VyaWVzIGNvbXBsZXRlZCBvbiBpdHMgb3duIG9yIGBmYWxzZWBcbiAgICogaWYgaXQgd2FzIGNhbmNlbGxlZC5cbiAgICpcbiAgICogQW5pbWF0aW9ucyBhcmUgY2FuY2VsbGVkIGJ5IHVzZXIgaW50ZXJhY3Rpb25zIChlLmcuIGRyYWdnaW5nIHRoZSBtYXApIG9yIGJ5XG4gICAqIGNhbGxpbmcgYHZpZXcuc2V0Q2VudGVyKClgLCBgdmlldy5zZXRSZXNvbHV0aW9uKClgLCBvciBgdmlldy5zZXRSb3RhdGlvbigpYFxuICAgKiAob3IgYW5vdGhlciBtZXRob2QgdGhhdCBjYWxscyBvbmUgb2YgdGhlc2UpLlxuICAgKlxuICAgKiBAcGFyYW0gey4uLihBbmltYXRpb25PcHRpb25zfGZ1bmN0aW9uKGJvb2xlYW4pOiB2b2lkKX0gdmFyX2FyZ3MgQW5pbWF0aW9uXG4gICAqICAgICBvcHRpb25zLiAgTXVsdGlwbGUgYW5pbWF0aW9ucyBjYW4gYmUgcnVuIGluIHNlcmllcyBieSBwYXNzaW5nIG11bHRpcGxlXG4gICAqICAgICBvcHRpb25zIG9iamVjdHMuICBUbyBydW4gbXVsdGlwbGUgYW5pbWF0aW9ucyBpbiBwYXJhbGxlbCwgY2FsbCB0aGUgbWV0aG9kXG4gICAqICAgICBtdWx0aXBsZSB0aW1lcy4gIEFuIG9wdGlvbmFsIGNhbGxiYWNrIGNhbiBiZSBwcm92aWRlZCBhcyBhIGZpbmFsXG4gICAqICAgICBhcmd1bWVudC4gIFRoZSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCB3aXRoIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXJcbiAgICogICAgIHRoZSBhbmltYXRpb24gY29tcGxldGVkIHdpdGhvdXQgYmVpbmcgY2FuY2VsbGVkLlxuICAgKiBAYXBpXG4gICAqL1xuICBhbmltYXRlKHZhcl9hcmdzKSB7XG4gICAgaWYgKHRoaXMuaXNEZWYoKSAmJiAhdGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgdGhpcy5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgfVxuICAgIGNvbnN0IGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgIG9wdGlvbnMuY2VudGVyID0gZnJvbVVzZXJDb29yZGluYXRlKFxuICAgICAgICAgIG9wdGlvbnMuY2VudGVyLFxuICAgICAgICAgIHRoaXMuZ2V0UHJvamVjdGlvbigpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5hbmNob3IpIHtcbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBvcHRpb25zLmFuY2hvciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShcbiAgICAgICAgICBvcHRpb25zLmFuY2hvcixcbiAgICAgICAgICB0aGlzLmdldFByb2plY3Rpb24oKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYXJnc1tpXSA9IG9wdGlvbnM7XG4gICAgfVxuICAgIHRoaXMuYW5pbWF0ZUludGVybmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Li4uKEFuaW1hdGlvbk9wdGlvbnN8ZnVuY3Rpb24oYm9vbGVhbik6IHZvaWQpfSB2YXJfYXJncyBBbmltYXRpb24gb3B0aW9ucy5cbiAgICovXG4gIGFuaW1hdGVJbnRlcm5hbCh2YXJfYXJncykge1xuICAgIGxldCBhbmltYXRpb25Db3VudCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgbGV0IGNhbGxiYWNrO1xuICAgIGlmIChcbiAgICAgIGFuaW1hdGlvbkNvdW50ID4gMSAmJlxuICAgICAgdHlwZW9mIGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdID09PSAnZnVuY3Rpb24nXG4gICAgKSB7XG4gICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdO1xuICAgICAgLS1hbmltYXRpb25Db3VudDtcbiAgICB9XG5cbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBhbmltYXRpb25Db3VudCAmJiAhdGhpcy5pc0RlZigpOyArK2kpIHtcbiAgICAgIC8vIGlmIHZpZXcgcHJvcGVydGllcyBhcmUgbm90IHlldCBzZXQsIHNob3J0Y3V0IHRvIHRoZSBmaW5hbCBzdGF0ZVxuICAgICAgY29uc3Qgc3RhdGUgPSBhcmd1bWVudHNbaV07XG4gICAgICBpZiAoc3RhdGUuY2VudGVyKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoc3RhdGUuY2VudGVyKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS56b29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zZXRab29tKHN0YXRlLnpvb20pO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5yZXNvbHV0aW9uKSB7XG4gICAgICAgIHRoaXMuc2V0UmVzb2x1dGlvbihzdGF0ZS5yZXNvbHV0aW9uKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc2V0Um90YXRpb24oc3RhdGUucm90YXRpb24pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaSA9PT0gYW5pbWF0aW9uQ291bnQpIHtcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICBsZXQgY2VudGVyID0gdGhpcy50YXJnZXRDZW50ZXJfLnNsaWNlKCk7XG4gICAgbGV0IHJlc29sdXRpb24gPSB0aGlzLnRhcmdldFJlc29sdXRpb25fO1xuICAgIGxldCByb3RhdGlvbiA9IHRoaXMudGFyZ2V0Um90YXRpb25fO1xuICAgIGNvbnN0IHNlcmllcyA9IFtdO1xuICAgIGZvciAoOyBpIDwgYW5pbWF0aW9uQ291bnQ7ICsraSkge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IC8qKiBAdHlwZSB7QW5pbWF0aW9uT3B0aW9uc30gKi8gKGFyZ3VtZW50c1tpXSk7XG5cbiAgICAgIGNvbnN0IGFuaW1hdGlvbiA9IHtcbiAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgIGFuY2hvcjogb3B0aW9ucy5hbmNob3IsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwMCxcbiAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyB8fCBpbkFuZE91dCxcbiAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgfTtcblxuICAgICAgaWYgKG9wdGlvbnMuY2VudGVyKSB7XG4gICAgICAgIGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIgPSBjZW50ZXI7XG4gICAgICAgIGFuaW1hdGlvbi50YXJnZXRDZW50ZXIgPSBvcHRpb25zLmNlbnRlci5zbGljZSgpO1xuICAgICAgICBjZW50ZXIgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy56b29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20ob3B0aW9ucy56b29tKTtcbiAgICAgICAgcmVzb2x1dGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlc29sdXRpb24pIHtcbiAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA9IG9wdGlvbnMucmVzb2x1dGlvbjtcbiAgICAgICAgcmVzb2x1dGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiA9IHJvdGF0aW9uO1xuICAgICAgICBjb25zdCBkZWx0YSA9XG4gICAgICAgICAgbW9kdWxvKG9wdGlvbnMucm90YXRpb24gLSByb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtIE1hdGguUEk7XG4gICAgICAgIGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiA9IHJvdGF0aW9uICsgZGVsdGE7XG4gICAgICAgIHJvdGF0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uO1xuICAgICAgfVxuXG4gICAgICAvLyBjaGVjayBpZiBhbmltYXRpb24gaXMgYSBuby1vcFxuICAgICAgaWYgKGlzTm9vcEFuaW1hdGlvbihhbmltYXRpb24pKSB7XG4gICAgICAgIGFuaW1hdGlvbi5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIC8vIHdlIHN0aWxsIHB1c2ggaXQgb250byB0aGUgc2VyaWVzIGZvciBjYWxsYmFjayBoYW5kbGluZ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhcnQgKz0gYW5pbWF0aW9uLmR1cmF0aW9uO1xuICAgICAgfVxuICAgICAgc2VyaWVzLnB1c2goYW5pbWF0aW9uKTtcbiAgICB9XG4gICAgdGhpcy5hbmltYXRpb25zXy5wdXNoKHNlcmllcyk7XG4gICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgMSk7XG4gICAgdGhpcy51cGRhdGVBbmltYXRpb25zXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB0aGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpZXcgaXMgYmVpbmcgYW5pbWF0ZWQuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEFuaW1hdGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5oaW50c19bVmlld0hpbnQuQU5JTUFUSU5HXSA+IDA7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGlmIHRoZSB1c2VyIGlzIGludGVyYWN0aW5nIHdpdGggdGhlIHZpZXcsIHN1Y2ggYXMgcGFubmluZyBvciB6b29taW5nLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdmlldyBpcyBiZWluZyBpbnRlcmFjdGVkIHdpdGguXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEludGVyYWN0aW5nKCkge1xuICAgIHJldHVybiB0aGlzLmhpbnRzX1tWaWV3SGludC5JTlRFUkFDVElOR10gPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbCBhbnkgb25nb2luZyBhbmltYXRpb25zLlxuICAgKiBAYXBpXG4gICAqL1xuICBjYW5jZWxBbmltYXRpb25zKCkge1xuICAgIHRoaXMuc2V0SGludChWaWV3SGludC5BTklNQVRJTkcsIC10aGlzLmhpbnRzX1tWaWV3SGludC5BTklNQVRJTkddKTtcbiAgICBsZXQgYW5jaG9yO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3Qgc2VyaWVzID0gdGhpcy5hbmltYXRpb25zX1tpXTtcbiAgICAgIGlmIChzZXJpZXNbMF0uY2FsbGJhY2spIHtcbiAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soc2VyaWVzWzBdLmNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICBmb3IgKGxldCBqID0gMCwgamogPSBzZXJpZXMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIGNvbnN0IGFuaW1hdGlvbiA9IHNlcmllc1tqXTtcbiAgICAgICAgICBpZiAoIWFuaW1hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgYW5jaG9yID0gYW5pbWF0aW9uLmFuY2hvcjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5jYW5jZWxBbmNob3JfID0gYW5jaG9yO1xuICAgIHRoaXMubmV4dENlbnRlcl8gPSBudWxsO1xuICAgIHRoaXMubmV4dFJlc29sdXRpb25fID0gTmFOO1xuICAgIHRoaXMubmV4dFJvdGF0aW9uXyA9IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYWxsIGFuaW1hdGlvbnMuXG4gICAqL1xuICB1cGRhdGVBbmltYXRpb25zXygpIHtcbiAgICBpZiAodGhpcy51cGRhdGVBbmltYXRpb25LZXlfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5Xyk7XG4gICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghdGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGxldCBtb3JlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIGNvbnN0IHNlcmllcyA9IHRoaXMuYW5pbWF0aW9uc19baV07XG4gICAgICBsZXQgc2VyaWVzQ29tcGxldGUgPSB0cnVlO1xuICAgICAgZm9yIChsZXQgaiA9IDAsIGpqID0gc2VyaWVzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uID0gc2VyaWVzW2pdO1xuICAgICAgICBpZiAoYW5pbWF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxhcHNlZCA9IG5vdyAtIGFuaW1hdGlvbi5zdGFydDtcbiAgICAgICAgbGV0IGZyYWN0aW9uID1cbiAgICAgICAgICBhbmltYXRpb24uZHVyYXRpb24gPiAwID8gZWxhcHNlZCAvIGFuaW1hdGlvbi5kdXJhdGlvbiA6IDE7XG4gICAgICAgIGlmIChmcmFjdGlvbiA+PSAxKSB7XG4gICAgICAgICAgYW5pbWF0aW9uLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICBmcmFjdGlvbiA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VyaWVzQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9ncmVzcyA9IGFuaW1hdGlvbi5lYXNpbmcoZnJhY3Rpb24pO1xuICAgICAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZUNlbnRlcikge1xuICAgICAgICAgIGNvbnN0IHgwID0gYW5pbWF0aW9uLnNvdXJjZUNlbnRlclswXTtcbiAgICAgICAgICBjb25zdCB5MCA9IGFuaW1hdGlvbi5zb3VyY2VDZW50ZXJbMV07XG4gICAgICAgICAgY29uc3QgeDEgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyWzBdO1xuICAgICAgICAgIGNvbnN0IHkxID0gYW5pbWF0aW9uLnRhcmdldENlbnRlclsxXTtcbiAgICAgICAgICB0aGlzLm5leHRDZW50ZXJfID0gYW5pbWF0aW9uLnRhcmdldENlbnRlcjtcbiAgICAgICAgICBjb25zdCB4ID0geDAgKyBwcm9ncmVzcyAqICh4MSAtIHgwKTtcbiAgICAgICAgICBjb25zdCB5ID0geTAgKyBwcm9ncmVzcyAqICh5MSAtIHkwKTtcbiAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBbeCwgeV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICYmIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgY29uc3QgcmVzb2x1dGlvbiA9XG4gICAgICAgICAgICBwcm9ncmVzcyA9PT0gMVxuICAgICAgICAgICAgICA/IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uXG4gICAgICAgICAgICAgIDogYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gK1xuICAgICAgICAgICAgICAgIHByb2dyZXNzICpcbiAgICAgICAgICAgICAgICAgIChhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiAtIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgICBpZiAoYW5pbWF0aW9uLmFuY2hvcikge1xuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgY29uc3QgY29uc3RyYWluZWRSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbihcbiAgICAgICAgICAgICAgcmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyWm9vbShcbiAgICAgICAgICAgICAgY29uc3RyYWluZWRSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICBhbmltYXRpb24uYW5jaG9yXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm5leHRSZXNvbHV0aW9uXyA9IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8odHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uICE9PSB1bmRlZmluZWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3Qgcm90YXRpb24gPVxuICAgICAgICAgICAgcHJvZ3Jlc3MgPT09IDFcbiAgICAgICAgICAgICAgPyBtb2R1bG8oYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uICsgTWF0aC5QSSwgMiAqIE1hdGguUEkpIC1cbiAgICAgICAgICAgICAgICBNYXRoLlBJXG4gICAgICAgICAgICAgIDogYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICtcbiAgICAgICAgICAgICAgICBwcm9ncmVzcyAqXG4gICAgICAgICAgICAgICAgICAoYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uKTtcbiAgICAgICAgICBpZiAoYW5pbWF0aW9uLmFuY2hvcikge1xuICAgICAgICAgICAgY29uc3QgY29uc3RyYWluZWRSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKFxuICAgICAgICAgICAgICByb3RhdGlvbixcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyUm90YXRlKFxuICAgICAgICAgICAgICBjb25zdHJhaW5lZFJvdGF0aW9uLFxuICAgICAgICAgICAgICBhbmltYXRpb24uYW5jaG9yXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm5leHRSb3RhdGlvbl8gPSBhbmltYXRpb24udGFyZ2V0Um90YXRpb247XG4gICAgICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gPSByb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKHRydWUpO1xuICAgICAgICBtb3JlID0gdHJ1ZTtcbiAgICAgICAgaWYgKCFhbmltYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNlcmllc0NvbXBsZXRlKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc19baV0gPSBudWxsO1xuICAgICAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuQU5JTUFUSU5HLCAtMSk7XG4gICAgICAgIHRoaXMubmV4dENlbnRlcl8gPSBudWxsO1xuICAgICAgICB0aGlzLm5leHRSZXNvbHV0aW9uXyA9IE5hTjtcbiAgICAgICAgdGhpcy5uZXh0Um90YXRpb25fID0gTmFOO1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9IHNlcmllc1swXS5jYWxsYmFjaztcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHBydW5lIGNvbXBsZXRlZCBzZXJpZXNcbiAgICB0aGlzLmFuaW1hdGlvbnNfID0gdGhpcy5hbmltYXRpb25zXy5maWx0ZXIoQm9vbGVhbik7XG4gICAgaWYgKG1vcmUgJiYgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShcbiAgICAgICAgdGhpcy51cGRhdGVBbmltYXRpb25zXy5iaW5kKHRoaXMpXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGFyZ2V0IHJvdGF0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgUm90YXRpb24gYW5jaG9yLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlciBmb3Igcm90YXRpb24gYW5kIGFuY2hvci5cbiAgICovXG4gIGNhbGN1bGF0ZUNlbnRlclJvdGF0ZShyb3RhdGlvbiwgYW5jaG9yKSB7XG4gICAgbGV0IGNlbnRlcjtcbiAgICBjb25zdCBjdXJyZW50Q2VudGVyID0gdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgIGlmIChjdXJyZW50Q2VudGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNlbnRlciA9IFtjdXJyZW50Q2VudGVyWzBdIC0gYW5jaG9yWzBdLCBjdXJyZW50Q2VudGVyWzFdIC0gYW5jaG9yWzFdXTtcbiAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoY2VudGVyLCByb3RhdGlvbiAtIHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICBhZGRDb29yZGluYXRlKGNlbnRlciwgYW5jaG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbnRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFpvb20gYW5jaG9yLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlciBmb3IgcmVzb2x1dGlvbiBhbmQgYW5jaG9yLlxuICAgKi9cbiAgY2FsY3VsYXRlQ2VudGVyWm9vbShyZXNvbHV0aW9uLCBhbmNob3IpIHtcbiAgICBsZXQgY2VudGVyO1xuICAgIGNvbnN0IGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgY29uc3QgY3VycmVudFJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICBpZiAoY3VycmVudENlbnRlciAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHggPVxuICAgICAgICBhbmNob3JbMF0gLVxuICAgICAgICAocmVzb2x1dGlvbiAqIChhbmNob3JbMF0gLSBjdXJyZW50Q2VudGVyWzBdKSkgLyBjdXJyZW50UmVzb2x1dGlvbjtcbiAgICAgIGNvbnN0IHkgPVxuICAgICAgICBhbmNob3JbMV0gLVxuICAgICAgICAocmVzb2x1dGlvbiAqIChhbmNob3JbMV0gLSBjdXJyZW50Q2VudGVyWzFdKSkgLyBjdXJyZW50UmVzb2x1dGlvbjtcbiAgICAgIGNlbnRlciA9IFt4LCB5XTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbnRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHZpZXdwb3J0IHNpemUuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcm90YXRpb25dIFRha2UgaW50byBhY2NvdW50IHRoZSByb3RhdGlvbiBvZiB0aGUgdmlld3BvcnQgd2hlbiBnaXZpbmcgdGhlIHNpemVcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFZpZXdwb3J0IHNpemUgb3IgYFsxMDAsIDEwMF1gIHdoZW4gbm8gdmlld3BvcnQgaXMgZm91bmQuXG4gICAqL1xuICBnZXRWaWV3cG9ydFNpemVfKHJvdGF0aW9uKSB7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMudmlld3BvcnRTaXplXztcbiAgICBpZiAocm90YXRpb24pIHtcbiAgICAgIGNvbnN0IHcgPSBzaXplWzBdO1xuICAgICAgY29uc3QgaCA9IHNpemVbMV07XG4gICAgICByZXR1cm4gW1xuICAgICAgICBNYXRoLmFicyh3ICogTWF0aC5jb3Mocm90YXRpb24pKSArIE1hdGguYWJzKGggKiBNYXRoLnNpbihyb3RhdGlvbikpLFxuICAgICAgICBNYXRoLmFicyh3ICogTWF0aC5zaW4ocm90YXRpb24pKSArIE1hdGguYWJzKGggKiBNYXRoLmNvcyhyb3RhdGlvbikpLFxuICAgICAgXTtcbiAgICB9XG4gICAgcmV0dXJuIHNpemU7XG4gIH1cblxuICAvKipcbiAgICogU3RvcmVzIHRoZSB2aWV3cG9ydCBzaXplIG9uIHRoZSB2aWV3LiBUaGUgdmlld3BvcnQgc2l6ZSBpcyBub3QgcmVhZCBldmVyeSB0aW1lIGZyb20gdGhlIERPTVxuICAgKiB0byBhdm9pZCBwZXJmb3JtYW5jZSBoaXQgYW5kIGxheW91dCByZWZsb3cuXG4gICAqIFRoaXMgc2hvdWxkIGJlIGRvbmUgb24gbWFwIHNpemUgY2hhbmdlLlxuICAgKiBOb3RlOiB0aGUgY29uc3RyYWludHMgYXJlIG5vdCByZXNvbHZlZCBkdXJpbmcgYW4gYW5pbWF0aW9uIHRvIGF2b2lkIHN0b3BwaW5nIGl0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtzaXplXSBWaWV3cG9ydCBzaXplOyBpZiB1bmRlZmluZWQsIFsxMDAsIDEwMF0gaXMgYXNzdW1lZFxuICAgKi9cbiAgc2V0Vmlld3BvcnRTaXplKHNpemUpIHtcbiAgICB0aGlzLnZpZXdwb3J0U2l6ZV8gPSBBcnJheS5pc0FycmF5KHNpemUpID8gc2l6ZS5zbGljZSgpIDogWzEwMCwgMTAwXTtcbiAgICBpZiAoIXRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgY2VudGVyLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldENlbnRlcigpIHtcbiAgICBjb25zdCBjZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgaWYgKCFjZW50ZXIpIHtcbiAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgfVxuICAgIHJldHVybiB0b1VzZXJDb29yZGluYXRlKGNlbnRlciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmlldyBjZW50ZXIgd2l0aG91dCB0cmFuc2Zvcm1pbmcgdG8gdXNlciBwcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAqL1xuICBnZXRDZW50ZXJJbnRlcm5hbCgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9ICovIChcbiAgICAgIHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtDb25zdHJhaW50c30gQ29uc3RyYWludHMuXG4gICAqL1xuICBnZXRDb25zdHJhaW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50c187XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gUmVzb2x1dGlvbiBjb25zdHJhaW50IGlzIHNldFxuICAgKi9cbiAgZ2V0Q29uc3RyYWluUmVzb2x1dGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoJ2NvbnN0cmFpblJlc29sdXRpb24nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtoaW50c10gRGVzdGluYXRpb24gYXJyYXkuXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEhpbnQuXG4gICAqL1xuICBnZXRIaW50cyhoaW50cykge1xuICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBoaW50c1swXSA9IHRoaXMuaGludHNfWzBdO1xuICAgICAgaGludHNbMV0gPSB0aGlzLmhpbnRzX1sxXTtcbiAgICAgIHJldHVybiBoaW50cztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaGludHNfLnNsaWNlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBleHRlbnQgZm9yIHRoZSBjdXJyZW50IHZpZXcgc3RhdGUgYW5kIHRoZSBwYXNzZWQgc2l6ZS5cbiAgICogVGhlIHNpemUgaXMgdGhlIHBpeGVsIGRpbWVuc2lvbnMgb2YgdGhlIGJveCBpbnRvIHdoaWNoIHRoZSBjYWxjdWxhdGVkIGV4dGVudFxuICAgKiBzaG91bGQgZml0LiBJbiBtb3N0IGNhc2VzIHlvdSB3YW50IHRvIGdldCB0aGUgZXh0ZW50IG9mIHRoZSBlbnRpcmUgbWFwLFxuICAgKiB0aGF0IGlzIGBtYXAuZ2V0U2l6ZSgpYC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3NpemVdIEJveCBwaXhlbCBzaXplLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBzaXplXG4gICAqIG9mIHRoZSBtYXAgdGhhdCB1c2VzIHRoaXMgdmlldyB3aWxsIGJlIHVzZWQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBjYWxjdWxhdGVFeHRlbnQoc2l6ZSkge1xuICAgIGNvbnN0IGV4dGVudCA9IHRoaXMuY2FsY3VsYXRlRXh0ZW50SW50ZXJuYWwoc2l6ZSk7XG4gICAgcmV0dXJuIHRvVXNlckV4dGVudChleHRlbnQsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbc2l6ZV0gQm94IHBpeGVsIHNpemUuIElmIG5vdCBwcm92aWRlZCxcbiAgICogdGhlIG1hcCdzIGxhc3Qga25vd24gdmlld3BvcnQgc2l6ZSB3aWxsIGJlIHVzZWQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgKi9cbiAgY2FsY3VsYXRlRXh0ZW50SW50ZXJuYWwoc2l6ZSkge1xuICAgIHNpemUgPSBzaXplIHx8IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgIGNvbnN0IGNlbnRlciA9IC8qKiBAdHlwZSB7IWltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSAqLyAoXG4gICAgICB0aGlzLmdldENlbnRlckludGVybmFsKClcbiAgICApO1xuICAgIGFzc2VydChjZW50ZXIsIDEpOyAvLyBUaGUgdmlldyBjZW50ZXIgaXMgbm90IGRlZmluZWRcbiAgICBjb25zdCByZXNvbHV0aW9uID0gLyoqIEB0eXBlIHshbnVtYmVyfSAqLyAodGhpcy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgIGFzc2VydChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQsIDIpOyAvLyBUaGUgdmlldyByZXNvbHV0aW9uIGlzIG5vdCBkZWZpbmVkXG4gICAgY29uc3Qgcm90YXRpb24gPSAvKiogQHR5cGUgeyFudW1iZXJ9ICovICh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgIGFzc2VydChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkLCAzKTsgLy8gVGhlIHZpZXcgcm90YXRpb24gaXMgbm90IGRlZmluZWRcblxuICAgIHJldHVybiBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRNYXhSZXNvbHV0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1heFJlc29sdXRpb25fO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE1pblJlc29sdXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubWluUmVzb2x1dGlvbl87XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE1heFpvb20oKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoXG4gICAgICB0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMubWluUmVzb2x1dGlvbl8pXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSBuZXcgbWF4aW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gVGhlIG1heGltdW0gem9vbSBsZXZlbC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0TWF4Wm9vbSh6b29tKSB7XG4gICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHttYXhab29tOiB6b29tfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWluaW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSB6b29tIGxldmVsLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRNaW5ab29tKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKFxuICAgICAgdGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLm1heFJlc29sdXRpb25fKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgbmV3IG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldE1pblpvb20oem9vbSkge1xuICAgIHRoaXMuYXBwbHlPcHRpb25zXyh0aGlzLmdldFVwZGF0ZWRPcHRpb25zXyh7bWluWm9vbTogem9vbX0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgd2hldGhlciB0aGUgdmlldyBzaG91bGQgYWxsb3cgaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgV2hldGhlciB0aGUgcmVzb2x1dGlvbiBpcyBjb25zdHJhaW5lZC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0Q29uc3RyYWluUmVzb2x1dGlvbihlbmFibGVkKSB7XG4gICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHtjb25zdHJhaW5SZXNvbHV0aW9uOiBlbmFibGVkfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBUaGUgcHJvamVjdGlvbiBvZiB0aGUgdmlldy5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0UHJvamVjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9qZWN0aW9uXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgcmVzb2x1dGlvbi5cbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFJlc29sdXRpb24oKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5SRVNPTFVUSU9OKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSByZXNvbHV0aW9ucyBmb3IgdGhlIHZpZXcuIFRoaXMgcmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzb2x1dGlvbnNcbiAgICogcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgVmlldywgb3IgdW5kZWZpbmVkIGlmIG5vbmUgd2VyZSBnaXZlbi5cbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IFRoZSByZXNvbHV0aW9ucyBvZiB0aGUgdmlldy5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0UmVzb2x1dGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVzb2x1dGlvbiBmb3IgYSBwcm92aWRlZCBleHRlbnQgKGluIG1hcCB1bml0cykgYW5kIHNpemUgKGluIHBpeGVscykuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbc2l6ZV0gQm94IHBpeGVsIHNpemUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJlc29sdXRpb24gYXQgd2hpY2ggdGhlIHByb3ZpZGVkIGV4dGVudCB3aWxsIHJlbmRlciBhdFxuICAgKiAgICAgdGhlIGdpdmVuIHNpemUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFJlc29sdXRpb25Gb3JFeHRlbnQoZXh0ZW50LCBzaXplKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsKFxuICAgICAgZnJvbVVzZXJFeHRlbnQoZXh0ZW50LCB0aGlzLmdldFByb2plY3Rpb24oKSksXG4gICAgICBzaXplXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgcHJvdmlkZWQgZXh0ZW50IChpbiBtYXAgdW5pdHMpIGFuZCBzaXplIChpbiBwaXhlbHMpLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3NpemVdIEJveCBwaXhlbCBzaXplLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBwcm92aWRlZCBleHRlbnQgd2lsbCByZW5kZXIgYXRcbiAgICogICAgIHRoZSBnaXZlbiBzaXplLlxuICAgKi9cbiAgZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsKGV4dGVudCwgc2l6ZSkge1xuICAgIHNpemUgPSBzaXplIHx8IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgIGNvbnN0IHhSZXNvbHV0aW9uID0gZ2V0V2lkdGgoZXh0ZW50KSAvIHNpemVbMF07XG4gICAgY29uc3QgeVJlc29sdXRpb24gPSBnZXRIZWlnaHQoZXh0ZW50KSAvIHNpemVbMV07XG4gICAgcmV0dXJuIE1hdGgubWF4KHhSZXNvbHV0aW9uLCB5UmVzb2x1dGlvbik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIGZvciBhXG4gICAqIHJlc29sdXRpb24uIEV4cG9uZW50aWFsIHNjYWxpbmcgaXMgYXNzdW1lZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtwb3dlcl0gUG93ZXIuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlcik6IG51bWJlcn0gUmVzb2x1dGlvbiBmb3IgdmFsdWUgZnVuY3Rpb24uXG4gICAqL1xuICBnZXRSZXNvbHV0aW9uRm9yVmFsdWVGdW5jdGlvbihwb3dlcikge1xuICAgIHBvd2VyID0gcG93ZXIgfHwgMjtcbiAgICBjb25zdCBtYXhSZXNvbHV0aW9uID0gdGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24odGhpcy5tYXhSZXNvbHV0aW9uXyk7XG4gICAgY29uc3QgbWluUmVzb2x1dGlvbiA9IHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgY29uc3QgbWF4ID0gTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIG1pblJlc29sdXRpb24pIC8gTWF0aC5sb2cocG93ZXIpO1xuICAgIHJldHVybiAoXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZS5cbiAgICAgICAqIEByZXR1cm4ge251bWJlcn0gUmVzb2x1dGlvbi5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3cocG93ZXIsIHZhbHVlICogbWF4KTtcbiAgICAgICAgcmV0dXJuIHJlc29sdXRpb247XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgcm90YXRpb24uXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFJvdGF0aW9uKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTikpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHJlc29sdXRpb24gZm9yIGEgdmFsdWUgYmV0d2VlblxuICAgKiAwIGFuZCAxLiBFeHBvbmVudGlhbCBzY2FsaW5nIGlzIGFzc3VtZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcG93ZXJdIFBvd2VyLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIpOiBudW1iZXJ9IFZhbHVlIGZvciByZXNvbHV0aW9uIGZ1bmN0aW9uLlxuICAgKi9cbiAgZ2V0VmFsdWVGb3JSZXNvbHV0aW9uRnVuY3Rpb24ocG93ZXIpIHtcbiAgICBjb25zdCBsb2dQb3dlciA9IE1hdGgubG9nKHBvd2VyIHx8IDIpO1xuICAgIGNvbnN0IG1heFJlc29sdXRpb24gPSB0aGlzLmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbih0aGlzLm1heFJlc29sdXRpb25fKTtcbiAgICBjb25zdCBtaW5SZXNvbHV0aW9uID0gdGhpcy5taW5SZXNvbHV0aW9uXztcbiAgICBjb25zdCBtYXggPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBsb2dQb3dlcjtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAgICogQHJldHVybiB7bnVtYmVyfSBWYWx1ZS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gKHJlc29sdXRpb24pIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gcmVzb2x1dGlvbikgLyBsb2dQb3dlciAvIG1heDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgdmlld3BvcnQgbWludXMgcGFkZGluZy5cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtyb3RhdGlvbl0gVGFrZSBpbnRvIGFjY291bnQgdGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3cG9ydCB3aGVuIGdpdmluZyB0aGUgc2l6ZVxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gVmlld3BvcnQgc2l6ZSByZWR1Y2VkIGJ5IHRoZSBwYWRkaW5nLlxuICAgKi9cbiAgZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXyhyb3RhdGlvbikge1xuICAgIGxldCBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHJvdGF0aW9uKTtcbiAgICBjb25zdCBwYWRkaW5nID0gdGhpcy5wYWRkaW5nXztcbiAgICBpZiAocGFkZGluZykge1xuICAgICAgc2l6ZSA9IFtcbiAgICAgICAgc2l6ZVswXSAtIHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdLFxuICAgICAgICBzaXplWzFdIC0gcGFkZGluZ1swXSAtIHBhZGRpbmdbMl0sXG4gICAgICBdO1xuICAgIH1cbiAgICByZXR1cm4gc2l6ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtTdGF0ZX0gVmlldyBzdGF0ZS5cbiAgICovXG4gIGdldFN0YXRlKCkge1xuICAgIGNvbnN0IHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICBjb25zdCByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgY29uc3Qgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgbGV0IGNlbnRlciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovIChcbiAgICAgIHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKVxuICAgICk7XG4gICAgY29uc3QgcGFkZGluZyA9IHRoaXMucGFkZGluZ187XG4gICAgaWYgKHBhZGRpbmcpIHtcbiAgICAgIGNvbnN0IHJlZHVjZWRTaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfKCk7XG4gICAgICBjZW50ZXIgPSBjYWxjdWxhdGVDZW50ZXJPbihcbiAgICAgICAgY2VudGVyLFxuICAgICAgICB0aGlzLmdldFZpZXdwb3J0U2l6ZV8oKSxcbiAgICAgICAgW3JlZHVjZWRTaXplWzBdIC8gMiArIHBhZGRpbmdbM10sIHJlZHVjZWRTaXplWzFdIC8gMiArIHBhZGRpbmdbMF1dLFxuICAgICAgICByZXNvbHV0aW9uLFxuICAgICAgICByb3RhdGlvblxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGNlbnRlcjogY2VudGVyLnNsaWNlKDApLFxuICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gcHJvamVjdGlvbiA6IG51bGwsXG4gICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uLFxuICAgICAgbmV4dENlbnRlcjogdGhpcy5uZXh0Q2VudGVyXyxcbiAgICAgIG5leHRSZXNvbHV0aW9uOiB0aGlzLm5leHRSZXNvbHV0aW9uXyxcbiAgICAgIG5leHRSb3RhdGlvbjogdGhpcy5uZXh0Um90YXRpb25fLFxuICAgICAgcm90YXRpb246IHJvdGF0aW9uLFxuICAgICAgem9vbTogdGhpcy5nZXRab29tKCksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtWaWV3U3RhdGVBbmRFeHRlbnR9IExpa2UgYEZyYW1lU3RhdGVgLCBidXQganVzdCBgdmlld1N0YXRlYCBhbmQgYGV4dGVudGAuXG4gICAqL1xuICBnZXRWaWV3U3RhdGVBbmRFeHRlbnQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZpZXdTdGF0ZTogdGhpcy5nZXRTdGF0ZSgpLFxuICAgICAgZXh0ZW50OiB0aGlzLmNhbGN1bGF0ZUV4dGVudCgpLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHpvb20gbGV2ZWwuIFRoaXMgbWV0aG9kIG1heSByZXR1cm4gbm9uLWludGVnZXIgem9vbSBsZXZlbHNcbiAgICogaWYgdGhlIHZpZXcgZG9lcyBub3QgY29uc3RyYWluIHRoZSByZXNvbHV0aW9uLCBvciBpZiBhbiBpbnRlcmFjdGlvbiBvclxuICAgKiBhbmltYXRpb24gaXMgdW5kZXJ3YXkuXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFpvb20uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFpvb20oKSB7XG4gICAgbGV0IHpvb207XG4gICAgY29uc3QgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgIGlmIChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHpvb20gPSB0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHJlc29sdXRpb24pO1xuICAgIH1cbiAgICByZXR1cm4gem9vbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHpvb20gbGV2ZWwgZm9yIGEgcmVzb2x1dGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGhlIHJlc29sdXRpb24uXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSB6b29tIGxldmVsIGZvciB0aGUgcHJvdmlkZWQgcmVzb2x1dGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0Wm9vbUZvclJlc29sdXRpb24ocmVzb2x1dGlvbikge1xuICAgIGxldCBvZmZzZXQgPSB0aGlzLm1pblpvb21fIHx8IDA7XG4gICAgbGV0IG1heCwgem9vbUZhY3RvcjtcbiAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18pIHtcbiAgICAgIGNvbnN0IG5lYXJlc3QgPSBsaW5lYXJGaW5kTmVhcmVzdCh0aGlzLnJlc29sdXRpb25zXywgcmVzb2x1dGlvbiwgMSk7XG4gICAgICBvZmZzZXQgPSBuZWFyZXN0O1xuICAgICAgbWF4ID0gdGhpcy5yZXNvbHV0aW9uc19bbmVhcmVzdF07XG4gICAgICBpZiAobmVhcmVzdCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggLSAxKSB7XG4gICAgICAgIHpvb21GYWN0b3IgPSAyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgem9vbUZhY3RvciA9IG1heCAvIHRoaXMucmVzb2x1dGlvbnNfW25lYXJlc3QgKyAxXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbWF4ID0gdGhpcy5tYXhSZXNvbHV0aW9uXztcbiAgICAgIHpvb21GYWN0b3IgPSB0aGlzLnpvb21GYWN0b3JfO1xuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0ICsgTWF0aC5sb2cobWF4IC8gcmVzb2x1dGlvbikgLyBNYXRoLmxvZyh6b29tRmFjdG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgdmlldyByZXNvbHV0aW9uIGZvciB0aGUgcHJvdmlkZWQgem9vbSBsZXZlbC5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0UmVzb2x1dGlvbkZvclpvb20oem9vbSkge1xuICAgIGlmICh0aGlzLnJlc29sdXRpb25zXykge1xuICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgY29uc3QgYmFzZUxldmVsID0gY2xhbXAoXG4gICAgICAgIE1hdGguZmxvb3Ioem9vbSksXG4gICAgICAgIDAsXG4gICAgICAgIHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDJcbiAgICAgICk7XG4gICAgICBjb25zdCB6b29tRmFjdG9yID1cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uc19bYmFzZUxldmVsXSAvIHRoaXMucmVzb2x1dGlvbnNfW2Jhc2VMZXZlbCArIDFdO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uc19bYmFzZUxldmVsXSAvXG4gICAgICAgIE1hdGgucG93KHpvb21GYWN0b3IsIGNsYW1wKHpvb20gLSBiYXNlTGV2ZWwsIDAsIDEpKVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubWF4UmVzb2x1dGlvbl8gLyBNYXRoLnBvdyh0aGlzLnpvb21GYWN0b3JfLCB6b29tIC0gdGhpcy5taW5ab29tXylcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpdCB0aGUgZ2l2ZW4gZ2VvbWV0cnkgb3IgZXh0ZW50IGJhc2VkIG9uIHRoZSBnaXZlbiBtYXAgc2l6ZSBhbmQgYm9yZGVyLlxuICAgKiBUaGUgc2l6ZSBpcyBwaXhlbCBkaW1lbnNpb25zIG9mIHRoZSBib3ggdG8gZml0IHRoZSBleHRlbnQgaW50by5cbiAgICogSW4gbW9zdCBjYXNlcyB5b3Ugd2lsbCB3YW50IHRvIHVzZSB0aGUgbWFwIHNpemUsIHRoYXQgaXMgYG1hcC5nZXRTaXplKClgLlxuICAgKiBUYWtlcyBjYXJlIG9mIHRoZSBtYXAgYW5nbGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBnZW9tZXRyeU9yRXh0ZW50IFRoZSBnZW9tZXRyeSBvclxuICAgKiAgICAgZXh0ZW50IHRvIGZpdCB0aGUgdmlldyB0by5cbiAgICogQHBhcmFtIHtGaXRPcHRpb25zfSBbb3B0aW9uc10gT3B0aW9ucy5cbiAgICogQGFwaVxuICAgKi9cbiAgZml0KGdlb21ldHJ5T3JFeHRlbnQsIG9wdGlvbnMpIHtcbiAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqL1xuICAgIGxldCBnZW9tZXRyeTtcbiAgICBhc3NlcnQoXG4gICAgICBBcnJheS5pc0FycmF5KGdlb21ldHJ5T3JFeHRlbnQpIHx8XG4gICAgICAgIHR5cGVvZiAoLyoqIEB0eXBlIHs/fSAqLyAoZ2VvbWV0cnlPckV4dGVudCkuZ2V0U2ltcGxpZmllZEdlb21ldHJ5KSA9PT1cbiAgICAgICAgICAnZnVuY3Rpb24nLFxuICAgICAgMjRcbiAgICApOyAvLyBJbnZhbGlkIGV4dGVudCBvciBnZW9tZXRyeSBwcm92aWRlZCBhcyBgZ2VvbWV0cnlgXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZ2VvbWV0cnlPckV4dGVudCkpIHtcbiAgICAgIGFzc2VydCghaXNFbXB0eShnZW9tZXRyeU9yRXh0ZW50KSwgMjUpOyAvLyBDYW5ub3QgZml0IGVtcHR5IGV4dGVudCBwcm92aWRlZCBhcyBgZ2VvbWV0cnlgXG4gICAgICBjb25zdCBleHRlbnQgPSBmcm9tVXNlckV4dGVudChnZW9tZXRyeU9yRXh0ZW50LCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICBnZW9tZXRyeSA9IHBvbHlnb25Gcm9tRXh0ZW50KGV4dGVudCk7XG4gICAgfSBlbHNlIGlmIChnZW9tZXRyeU9yRXh0ZW50LmdldFR5cGUoKSA9PT0gJ0NpcmNsZScpIHtcbiAgICAgIGNvbnN0IGV4dGVudCA9IGZyb21Vc2VyRXh0ZW50KFxuICAgICAgICBnZW9tZXRyeU9yRXh0ZW50LmdldEV4dGVudCgpLFxuICAgICAgICB0aGlzLmdldFByb2plY3Rpb24oKVxuICAgICAgKTtcbiAgICAgIGdlb21ldHJ5ID0gcG9seWdvbkZyb21FeHRlbnQoZXh0ZW50KTtcbiAgICAgIGdlb21ldHJ5LnJvdGF0ZSh0aGlzLmdldFJvdGF0aW9uKCksIGdldENlbnRlcihleHRlbnQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdXNlclByb2plY3Rpb24gPSBnZXRVc2VyUHJvamVjdGlvbigpO1xuICAgICAgaWYgKHVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKFxuICAgICAgICAgIGdlb21ldHJ5T3JFeHRlbnRcbiAgICAgICAgICAgIC5jbG9uZSgpXG4gICAgICAgICAgICAudHJhbnNmb3JtKHVzZXJQcm9qZWN0aW9uLCB0aGlzLmdldFByb2plY3Rpb24oKSlcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnlPckV4dGVudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmZpdEludGVybmFsKGdlb21ldHJ5LCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgcm90YXRlZCBleHRlbnRcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgVGhlIGdlb21ldHJ5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudFwiKS5FeHRlbnR9IFRoZSByb3RhdGVkIGV4dGVudCBmb3IgdGhlIGdlb21ldHJ5LlxuICAgKi9cbiAgcm90YXRlZEV4dGVudEZvckdlb21ldHJ5KGdlb21ldHJ5KSB7XG4gICAgY29uc3Qgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgY29uc3QgY29zQW5nbGUgPSBNYXRoLmNvcyhyb3RhdGlvbik7XG4gICAgY29uc3Qgc2luQW5nbGUgPSBNYXRoLnNpbigtcm90YXRpb24pO1xuICAgIGNvbnN0IGNvb3JkcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgIGNvbnN0IHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgIGxldCBtaW5Sb3RYID0gK0luZmluaXR5O1xuICAgIGxldCBtaW5Sb3RZID0gK0luZmluaXR5O1xuICAgIGxldCBtYXhSb3RYID0gLUluZmluaXR5O1xuICAgIGxldCBtYXhSb3RZID0gLUluZmluaXR5O1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGNvb3Jkcy5sZW5ndGg7IGkgPCBpaTsgaSArPSBzdHJpZGUpIHtcbiAgICAgIGNvbnN0IHJvdFggPSBjb29yZHNbaV0gKiBjb3NBbmdsZSAtIGNvb3Jkc1tpICsgMV0gKiBzaW5BbmdsZTtcbiAgICAgIGNvbnN0IHJvdFkgPSBjb29yZHNbaV0gKiBzaW5BbmdsZSArIGNvb3Jkc1tpICsgMV0gKiBjb3NBbmdsZTtcbiAgICAgIG1pblJvdFggPSBNYXRoLm1pbihtaW5Sb3RYLCByb3RYKTtcbiAgICAgIG1pblJvdFkgPSBNYXRoLm1pbihtaW5Sb3RZLCByb3RZKTtcbiAgICAgIG1heFJvdFggPSBNYXRoLm1heChtYXhSb3RYLCByb3RYKTtcbiAgICAgIG1heFJvdFkgPSBNYXRoLm1heChtYXhSb3RZLCByb3RZKTtcbiAgICB9XG4gICAgcmV0dXJuIFttaW5Sb3RYLCBtaW5Sb3RZLCBtYXhSb3RYLCBtYXhSb3RZXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBUaGUgZ2VvbWV0cnkuXG4gICAqIEBwYXJhbSB7Rml0T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBmaXRJbnRlcm5hbChnZW9tZXRyeSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGxldCBzaXplID0gb3B0aW9ucy5zaXplO1xuICAgIGlmICghc2l6ZSkge1xuICAgICAgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgIH1cbiAgICBjb25zdCBwYWRkaW5nID1cbiAgICAgIG9wdGlvbnMucGFkZGluZyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wYWRkaW5nIDogWzAsIDAsIDAsIDBdO1xuICAgIGNvbnN0IG5lYXJlc3QgPSBvcHRpb25zLm5lYXJlc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubmVhcmVzdCA6IGZhbHNlO1xuICAgIGxldCBtaW5SZXNvbHV0aW9uO1xuICAgIGlmIChvcHRpb25zLm1pblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbWluUmVzb2x1dGlvbiA9IG9wdGlvbnMubWluUmVzb2x1dGlvbjtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBtaW5SZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShvcHRpb25zLm1heFpvb20pO1xuICAgIH0gZWxzZSB7XG4gICAgICBtaW5SZXNvbHV0aW9uID0gMDtcbiAgICB9XG5cbiAgICBjb25zdCByb3RhdGVkRXh0ZW50ID0gdGhpcy5yb3RhdGVkRXh0ZW50Rm9yR2VvbWV0cnkoZ2VvbWV0cnkpO1xuXG4gICAgLy8gY2FsY3VsYXRlIHJlc29sdXRpb25cbiAgICBsZXQgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsKHJvdGF0ZWRFeHRlbnQsIFtcbiAgICAgIHNpemVbMF0gLSBwYWRkaW5nWzFdIC0gcGFkZGluZ1szXSxcbiAgICAgIHNpemVbMV0gLSBwYWRkaW5nWzBdIC0gcGFkZGluZ1syXSxcbiAgICBdKTtcbiAgICByZXNvbHV0aW9uID0gaXNOYU4ocmVzb2x1dGlvbilcbiAgICAgID8gbWluUmVzb2x1dGlvblxuICAgICAgOiBNYXRoLm1heChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uKTtcbiAgICByZXNvbHV0aW9uID0gdGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgbmVhcmVzdCA/IDAgOiAxKTtcblxuICAgIC8vIGNhbGN1bGF0ZSBjZW50ZXJcbiAgICBjb25zdCByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICBjb25zdCBzaW5BbmdsZSA9IE1hdGguc2luKHJvdGF0aW9uKTtcbiAgICBjb25zdCBjb3NBbmdsZSA9IE1hdGguY29zKHJvdGF0aW9uKTtcbiAgICBjb25zdCBjZW50ZXJSb3QgPSBnZXRDZW50ZXIocm90YXRlZEV4dGVudCk7XG4gICAgY2VudGVyUm90WzBdICs9ICgocGFkZGluZ1sxXSAtIHBhZGRpbmdbM10pIC8gMikgKiByZXNvbHV0aW9uO1xuICAgIGNlbnRlclJvdFsxXSArPSAoKHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdKSAvIDIpICogcmVzb2x1dGlvbjtcbiAgICBjb25zdCBjZW50ZXJYID0gY2VudGVyUm90WzBdICogY29zQW5nbGUgLSBjZW50ZXJSb3RbMV0gKiBzaW5BbmdsZTtcbiAgICBjb25zdCBjZW50ZXJZID0gY2VudGVyUm90WzFdICogY29zQW5nbGUgKyBjZW50ZXJSb3RbMF0gKiBzaW5BbmdsZTtcbiAgICBjb25zdCBjZW50ZXIgPSB0aGlzLmdldENvbnN0cmFpbmVkQ2VudGVyKFtjZW50ZXJYLCBjZW50ZXJZXSwgcmVzb2x1dGlvbik7XG4gICAgY29uc3QgY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrID8gb3B0aW9ucy5jYWxsYmFjayA6IFZPSUQ7XG5cbiAgICBpZiAob3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmFuaW1hdGVJbnRlcm5hbChcbiAgICAgICAge1xuICAgICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgICAgICAgY2VudGVyOiBjZW50ZXIsXG4gICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyxcbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2tcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gY2VudGVyO1xuICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXyhmYWxzZSwgdHJ1ZSk7XG4gICAgICBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENlbnRlciBvbiBjb29yZGluYXRlIGFuZCB2aWV3IHBvc2l0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgQm94IHBpeGVsIHNpemUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcG9zaXRpb24gUG9zaXRpb24gb24gdGhlIHZpZXcgdG8gY2VudGVyIG9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBjZW50ZXJPbihjb29yZGluYXRlLCBzaXplLCBwb3NpdGlvbikge1xuICAgIHRoaXMuY2VudGVyT25JbnRlcm5hbChcbiAgICAgIGZyb21Vc2VyQ29vcmRpbmF0ZShjb29yZGluYXRlLCB0aGlzLmdldFByb2plY3Rpb24oKSksXG4gICAgICBzaXplLFxuICAgICAgcG9zaXRpb25cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBCb3ggcGl4ZWwgc2l6ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwb3NpdGlvbiBQb3NpdGlvbiBvbiB0aGUgdmlldyB0byBjZW50ZXIgb24uXG4gICAqL1xuICBjZW50ZXJPbkludGVybmFsKGNvb3JkaW5hdGUsIHNpemUsIHBvc2l0aW9uKSB7XG4gICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChcbiAgICAgIGNhbGN1bGF0ZUNlbnRlck9uKFxuICAgICAgICBjb29yZGluYXRlLFxuICAgICAgICBzaXplLFxuICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgdGhpcy5nZXRSZXNvbHV0aW9uKCksXG4gICAgICAgIHRoaXMuZ2V0Um90YXRpb24oKVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgc2hpZnQgYmV0d2VlbiBtYXAgYW5kIHZpZXdwb3J0IGNlbnRlci5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfSBDZW50ZXIgc2hpZnQuXG4gICAqL1xuICBjYWxjdWxhdGVDZW50ZXJTaGlmdChjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplKSB7XG4gICAgbGV0IGNlbnRlclNoaWZ0O1xuICAgIGNvbnN0IHBhZGRpbmcgPSB0aGlzLnBhZGRpbmdfO1xuICAgIGlmIChwYWRkaW5nICYmIGNlbnRlcikge1xuICAgICAgY29uc3QgcmVkdWNlZFNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18oLXJvdGF0aW9uKTtcbiAgICAgIGNvbnN0IHNoaWZ0ZWRDZW50ZXIgPSBjYWxjdWxhdGVDZW50ZXJPbihcbiAgICAgICAgY2VudGVyLFxuICAgICAgICBzaXplLFxuICAgICAgICBbcmVkdWNlZFNpemVbMF0gLyAyICsgcGFkZGluZ1szXSwgcmVkdWNlZFNpemVbMV0gLyAyICsgcGFkZGluZ1swXV0sXG4gICAgICAgIHJlc29sdXRpb24sXG4gICAgICAgIHJvdGF0aW9uXG4gICAgICApO1xuICAgICAgY2VudGVyU2hpZnQgPSBbXG4gICAgICAgIGNlbnRlclswXSAtIHNoaWZ0ZWRDZW50ZXJbMF0sXG4gICAgICAgIGNlbnRlclsxXSAtIHNoaWZ0ZWRDZW50ZXJbMV0sXG4gICAgICBdO1xuICAgIH1cbiAgICByZXR1cm4gY2VudGVyU2hpZnQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZGVmaW5lZC5cbiAgICovXG4gIGlzRGVmKCkge1xuICAgIHJldHVybiAhIXRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSAmJiB0aGlzLmdldFJlc29sdXRpb24oKSAhPT0gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgcmVsYXRpdmUgY29vcmRpbmF0ZXMgdG8gdGhlIGNlbnRlciBvZiB0aGUgdmlldy4gQW55IGV4dGVudCBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRlbHRhQ29vcmRpbmF0ZXMgUmVsYXRpdmUgdmFsdWUgdG8gYWRkLlxuICAgKiBAYXBpXG4gICAqL1xuICBhZGp1c3RDZW50ZXIoZGVsdGFDb29yZGluYXRlcykge1xuICAgIGNvbnN0IGNlbnRlciA9IHRvVXNlckNvb3JkaW5hdGUodGhpcy50YXJnZXRDZW50ZXJfLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgdGhpcy5zZXRDZW50ZXIoW1xuICAgICAgY2VudGVyWzBdICsgZGVsdGFDb29yZGluYXRlc1swXSxcbiAgICAgIGNlbnRlclsxXSArIGRlbHRhQ29vcmRpbmF0ZXNbMV0sXG4gICAgXSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyByZWxhdGl2ZSBjb29yZGluYXRlcyB0byB0aGUgY2VudGVyIG9mIHRoZSB2aWV3LiBBbnkgZXh0ZW50IGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZGVsdGFDb29yZGluYXRlcyBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQuXG4gICAqL1xuICBhZGp1c3RDZW50ZXJJbnRlcm5hbChkZWx0YUNvb3JkaW5hdGVzKSB7XG4gICAgY29uc3QgY2VudGVyID0gdGhpcy50YXJnZXRDZW50ZXJfO1xuICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoW1xuICAgICAgY2VudGVyWzBdICsgZGVsdGFDb29yZGluYXRlc1swXSxcbiAgICAgIGNlbnRlclsxXSArIGRlbHRhQ29vcmRpbmF0ZXNbMV0sXG4gICAgXSk7XG4gIH1cblxuICAvKipcbiAgICogTXVsdGlwbHkgdGhlIHZpZXcgcmVzb2x1dGlvbiBieSBhIHJhdGlvLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICogY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmF0aW8gVGhlIHJhdGlvIHRvIGFwcGx5IG9uIHRoZSB2aWV3IHJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBhZGp1c3RSZXNvbHV0aW9uKHJhdGlvLCBhbmNob3IpIHtcbiAgICBhbmNob3IgPSBhbmNob3IgJiYgZnJvbVVzZXJDb29yZGluYXRlKGFuY2hvciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgIHRoaXMuYWRqdXN0UmVzb2x1dGlvbkludGVybmFsKHJhdGlvLCBhbmNob3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIE11bHRpcGx5IHRoZSB2aWV3IHJlc29sdXRpb24gYnkgYSByYXRpbywgb3B0aW9uYWxseSB1c2luZyBhbiBhbmNob3IuIEFueSByZXNvbHV0aW9uXG4gICAqIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFRoZSByYXRpbyB0byBhcHBseSBvbiB0aGUgdmlldyByZXNvbHV0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICovXG4gIGFkanVzdFJlc29sdXRpb25JbnRlcm5hbChyYXRpbywgYW5jaG9yKSB7XG4gICAgY29uc3QgaXNNb3ZpbmcgPSB0aGlzLmdldEFuaW1hdGluZygpIHx8IHRoaXMuZ2V0SW50ZXJhY3RpbmcoKTtcbiAgICBjb25zdCBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgY29uc3QgbmV3UmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24oXG4gICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fICogcmF0aW8sXG4gICAgICAwLFxuICAgICAgc2l6ZSxcbiAgICAgIGlzTW92aW5nXG4gICAgKTtcblxuICAgIGlmIChhbmNob3IpIHtcbiAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyWm9vbShuZXdSZXNvbHV0aW9uLCBhbmNob3IpO1xuICAgIH1cblxuICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gKj0gcmF0aW87XG4gICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSB2YWx1ZSB0byB0aGUgdmlldyB6b29tIGxldmVsLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICogY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgUmVsYXRpdmUgdmFsdWUgdG8gYWRkIHRvIHRoZSB6b29tIGxldmVsLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgYWRqdXN0Wm9vbShkZWx0YSwgYW5jaG9yKSB7XG4gICAgdGhpcy5hZGp1c3RSZXNvbHV0aW9uKE1hdGgucG93KHRoaXMuem9vbUZhY3Rvcl8sIC1kZWx0YSksIGFuY2hvcik7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIHZhbHVlIHRvIHRoZSB2aWV3IHJvdGF0aW9uLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJvdGF0aW9uXG4gICAqIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFJlbGF0aXZlIHZhbHVlIHRvIGFkZCB0byB0aGUgem9vbSByb3RhdGlvbiwgaW4gcmFkaWFucy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICogQGFwaVxuICAgKi9cbiAgYWRqdXN0Um90YXRpb24oZGVsdGEsIGFuY2hvcikge1xuICAgIGlmIChhbmNob3IpIHtcbiAgICAgIGFuY2hvciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShhbmNob3IsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICB9XG4gICAgdGhpcy5hZGp1c3RSb3RhdGlvbkludGVybmFsKGRlbHRhLCBhbmNob3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQgdG8gdGhlIHpvb20gcm90YXRpb24sIGluIHJhZGlhbnMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAqL1xuICBhZGp1c3RSb3RhdGlvbkludGVybmFsKGRlbHRhLCBhbmNob3IpIHtcbiAgICBjb25zdCBpc01vdmluZyA9IHRoaXMuZ2V0QW5pbWF0aW5nKCkgfHwgdGhpcy5nZXRJbnRlcmFjdGluZygpO1xuICAgIGNvbnN0IG5ld1JvdGF0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucm90YXRpb24oXG4gICAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyArIGRlbHRhLFxuICAgICAgaXNNb3ZpbmdcbiAgICApO1xuICAgIGlmIChhbmNob3IpIHtcbiAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyUm90YXRlKG5ld1JvdGF0aW9uLCBhbmNob3IpO1xuICAgIH1cbiAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyArPSBkZWx0YTtcbiAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjZW50ZXIgb2YgdGhlIGN1cnJlbnQgdmlldy4gQW55IGV4dGVudCBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgc2V0Q2VudGVyKGNlbnRlcikge1xuICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoXG4gICAgICBjZW50ZXIgPyBmcm9tVXNlckNvb3JkaW5hdGUoY2VudGVyLCB0aGlzLmdldFByb2plY3Rpb24oKSkgOiBjZW50ZXJcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY2VudGVyIHVzaW5nIHRoZSB2aWV3IHByb2plY3Rpb24gKG5vdCB0aGUgdXNlciBwcm9qZWN0aW9uKS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IGNlbnRlciBUaGUgY2VudGVyIG9mIHRoZSB2aWV3LlxuICAgKi9cbiAgc2V0Q2VudGVySW50ZXJuYWwoY2VudGVyKSB7XG4gICAgdGhpcy50YXJnZXRDZW50ZXJfID0gY2VudGVyO1xuICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVmlld0hpbnQuanNcIikuZGVmYXVsdH0gaGludCBIaW50LlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgRGVsdGEuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTmV3IHZhbHVlLlxuICAgKi9cbiAgc2V0SGludChoaW50LCBkZWx0YSkge1xuICAgIHRoaXMuaGludHNfW2hpbnRdICs9IGRlbHRhO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIHJldHVybiB0aGlzLmhpbnRzX1toaW50XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHJlc29sdXRpb24gZm9yIHRoaXMgdmlldy4gQW55IHJlc29sdXRpb24gY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFJlc29sdXRpb24ocmVzb2x1dGlvbikge1xuICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHJvdGF0aW9uIGZvciB0aGlzIHZpZXcuIEFueSByb3RhdGlvbiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBUaGUgcm90YXRpb24gb2YgdGhlIHZpZXcgaW4gcmFkaWFucy5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgc2V0Um90YXRpb24ocm90YXRpb24pIHtcbiAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBab29tIHRvIGEgc3BlY2lmaWMgem9vbSBsZXZlbC4gQW55IHJlc29sdXRpb24gY29uc3RyYWluIHdpbGwgYXBwbHkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFpvb20oem9vbSkge1xuICAgIHRoaXMuc2V0UmVzb2x1dGlvbih0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKHpvb20pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNvbXB1dGUgcm90YXRpb24vcmVzb2x1dGlvbi9jZW50ZXIgYmFzZWQgb24gdGFyZ2V0IHZhbHVlcy5cbiAgICogTm90ZTogd2UgaGF2ZSB0byBjb21wdXRlIHJvdGF0aW9uIGZpcnN0LCB0aGVuIHJlc29sdXRpb24gYW5kIGNlbnRlciBjb25zaWRlcmluZyB0aGF0XG4gICAqIHBhcmFtZXRlcnMgY2FuIGluZmx1ZW5jZSBvbmUgYW5vdGhlciBpbiBjYXNlIGEgdmlldyBleHRlbnQgY29uc3RyYWludCBpcyBwcmVzZW50LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtkb05vdENhbmNlbEFuaW1zXSBEbyBub3QgY2FuY2VsIGFuaW1hdGlvbnMuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ZvcmNlTW92aW5nXSBBcHBseSBjb25zdHJhaW50cyBhcyBpZiB0aGUgdmlldyBpcyBtb3ZpbmcuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhcHBseVRhcmdldFN0YXRlXyhkb05vdENhbmNlbEFuaW1zLCBmb3JjZU1vdmluZykge1xuICAgIGNvbnN0IGlzTW92aW5nID1cbiAgICAgIHRoaXMuZ2V0QW5pbWF0aW5nKCkgfHwgdGhpcy5nZXRJbnRlcmFjdGluZygpIHx8IGZvcmNlTW92aW5nO1xuXG4gICAgLy8gY29tcHV0ZSByb3RhdGlvblxuICAgIGNvbnN0IG5ld1JvdGF0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucm90YXRpb24oXG4gICAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyxcbiAgICAgIGlzTW92aW5nXG4gICAgKTtcbiAgICBjb25zdCBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKG5ld1JvdGF0aW9uKTtcbiAgICBjb25zdCBuZXdSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbihcbiAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8sXG4gICAgICAwLFxuICAgICAgc2l6ZSxcbiAgICAgIGlzTW92aW5nXG4gICAgKTtcbiAgICBjb25zdCBuZXdDZW50ZXIgPSB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIoXG4gICAgICB0aGlzLnRhcmdldENlbnRlcl8sXG4gICAgICBuZXdSZXNvbHV0aW9uLFxuICAgICAgc2l6ZSxcbiAgICAgIGlzTW92aW5nLFxuICAgICAgdGhpcy5jYWxjdWxhdGVDZW50ZXJTaGlmdChcbiAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfLFxuICAgICAgICBuZXdSZXNvbHV0aW9uLFxuICAgICAgICBuZXdSb3RhdGlvbixcbiAgICAgICAgc2l6ZVxuICAgICAgKVxuICAgICk7XG5cbiAgICBpZiAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OKSAhPT0gbmV3Um90YXRpb24pIHtcbiAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTiwgbmV3Um90YXRpb24pO1xuICAgIH1cbiAgICBpZiAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJFU09MVVRJT04pICE9PSBuZXdSZXNvbHV0aW9uKSB7XG4gICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTiwgbmV3UmVzb2x1dGlvbik7XG4gICAgICB0aGlzLnNldCgnem9vbScsIHRoaXMuZ2V0Wm9vbSgpLCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIW5ld0NlbnRlciB8fFxuICAgICAgIXRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpIHx8XG4gICAgICAhZXF1YWxzKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpLCBuZXdDZW50ZXIpXG4gICAgKSB7XG4gICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuQ0VOVEVSLCBuZXdDZW50ZXIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmdldEFuaW1hdGluZygpICYmICFkb05vdENhbmNlbEFuaW1zKSB7XG4gICAgICB0aGlzLmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICB9XG4gICAgdGhpcy5jYW5jZWxBbmNob3JfID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIGFueSBjb25zdHJhaW50cyBuZWVkIHRvIGJlIGFwcGxpZWQsIGFuIGFuaW1hdGlvbiB3aWxsIGJlIHRyaWdnZXJlZC5cbiAgICogVGhpcyBpcyB0eXBpY2FsbHkgZG9uZSBvbiBpbnRlcmFjdGlvbiBlbmQuXG4gICAqIE5vdGU6IGNhbGxpbmcgdGhpcyB3aXRoIGEgZHVyYXRpb24gb2YgMCB3aWxsIGFwcGx5IHRoZSBjb25zdHJhaW5lZCB2YWx1ZXMgc3RyYWlnaHQgYXdheSxcbiAgICogd2l0aG91dCBhbmltYXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZHVyYXRpb25dIFRoZSBhbmltYXRpb24gZHVyYXRpb24gaW4gbXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcmVzb2x1dGlvbkRpcmVjdGlvbl0gV2hpY2ggZGlyZWN0aW9uIHRvIHpvb20uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgKi9cbiAgcmVzb2x2ZUNvbnN0cmFpbnRzKGR1cmF0aW9uLCByZXNvbHV0aW9uRGlyZWN0aW9uLCBhbmNob3IpIHtcbiAgICBkdXJhdGlvbiA9IGR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBkdXJhdGlvbiA6IDIwMDtcbiAgICBjb25zdCBkaXJlY3Rpb24gPSByZXNvbHV0aW9uRGlyZWN0aW9uIHx8IDA7XG5cbiAgICBjb25zdCBuZXdSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKHRoaXMudGFyZ2V0Um90YXRpb25fKTtcbiAgICBjb25zdCBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKG5ld1JvdGF0aW9uKTtcbiAgICBjb25zdCBuZXdSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbihcbiAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8sXG4gICAgICBkaXJlY3Rpb24sXG4gICAgICBzaXplXG4gICAgKTtcbiAgICBjb25zdCBuZXdDZW50ZXIgPSB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIoXG4gICAgICB0aGlzLnRhcmdldENlbnRlcl8sXG4gICAgICBuZXdSZXNvbHV0aW9uLFxuICAgICAgc2l6ZSxcbiAgICAgIGZhbHNlLFxuICAgICAgdGhpcy5jYWxjdWxhdGVDZW50ZXJTaGlmdChcbiAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfLFxuICAgICAgICBuZXdSZXNvbHV0aW9uLFxuICAgICAgICBuZXdSb3RhdGlvbixcbiAgICAgICAgc2l6ZVxuICAgICAgKVxuICAgICk7XG5cbiAgICBpZiAoZHVyYXRpb24gPT09IDAgJiYgIXRoaXMuY2FuY2VsQW5jaG9yXykge1xuICAgICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXyA9IG5ld1Jlc29sdXRpb247XG4gICAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyA9IG5ld1JvdGF0aW9uO1xuICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gbmV3Q2VudGVyO1xuICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGFuY2hvciA9IGFuY2hvciB8fCAoZHVyYXRpb24gPT09IDAgPyB0aGlzLmNhbmNlbEFuY2hvcl8gOiB1bmRlZmluZWQpO1xuICAgIHRoaXMuY2FuY2VsQW5jaG9yXyA9IHVuZGVmaW5lZDtcblxuICAgIGlmIChcbiAgICAgIHRoaXMuZ2V0UmVzb2x1dGlvbigpICE9PSBuZXdSZXNvbHV0aW9uIHx8XG4gICAgICB0aGlzLmdldFJvdGF0aW9uKCkgIT09IG5ld1JvdGF0aW9uIHx8XG4gICAgICAhdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpIHx8XG4gICAgICAhZXF1YWxzKHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSwgbmV3Q2VudGVyKVxuICAgICkge1xuICAgICAgaWYgKHRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgdGhpcy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYW5pbWF0ZUludGVybmFsKHtcbiAgICAgICAgcm90YXRpb246IG5ld1JvdGF0aW9uLFxuICAgICAgICBjZW50ZXI6IG5ld0NlbnRlcixcbiAgICAgICAgcmVzb2x1dGlvbjogbmV3UmVzb2x1dGlvbixcbiAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgIGFuY2hvcjogYW5jaG9yLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmeSB0aGUgVmlldyB0aGF0IGFuIGludGVyYWN0aW9uIGhhcyBzdGFydGVkLlxuICAgKiBUaGUgdmlldyBzdGF0ZSB3aWxsIGJlIHJlc29sdmVkIHRvIGEgc3RhYmxlIG9uZSBpZiBuZWVkZWRcbiAgICogKGRlcGVuZGluZyBvbiBpdHMgY29uc3RyYWludHMpLlxuICAgKiBAYXBpXG4gICAqL1xuICBiZWdpbkludGVyYWN0aW9uKCkge1xuICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuXG4gICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZnkgdGhlIFZpZXcgdGhhdCBhbiBpbnRlcmFjdGlvbiBoYXMgZW5kZWQuIFRoZSB2aWV3IHN0YXRlIHdpbGwgYmUgcmVzb2x2ZWRcbiAgICogdG8gYSBzdGFibGUgb25lIGlmIG5lZWRlZCAoZGVwZW5kaW5nIG9uIGl0cyBjb25zdHJhaW50cykuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZHVyYXRpb25dIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtyZXNvbHV0aW9uRGlyZWN0aW9uXSBXaGljaCBkaXJlY3Rpb24gdG8gem9vbS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGVuZEludGVyYWN0aW9uKGR1cmF0aW9uLCByZXNvbHV0aW9uRGlyZWN0aW9uLCBhbmNob3IpIHtcbiAgICBhbmNob3IgPSBhbmNob3IgJiYgZnJvbVVzZXJDb29yZGluYXRlKGFuY2hvciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgIHRoaXMuZW5kSW50ZXJhY3Rpb25JbnRlcm5hbChkdXJhdGlvbiwgcmVzb2x1dGlvbkRpcmVjdGlvbiwgYW5jaG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZnkgdGhlIFZpZXcgdGhhdCBhbiBpbnRlcmFjdGlvbiBoYXMgZW5kZWQuIFRoZSB2aWV3IHN0YXRlIHdpbGwgYmUgcmVzb2x2ZWRcbiAgICogdG8gYSBzdGFibGUgb25lIGlmIG5lZWRlZCAoZGVwZW5kaW5nIG9uIGl0cyBjb25zdHJhaW50cykuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZHVyYXRpb25dIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtyZXNvbHV0aW9uRGlyZWN0aW9uXSBXaGljaCBkaXJlY3Rpb24gdG8gem9vbS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAqL1xuICBlbmRJbnRlcmFjdGlvbkludGVybmFsKGR1cmF0aW9uLCByZXNvbHV0aW9uRGlyZWN0aW9uLCBhbmNob3IpIHtcbiAgICBpZiAoIXRoaXMuZ2V0SW50ZXJhY3RpbmcoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIC0xKTtcbiAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cyhkdXJhdGlvbiwgcmVzb2x1dGlvbkRpcmVjdGlvbiwgYW5jaG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSB2YWxpZCBwb3NpdGlvbiBmb3IgdGhlIHZpZXcgY2VudGVyIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBjb25zdHJhaW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IHRhcmdldENlbnRlciBUYXJnZXQgY2VudGVyIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW3RhcmdldFJlc29sdXRpb25dIFRhcmdldCByZXNvbHV0aW9uLiBJZiBub3Qgc3VwcGxpZWQsIHRoZSBjdXJyZW50IG9uZSB3aWxsIGJlIHVzZWQuXG4gICAqIFRoaXMgaXMgdXNlZnVsIHRvIGd1ZXNzIGEgdmFsaWQgY2VudGVyIHBvc2l0aW9uIGF0IGEgZGlmZmVyZW50IHpvb20gbGV2ZWwuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gVmFsaWQgY2VudGVyIHBvc2l0aW9uLlxuICAgKi9cbiAgZ2V0Q29uc3RyYWluZWRDZW50ZXIodGFyZ2V0Q2VudGVyLCB0YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIoXG4gICAgICB0YXJnZXRDZW50ZXIsXG4gICAgICB0YXJnZXRSZXNvbHV0aW9uIHx8IHRoaXMuZ2V0UmVzb2x1dGlvbigpLFxuICAgICAgc2l6ZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgdmFsaWQgem9vbSBsZXZlbCBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgdmlldyBjb25zdHJhaW50cy5cbiAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSB0YXJnZXRab29tIFRhcmdldCB6b29tLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2RpcmVjdGlvbj0wXSBJbmRpY2F0ZSB3aGljaCByZXNvbHV0aW9uIHNob3VsZCBiZSB1c2VkXG4gICAqIGJ5IGEgcmVuZGVyZXIgaWYgdGhlIHZpZXcgcmVzb2x1dGlvbiBkb2VzIG5vdCBtYXRjaCBhbnkgcmVzb2x1dGlvbiBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gICAqIHdpbGwgYmUgdXNlZC4gSWYgLTEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVmFsaWQgem9vbSBsZXZlbC5cbiAgICovXG4gIGdldENvbnN0cmFpbmVkWm9vbSh0YXJnZXRab29tLCBkaXJlY3Rpb24pIHtcbiAgICBjb25zdCB0YXJnZXRSZXMgPSB0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKHRhcmdldFpvb20pO1xuICAgIHJldHVybiB0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKFxuICAgICAgdGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24odGFyZ2V0UmVzLCBkaXJlY3Rpb24pXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSB2YWxpZCByZXNvbHV0aW9uIGFjY29yZGluZyB0byB0aGUgY3VycmVudCB2aWV3IGNvbnN0cmFpbnRzLlxuICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZGlyZWN0aW9uPTBdIEluZGljYXRlIHdoaWNoIHJlc29sdXRpb24gc2hvdWxkIGJlIHVzZWRcbiAgICogYnkgYSByZW5kZXJlciBpZiB0aGUgdmlldyByZXNvbHV0aW9uIGRvZXMgbm90IG1hdGNoIGFueSByZXNvbHV0aW9uIG9mIHRoZSB0aWxlIHNvdXJjZS5cbiAgICogSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIElmIDEsIHRoZSBuZWFyZXN0IGxvd2VyIHJlc29sdXRpb25cbiAgICogd2lsbCBiZSB1c2VkLiBJZiAtMSwgdGhlIG5lYXJlc3QgaGlnaGVyIHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBWYWxpZCByZXNvbHV0aW9uLlxuICAgKi9cbiAgZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHRhcmdldFJlc29sdXRpb24sIGRpcmVjdGlvbikge1xuICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbiB8fCAwO1xuICAgIGNvbnN0IHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8odGhpcy5nZXRSb3RhdGlvbigpKTtcblxuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHRhcmdldFJlc29sdXRpb24sIGRpcmVjdGlvbiwgc2l6ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjay5cbiAqIEBwYXJhbSB7Kn0gcmV0dXJuVmFsdWUgUmV0dXJuIHZhbHVlLlxuICovXG5mdW5jdGlvbiBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgcmV0dXJuVmFsdWUpIHtcbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgY2FsbGJhY2socmV0dXJuVmFsdWUpO1xuICB9LCAwKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBvcHRpb25zIFZpZXcgb3B0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY2VudGVyY29uc3RyYWludC5qc1wiKS5UeXBlfSBUaGUgY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNlbnRlckNvbnN0cmFpbnQob3B0aW9ucykge1xuICBpZiAob3B0aW9ucy5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IHNtb290aCA9XG4gICAgICBvcHRpb25zLnNtb290aEV4dGVudENvbnN0cmFpbnQgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuc21vb3RoRXh0ZW50Q29uc3RyYWludFxuICAgICAgICA6IHRydWU7XG4gICAgcmV0dXJuIGNyZWF0ZUV4dGVudChvcHRpb25zLmV4dGVudCwgb3B0aW9ucy5jb25zdHJhaW5Pbmx5Q2VudGVyLCBzbW9vdGgpO1xuICB9XG5cbiAgY29uc3QgcHJvamVjdGlvbiA9IGNyZWF0ZVByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uLCAnRVBTRzozODU3Jyk7XG4gIGlmIChvcHRpb25zLm11bHRpV29ybGQgIT09IHRydWUgJiYgcHJvamVjdGlvbi5pc0dsb2JhbCgpKSB7XG4gICAgY29uc3QgZXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKS5zbGljZSgpO1xuICAgIGV4dGVudFswXSA9IC1JbmZpbml0eTtcbiAgICBleHRlbnRbMl0gPSBJbmZpbml0eTtcbiAgICByZXR1cm4gY3JlYXRlRXh0ZW50KGV4dGVudCwgZmFsc2UsIGZhbHNlKTtcbiAgfVxuXG4gIHJldHVybiBjZW50ZXJOb25lO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7e2NvbnN0cmFpbnQ6IGltcG9ydChcIi4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZSwgbWF4UmVzb2x1dGlvbjogbnVtYmVyLFxuICogICAgIG1pblJlc29sdXRpb246IG51bWJlciwgbWluWm9vbTogbnVtYmVyLCB6b29tRmFjdG9yOiBudW1iZXJ9fSBUaGUgY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc29sdXRpb25Db25zdHJhaW50KG9wdGlvbnMpIHtcbiAgbGV0IHJlc29sdXRpb25Db25zdHJhaW50O1xuICBsZXQgbWF4UmVzb2x1dGlvbjtcbiAgbGV0IG1pblJlc29sdXRpb247XG5cbiAgLy8gVE9ETzogbW92ZSB0aGVzZSB0byBiZSBvbCBjb25zdGFudHNcbiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVubGF5ZXJzL29wZW5sYXllcnMvaXNzdWVzLzIwNzZcbiAgY29uc3QgZGVmYXVsdE1heFpvb20gPSAyODtcbiAgY29uc3QgZGVmYXVsdFpvb21GYWN0b3IgPSAyO1xuXG4gIGxldCBtaW5ab29tID1cbiAgICBvcHRpb25zLm1pblpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluWm9vbSA6IERFRkFVTFRfTUlOX1pPT007XG5cbiAgbGV0IG1heFpvb20gPVxuICAgIG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhab29tIDogZGVmYXVsdE1heFpvb207XG5cbiAgY29uc3Qgem9vbUZhY3RvciA9XG4gICAgb3B0aW9ucy56b29tRmFjdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21GYWN0b3IgOiBkZWZhdWx0Wm9vbUZhY3RvcjtcblxuICBjb25zdCBtdWx0aVdvcmxkID1cbiAgICBvcHRpb25zLm11bHRpV29ybGQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubXVsdGlXb3JsZCA6IGZhbHNlO1xuXG4gIGNvbnN0IHNtb290aCA9XG4gICAgb3B0aW9ucy5zbW9vdGhSZXNvbHV0aW9uQ29uc3RyYWludCAhPT0gdW5kZWZpbmVkXG4gICAgICA/IG9wdGlvbnMuc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnRcbiAgICAgIDogdHJ1ZTtcblxuICBjb25zdCBzaG93RnVsbEV4dGVudCA9XG4gICAgb3B0aW9ucy5zaG93RnVsbEV4dGVudCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zaG93RnVsbEV4dGVudCA6IGZhbHNlO1xuXG4gIGNvbnN0IHByb2plY3Rpb24gPSBjcmVhdGVQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbiwgJ0VQU0c6Mzg1NycpO1xuICBjb25zdCBwcm9qRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgbGV0IGNvbnN0cmFpbk9ubHlDZW50ZXIgPSBvcHRpb25zLmNvbnN0cmFpbk9ubHlDZW50ZXI7XG4gIGxldCBleHRlbnQgPSBvcHRpb25zLmV4dGVudDtcbiAgaWYgKCFtdWx0aVdvcmxkICYmICFleHRlbnQgJiYgcHJvamVjdGlvbi5pc0dsb2JhbCgpKSB7XG4gICAgY29uc3RyYWluT25seUNlbnRlciA9IGZhbHNlO1xuICAgIGV4dGVudCA9IHByb2pFeHRlbnQ7XG4gIH1cblxuICBpZiAob3B0aW9ucy5yZXNvbHV0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgcmVzb2x1dGlvbnMgPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgIG1heFJlc29sdXRpb24gPSByZXNvbHV0aW9uc1ttaW5ab29tXTtcbiAgICBtaW5SZXNvbHV0aW9uID1cbiAgICAgIHJlc29sdXRpb25zW21heFpvb21dICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyByZXNvbHV0aW9uc1ttYXhab29tXVxuICAgICAgICA6IHJlc29sdXRpb25zW3Jlc29sdXRpb25zLmxlbmd0aCAtIDFdO1xuXG4gICAgaWYgKG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbikge1xuICAgICAgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyhcbiAgICAgICAgcmVzb2x1dGlvbnMsXG4gICAgICAgIHNtb290aCxcbiAgICAgICAgIWNvbnN0cmFpbk9ubHlDZW50ZXIgJiYgZXh0ZW50LFxuICAgICAgICBzaG93RnVsbEV4dGVudFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVNaW5NYXhSZXNvbHV0aW9uKFxuICAgICAgICBtYXhSZXNvbHV0aW9uLFxuICAgICAgICBtaW5SZXNvbHV0aW9uLFxuICAgICAgICBzbW9vdGgsXG4gICAgICAgICFjb25zdHJhaW5Pbmx5Q2VudGVyICYmIGV4dGVudCxcbiAgICAgICAgc2hvd0Z1bGxFeHRlbnRcbiAgICAgICk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGNhbGN1bGF0ZSB0aGUgZGVmYXVsdCBtaW4gYW5kIG1heCByZXNvbHV0aW9uXG4gICAgY29uc3Qgc2l6ZSA9ICFwcm9qRXh0ZW50XG4gICAgICA/IC8vIHVzZSBhbiBleHRlbnQgdGhhdCBjYW4gZml0IHRoZSB3aG9sZSB3b3JsZCBpZiBuZWVkIGJlXG4gICAgICAgICgzNjAgKiBNRVRFUlNfUEVSX1VOSVQuZGVncmVlcykgLyBwcm9qZWN0aW9uLmdldE1ldGVyc1BlclVuaXQoKVxuICAgICAgOiBNYXRoLm1heChnZXRXaWR0aChwcm9qRXh0ZW50KSwgZ2V0SGVpZ2h0KHByb2pFeHRlbnQpKTtcblxuICAgIGNvbnN0IGRlZmF1bHRNYXhSZXNvbHV0aW9uID1cbiAgICAgIHNpemUgLyBERUZBVUxUX1RJTEVfU0laRSAvIE1hdGgucG93KGRlZmF1bHRab29tRmFjdG9yLCBERUZBVUxUX01JTl9aT09NKTtcblxuICAgIGNvbnN0IGRlZmF1bHRNaW5SZXNvbHV0aW9uID1cbiAgICAgIGRlZmF1bHRNYXhSZXNvbHV0aW9uIC9cbiAgICAgIE1hdGgucG93KGRlZmF1bHRab29tRmFjdG9yLCBkZWZhdWx0TWF4Wm9vbSAtIERFRkFVTFRfTUlOX1pPT00pO1xuXG4gICAgLy8gdXNlciBwcm92aWRlZCBtYXhSZXNvbHV0aW9uIHRha2VzIHByZWNlZGVuY2VcbiAgICBtYXhSZXNvbHV0aW9uID0gb3B0aW9ucy5tYXhSZXNvbHV0aW9uO1xuICAgIGlmIChtYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG1pblpvb20gPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXhSZXNvbHV0aW9uID0gZGVmYXVsdE1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtaW5ab29tKTtcbiAgICB9XG5cbiAgICAvLyB1c2VyIHByb3ZpZGVkIG1pblJlc29sdXRpb24gdGFrZXMgcHJlY2VkZW5jZVxuICAgIG1pblJlc29sdXRpb24gPSBvcHRpb25zLm1pblJlc29sdXRpb247XG4gICAgaWYgKG1pblJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChvcHRpb25zLm1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIG1pblJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWF4Wm9vbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWluUmVzb2x1dGlvbiA9IGRlZmF1bHRNYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWF4Wm9vbSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1pblJlc29sdXRpb24gPSBkZWZhdWx0TWluUmVzb2x1dGlvbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBnaXZlbiBkaXNjcmV0ZSB6b29tIGxldmVscywgbWluUmVzb2x1dGlvbiBtYXkgYmUgZGlmZmVyZW50IHRoYW4gcHJvdmlkZWRcbiAgICBtYXhab29tID1cbiAgICAgIG1pblpvb20gK1xuICAgICAgTWF0aC5mbG9vcihcbiAgICAgICAgTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIG1pblJlc29sdXRpb24pIC8gTWF0aC5sb2coem9vbUZhY3RvcilcbiAgICAgICk7XG4gICAgbWluUmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tIC0gbWluWm9vbSk7XG5cbiAgICBpZiAob3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uKSB7XG4gICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVNuYXBUb1Bvd2VyKFxuICAgICAgICB6b29tRmFjdG9yLFxuICAgICAgICBtYXhSZXNvbHV0aW9uLFxuICAgICAgICBtaW5SZXNvbHV0aW9uLFxuICAgICAgICBzbW9vdGgsXG4gICAgICAgICFjb25zdHJhaW5Pbmx5Q2VudGVyICYmIGV4dGVudCxcbiAgICAgICAgc2hvd0Z1bGxFeHRlbnRcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlTWluTWF4UmVzb2x1dGlvbihcbiAgICAgICAgbWF4UmVzb2x1dGlvbixcbiAgICAgICAgbWluUmVzb2x1dGlvbixcbiAgICAgICAgc21vb3RoLFxuICAgICAgICAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsXG4gICAgICAgIHNob3dGdWxsRXh0ZW50XG4gICAgICApO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGNvbnN0cmFpbnQ6IHJlc29sdXRpb25Db25zdHJhaW50LFxuICAgIG1heFJlc29sdXRpb246IG1heFJlc29sdXRpb24sXG4gICAgbWluUmVzb2x1dGlvbjogbWluUmVzb2x1dGlvbixcbiAgICBtaW5ab29tOiBtaW5ab29tLFxuICAgIHpvb21GYWN0b3I6IHpvb21GYWN0b3IsXG4gIH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3JvdGF0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUm90YXRpb25Db25zdHJhaW50KG9wdGlvbnMpIHtcbiAgY29uc3QgZW5hYmxlUm90YXRpb24gPVxuICAgIG9wdGlvbnMuZW5hYmxlUm90YXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZW5hYmxlUm90YXRpb24gOiB0cnVlO1xuICBpZiAoZW5hYmxlUm90YXRpb24pIHtcbiAgICBjb25zdCBjb25zdHJhaW5Sb3RhdGlvbiA9IG9wdGlvbnMuY29uc3RyYWluUm90YXRpb247XG4gICAgaWYgKGNvbnN0cmFpblJvdGF0aW9uID09PSB1bmRlZmluZWQgfHwgY29uc3RyYWluUm90YXRpb24gPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBjcmVhdGVTbmFwVG9aZXJvKCk7XG4gICAgfSBlbHNlIGlmIChjb25zdHJhaW5Sb3RhdGlvbiA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29uc3RyYWluUm90YXRpb24gPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gY3JlYXRlU25hcFRvTihjb25zdHJhaW5Sb3RhdGlvbik7XG4gICAgfVxuICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gIH1cbiAgcmV0dXJuIGRpc2FibGU7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGFuIGFuaW1hdGlvbiBpbnZvbHZlcyBubyB2aWV3IGNoYW5nZS5cbiAqIEBwYXJhbSB7QW5pbWF0aW9ufSBhbmltYXRpb24gVGhlIGFuaW1hdGlvbi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBhbmltYXRpb24gaW52b2x2ZXMgbm8gdmlldyBjaGFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc05vb3BBbmltYXRpb24oYW5pbWF0aW9uKSB7XG4gIGlmIChhbmltYXRpb24uc291cmNlQ2VudGVyICYmIGFuaW1hdGlvbi50YXJnZXRDZW50ZXIpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzRXF1YWwoYW5pbWF0aW9uLnNvdXJjZUNlbnRlciwgYW5pbWF0aW9uLnRhcmdldENlbnRlcikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICE9PSBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICE9PSBhbmltYXRpb24udGFyZ2V0Um90YXRpb24pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBCb3ggcGl4ZWwgc2l6ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcG9zaXRpb24gUG9zaXRpb24gb24gdGhlIHZpZXcgdG8gY2VudGVyIG9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBTaGlmdGVkIGNlbnRlci5cbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlQ2VudGVyT24oY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24sIHJlc29sdXRpb24sIHJvdGF0aW9uKSB7XG4gIC8vIGNhbGN1bGF0ZSByb3RhdGVkIHBvc2l0aW9uXG4gIGNvbnN0IGNvc0FuZ2xlID0gTWF0aC5jb3MoLXJvdGF0aW9uKTtcbiAgbGV0IHNpbkFuZ2xlID0gTWF0aC5zaW4oLXJvdGF0aW9uKTtcbiAgbGV0IHJvdFggPSBjb29yZGluYXRlWzBdICogY29zQW5nbGUgLSBjb29yZGluYXRlWzFdICogc2luQW5nbGU7XG4gIGxldCByb3RZID0gY29vcmRpbmF0ZVsxXSAqIGNvc0FuZ2xlICsgY29vcmRpbmF0ZVswXSAqIHNpbkFuZ2xlO1xuICByb3RYICs9IChzaXplWzBdIC8gMiAtIHBvc2l0aW9uWzBdKSAqIHJlc29sdXRpb247XG4gIHJvdFkgKz0gKHBvc2l0aW9uWzFdIC0gc2l6ZVsxXSAvIDIpICogcmVzb2x1dGlvbjtcblxuICAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIGFuZ2xlXG4gIHNpbkFuZ2xlID0gLXNpbkFuZ2xlOyAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIHJvdGF0aW9uXG4gIGNvbnN0IGNlbnRlclggPSByb3RYICogY29zQW5nbGUgLSByb3RZICogc2luQW5nbGU7XG4gIGNvbnN0IGNlbnRlclkgPSByb3RZICogY29zQW5nbGUgKyByb3RYICogc2luQW5nbGU7XG5cbiAgcmV0dXJuIFtjZW50ZXJYLCBjZW50ZXJZXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVmlldztcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9WaWV3SGludFxuICovXG5cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBBTklNQVRJTkc6IDAsXG4gIElOVEVSQUNUSU5HOiAxLFxufTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9hcnJheVxuICovXG5cbi8qKlxuICogUGVyZm9ybXMgYSBiaW5hcnkgc2VhcmNoIG9uIHRoZSBwcm92aWRlZCBzb3J0ZWQgbGlzdCBhbmQgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGl0ZW0gaWYgZm91bmQuIElmIGl0IGNhbid0IGJlIGZvdW5kIGl0J2xsIHJldHVybiAtMS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL2JpbmFyeS1zZWFyY2hcbiAqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBoYXlzdGFjayBJdGVtcyB0byBzZWFyY2ggdGhyb3VnaC5cbiAqIEBwYXJhbSB7Kn0gbmVlZGxlIFRoZSBpdGVtIHRvIGxvb2sgZm9yLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmF0b3JdIENvbXBhcmF0b3IgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgaXRlbSBpZiBmb3VuZCwgLTEgaWYgbm90LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYmluYXJ5U2VhcmNoKGhheXN0YWNrLCBuZWVkbGUsIGNvbXBhcmF0b3IpIHtcbiAgbGV0IG1pZCwgY21wO1xuICBjb21wYXJhdG9yID0gY29tcGFyYXRvciB8fCBhc2NlbmRpbmc7XG4gIGxldCBsb3cgPSAwO1xuICBsZXQgaGlnaCA9IGhheXN0YWNrLmxlbmd0aDtcbiAgbGV0IGZvdW5kID0gZmFsc2U7XG5cbiAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAvKiBOb3RlIHRoYXQgXCIobG93ICsgaGlnaCkgPj4+IDFcIiBtYXkgb3ZlcmZsb3csIGFuZCByZXN1bHRzIGluIGEgdHlwZWNhc3RcbiAgICAgKiB0byBkb3VibGUgKHdoaWNoIGdpdmVzIHRoZSB3cm9uZyByZXN1bHRzKS4gKi9cbiAgICBtaWQgPSBsb3cgKyAoKGhpZ2ggLSBsb3cpID4+IDEpO1xuICAgIGNtcCA9ICtjb21wYXJhdG9yKGhheXN0YWNrW21pZF0sIG5lZWRsZSk7XG5cbiAgICBpZiAoY21wIDwgMC4wKSB7XG4gICAgICAvKiBUb28gbG93LiAqL1xuICAgICAgbG93ID0gbWlkICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgLyogS2V5IGZvdW5kIG9yIHRvbyBoaWdoICovXG4gICAgICBoaWdoID0gbWlkO1xuICAgICAgZm91bmQgPSAhY21wO1xuICAgIH1cbiAgfVxuXG4gIC8qIEtleSBub3QgZm91bmQuICovXG4gIHJldHVybiBmb3VuZCA/IGxvdyA6IH5sb3c7XG59XG5cbi8qKlxuICogQ29tcGFyZSBmdW5jdGlvbiBzb3J0aW5nIGFycmF5cyBpbiBhc2NlbmRpbmcgb3JkZXIuICBTYWZlIHRvIHVzZSBmb3IgbnVtZXJpYyB2YWx1ZXMuXG4gKiBAcGFyYW0geyp9IGEgVGhlIGZpcnN0IG9iamVjdCB0byBiZSBjb21wYXJlZC5cbiAqIEBwYXJhbSB7Kn0gYiBUaGUgc2Vjb25kIG9iamVjdCB0byBiZSBjb21wYXJlZC5cbiAqIEByZXR1cm4ge251bWJlcn0gQSBuZWdhdGl2ZSBudW1iZXIsIHplcm8sIG9yIGEgcG9zaXRpdmUgbnVtYmVyIGFzIHRoZSBmaXJzdFxuICogICAgIGFyZ3VtZW50IGlzIGxlc3MgdGhhbiwgZXF1YWwgdG8sIG9yIGdyZWF0ZXIgdGhhbiB0aGUgc2Vjb25kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNjZW5kaW5nKGEsIGIpIHtcbiAgcmV0dXJuIGEgPiBiID8gMSA6IGEgPCBiID8gLTEgOiAwO1xufVxuXG4vKipcbiAqIHtAbGluayBtb2R1bGU6b2wvdGlsZWdyaWQvVGlsZUdyaWR+VGlsZUdyaWQjZ2V0WkZvclJlc29sdXRpb259IGNhbiB1c2UgYSBmdW5jdGlvblxuICogb2YgdGhpcyB0eXBlIHRvIGRldGVybWluZSB3aGljaCBuZWFyZXN0IHJlc29sdXRpb24gdG8gdXNlLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYSBge251bWJlcn1gIHJlcHJlc2VudGluZyBhIHZhbHVlIGJldHdlZW4gdHdvIGFycmF5IGVudHJpZXMsXG4gKiBhIGB7bnVtYmVyfWAgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGUgbmVhcmVzdCBoaWdoZXIgZW50cnkgYW5kXG4gKiBhIGB7bnVtYmVyfWAgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGUgbmVhcmVzdCBsb3dlciBlbnRyeVxuICogYXMgYXJndW1lbnRzIGFuZCByZXR1cm5zIGEgYHtudW1iZXJ9YC4gSWYgYSBuZWdhdGl2ZSBudW1iZXIgb3IgemVybyBpcyByZXR1cm5lZFxuICogdGhlIGxvd2VyIHZhbHVlIHdpbGwgYmUgdXNlZCwgaWYgYSBwb3NpdGl2ZSBudW1iZXIgaXMgcmV0dXJuZWQgdGhlIGhpZ2hlciB2YWx1ZVxuICogd2lsbCBiZSB1c2VkLlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKG51bWJlciwgbnVtYmVyLCBudW1iZXIpOiBudW1iZXJ9IE5lYXJlc3REaXJlY3Rpb25GdW5jdGlvblxuICogQGFwaVxuICovXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhcnIgQXJyYXkgaW4gZGVzY2VuZGluZyBvcmRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXQgVGFyZ2V0LlxuICogQHBhcmFtIHtudW1iZXJ8TmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBkaXJlY3Rpb25cbiAqICAgIDAgbWVhbnMgcmV0dXJuIHRoZSBuZWFyZXN0LFxuICogICAgPiAwIG1lYW5zIHJldHVybiB0aGUgbGFyZ2VzdCBuZWFyZXN0LFxuICogICAgPCAwIG1lYW5zIHJldHVybiB0aGUgc21hbGxlc3QgbmVhcmVzdC5cbiAqIEByZXR1cm4ge251bWJlcn0gSW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJGaW5kTmVhcmVzdChhcnIsIHRhcmdldCwgZGlyZWN0aW9uKSB7XG4gIGNvbnN0IG4gPSBhcnIubGVuZ3RoO1xuICBpZiAoYXJyWzBdIDw9IHRhcmdldCkge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2UgaWYgKHRhcmdldCA8PSBhcnJbbiAtIDFdKSB7XG4gICAgcmV0dXJuIG4gLSAxO1xuICB9XG4gIGxldCBpO1xuICBpZiAoZGlyZWN0aW9uID4gMCkge1xuICAgIGZvciAoaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChhcnJbaV0gPCB0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIGkgLSAxO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPCAwKSB7XG4gICAgZm9yIChpID0gMTsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKGFycltpXSA8PSB0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAoaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChhcnJbaV0gPT0gdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfSBlbHNlIGlmIChhcnJbaV0gPCB0YXJnZXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBkaXJlY3Rpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBpZiAoZGlyZWN0aW9uKHRhcmdldCwgYXJyW2kgLSAxXSwgYXJyW2ldKSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBpIC0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH0gZWxzZSBpZiAoYXJyW2kgLSAxXSAtIHRhcmdldCA8IHRhcmdldCAtIGFycltpXSkge1xuICAgICAgICAgIHJldHVybiBpIC0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG4gLSAxO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBBcnJheS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiZWdpbiBCZWdpbiBpbmRleC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kIGluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmV2ZXJzZVN1YkFycmF5KGFyciwgYmVnaW4sIGVuZCkge1xuICB3aGlsZSAoYmVnaW4gPCBlbmQpIHtcbiAgICBjb25zdCB0bXAgPSBhcnJbYmVnaW5dO1xuICAgIGFycltiZWdpbl0gPSBhcnJbZW5kXTtcbiAgICBhcnJbZW5kXSA9IHRtcDtcbiAgICArK2JlZ2luO1xuICAgIC0tZW5kO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxWQUxVRT59IGFyciBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHshQXJyYXk8VkFMVUU+fFZBTFVFfSBkYXRhIFRoZSBlbGVtZW50cyBvciBhcnJheXMgb2YgZWxlbWVudHMgdG8gYWRkIHRvIGFyci5cbiAqIEB0ZW1wbGF0ZSBWQUxVRVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKGFyciwgZGF0YSkge1xuICBjb25zdCBleHRlbnNpb24gPSBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXTtcbiAgY29uc3QgbGVuZ3RoID0gZXh0ZW5zaW9uLmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGFyclthcnIubGVuZ3RoXSA9IGV4dGVuc2lvbltpXTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7VkFMVUV9IG9iaiBUaGUgZWxlbWVudCB0byByZW1vdmUuXG4gKiBAdGVtcGxhdGUgVkFMVUVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBlbGVtZW50IHdhcyByZW1vdmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKGFyciwgb2JqKSB7XG4gIGNvbnN0IGkgPSBhcnIuaW5kZXhPZihvYmopO1xuICBjb25zdCBmb3VuZCA9IGkgPiAtMTtcbiAgaWYgKGZvdW5kKSB7XG4gICAgYXJyLnNwbGljZShpLCAxKTtcbiAgfVxuICByZXR1cm4gZm91bmQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheXxVaW50OENsYW1wZWRBcnJheX0gYXJyMSBUaGUgZmlyc3QgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7QXJyYXl8VWludDhDbGFtcGVkQXJyYXl9IGFycjIgVGhlIHNlY29uZCBhcnJheSB0byBjb21wYXJlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgdHdvIGFycmF5cyBhcmUgZXF1YWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYXJyMSwgYXJyMikge1xuICBjb25zdCBsZW4xID0gYXJyMS5sZW5ndGg7XG4gIGlmIChsZW4xICE9PSBhcnIyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjE7IGkrKykge1xuICAgIGlmIChhcnIxW2ldICE9PSBhcnIyW2ldKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFNvcnQgdGhlIHBhc3NlZCBhcnJheSBzdWNoIHRoYXQgdGhlIHJlbGF0aXZlIG9yZGVyIG9mIGVxdWFsIGVsZW1lbnRzIGlzIHByZXNlcnZlZC5cbiAqIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Tb3J0aW5nX2FsZ29yaXRobSNTdGFiaWxpdHkgZm9yIGRldGFpbHMuXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHNvcnQgKG1vZGlmaWVzIG9yaWdpbmFsKS5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9uKCosICopOiBudW1iZXJ9IGNvbXBhcmVGbmMgQ29tcGFyaXNvbiBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YWJsZVNvcnQoYXJyLCBjb21wYXJlRm5jKSB7XG4gIGNvbnN0IGxlbmd0aCA9IGFyci5sZW5ndGg7XG4gIGNvbnN0IHRtcCA9IEFycmF5KGFyci5sZW5ndGgpO1xuICBsZXQgaTtcbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdG1wW2ldID0ge2luZGV4OiBpLCB2YWx1ZTogYXJyW2ldfTtcbiAgfVxuICB0bXAuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBjb21wYXJlRm5jKGEudmFsdWUsIGIudmFsdWUpIHx8IGEuaW5kZXggLSBiLmluZGV4O1xuICB9KTtcbiAgZm9yIChpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgIGFycltpXSA9IHRtcFtpXS52YWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gdGVzdC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtmdW5jXSBDb21wYXJpc29uIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtib29sZWFufSBbc3RyaWN0XSBTdHJpY3RseSBzb3J0ZWQgKGRlZmF1bHQgZmFsc2UpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJuIGluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTb3J0ZWQoYXJyLCBmdW5jLCBzdHJpY3QpIHtcbiAgY29uc3QgY29tcGFyZSA9IGZ1bmMgfHwgYXNjZW5kaW5nO1xuICByZXR1cm4gYXJyLmV2ZXJ5KGZ1bmN0aW9uIChjdXJyZW50VmFsLCBpbmRleCkge1xuICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGNvbXBhcmUoYXJyW2luZGV4IC0gMV0sIGN1cnJlbnRWYWwpO1xuICAgIHJldHVybiAhKHJlcyA+IDAgfHwgKHN0cmljdCAmJiByZXMgPT09IDApKTtcbiAgfSk7XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvYXNzZXJ0c1xuICovXG5pbXBvcnQgQXNzZXJ0aW9uRXJyb3IgZnJvbSAnLi9Bc3NlcnRpb25FcnJvci5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHsqfSBhc3NlcnRpb24gQXNzZXJ0aW9uIHdlIGV4cGVjdGVkIHRvIGJlIHRydXRoeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvckNvZGUgRXJyb3IgY29kZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChhc3NlcnRpb24sIGVycm9yQ29kZSkge1xuICBpZiAoIWFzc2VydGlvbikge1xuICAgIHRocm93IG5ldyBBc3NlcnRpb25FcnJvcihlcnJvckNvZGUpO1xuICB9XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvY29sb3JcbiAqL1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuL21hdGguanMnO1xuXG4vKipcbiAqIEEgY29sb3IgcmVwcmVzZW50ZWQgYXMgYSBzaG9ydCBhcnJheSBbcmVkLCBncmVlbiwgYmx1ZSwgYWxwaGFdLlxuICogcmVkLCBncmVlbiwgYW5kIGJsdWUgc2hvdWxkIGJlIGludGVnZXJzIGluIHRoZSByYW5nZSAwLi4yNTUgaW5jbHVzaXZlLlxuICogYWxwaGEgc2hvdWxkIGJlIGEgZmxvYXQgaW4gdGhlIHJhbmdlIDAuLjEgaW5jbHVzaXZlLiBJZiBubyBhbHBoYSB2YWx1ZSBpc1xuICogZ2l2ZW4gdGhlbiBgMWAgd2lsbCBiZSB1c2VkLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IENvbG9yXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBUaGlzIFJlZ0V4cCBtYXRjaGVzICMgZm9sbG93ZWQgYnkgMywgNCwgNiwgb3IgOCBoZXggZGlnaXRzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgSEVYX0NPTE9SX1JFXyA9IC9eIyhbYS1mMC05XXszfXxbYS1mMC05XXs0fSg/OlthLWYwLTldezJ9KXswLDJ9KSQvaTtcblxuLyoqXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gZm9yIG1hdGNoaW5nIHBvdGVudGlhbCBuYW1lZCBjb2xvciBzdHlsZSBzdHJpbmdzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgTkFNRURfQ09MT1JfUkVfID0gL14oW2Etel0qKSR8XmhzbGE/XFwoLipcXCkkL2k7XG5cbi8qKlxuICogUmV0dXJuIHRoZSBjb2xvciBhcyBhbiByZ2JhIHN0cmluZy5cbiAqIEBwYXJhbSB7Q29sb3J8c3RyaW5nfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gUmdiYSBzdHJpbmcuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc1N0cmluZyhjb2xvcikge1xuICBpZiAodHlwZW9mIGNvbG9yID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBjb2xvcjtcbiAgfVxuICByZXR1cm4gdG9TdHJpbmcoY29sb3IpO1xufVxuXG4vKipcbiAqIFJldHVybiBuYW1lZCBjb2xvciBhcyBhbiByZ2JhIHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvciBOYW1lZCBjb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gUmdiIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gZnJvbU5hbWVkKGNvbG9yKSB7XG4gIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGVsLnN0eWxlLmNvbG9yID0gY29sb3I7XG4gIGlmIChlbC5zdHlsZS5jb2xvciAhPT0gJycpIHtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcbiAgICBjb25zdCByZ2IgPSBnZXRDb21wdXRlZFN0eWxlKGVsKS5jb2xvcjtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKTtcbiAgICByZXR1cm4gcmdiO1xuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKi9cbmV4cG9ydCBjb25zdCBmcm9tU3RyaW5nID0gKGZ1bmN0aW9uICgpIHtcbiAgLy8gV2UgbWFpbnRhaW4gYSBzbWFsbCBjYWNoZSBvZiBwYXJzZWQgc3RyaW5ncy4gIFRvIHByb3ZpZGUgY2hlYXAgTFJVLWxpa2VcbiAgLy8gc2VtYW50aWNzLCB3aGVuZXZlciB0aGUgY2FjaGUgZ3Jvd3MgdG9vIGxhcmdlIHdlIHNpbXBseSBkZWxldGUgYW5cbiAgLy8gYXJiaXRyYXJ5IDI1JSBvZiB0aGUgZW50cmllcy5cblxuICAvKipcbiAgICogQGNvbnN0XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBjb25zdCBNQVhfQ0FDSEVfU0laRSA9IDEwMjQ7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBDb2xvcj59XG4gICAqL1xuICBjb25zdCBjYWNoZSA9IHt9O1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgbGV0IGNhY2hlU2l6ZSA9IDA7XG5cbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gICAgICogQHJldHVybiB7Q29sb3J9IENvbG9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChzKSB7XG4gICAgICBsZXQgY29sb3I7XG4gICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkocykpIHtcbiAgICAgICAgY29sb3IgPSBjYWNoZVtzXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjYWNoZVNpemUgPj0gTUFYX0NBQ0hFX1NJWkUpIHtcbiAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY2FjaGUpIHtcbiAgICAgICAgICAgIGlmICgoaSsrICYgMykgPT09IDApIHtcbiAgICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2tleV07XG4gICAgICAgICAgICAgIC0tY2FjaGVTaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb2xvciA9IGZyb21TdHJpbmdJbnRlcm5hbF8ocyk7XG4gICAgICAgIGNhY2hlW3NdID0gY29sb3I7XG4gICAgICAgICsrY2FjaGVTaXplO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cbiAgKTtcbn0pKCk7XG5cbi8qKlxuICogUmV0dXJuIHRoZSBjb2xvciBhcyBhbiBhcnJheS4gVGhpcyBmdW5jdGlvbiBtYWludGFpbnMgYSBjYWNoZSBvZiBjYWxjdWxhdGVkXG4gKiBhcnJheXMgd2hpY2ggbWVhbnMgdGhlIHJlc3VsdCBzaG91bGQgbm90IGJlIG1vZGlmaWVkLlxuICogQHBhcmFtIHtDb2xvcnxzdHJpbmd9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7Q29sb3J9IENvbG9yLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNBcnJheShjb2xvcikge1xuICBpZiAoQXJyYXkuaXNBcnJheShjb2xvcikpIHtcbiAgICByZXR1cm4gY29sb3I7XG4gIH1cbiAgcmV0dXJuIGZyb21TdHJpbmcoY29sb3IpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKi9cbmZ1bmN0aW9uIGZyb21TdHJpbmdJbnRlcm5hbF8ocykge1xuICBsZXQgciwgZywgYiwgYSwgY29sb3I7XG5cbiAgaWYgKE5BTUVEX0NPTE9SX1JFXy5leGVjKHMpKSB7XG4gICAgcyA9IGZyb21OYW1lZChzKTtcbiAgfVxuXG4gIGlmIChIRVhfQ09MT1JfUkVfLmV4ZWMocykpIHtcbiAgICAvLyBoZXhcbiAgICBjb25zdCBuID0gcy5sZW5ndGggLSAxOyAvLyBudW1iZXIgb2YgaGV4IGRpZ2l0c1xuICAgIGxldCBkOyAvLyBudW1iZXIgb2YgZGlnaXRzIHBlciBjaGFubmVsXG4gICAgaWYgKG4gPD0gNCkge1xuICAgICAgZCA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGQgPSAyO1xuICAgIH1cbiAgICBjb25zdCBoYXNBbHBoYSA9IG4gPT09IDQgfHwgbiA9PT0gODtcbiAgICByID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDAgKiBkLCBkKSwgMTYpO1xuICAgIGcgPSBwYXJzZUludChzLnN1YnN0cigxICsgMSAqIGQsIGQpLCAxNik7XG4gICAgYiA9IHBhcnNlSW50KHMuc3Vic3RyKDEgKyAyICogZCwgZCksIDE2KTtcbiAgICBpZiAoaGFzQWxwaGEpIHtcbiAgICAgIGEgPSBwYXJzZUludChzLnN1YnN0cigxICsgMyAqIGQsIGQpLCAxNik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGEgPSAyNTU7XG4gICAgfVxuICAgIGlmIChkID09IDEpIHtcbiAgICAgIHIgPSAociA8PCA0KSArIHI7XG4gICAgICBnID0gKGcgPDwgNCkgKyBnO1xuICAgICAgYiA9IChiIDw8IDQpICsgYjtcbiAgICAgIGlmIChoYXNBbHBoYSkge1xuICAgICAgICBhID0gKGEgPDwgNCkgKyBhO1xuICAgICAgfVxuICAgIH1cbiAgICBjb2xvciA9IFtyLCBnLCBiLCBhIC8gMjU1XTtcbiAgfSBlbHNlIGlmIChzLnN0YXJ0c1dpdGgoJ3JnYmEoJykpIHtcbiAgICAvLyByZ2JhKClcbiAgICBjb2xvciA9IHMuc2xpY2UoNSwgLTEpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG4gICAgbm9ybWFsaXplKGNvbG9yKTtcbiAgfSBlbHNlIGlmIChzLnN0YXJ0c1dpdGgoJ3JnYignKSkge1xuICAgIC8vIHJnYigpXG4gICAgY29sb3IgPSBzLnNsaWNlKDQsIC0xKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpO1xuICAgIGNvbG9yLnB1c2goMSk7XG4gICAgbm9ybWFsaXplKGNvbG9yKTtcbiAgfSBlbHNlIHtcbiAgICBhc3NlcnQoZmFsc2UsIDE0KTsgLy8gSW52YWxpZCBjb2xvclxuICB9XG4gIHJldHVybiBjb2xvcjtcbn1cblxuLyoqXG4gKiBUT0RPIHRoaXMgZnVuY3Rpb24gaXMgb25seSB1c2VkIGluIHRoZSB0ZXN0LCB3ZSBwcm9iYWJseSBzaG91bGRuJ3QgZXhwb3J0IGl0XG4gKiBAcGFyYW0ge0NvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0NvbG9yfSBDbGFtcGVkIGNvbG9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKGNvbG9yKSB7XG4gIGNvbG9yWzBdID0gY2xhbXAoKGNvbG9yWzBdICsgMC41KSB8IDAsIDAsIDI1NSk7XG4gIGNvbG9yWzFdID0gY2xhbXAoKGNvbG9yWzFdICsgMC41KSB8IDAsIDAsIDI1NSk7XG4gIGNvbG9yWzJdID0gY2xhbXAoKGNvbG9yWzJdICsgMC41KSB8IDAsIDAsIDI1NSk7XG4gIGNvbG9yWzNdID0gY2xhbXAoY29sb3JbM10sIDAsIDEpO1xuICByZXR1cm4gY29sb3I7XG59XG5cbi8qKlxuICogQHBhcmFtIHtDb2xvcn0gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nKGNvbG9yKSB7XG4gIGxldCByID0gY29sb3JbMF07XG4gIGlmIChyICE9IChyIHwgMCkpIHtcbiAgICByID0gKHIgKyAwLjUpIHwgMDtcbiAgfVxuICBsZXQgZyA9IGNvbG9yWzFdO1xuICBpZiAoZyAhPSAoZyB8IDApKSB7XG4gICAgZyA9IChnICsgMC41KSB8IDA7XG4gIH1cbiAgbGV0IGIgPSBjb2xvclsyXTtcbiAgaWYgKGIgIT0gKGIgfCAwKSkge1xuICAgIGIgPSAoYiArIDAuNSkgfCAwO1xuICB9XG4gIGNvbnN0IGEgPSBjb2xvclszXSA9PT0gdW5kZWZpbmVkID8gMSA6IE1hdGgucm91bmQoY29sb3JbM10gKiAxMDApIC8gMTAwO1xuICByZXR1cm4gJ3JnYmEoJyArIHIgKyAnLCcgKyBnICsgJywnICsgYiArICcsJyArIGEgKyAnKSc7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgc3RyaW5nIGlzIGFjdHVhbGx5IGEgdmFsaWQgY29sb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaW5nQ29sb3Iocykge1xuICBpZiAoTkFNRURfQ09MT1JfUkVfLnRlc3QocykpIHtcbiAgICBzID0gZnJvbU5hbWVkKHMpO1xuICB9XG4gIHJldHVybiBIRVhfQ09MT1JfUkVfLnRlc3QocykgfHwgcy5zdGFydHNXaXRoKCdyZ2JhKCcpIHx8IHMuc3RhcnRzV2l0aCgncmdiKCcpO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnNvbGVcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHsnaW5mbyd8J3dhcm4nfCdlcnJvcid8J25vbmUnfSBMZXZlbFxuICovXG5cbi8qKlxuICogQHR5cGUge09iamVjdDxMZXZlbCwgbnVtYmVyPn1cbiAqL1xuY29uc3QgbGV2ZWxzID0ge1xuICBpbmZvOiAxLFxuICB3YXJuOiAyLFxuICBlcnJvcjogMyxcbiAgbm9uZTogNCxcbn07XG5cbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xubGV0IGxldmVsID0gbGV2ZWxzLmluZm87XG5cbi8qKlxuICogU2V0IHRoZSBsb2dnaW5nIGxldmVsLiAgQnkgZGVmYXVsdCwgdGhlIGxldmVsIGlzIHNldCB0byAnaW5mbycgYW5kIGFsbFxuICogbWVzc2FnZXMgd2lsbCBiZSBsb2dnZWQuICBTZXQgdG8gJ3dhcm4nIHRvIG9ubHkgZGlzcGxheSB3YXJuaW5ncyBhbmQgZXJyb3JzLlxuICogU2V0IHRvICdlcnJvcicgdG8gb25seSBkaXNwbGF5IGVycm9ycy4gIFNldCB0byAnbm9uZScgdG8gc2lsZW5jZSBhbGwgbWVzc2FnZXMuXG4gKlxuICogQHBhcmFtIHtMZXZlbH0gbCBUaGUgbmV3IGxldmVsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0TGV2ZWwobCkge1xuICBsZXZlbCA9IGxldmVsc1tsXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvZyguLi5hcmdzKSB7XG4gIGlmIChsZXZlbCA+IGxldmVscy5pbmZvKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnNvbGUubG9nKC4uLmFyZ3MpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdhcm4oLi4uYXJncykge1xuICBpZiAobGV2ZWwgPiBsZXZlbHMud2Fybikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zb2xlLndhcm4oLi4uYXJncyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZXJyb3IoLi4uYXJncykge1xuICBpZiAobGV2ZWwgPiBsZXZlbHMuZXJyb3IpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc29sZS5lcnJvciguLi5hcmdzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvY29vcmRpbmF0ZVxuICovXG5pbXBvcnQge2dldFdpZHRofSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQge21vZHVsbywgdG9GaXhlZH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7cGFkTnVtYmVyfSBmcm9tICcuL3N0cmluZy5qcyc7XG5cbi8qKlxuICogQW4gYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgYW4geHkgY29vcmRpbmF0ZS4gRXhhbXBsZTogYFsxNiwgNDhdYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBDb29yZGluYXRlXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYW5kXG4gKiB0cmFuc2Zvcm1zIGl0IGludG8gYSBge3N0cmluZ31gLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigoQ29vcmRpbmF0ZXx1bmRlZmluZWQpKTogc3RyaW5nfSBDb29yZGluYXRlRm9ybWF0XG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBBZGQgYGRlbHRhYCB0byBgY29vcmRpbmF0ZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmQgcmV0dXJuZWRcbiAqIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge2FkZH0gZnJvbSAnb2wvY29vcmRpbmF0ZS5qcyc7XG4gKlxuICogICAgIGNvbnN0IGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgYWRkKGNvb3JkLCBbLTIsIDRdKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWzUuODUsIDUxLjk4MzMzM11cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gZGVsdGEgRGVsdGEuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBUaGUgaW5wdXQgY29vcmRpbmF0ZSBhZGp1c3RlZCBieVxuICogdGhlIGdpdmVuIGRlbHRhLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKGNvb3JkaW5hdGUsIGRlbHRhKSB7XG4gIGNvb3JkaW5hdGVbMF0gKz0gK2RlbHRhWzBdO1xuICBjb29yZGluYXRlWzFdICs9ICtkZWx0YVsxXTtcbiAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgb24gdGhlIHBhc3NlZCBjaXJjbGUuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBUaGUgY2lyY2xlLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ2xvc2VzdCBwb2ludCBvbiB0aGUgY2lyY3VtZmVyZW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RPbkNpcmNsZShjb29yZGluYXRlLCBjaXJjbGUpIHtcbiAgY29uc3QgciA9IGNpcmNsZS5nZXRSYWRpdXMoKTtcbiAgY29uc3QgY2VudGVyID0gY2lyY2xlLmdldENlbnRlcigpO1xuICBjb25zdCB4MCA9IGNlbnRlclswXTtcbiAgY29uc3QgeTAgPSBjZW50ZXJbMV07XG4gIGNvbnN0IHgxID0gY29vcmRpbmF0ZVswXTtcbiAgY29uc3QgeTEgPSBjb29yZGluYXRlWzFdO1xuXG4gIGxldCBkeCA9IHgxIC0geDA7XG4gIGNvbnN0IGR5ID0geTEgLSB5MDtcbiAgaWYgKGR4ID09PSAwICYmIGR5ID09PSAwKSB7XG4gICAgZHggPSAxO1xuICB9XG4gIGNvbnN0IGQgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuXG4gIGNvbnN0IHggPSB4MCArIChyICogZHgpIC8gZDtcbiAgY29uc3QgeSA9IHkwICsgKHIgKiBkeSkgLyBkO1xuXG4gIHJldHVybiBbeCwgeV07XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgb24gdGhlIHBhc3NlZCBzZWdtZW50LlxuICogVGhpcyBpcyB0aGUgZm9vdCBvZiB0aGUgcGVycGVuZGljdWxhciBvZiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudCB3aGVuXG4gKiB0aGUgZm9vdCBpcyBvbiB0aGUgc2VnbWVudCwgb3IgdGhlIGNsb3Nlc3Qgc2VnbWVudCBjb29yZGluYXRlIHdoZW4gdGhlIGZvb3RcbiAqIGlzIG91dHNpZGUgdGhlIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBUaGUgdHdvIGNvb3JkaW5hdGVzXG4gKiBvZiB0aGUgc2VnbWVudC5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IFRoZSBmb290IG9mIHRoZSBwZXJwZW5kaWN1bGFyIG9mXG4gKiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkge1xuICBjb25zdCB4MCA9IGNvb3JkaW5hdGVbMF07XG4gIGNvbnN0IHkwID0gY29vcmRpbmF0ZVsxXTtcbiAgY29uc3Qgc3RhcnQgPSBzZWdtZW50WzBdO1xuICBjb25zdCBlbmQgPSBzZWdtZW50WzFdO1xuICBjb25zdCB4MSA9IHN0YXJ0WzBdO1xuICBjb25zdCB5MSA9IHN0YXJ0WzFdO1xuICBjb25zdCB4MiA9IGVuZFswXTtcbiAgY29uc3QgeTIgPSBlbmRbMV07XG4gIGNvbnN0IGR4ID0geDIgLSB4MTtcbiAgY29uc3QgZHkgPSB5MiAtIHkxO1xuICBjb25zdCBhbG9uZyA9XG4gICAgZHggPT09IDAgJiYgZHkgPT09IDBcbiAgICAgID8gMFxuICAgICAgOiAoZHggKiAoeDAgLSB4MSkgKyBkeSAqICh5MCAtIHkxKSkgLyAoZHggKiBkeCArIGR5ICogZHkgfHwgMCk7XG4gIGxldCB4LCB5O1xuICBpZiAoYWxvbmcgPD0gMCkge1xuICAgIHggPSB4MTtcbiAgICB5ID0geTE7XG4gIH0gZWxzZSBpZiAoYWxvbmcgPj0gMSkge1xuICAgIHggPSB4MjtcbiAgICB5ID0geTI7XG4gIH0gZWxzZSB7XG4gICAgeCA9IHgxICsgYWxvbmcgKiBkeDtcbiAgICB5ID0geTEgKyBhbG9uZyAqIGR5O1xuICB9XG4gIHJldHVybiBbeCwgeV07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlRm9ybWF0fSBmdW5jdGlvbiB0aGF0IGNhbiBiZVxuICogdXNlZCB0byBmb3JtYXRcbiAqIGEge0Nvb3JkaW5hdGV9IHRvIGEgc3RyaW5nLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtjcmVhdGVTdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZS5qcyc7XG4gKlxuICogICAgIGNvbnN0IGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgY29uc3Qgc3RyaW5naWZ5RnVuYyA9IGNyZWF0ZVN0cmluZ1hZKCk7XG4gKiAgICAgY29uc3Qgb3V0ID0gc3RyaW5naWZ5RnVuYyhjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnOCwgNDgnXG4gKlxuICogRXhhbXBsZSB3aXRoIGV4cGxpY2l0bHkgc3BlY2lmeWluZyAyIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge2NyZWF0ZVN0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbiAqXG4gKiAgICAgY29uc3QgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBjb25zdCBzdHJpbmdpZnlGdW5jID0gY3JlYXRlU3RyaW5nWFkoMik7XG4gKiAgICAgY29uc3Qgb3V0ID0gc3RyaW5naWZ5RnVuYyhjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNy44NSwgNDcuOTgnXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtmcmFjdGlvbkRpZ2l0c10gVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZUZvcm1hdH0gQ29vcmRpbmF0ZSBmb3JtYXQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdHJpbmdYWShmcmFjdGlvbkRpZ2l0cykge1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nIFhZLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICByZXR1cm4gdG9TdHJpbmdYWShjb29yZGluYXRlLCBmcmFjdGlvbkRpZ2l0cyk7XG4gICAgfVxuICApO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBoZW1pc3BoZXJlcyBIZW1pc3BoZXJlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWdyZWVzIERlZ3JlZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW2ZyYWN0aW9uRGlnaXRzXSBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZ3JlZXNUb1N0cmluZ0hETVMoaGVtaXNwaGVyZXMsIGRlZ3JlZXMsIGZyYWN0aW9uRGlnaXRzKSB7XG4gIGNvbnN0IG5vcm1hbGl6ZWREZWdyZWVzID0gbW9kdWxvKGRlZ3JlZXMgKyAxODAsIDM2MCkgLSAxODA7XG4gIGNvbnN0IHggPSBNYXRoLmFicygzNjAwICogbm9ybWFsaXplZERlZ3JlZXMpO1xuICBjb25zdCBkZWNpbWFscyA9IGZyYWN0aW9uRGlnaXRzIHx8IDA7XG5cbiAgbGV0IGRlZyA9IE1hdGguZmxvb3IoeCAvIDM2MDApO1xuICBsZXQgbWluID0gTWF0aC5mbG9vcigoeCAtIGRlZyAqIDM2MDApIC8gNjApO1xuICBsZXQgc2VjID0gdG9GaXhlZCh4IC0gZGVnICogMzYwMCAtIG1pbiAqIDYwLCBkZWNpbWFscyk7XG5cbiAgaWYgKHNlYyA+PSA2MCkge1xuICAgIHNlYyA9IDA7XG4gICAgbWluICs9IDE7XG4gIH1cblxuICBpZiAobWluID49IDYwKSB7XG4gICAgbWluID0gMDtcbiAgICBkZWcgKz0gMTtcbiAgfVxuXG4gIGxldCBoZG1zID0gZGVnICsgJ1xcdTAwYjAnO1xuICBpZiAobWluICE9PSAwIHx8IHNlYyAhPT0gMCkge1xuICAgIGhkbXMgKz0gJyAnICsgcGFkTnVtYmVyKG1pbiwgMikgKyAnXFx1MjAzMic7XG4gIH1cbiAgaWYgKHNlYyAhPT0gMCkge1xuICAgIGhkbXMgKz0gJyAnICsgcGFkTnVtYmVyKHNlYywgMiwgZGVjaW1hbHMpICsgJ1xcdTIwMzMnO1xuICB9XG4gIGlmIChub3JtYWxpemVkRGVncmVlcyAhPT0gMCkge1xuICAgIGhkbXMgKz0gJyAnICsgaGVtaXNwaGVyZXMuY2hhckF0KG5vcm1hbGl6ZWREZWdyZWVzIDwgMCA/IDEgOiAwKTtcbiAgfVxuXG4gIHJldHVybiBoZG1zO1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSB0byBhIHN0cmluZ1xuICogdXNpbmcgdGhlIGdpdmVuIHN0cmluZyB0ZW1wbGF0ZS4gVGhlIHN0cmluZ3MgYHt4fWAgYW5kIGB7eX1gIGluIHRoZSB0ZW1wbGF0ZVxuICogd2lsbCBiZSByZXBsYWNlZCB3aXRoIHRoZSBmaXJzdCBhbmQgc2Vjb25kIGNvb3JkaW5hdGUgdmFsdWVzIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Zm9ybWF0fSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbiAqXG4gKiAgICAgY29uc3QgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBjb25zdCB0ZW1wbGF0ZSA9ICdDb29yZGluYXRlIGlzICh7eH18e3l9KS4nO1xuICogICAgIGNvbnN0IG91dCA9IGZvcm1hdChjb29yZCwgdGVtcGxhdGUpO1xuICogICAgIC8vIG91dCBpcyBub3cgJ0Nvb3JkaW5hdGUgaXMgKDh8NDgpLidcbiAqXG4gKiBFeGFtcGxlIGV4cGxpY2l0bHkgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Zm9ybWF0fSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbiAqXG4gKiAgICAgY29uc3QgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBjb25zdCB0ZW1wbGF0ZSA9ICdDb29yZGluYXRlIGlzICh7eH18e3l9KS4nO1xuICogICAgIGNvbnN0IG91dCA9IGZvcm1hdChjb29yZCwgdGVtcGxhdGUsIDIpO1xuICogICAgIC8vIG91dCBpcyBub3cgJ0Nvb3JkaW5hdGUgaXMgKDcuODV8NDcuOTgpLidcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZSBBIHRlbXBsYXRlIHN0cmluZyB3aXRoIGB7eH1gIGFuZCBge3l9YCBwbGFjZWhvbGRlcnNcbiAqICAgICB0aGF0IHdpbGwgYmUgcmVwbGFjZWQgYnkgZmlyc3QgYW5kIHNlY29uZCBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJhY3Rpb25EaWdpdHNdIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gRm9ybWF0dGVkIGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQoY29vcmRpbmF0ZSwgdGVtcGxhdGUsIGZyYWN0aW9uRGlnaXRzKSB7XG4gIGlmIChjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgICAucmVwbGFjZSgne3h9JywgY29vcmRpbmF0ZVswXS50b0ZpeGVkKGZyYWN0aW9uRGlnaXRzKSlcbiAgICAgIC5yZXBsYWNlKCd7eX0nLCBjb29yZGluYXRlWzFdLnRvRml4ZWQoZnJhY3Rpb25EaWdpdHMpKTtcbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMSBGaXJzdCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gY29vcmRpbmF0ZXMgYXJlIGVxdWFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGNvb3JkaW5hdGUxLCBjb29yZGluYXRlMikge1xuICBsZXQgZXF1YWxzID0gdHJ1ZTtcbiAgZm9yIChsZXQgaSA9IGNvb3JkaW5hdGUxLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgaWYgKGNvb3JkaW5hdGUxW2ldICE9IGNvb3JkaW5hdGUyW2ldKSB7XG4gICAgICBlcXVhbHMgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZXF1YWxzO1xufVxuXG4vKipcbiAqIFJvdGF0ZSBgY29vcmRpbmF0ZWAgYnkgYGFuZ2xlYC4gYGNvb3JkaW5hdGVgIGlzIG1vZGlmaWVkIGluIHBsYWNlIGFuZFxuICogcmV0dXJuZWQgYnkgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7cm90YXRlfSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbiAqXG4gKiAgICAgY29uc3QgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBjb25zdCByb3RhdGVSYWRpYW5zID0gTWF0aC5QSSAvIDI7IC8vIDkwIGRlZ3JlZXNcbiAqICAgICByb3RhdGUoY29vcmQsIHJvdGF0ZVJhZGlhbnMpO1xuICogICAgIC8vIGNvb3JkIGlzIG5vdyBbLTQ3Ljk4MzMzMywgNy44NV1cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBBbmdsZSBpbiByYWRpYW4uXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBDb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKGNvb3JkaW5hdGUsIGFuZ2xlKSB7XG4gIGNvbnN0IGNvc0FuZ2xlID0gTWF0aC5jb3MoYW5nbGUpO1xuICBjb25zdCBzaW5BbmdsZSA9IE1hdGguc2luKGFuZ2xlKTtcbiAgY29uc3QgeCA9IGNvb3JkaW5hdGVbMF0gKiBjb3NBbmdsZSAtIGNvb3JkaW5hdGVbMV0gKiBzaW5BbmdsZTtcbiAgY29uc3QgeSA9IGNvb3JkaW5hdGVbMV0gKiBjb3NBbmdsZSArIGNvb3JkaW5hdGVbMF0gKiBzaW5BbmdsZTtcbiAgY29vcmRpbmF0ZVswXSA9IHg7XG4gIGNvb3JkaW5hdGVbMV0gPSB5O1xuICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cblxuLyoqXG4gKiBTY2FsZSBgY29vcmRpbmF0ZWAgYnkgYHNjYWxlYC4gYGNvb3JkaW5hdGVgIGlzIG1vZGlmaWVkIGluIHBsYWNlIGFuZCByZXR1cm5lZFxuICogYnkgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7c2NhbGUgYXMgc2NhbGVDb29yZGluYXRlfSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbiAqXG4gKiAgICAgY29uc3QgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBjb25zdCBzY2FsZSA9IDEuMjtcbiAqICAgICBzY2FsZUNvb3JkaW5hdGUoY29vcmQsIHNjYWxlKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWzkuNDIsIDU3LjU3OTk5OTZdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc2NhbGUgU2NhbGUgZmFjdG9yLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKGNvb3JkaW5hdGUsIHNjYWxlKSB7XG4gIGNvb3JkaW5hdGVbMF0gKj0gc2NhbGU7XG4gIGNvb3JkaW5hdGVbMV0gKj0gc2NhbGU7XG4gIHJldHVybiBjb29yZGluYXRlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGNvb3JkMSBhbmQgY29vcmQyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSB7XG4gIGNvbnN0IGR4ID0gY29vcmQxWzBdIC0gY29vcmQyWzBdO1xuICBjb25zdCBkeSA9IGNvb3JkMVsxXSAtIGNvb3JkMlsxXTtcbiAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge251bWJlcn0gRGlzdGFuY2UgYmV0d2VlbiBjb29yZDEgYW5kIGNvb3JkMi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoc3F1YXJlZERpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBzcXVhcmVkIGRpc3RhbmNlIGZyb20gYSBjb29yZGluYXRlIHRvIGEgbGluZSBzZWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlIG9mIHRoZSBwb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8Q29vcmRpbmF0ZT59IHNlZ21lbnQgTGluZSBzZWdtZW50ICgyXG4gKiBjb29yZGluYXRlcykuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGUgcG9pbnQgdG8gdGhlIGxpbmUgc2VnbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZVRvU2VnbWVudChjb29yZGluYXRlLCBzZWdtZW50KSB7XG4gIHJldHVybiBzcXVhcmVkRGlzdGFuY2UoY29vcmRpbmF0ZSwgY2xvc2VzdE9uU2VnbWVudChjb29yZGluYXRlLCBzZWdtZW50KSk7XG59XG5cbi8qKlxuICogRm9ybWF0IGEgZ2VvZ3JhcGhpYyBjb29yZGluYXRlIHdpdGggdGhlIGhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMsIGFuZFxuICogc2Vjb25kcy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ0hETVN9IGZyb20gJ29sL2Nvb3JkaW5hdGUuanMnO1xuICpcbiAqICAgICBjb25zdCBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIGNvbnN0IG91dCA9IHRvU3RyaW5nSERNUyhjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNDfCsCA1OOKAsiA2MOKAsyBOIDfCsCA1MOKAsiA2MOKAsyBFJ1xuICpcbiAqIEV4YW1wbGUgZXhwbGljaXRseSBzcGVjaWZ5aW5nIDEgZnJhY3Rpb25hbCBkaWdpdDpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ0hETVN9IGZyb20gJ29sL2Nvb3JkaW5hdGUuanMnO1xuICpcbiAqICAgICBjb25zdCBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIGNvbnN0IG91dCA9IHRvU3RyaW5nSERNUyhjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNDfCsCA1OOKAsiA2MC4w4oCzIE4gN8KwIDUw4oCyIDYwLjDigLMgRSdcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJhY3Rpb25EaWdpdHNdIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gSGVtaXNwaGVyZSwgZGVncmVlcywgbWludXRlcyBhbmQgc2Vjb25kcy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nSERNUyhjb29yZGluYXRlLCBmcmFjdGlvbkRpZ2l0cykge1xuICBpZiAoY29vcmRpbmF0ZSkge1xuICAgIHJldHVybiAoXG4gICAgICBkZWdyZWVzVG9TdHJpbmdIRE1TKCdOUycsIGNvb3JkaW5hdGVbMV0sIGZyYWN0aW9uRGlnaXRzKSArXG4gICAgICAnICcgK1xuICAgICAgZGVncmVlc1RvU3RyaW5nSERNUygnRVcnLCBjb29yZGluYXRlWzBdLCBmcmFjdGlvbkRpZ2l0cylcbiAgICApO1xuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBjb29yZGluYXRlIGFzIGEgY29tbWEgZGVsaW1pdGVkIHN0cmluZy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbiAqXG4gKiAgICAgY29uc3QgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBjb25zdCBvdXQgPSB0b1N0cmluZ1hZKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc4LCA0OCdcbiAqXG4gKiBFeGFtcGxlIGV4cGxpY2l0bHkgc3BlY2lmeWluZyAxIGZyYWN0aW9uYWwgZGlnaXQ6XG4gKlxuICogICAgIGltcG9ydCB7dG9TdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZS5qcyc7XG4gKlxuICogICAgIGNvbnN0IGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgY29uc3Qgb3V0ID0gdG9TdHJpbmdYWShjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNy44LCA0OC4wJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtmcmFjdGlvbkRpZ2l0c10gVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBYWS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgZnJhY3Rpb25EaWdpdHMpIHtcbiAgcmV0dXJuIGZvcm1hdChjb29yZGluYXRlLCAne3h9LCB7eX0nLCBmcmFjdGlvbkRpZ2l0cyk7XG59XG5cbi8qKlxuICogTW9kaWZpZXMgdGhlIHByb3ZpZGVkIGNvb3JkaW5hdGUgaW4tcGxhY2UgdG8gYmUgd2l0aGluIHRoZSByZWFsIHdvcmxkXG4gKiBleHRlbnQuIFRoZSBsb3dlciBwcm9qZWN0aW9uIGV4dGVudCBib3VuZGFyeSBpcyBpbmNsdXNpdmUsIHRoZSB1cHBlciBvbmVcbiAqIGV4Y2x1c2l2ZS5cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gVGhlIGNvb3JkaW5hdGUgd2l0aGluIHRoZSByZWFsIHdvcmxkIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyYXBYKGNvb3JkaW5hdGUsIHByb2plY3Rpb24pIHtcbiAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSkge1xuICAgIGNvbnN0IHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uLmdldEV4dGVudCgpKTtcbiAgICBjb25zdCB3b3JsZHNBd2F5ID0gZ2V0V29ybGRzQXdheShjb29yZGluYXRlLCBwcm9qZWN0aW9uLCB3b3JsZFdpZHRoKTtcbiAgICBpZiAod29ybGRzQXdheSkge1xuICAgICAgY29vcmRpbmF0ZVswXSAtPSB3b3JsZHNBd2F5ICogd29ybGRXaWR0aDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW3NvdXJjZUV4dGVudFdpZHRoXSBXaWR0aCBvZiB0aGUgc291cmNlIGV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gT2Zmc2V0IGluIHdvcmxkIHdpZHRocy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdvcmxkc0F3YXkoY29vcmRpbmF0ZSwgcHJvamVjdGlvbiwgc291cmNlRXh0ZW50V2lkdGgpIHtcbiAgY29uc3QgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gIGxldCB3b3JsZHNBd2F5ID0gMDtcbiAgaWYgKFxuICAgIHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJlxuICAgIChjb29yZGluYXRlWzBdIDwgcHJvamVjdGlvbkV4dGVudFswXSB8fCBjb29yZGluYXRlWzBdID4gcHJvamVjdGlvbkV4dGVudFsyXSlcbiAgKSB7XG4gICAgc291cmNlRXh0ZW50V2lkdGggPSBzb3VyY2VFeHRlbnRXaWR0aCB8fCBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICB3b3JsZHNBd2F5ID0gTWF0aC5mbG9vcihcbiAgICAgIChjb29yZGluYXRlWzBdIC0gcHJvamVjdGlvbkV4dGVudFswXSkgLyBzb3VyY2VFeHRlbnRXaWR0aFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHdvcmxkc0F3YXk7XG59XG4iLCJpbXBvcnQge1dPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTfSBmcm9tICcuL2hhcy5qcyc7XG5cbi8qKlxuICogQG1vZHVsZSBvbC9kb21cbiAqL1xuXG4vL0ZJWE1FIE1vdmUgdGhpcyBmdW5jdGlvbiB0byB0aGUgY2FudmFzIG1vZHVsZVxuLyoqXG4gKiBDcmVhdGUgYW4gaHRtbCBjYW52YXMgZWxlbWVudCBhbmQgcmV0dXJucyBpdHMgMmQgY29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2lkdGhdIENhbnZhcyB3aWR0aC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbaGVpZ2h0XSBDYW52YXMgaGVpZ2h0LlxuICogQHBhcmFtIHtBcnJheTxIVE1MQ2FudmFzRWxlbWVudD59IFtjYW52YXNQb29sXSBDYW52YXMgcG9vbCB0byB0YWtlIGV4aXN0aW5nIGNhbnZhcyBmcm9tLlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRTZXR0aW5nc30gW3NldHRpbmdzXSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRTZXR0aW5nc1xuICogQHJldHVybiB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBUaGUgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhbnZhc0NvbnRleHQyRCh3aWR0aCwgaGVpZ2h0LCBjYW52YXNQb29sLCBzZXR0aW5ncykge1xuICAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fE9mZnNjcmVlbkNhbnZhc30gKi9cbiAgbGV0IGNhbnZhcztcbiAgaWYgKGNhbnZhc1Bvb2wgJiYgY2FudmFzUG9vbC5sZW5ndGgpIHtcbiAgICBjYW52YXMgPSBjYW52YXNQb29sLnNoaWZ0KCk7XG4gIH0gZWxzZSBpZiAoV09SS0VSX09GRlNDUkVFTl9DQU5WQVMpIHtcbiAgICBjYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoIHx8IDMwMCwgaGVpZ2h0IHx8IDMwMCk7XG4gIH0gZWxzZSB7XG4gICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gIH1cbiAgaWYgKHdpZHRoKSB7XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gIH1cbiAgaWYgKGhlaWdodCkge1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gIH1cbiAgLy9GSVhNRSBBbGxvdyBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgYXMgcmV0dXJuIHR5cGVcbiAgcmV0dXJuIC8qKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSAqLyAoXG4gICAgY2FudmFzLmdldENvbnRleHQoJzJkJywgc2V0dGluZ3MpXG4gICk7XG59XG5cbi8qKlxuICogUmVsZWFzZXMgY2FudmFzIG1lbW9yeSB0byBhdm9pZCBleGNlZWRpbmcgbWVtb3J5IGxpbWl0cyBpbiBTYWZhcmkuXG4gKiBTZWUgaHR0cHM6Ly9wcWluYS5ubC9ibG9nL3RvdGFsLWNhbnZhcy1tZW1vcnktdXNlLWV4Y2VlZHMtdGhlLW1heGltdW0tbGltaXQvXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVsZWFzZUNhbnZhcyhjb250ZXh0KSB7XG4gIGNvbnN0IGNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xuICBjYW52YXMud2lkdGggPSAxO1xuICBjYW52YXMuaGVpZ2h0ID0gMTtcbiAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgMSwgMSk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGNvbXB1dGVkIHdpZHRoIGZvciB0aGUgZ2l2ZW4gZWxlbWVudCBpbmNsdWRpbmcgbWFyZ2luLFxuICogcGFkZGluZyBhbmQgYm9yZGVyLlxuICogRXF1aXZhbGVudCB0byBqUXVlcnkncyBgJChlbCkub3V0ZXJXaWR0aCh0cnVlKWAuXG4gKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gZWxlbWVudCBFbGVtZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgd2lkdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRlcldpZHRoKGVsZW1lbnQpIHtcbiAgbGV0IHdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICB3aWR0aCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5MZWZ0LCAxMCkgKyBwYXJzZUludChzdHlsZS5tYXJnaW5SaWdodCwgMTApO1xuXG4gIHJldHVybiB3aWR0aDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgY29tcHV0ZWQgaGVpZ2h0IGZvciB0aGUgZ2l2ZW4gZWxlbWVudCBpbmNsdWRpbmcgbWFyZ2luLFxuICogcGFkZGluZyBhbmQgYm9yZGVyLlxuICogRXF1aXZhbGVudCB0byBqUXVlcnkncyBgJChlbCkub3V0ZXJIZWlnaHQodHJ1ZSlgLlxuICogQHBhcmFtIHshSFRNTEVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGhlaWdodC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG91dGVySGVpZ2h0KGVsZW1lbnQpIHtcbiAgbGV0IGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gIGhlaWdodCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5Ub3AsIDEwKSArIHBhcnNlSW50KHN0eWxlLm1hcmdpbkJvdHRvbSwgMTApO1xuXG4gIHJldHVybiBoZWlnaHQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlIE5vZGUgdG8gcmVwbGFjZSBvbGQgbm9kZVxuICogQHBhcmFtIHtOb2RlfSBvbGROb2RlIFRoZSBub2RlIHRvIGJlIHJlcGxhY2VkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlTm9kZShuZXdOb2RlLCBvbGROb2RlKSB7XG4gIGNvbnN0IHBhcmVudCA9IG9sZE5vZGUucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkge1xuICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgb2xkTm9kZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlLlxuICogQHJldHVybiB7Tm9kZXxudWxsfSBUaGUgbm9kZSB0aGF0IHdhcyByZW1vdmVkIG9yIG51bGwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVOb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlID8gbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpIDogbnVsbDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlIHRoZSBjaGlsZHJlbiBmcm9tLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4obm9kZSkge1xuICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUubGFzdENoaWxkKTtcbiAgfVxufVxuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgY2hpbGRyZW4gb2YgYSBwYXJlbnQgbm9kZSBzbyB0aGV5IG1hdGNoIHRoZVxuICogcHJvdmlkZWQgbGlzdCBvZiBjaGlsZHJlbi4gIFRoaXMgZnVuY3Rpb24gYWltcyB0byBlZmZpY2llbnRseVxuICogcmVtb3ZlLCBhZGQsIGFuZCByZW9yZGVyIGNoaWxkIG5vZGVzIHdoaWxlIG1haW50YWluaW5nIGEgc2ltcGxlXG4gKiBpbXBsZW1lbnRhdGlvbiAoaXQgaXMgbm90IGd1YXJhbnRlZWQgdG8gbWluaW1pemUgRE9NIG9wZXJhdGlvbnMpLlxuICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBwYXJlbnQgbm9kZSB3aG9zZSBjaGlsZHJlbiBuZWVkIHJld29ya2luZy5cbiAqIEBwYXJhbSB7QXJyYXk8Tm9kZT59IGNoaWxkcmVuIFRoZSBkZXNpcmVkIGNoaWxkcmVuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZUNoaWxkcmVuKG5vZGUsIGNoaWxkcmVuKSB7XG4gIGNvbnN0IG9sZENoaWxkcmVuID0gbm9kZS5jaGlsZE5vZGVzO1xuXG4gIGZvciAobGV0IGkgPSAwOyB0cnVlOyArK2kpIHtcbiAgICBjb25zdCBvbGRDaGlsZCA9IG9sZENoaWxkcmVuW2ldO1xuICAgIGNvbnN0IG5ld0NoaWxkID0gY2hpbGRyZW5baV07XG5cbiAgICAvLyBjaGVjayBpZiBvdXIgd29yayBpcyBkb25lXG4gICAgaWYgKCFvbGRDaGlsZCAmJiAhbmV3Q2hpbGQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIGNoZWNrIGlmIGNoaWxkcmVuIG1hdGNoXG4gICAgaWYgKG9sZENoaWxkID09PSBuZXdDaGlsZCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gY2hlY2sgaWYgYSBuZXcgY2hpbGQgbmVlZHMgdG8gYmUgYWRkZWRcbiAgICBpZiAoIW9sZENoaWxkKSB7XG4gICAgICBub2RlLmFwcGVuZENoaWxkKG5ld0NoaWxkKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGNoZWNrIGlmIGFuIG9sZCBjaGlsZCBuZWVkcyB0byBiZSByZW1vdmVkXG4gICAgaWYgKCFuZXdDaGlsZCkge1xuICAgICAgbm9kZS5yZW1vdmVDaGlsZChvbGRDaGlsZCk7XG4gICAgICAtLWk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyByZW9yZGVyXG4gICAgbm9kZS5pbnNlcnRCZWZvcmUobmV3Q2hpbGQsIG9sZENoaWxkKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Vhc2luZ1xuICovXG5cbi8qKlxuICogU3RhcnQgc2xvdyBhbmQgc3BlZWQgdXAuXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlYXNlSW4odCkge1xuICByZXR1cm4gTWF0aC5wb3codCwgMyk7XG59XG5cbi8qKlxuICogU3RhcnQgZmFzdCBhbmQgc2xvdyBkb3duLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWFzZU91dCh0KSB7XG4gIHJldHVybiAxIC0gZWFzZUluKDEgLSB0KTtcbn1cblxuLyoqXG4gKiBTdGFydCBzbG93LCBzcGVlZCB1cCwgYW5kIHRoZW4gc2xvdyBkb3duIGFnYWluLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5BbmRPdXQodCkge1xuICByZXR1cm4gMyAqIHQgKiB0IC0gMiAqIHQgKiB0ICogdDtcbn1cblxuLyoqXG4gKiBNYWludGFpbiBhIGNvbnN0YW50IHNwZWVkIG92ZXIgdGltZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhcih0KSB7XG4gIHJldHVybiB0O1xufVxuXG4vKipcbiAqIFN0YXJ0IHNsb3csIHNwZWVkIHVwLCBhbmQgYXQgdGhlIHZlcnkgZW5kIHNsb3cgZG93biBhZ2Fpbi4gIFRoaXMgaGFzIHRoZVxuICogc2FtZSBnZW5lcmFsIGJlaGF2aW9yIGFzIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nLmluQW5kT3V0fSwgYnV0IHRoZSBmaW5hbFxuICogc2xvd2Rvd24gaXMgZGVsYXllZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwQW5kRG93bih0KSB7XG4gIGlmICh0IDwgMC41KSB7XG4gICAgcmV0dXJuIGluQW5kT3V0KDIgKiB0KTtcbiAgfVxuICByZXR1cm4gMSAtIGluQW5kT3V0KDIgKiAodCAtIDAuNSkpO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50c1xuICovXG5pbXBvcnQge2NsZWFyfSBmcm9tICcuL29iai5qcyc7XG5cbi8qKlxuICogS2V5IHRvIHVzZSB3aXRoIHtAbGluayBtb2R1bGU6b2wvT2JzZXJ2YWJsZS51bkJ5S2V5fS5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEV2ZW50c0tleVxuICogQHByb3BlcnR5IHtMaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IFRhcmdldC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBMaXN0ZW5lciBmdW5jdGlvbi4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhbiBldmVudCBvYmplY3QgYXMgYXJndW1lbnQuXG4gKiBXaGVuIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAsIGV2ZW50IHByb3BhZ2F0aW9uIHdpbGwgc3RvcC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQpKTogKHZvaWR8Ym9vbGVhbil9IExpc3RlbmVyRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IExpc3RlbmVyT2JqZWN0XG4gKiBAcHJvcGVydHkge0xpc3RlbmVyRnVuY3Rpb259IGhhbmRsZUV2ZW50IEhhbmRsZUV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uLlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge0xpc3RlbmVyRnVuY3Rpb258TGlzdGVuZXJPYmplY3R9IExpc3RlbmVyXG4gKi9cblxuLyoqXG4gKiBSZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhpcyBmdW5jdGlvbiBlZmZpY2llbnRseSBiaW5kcyBhIGBsaXN0ZW5lcmAgdG8gYSBgdGhpc2Agb2JqZWN0LCBhbmQgcmV0dXJuc1xuICogYSBrZXkgZm9yIHVzZSB3aXRoIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLnVubGlzdGVuQnlLZXl9LlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IEV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyIExpc3RlbmVyLlxuICogQHBhcmFtIHtPYmplY3R9IFt0aGlzQXJnXSBPYmplY3QgcmVmZXJlbmNlZCBieSB0aGUgYHRoaXNgIGtleXdvcmQgaW4gdGhlXG4gKiAgICAgbGlzdGVuZXIuIERlZmF1bHQgaXMgdGhlIGB0YXJnZXRgLlxuICogQHBhcmFtIHtib29sZWFufSBbb25jZV0gSWYgdHJ1ZSwgYWRkIHRoZSBsaXN0ZW5lciBhcyBvbmUtb2ZmIGxpc3RlbmVyLlxuICogQHJldHVybiB7RXZlbnRzS2V5fSBVbmlxdWUga2V5IGZvciB0aGUgbGlzdGVuZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4odGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgdGhpc0FyZywgb25jZSkge1xuICBpZiAodGhpc0FyZyAmJiB0aGlzQXJnICE9PSB0YXJnZXQpIHtcbiAgICBsaXN0ZW5lciA9IGxpc3RlbmVyLmJpbmQodGhpc0FyZyk7XG4gIH1cbiAgaWYgKG9uY2UpIHtcbiAgICBjb25zdCBvcmlnaW5hbExpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgbGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICBvcmlnaW5hbExpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxuICBjb25zdCBldmVudHNLZXkgPSB7XG4gICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgdHlwZTogdHlwZSxcbiAgICBsaXN0ZW5lcjogbGlzdGVuZXIsXG4gIH07XG4gIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgcmV0dXJuIGV2ZW50c0tleTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSBvbmUtb2ZmIGV2ZW50IGxpc3RlbmVyIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZWZmaWNpZW50bHkgYmluZHMgYSBgbGlzdGVuZXJgIGFzIHNlbGYtdW5yZWdpc3RlcmluZyBsaXN0ZW5lclxuICogdG8gYSBgdGhpc2Agb2JqZWN0LCBhbmQgcmV0dXJucyBhIGtleSBmb3IgdXNlIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLnVubGlzdGVuQnlLZXl9IGluIGNhc2UgdGhlIGxpc3RlbmVyIG5lZWRzIHRvIGJlXG4gKiB1bnJlZ2lzdGVyZWQgYmVmb3JlIGl0IGlzIGNhbGxlZC5cbiAqXG4gKiBXaGVuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLmxpc3Rlbn0gaXMgY2FsbGVkIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFmdGVyIHRoaXNcbiAqIGZ1bmN0aW9uLCB0aGUgc2VsZi11bnJlZ2lzdGVyaW5nIGxpc3RlbmVyIHdpbGwgYmUgdHVybmVkIGludG8gYSBwZXJtYW5lbnRcbiAqIGxpc3RlbmVyLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IEV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyIExpc3RlbmVyLlxuICogQHBhcmFtIHtPYmplY3R9IFt0aGlzQXJnXSBPYmplY3QgcmVmZXJlbmNlZCBieSB0aGUgYHRoaXNgIGtleXdvcmQgaW4gdGhlXG4gKiAgICAgbGlzdGVuZXIuIERlZmF1bHQgaXMgdGhlIGB0YXJnZXRgLlxuICogQHJldHVybiB7RXZlbnRzS2V5fSBLZXkgZm9yIHVubGlzdGVuQnlLZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5PbmNlKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHRoaXNBcmcpIHtcbiAgcmV0dXJuIGxpc3Rlbih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCB0aGlzQXJnLCB0cnVlKTtcbn1cblxuLyoqXG4gKiBVbnJlZ2lzdGVycyBldmVudCBsaXN0ZW5lcnMgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhlIGFyZ3VtZW50IHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGlzIHRoZSBrZXkgcmV0dXJuZWQgZnJvbVxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMubGlzdGVufSBvciB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy5saXN0ZW5PbmNlfS5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50c0tleX0ga2V5IFRoZSBrZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmxpc3RlbkJ5S2V5KGtleSkge1xuICBpZiAoa2V5ICYmIGtleS50YXJnZXQpIHtcbiAgICBrZXkudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoa2V5LnR5cGUsIGtleS5saXN0ZW5lcik7XG4gICAgY2xlYXIoa2V5KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9FdmVudFxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU3RyaXBwZWQgZG93biBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTItRXZlbnRzL2V2ZW50cy5odG1sI0V2ZW50cy1pbnRlcmZhY2UuXG4gKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBvbmx5IHByb3ZpZGVzIGB0eXBlYCBhbmQgYHRhcmdldGAgcHJvcGVydGllcywgYW5kXG4gKiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBtZXRob2RzLiBJdCBpcyBtZWFudCBhcyBiYXNlIGNsYXNzXG4gKiBmb3IgaGlnaGVyIGxldmVsIGV2ZW50cyBkZWZpbmVkIGluIHRoZSBsaWJyYXJ5LCBhbmQgd29ya3Mgd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvVGFyZ2V0flRhcmdldH0uXG4gKi9cbmNsYXNzIEJhc2VFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucHJvcGFnYXRpb25TdG9wcGVkO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5kZWZhdWx0UHJldmVudGVkO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGV2ZW50IHR5cGUuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy50eXBlID0gdHlwZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBldmVudCB0YXJnZXQuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXZlbnQgZGVmYXVsdC4gVGhpcyBtZWFucyB0aGF0IG5vIGVtdWxhdGVkIGBjbGlja2AsIGBzaW5nbGVjbGlja2Agb3IgYGRvdWJsZWNsaWNrYCBldmVudHNcbiAgICogd2lsbCBiZSBmaXJlZC5cbiAgICogQGFwaVxuICAgKi9cbiAgcHJldmVudERlZmF1bHQoKSB7XG4gICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBzdG9wUHJvcGFnYXRpb24oKSB7XG4gICAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtFdmVudHxpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2dCBFdmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uKGV2dCkge1xuICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFdmVudHxpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2dCBFdmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlRXZlbnQ7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL0V2ZW50VHlwZVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBjb25zdFxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiBHZW5lcmljIGNoYW5nZSBldmVudC4gVHJpZ2dlcmVkIHdoZW4gdGhlIHJldmlzaW9uIGNvdW50ZXIgaXMgaW5jcmVhc2VkLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL2V2ZW50cy9FdmVudH5CYXNlRXZlbnQjY2hhbmdlXG4gICAqIEBhcGlcbiAgICovXG4gIENIQU5HRTogJ2NoYW5nZScsXG5cbiAgLyoqXG4gICAqIEdlbmVyaWMgZXJyb3IgZXZlbnQuIFRyaWdnZXJlZCB3aGVuIGFuIGVycm9yIG9jY3Vycy5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9ldmVudHMvRXZlbnR+QmFzZUV2ZW50I2Vycm9yXG4gICAqIEBhcGlcbiAgICovXG4gIEVSUk9SOiAnZXJyb3InLFxuXG4gIEJMVVI6ICdibHVyJyxcbiAgQ0xFQVI6ICdjbGVhcicsXG4gIENPTlRFWFRNRU5VOiAnY29udGV4dG1lbnUnLFxuICBDTElDSzogJ2NsaWNrJyxcbiAgREJMQ0xJQ0s6ICdkYmxjbGljaycsXG4gIERSQUdFTlRFUjogJ2RyYWdlbnRlcicsXG4gIERSQUdPVkVSOiAnZHJhZ292ZXInLFxuICBEUk9QOiAnZHJvcCcsXG4gIEZPQ1VTOiAnZm9jdXMnLFxuICBLRVlET1dOOiAna2V5ZG93bicsXG4gIEtFWVBSRVNTOiAna2V5cHJlc3MnLFxuICBMT0FEOiAnbG9hZCcsXG4gIFJFU0laRTogJ3Jlc2l6ZScsXG4gIFRPVUNITU9WRTogJ3RvdWNobW92ZScsXG4gIFdIRUVMOiAnd2hlZWwnLFxufTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvVGFyZ2V0XG4gKi9cbmltcG9ydCBEaXNwb3NhYmxlIGZyb20gJy4uL0Rpc3Bvc2FibGUuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vRXZlbnQuanMnO1xuaW1wb3J0IHtWT0lEfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHtjbGVhcn0gZnJvbSAnLi4vb2JqLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7RXZlbnRUYXJnZXR8VGFyZ2V0fSBFdmVudFRhcmdldExpa2VcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgc2ltcGxpZmllZCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50VGFyZ2V0IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwMC9SRUMtRE9NLUxldmVsLTItRXZlbnRzLTIwMDAxMTEzL2V2ZW50cy5odG1sI0V2ZW50cy1FdmVudFRhcmdldC5cbiAqXG4gKiBUaGVyZSBhcmUgdHdvIGltcG9ydGFudCBzaW1wbGlmaWNhdGlvbnMgY29tcGFyZWQgdG8gdGhlIHNwZWNpZmljYXRpb246XG4gKlxuICogMS4gVGhlIGhhbmRsaW5nIG9mIGB1c2VDYXB0dXJlYCBpbiBgYWRkRXZlbnRMaXN0ZW5lcmAgYW5kXG4gKiAgICBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAuIFRoZXJlIGlzIG5vIHJlYWwgY2FwdHVyZSBtb2RlbC5cbiAqIDIuIFRoZSBoYW5kbGluZyBvZiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBvbiBgZGlzcGF0Y2hFdmVudGAuXG4gKiAgICBUaGVyZSBpcyBubyBldmVudCB0YXJnZXQgaGllcmFyY2h5LiBXaGVuIGEgbGlzdGVuZXIgY2FsbHNcbiAqICAgIGBzdG9wUHJvcGFnYXRpb25gIG9yIGBwcmV2ZW50RGVmYXVsdGAgb24gYW4gZXZlbnQgb2JqZWN0LCBpdCBtZWFucyB0aGF0IG5vXG4gKiAgICBtb3JlIGxpc3RlbmVycyBhZnRlciB0aGlzIG9uZSB3aWxsIGJlIGNhbGxlZC4gU2FtZSBhcyB3aGVuIHRoZSBsaXN0ZW5lclxuICogICAgcmV0dXJucyBmYWxzZS5cbiAqL1xuY2xhc3MgVGFyZ2V0IGV4dGVuZHMgRGlzcG9zYWJsZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyp9IFt0YXJnZXRdIERlZmF1bHQgZXZlbnQgdGFyZ2V0IGZvciBkaXNwYXRjaGVkIGV2ZW50cy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHRhcmdldCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHsqfVxuICAgICAqL1xuICAgIHRoaXMuZXZlbnRUYXJnZXRfID0gdGFyZ2V0O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgKi9cbiAgICB0aGlzLnBlbmRpbmdSZW1vdmFsc18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgKi9cbiAgICB0aGlzLmRpc3BhdGNoaW5nXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXI+Pn1cbiAgICAgKi9cbiAgICB0aGlzLmxpc3RlbmVyc18gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyfSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICovXG4gIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAoIXR5cGUgfHwgIWxpc3RlbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzXyB8fCAodGhpcy5saXN0ZW5lcnNfID0ge30pO1xuICAgIGNvbnN0IGxpc3RlbmVyc0ZvclR5cGUgPSBsaXN0ZW5lcnNbdHlwZV0gfHwgKGxpc3RlbmVyc1t0eXBlXSA9IFtdKTtcbiAgICBpZiAoIWxpc3RlbmVyc0ZvclR5cGUuaW5jbHVkZXMobGlzdGVuZXIpKSB7XG4gICAgICBsaXN0ZW5lcnNGb3JUeXBlLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVzIGFuIGV2ZW50IGFuZCBjYWxscyBhbGwgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgZXZlbnRzXG4gICAqIG9mIHRoaXMgdHlwZS4gVGhlIGV2ZW50IHBhcmFtZXRlciBjYW4gZWl0aGVyIGJlIGEgc3RyaW5nIG9yIGFuXG4gICAqIE9iamVjdCB3aXRoIGEgYHR5cGVgIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vRXZlbnQuanNcIikuZGVmYXVsdHxzdHJpbmd9IGV2ZW50IEV2ZW50IG9iamVjdC5cbiAgICogQHJldHVybiB7Ym9vbGVhbnx1bmRlZmluZWR9IGBmYWxzZWAgaWYgYW55b25lIGNhbGxlZCBwcmV2ZW50RGVmYXVsdCBvbiB0aGVcbiAgICogICAgIGV2ZW50IG9iamVjdCBvciBpZiBhbnkgb2YgdGhlIGxpc3RlbmVycyByZXR1cm5lZCBmYWxzZS5cbiAgICogQGFwaVxuICAgKi9cbiAgZGlzcGF0Y2hFdmVudChldmVudCkge1xuICAgIGNvbnN0IGlzU3RyaW5nID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcbiAgICBjb25zdCB0eXBlID0gaXNTdHJpbmcgPyBldmVudCA6IGV2ZW50LnR5cGU7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfICYmIHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICBpZiAoIWxpc3RlbmVycykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGV2dCA9IGlzU3RyaW5nID8gbmV3IEV2ZW50KGV2ZW50KSA6IC8qKiBAdHlwZSB7RXZlbnR9ICovIChldmVudCk7XG4gICAgaWYgKCFldnQudGFyZ2V0KSB7XG4gICAgICBldnQudGFyZ2V0ID0gdGhpcy5ldmVudFRhcmdldF8gfHwgdGhpcztcbiAgICB9XG4gICAgY29uc3QgZGlzcGF0Y2hpbmcgPSB0aGlzLmRpc3BhdGNoaW5nXyB8fCAodGhpcy5kaXNwYXRjaGluZ18gPSB7fSk7XG4gICAgY29uc3QgcGVuZGluZ1JlbW92YWxzID1cbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzXyB8fCAodGhpcy5wZW5kaW5nUmVtb3ZhbHNfID0ge30pO1xuICAgIGlmICghKHR5cGUgaW4gZGlzcGF0Y2hpbmcpKSB7XG4gICAgICBkaXNwYXRjaGluZ1t0eXBlXSA9IDA7XG4gICAgICBwZW5kaW5nUmVtb3ZhbHNbdHlwZV0gPSAwO1xuICAgIH1cbiAgICArK2Rpc3BhdGNoaW5nW3R5cGVdO1xuICAgIGxldCBwcm9wYWdhdGU7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGlmICgnaGFuZGxlRXZlbnQnIGluIGxpc3RlbmVyc1tpXSkge1xuICAgICAgICBwcm9wYWdhdGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lck9iamVjdH0gKi8gKFxuICAgICAgICAgIGxpc3RlbmVyc1tpXVxuICAgICAgICApLmhhbmRsZUV2ZW50KGV2dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9wYWdhdGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lckZ1bmN0aW9ufSAqLyAoXG4gICAgICAgICAgbGlzdGVuZXJzW2ldXG4gICAgICAgICkuY2FsbCh0aGlzLCBldnQpO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BhZ2F0ZSA9PT0gZmFsc2UgfHwgZXZ0LnByb3BhZ2F0aW9uU3RvcHBlZCkge1xuICAgICAgICBwcm9wYWdhdGUgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICgtLWRpc3BhdGNoaW5nW3R5cGVdID09PSAwKSB7XG4gICAgICBsZXQgcHIgPSBwZW5kaW5nUmVtb3ZhbHNbdHlwZV07XG4gICAgICBkZWxldGUgcGVuZGluZ1JlbW92YWxzW3R5cGVdO1xuICAgICAgd2hpbGUgKHByLS0pIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIFZPSUQpO1xuICAgICAgfVxuICAgICAgZGVsZXRlIGRpc3BhdGNoaW5nW3R5cGVdO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcGFnYXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwLlxuICAgKi9cbiAgZGlzcG9zZUludGVybmFsKCkge1xuICAgIHRoaXMubGlzdGVuZXJzXyAmJiBjbGVhcih0aGlzLmxpc3RlbmVyc18pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGlzdGVuZXJzIGZvciBhIHNwZWNpZmllZCBldmVudCB0eXBlLiBMaXN0ZW5lcnMgYXJlIHJldHVybmVkIGluIHRoZVxuICAgKiBvcmRlciB0aGF0IHRoZXkgd2lsbCBiZSBjYWxsZWQgaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcj58dW5kZWZpbmVkfSBMaXN0ZW5lcnMuXG4gICAqL1xuICBnZXRMaXN0ZW5lcnModHlwZSkge1xuICAgIHJldHVybiAodGhpcy5saXN0ZW5lcnNfICYmIHRoaXMubGlzdGVuZXJzX1t0eXBlXSkgfHwgdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZV0gVHlwZS4gSWYgbm90IHByb3ZpZGVkLFxuICAgKiAgICAgYHRydWVgIHdpbGwgYmUgcmV0dXJuZWQgaWYgdGhpcyBldmVudCB0YXJnZXQgaGFzIGFueSBsaXN0ZW5lcnMuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IEhhcyBsaXN0ZW5lcnMuXG4gICAqL1xuICBoYXNMaXN0ZW5lcih0eXBlKSB7XG4gICAgaWYgKCF0aGlzLmxpc3RlbmVyc18pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVcbiAgICAgID8gdHlwZSBpbiB0aGlzLmxpc3RlbmVyc19cbiAgICAgIDogT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnNfKS5sZW5ndGggPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyfSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICovXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc18gJiYgdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nUmVtb3ZhbHNfICYmIHR5cGUgaW4gdGhpcy5wZW5kaW5nUmVtb3ZhbHNfKSB7XG4gICAgICAgICAgLy8gbWFrZSBsaXN0ZW5lciBhIG5vLW9wLCBhbmQgcmVtb3ZlIGxhdGVyIGluICNkaXNwYXRjaEV2ZW50KClcbiAgICAgICAgICBsaXN0ZW5lcnNbaW5kZXhdID0gVk9JRDtcbiAgICAgICAgICArK3RoaXMucGVuZGluZ1JlbW92YWxzX1t0eXBlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICBpZiAobGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGFyZ2V0O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V4dGVudC9SZWxhdGlvbnNoaXBcbiAqL1xuXG4vKipcbiAqIFJlbGF0aW9uc2hpcCB0byBhbiBleHRlbnQuXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIFVOS05PV046IDAsXG4gIElOVEVSU0VDVElORzogMSxcbiAgQUJPVkU6IDIsXG4gIFJJR0hUOiA0LFxuICBCRUxPVzogOCxcbiAgTEVGVDogMTYsXG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V4dGVudFxuICovXG5pbXBvcnQgUmVsYXRpb25zaGlwIGZyb20gJy4vZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcblxuLyoqXG4gKiBBbiBhcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBhbiBleHRlbnQ6IGBbbWlueCwgbWlueSwgbWF4eCwgbWF4eV1gLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IEV4dGVudFxuICogQGFwaVxuICovXG5cbi8qKlxuICogRXh0ZW50IGNvcm5lci5cbiAqIEB0eXBlZGVmIHsnYm90dG9tLWxlZnQnIHwgJ2JvdHRvbS1yaWdodCcgfCAndG9wLWxlZnQnIHwgJ3RvcC1yaWdodCd9IENvcm5lclxuICovXG5cbi8qKlxuICogQnVpbGQgYW4gZXh0ZW50IHRoYXQgaW5jbHVkZXMgYWxsIGdpdmVuIGNvb3JkaW5hdGVzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0V4dGVudH0gQm91bmRpbmcgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYm91bmRpbmdFeHRlbnQoY29vcmRpbmF0ZXMpIHtcbiAgY29uc3QgZXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlc1tpXSk7XG4gIH1cbiAgcmV0dXJuIGV4dGVudDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHhzIFhzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB5cyBZcy5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbZGVzdF0gRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHByaXZhdGVcbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5mdW5jdGlvbiBfYm91bmRpbmdFeHRlbnRYWXMoeHMsIHlzLCBkZXN0KSB7XG4gIGNvbnN0IG1pblggPSBNYXRoLm1pbi5hcHBseShudWxsLCB4cyk7XG4gIGNvbnN0IG1pblkgPSBNYXRoLm1pbi5hcHBseShudWxsLCB5cyk7XG4gIGNvbnN0IG1heFggPSBNYXRoLm1heC5hcHBseShudWxsLCB4cyk7XG4gIGNvbnN0IG1heFkgPSBNYXRoLm1heC5hcHBseShudWxsLCB5cyk7XG4gIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBkZXN0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gZXh0ZW50IGluY3JlYXNlZCBieSB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBUaGUgYW1vdW50IGJ5IHdoaWNoIHRoZSBleHRlbnQgc2hvdWxkIGJlIGJ1ZmZlcmVkLlxuICogQHBhcmFtIHtFeHRlbnR9IFtkZXN0XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlcihleHRlbnQsIHZhbHVlLCBkZXN0KSB7XG4gIGlmIChkZXN0KSB7XG4gICAgZGVzdFswXSA9IGV4dGVudFswXSAtIHZhbHVlO1xuICAgIGRlc3RbMV0gPSBleHRlbnRbMV0gLSB2YWx1ZTtcbiAgICBkZXN0WzJdID0gZXh0ZW50WzJdICsgdmFsdWU7XG4gICAgZGVzdFszXSA9IGV4dGVudFszXSArIHZhbHVlO1xuICAgIHJldHVybiBkZXN0O1xuICB9XG4gIHJldHVybiBbXG4gICAgZXh0ZW50WzBdIC0gdmFsdWUsXG4gICAgZXh0ZW50WzFdIC0gdmFsdWUsXG4gICAgZXh0ZW50WzJdICsgdmFsdWUsXG4gICAgZXh0ZW50WzNdICsgdmFsdWUsXG4gIF07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIGFuIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudCB0byBjbG9uZS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbZGVzdF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBUaGUgY2xvbmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShleHRlbnQsIGRlc3QpIHtcbiAgaWYgKGRlc3QpIHtcbiAgICBkZXN0WzBdID0gZXh0ZW50WzBdO1xuICAgIGRlc3RbMV0gPSBleHRlbnRbMV07XG4gICAgZGVzdFsyXSA9IGV4dGVudFsyXTtcbiAgICBkZXN0WzNdID0gZXh0ZW50WzNdO1xuICAgIHJldHVybiBkZXN0O1xuICB9XG4gIHJldHVybiBleHRlbnQuc2xpY2UoKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7bnVtYmVyfSBDbG9zZXN0IHNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkoZXh0ZW50LCB4LCB5KSB7XG4gIGxldCBkeCwgZHk7XG4gIGlmICh4IDwgZXh0ZW50WzBdKSB7XG4gICAgZHggPSBleHRlbnRbMF0gLSB4O1xuICB9IGVsc2UgaWYgKGV4dGVudFsyXSA8IHgpIHtcbiAgICBkeCA9IHggLSBleHRlbnRbMl07XG4gIH0gZWxzZSB7XG4gICAgZHggPSAwO1xuICB9XG4gIGlmICh5IDwgZXh0ZW50WzFdKSB7XG4gICAgZHkgPSBleHRlbnRbMV0gLSB5O1xuICB9IGVsc2UgaWYgKGV4dGVudFszXSA8IHkpIHtcbiAgICBkeSA9IHkgLSBleHRlbnRbM107XG4gIH0gZWxzZSB7XG4gICAgZHkgPSAwO1xuICB9XG4gIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIG9yIG9uIHRoZSBlZGdlIG9mIHRoZSBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgY29vcmRpbmF0ZSBpcyBjb250YWluZWQgaW4gdGhlIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGUpIHtcbiAgcmV0dXJuIGNvbnRhaW5zWFkoZXh0ZW50LCBjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBvbmUgZXh0ZW50IGNvbnRhaW5zIGFub3RoZXIuXG4gKlxuICogQW4gZXh0ZW50IGlzIGRlZW1lZCBjb250YWluZWQgaWYgaXQgbGllcyBjb21wbGV0ZWx5IHdpdGhpbiB0aGUgb3RoZXIgZXh0ZW50LFxuICogaW5jbHVkaW5nIGlmIHRoZXkgc2hhcmUgb25lIG9yIG1vcmUgZWRnZXMuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBzZWNvbmQgZXh0ZW50IGlzIGNvbnRhaW5lZCBieSBvciBvbiB0aGUgZWRnZSBvZiB0aGVcbiAqICAgICBmaXJzdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zRXh0ZW50KGV4dGVudDEsIGV4dGVudDIpIHtcbiAgcmV0dXJuIChcbiAgICBleHRlbnQxWzBdIDw9IGV4dGVudDJbMF0gJiZcbiAgICBleHRlbnQyWzJdIDw9IGV4dGVudDFbMl0gJiZcbiAgICBleHRlbnQxWzFdIDw9IGV4dGVudDJbMV0gJiZcbiAgICBleHRlbnQyWzNdIDw9IGV4dGVudDFbM11cbiAgKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIG9yIG9uIHRoZSBlZGdlIG9mIHRoZSBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0geSBZIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgeCwgeSB2YWx1ZXMgYXJlIGNvbnRhaW5lZCBpbiB0aGUgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNYWShleHRlbnQsIHgsIHkpIHtcbiAgcmV0dXJuIGV4dGVudFswXSA8PSB4ICYmIHggPD0gZXh0ZW50WzJdICYmIGV4dGVudFsxXSA8PSB5ICYmIHkgPD0gZXh0ZW50WzNdO1xufVxuXG4vKipcbiAqIEdldCB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gYSBjb29yZGluYXRlIGFuZCBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzXCIpLmRlZmF1bHR9IFRoZSByZWxhdGlvbnNoaXAgKGJpdHdpc2UgY29tcGFyZSB3aXRoXG4gKiAgICAgaW1wb3J0KFwiLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzXCIpLlJlbGF0aW9uc2hpcCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb29yZGluYXRlUmVsYXRpb25zaGlwKGV4dGVudCwgY29vcmRpbmF0ZSkge1xuICBjb25zdCBtaW5YID0gZXh0ZW50WzBdO1xuICBjb25zdCBtaW5ZID0gZXh0ZW50WzFdO1xuICBjb25zdCBtYXhYID0gZXh0ZW50WzJdO1xuICBjb25zdCBtYXhZID0gZXh0ZW50WzNdO1xuICBjb25zdCB4ID0gY29vcmRpbmF0ZVswXTtcbiAgY29uc3QgeSA9IGNvb3JkaW5hdGVbMV07XG4gIGxldCByZWxhdGlvbnNoaXAgPSBSZWxhdGlvbnNoaXAuVU5LTk9XTjtcbiAgaWYgKHggPCBtaW5YKSB7XG4gICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLkxFRlQ7XG4gIH0gZWxzZSBpZiAoeCA+IG1heFgpIHtcbiAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuUklHSFQ7XG4gIH1cbiAgaWYgKHkgPCBtaW5ZKSB7XG4gICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLkJFTE9XO1xuICB9IGVsc2UgaWYgKHkgPiBtYXhZKSB7XG4gICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLkFCT1ZFO1xuICB9XG4gIGlmIChyZWxhdGlvbnNoaXAgPT09IFJlbGF0aW9uc2hpcC5VTktOT1dOKSB7XG4gICAgcmVsYXRpb25zaGlwID0gUmVsYXRpb25zaGlwLklOVEVSU0VDVElORztcbiAgfVxuICByZXR1cm4gcmVsYXRpb25zaGlwO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBlbXB0eSBleHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEVtcHR5IGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVtcHR5KCkge1xuICByZXR1cm4gW0luZmluaXR5LCBJbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHldO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBleHRlbnQgb3IgdXBkYXRlIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWCBNaW5pbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WCBNYXhpbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WSBNYXhpbXVtIFkuXG4gKiBAcGFyYW0ge0V4dGVudH0gW2Rlc3RdIERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgZGVzdCkge1xuICBpZiAoZGVzdCkge1xuICAgIGRlc3RbMF0gPSBtaW5YO1xuICAgIGRlc3RbMV0gPSBtaW5ZO1xuICAgIGRlc3RbMl0gPSBtYXhYO1xuICAgIGRlc3RbM10gPSBtYXhZO1xuICAgIHJldHVybiBkZXN0O1xuICB9XG4gIHJldHVybiBbbWluWCwgbWluWSwgbWF4WCwgbWF4WV07XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGVtcHR5IGV4dGVudCBvciBtYWtlIHRoZSBwcm92aWRlZCBvbmUgZW1wdHkuXG4gKiBAcGFyYW0ge0V4dGVudH0gW2Rlc3RdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVFbXB0eShkZXN0KSB7XG4gIHJldHVybiBjcmVhdGVPclVwZGF0ZShJbmZpbml0eSwgSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5LCBkZXN0KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0V4dGVudH0gW2Rlc3RdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZShjb29yZGluYXRlLCBkZXN0KSB7XG4gIGNvbnN0IHggPSBjb29yZGluYXRlWzBdO1xuICBjb25zdCB5ID0gY29vcmRpbmF0ZVsxXTtcbiAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKHgsIHksIHgsIHksIGRlc3QpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbZGVzdF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlcyhjb29yZGluYXRlcywgZGVzdCkge1xuICBjb25zdCBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KGRlc3QpO1xuICByZXR1cm4gZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCBjb29yZGluYXRlcyk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbZGVzdF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21GbGF0Q29vcmRpbmF0ZXMoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgZGVzdFxuKSB7XG4gIGNvbnN0IGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRW1wdHkoZGVzdCk7XG4gIHJldHVybiBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoZXh0ZW50LCBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gcmluZ3MgUmluZ3MuXG4gKiBAcGFyYW0ge0V4dGVudH0gW2Rlc3RdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tUmluZ3MocmluZ3MsIGRlc3QpIHtcbiAgY29uc3QgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVFbXB0eShkZXN0KTtcbiAgcmV0dXJuIGV4dGVuZFJpbmdzKGV4dGVudCwgcmluZ3MpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiB0d28gZXh0ZW50cyBhcmUgZXF1aXZhbGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdHdvIGV4dGVudHMgYXJlIGVxdWl2YWxlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoZXh0ZW50MSwgZXh0ZW50Mikge1xuICByZXR1cm4gKFxuICAgIGV4dGVudDFbMF0gPT0gZXh0ZW50MlswXSAmJlxuICAgIGV4dGVudDFbMl0gPT0gZXh0ZW50MlsyXSAmJlxuICAgIGV4dGVudDFbMV0gPT0gZXh0ZW50MlsxXSAmJlxuICAgIGV4dGVudDFbM10gPT0gZXh0ZW50MlszXVxuICApO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiB0d28gZXh0ZW50cyBhcmUgYXBwcm94aW1hdGVseSBlcXVpdmFsZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlIGluIGV4dGVudCBjb29yZGluYXRlIHVuaXRzLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBleHRlbnRzIGRpZmZlciBieSBsZXNzIHRoYW4gdGhlIHRvbGVyYW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcHJveGltYXRlbHlFcXVhbHMoZXh0ZW50MSwgZXh0ZW50MiwgdG9sZXJhbmNlKSB7XG4gIHJldHVybiAoXG4gICAgTWF0aC5hYnMoZXh0ZW50MVswXSAtIGV4dGVudDJbMF0pIDwgdG9sZXJhbmNlICYmXG4gICAgTWF0aC5hYnMoZXh0ZW50MVsyXSAtIGV4dGVudDJbMl0pIDwgdG9sZXJhbmNlICYmXG4gICAgTWF0aC5hYnMoZXh0ZW50MVsxXSAtIGV4dGVudDJbMV0pIDwgdG9sZXJhbmNlICYmXG4gICAgTWF0aC5hYnMoZXh0ZW50MVszXSAtIGV4dGVudDJbM10pIDwgdG9sZXJhbmNlXG4gICk7XG59XG5cbi8qKlxuICogTW9kaWZ5IGFuIGV4dGVudCB0byBpbmNsdWRlIGFub3RoZXIgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgVGhlIGV4dGVudCB0byBiZSBtb2RpZmllZC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIFRoZSBleHRlbnQgdGhhdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSBmaXJzdC5cbiAqIEByZXR1cm4ge0V4dGVudH0gQSByZWZlcmVuY2UgdG8gdGhlIGZpcnN0IChleHRlbmRlZCkgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgaWYgKGV4dGVudDJbMF0gPCBleHRlbnQxWzBdKSB7XG4gICAgZXh0ZW50MVswXSA9IGV4dGVudDJbMF07XG4gIH1cbiAgaWYgKGV4dGVudDJbMl0gPiBleHRlbnQxWzJdKSB7XG4gICAgZXh0ZW50MVsyXSA9IGV4dGVudDJbMl07XG4gIH1cbiAgaWYgKGV4dGVudDJbMV0gPCBleHRlbnQxWzFdKSB7XG4gICAgZXh0ZW50MVsxXSA9IGV4dGVudDJbMV07XG4gIH1cbiAgaWYgKGV4dGVudDJbM10gPiBleHRlbnQxWzNdKSB7XG4gICAgZXh0ZW50MVszXSA9IGV4dGVudDJbM107XG4gIH1cbiAgcmV0dXJuIGV4dGVudDE7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgY29vcmRpbmF0ZSkge1xuICBpZiAoY29vcmRpbmF0ZVswXSA8IGV4dGVudFswXSkge1xuICAgIGV4dGVudFswXSA9IGNvb3JkaW5hdGVbMF07XG4gIH1cbiAgaWYgKGNvb3JkaW5hdGVbMF0gPiBleHRlbnRbMl0pIHtcbiAgICBleHRlbnRbMl0gPSBjb29yZGluYXRlWzBdO1xuICB9XG4gIGlmIChjb29yZGluYXRlWzFdIDwgZXh0ZW50WzFdKSB7XG4gICAgZXh0ZW50WzFdID0gY29vcmRpbmF0ZVsxXTtcbiAgfVxuICBpZiAoY29vcmRpbmF0ZVsxXSA+IGV4dGVudFszXSkge1xuICAgIGV4dGVudFszXSA9IGNvb3JkaW5hdGVbMV07XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCBjb29yZGluYXRlcykge1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGVzW2ldKTtcbiAgfVxuICByZXR1cm4gZXh0ZW50O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kRmxhdENvb3JkaW5hdGVzKFxuICBleHRlbnQsXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZVxuKSB7XG4gIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICBleHRlbmRYWShleHRlbnQsIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0pO1xuICB9XG4gIHJldHVybiBleHRlbnQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IHJpbmdzIFJpbmdzLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRSaW5ncyhleHRlbnQsIHJpbmdzKSB7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IHJpbmdzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBleHRlbmRDb29yZGluYXRlcyhleHRlbnQsIHJpbmdzW2ldKTtcbiAgfVxuICByZXR1cm4gZXh0ZW50O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRYWShleHRlbnQsIHgsIHkpIHtcbiAgZXh0ZW50WzBdID0gTWF0aC5taW4oZXh0ZW50WzBdLCB4KTtcbiAgZXh0ZW50WzFdID0gTWF0aC5taW4oZXh0ZW50WzFdLCB5KTtcbiAgZXh0ZW50WzJdID0gTWF0aC5tYXgoZXh0ZW50WzJdLCB4KTtcbiAgZXh0ZW50WzNdID0gTWF0aC5tYXgoZXh0ZW50WzNdLCB5KTtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGNhbGxzIGBjYWxsYmFja2AgZm9yIGVhY2ggY29ybmVyIG9mIHRoZSBleHRlbnQuIElmIHRoZVxuICogY2FsbGJhY2sgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSB0aGUgZnVuY3Rpb24gcmV0dXJucyB0aGF0IHZhbHVlXG4gKiBpbW1lZGlhdGVseS4gT3RoZXJ3aXNlIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBTfSBjYWxsYmFjayBDYWxsYmFjay5cbiAqIEByZXR1cm4ge1N8Ym9vbGVhbn0gVmFsdWUuXG4gKiBAdGVtcGxhdGUgU1xuICovXG5leHBvcnQgZnVuY3Rpb24gZm9yRWFjaENvcm5lcihleHRlbnQsIGNhbGxiYWNrKSB7XG4gIGxldCB2YWw7XG4gIHZhbCA9IGNhbGxiYWNrKGdldEJvdHRvbUxlZnQoZXh0ZW50KSk7XG4gIGlmICh2YWwpIHtcbiAgICByZXR1cm4gdmFsO1xuICB9XG4gIHZhbCA9IGNhbGxiYWNrKGdldEJvdHRvbVJpZ2h0KGV4dGVudCkpO1xuICBpZiAodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICB2YWwgPSBjYWxsYmFjayhnZXRUb3BSaWdodChleHRlbnQpKTtcbiAgaWYgKHZhbCkge1xuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgdmFsID0gY2FsbGJhY2soZ2V0VG9wTGVmdChleHRlbnQpKTtcbiAgaWYgKHZhbCkge1xuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEdldCB0aGUgc2l6ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFyZWEoZXh0ZW50KSB7XG4gIGxldCBhcmVhID0gMDtcbiAgaWYgKCFpc0VtcHR5KGV4dGVudCkpIHtcbiAgICBhcmVhID0gZ2V0V2lkdGgoZXh0ZW50KSAqIGdldEhlaWdodChleHRlbnQpO1xuICB9XG4gIHJldHVybiBhcmVhO1xufVxuXG4vKipcbiAqIEdldCB0aGUgYm90dG9tIGxlZnQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBCb3R0b20gbGVmdCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm90dG9tTGVmdChleHRlbnQpIHtcbiAgcmV0dXJuIFtleHRlbnRbMF0sIGV4dGVudFsxXV07XG59XG5cbi8qKlxuICogR2V0IHRoZSBib3R0b20gcmlnaHQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBCb3R0b20gcmlnaHQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJvdHRvbVJpZ2h0KGV4dGVudCkge1xuICByZXR1cm4gW2V4dGVudFsyXSwgZXh0ZW50WzFdXTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGNlbnRlciBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENlbnRlci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENlbnRlcihleHRlbnQpIHtcbiAgcmV0dXJuIFsoZXh0ZW50WzBdICsgZXh0ZW50WzJdKSAvIDIsIChleHRlbnRbMV0gKyBleHRlbnRbM10pIC8gMl07XG59XG5cbi8qKlxuICogR2V0IGEgY29ybmVyIGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0Nvcm5lcn0gY29ybmVyIENvcm5lci5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb3JuZXIgY29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvcm5lcihleHRlbnQsIGNvcm5lcikge1xuICBsZXQgY29vcmRpbmF0ZTtcbiAgaWYgKGNvcm5lciA9PT0gJ2JvdHRvbS1sZWZ0Jykge1xuICAgIGNvb3JkaW5hdGUgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG4gIH0gZWxzZSBpZiAoY29ybmVyID09PSAnYm90dG9tLXJpZ2h0Jykge1xuICAgIGNvb3JkaW5hdGUgPSBnZXRCb3R0b21SaWdodChleHRlbnQpO1xuICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gJ3RvcC1sZWZ0Jykge1xuICAgIGNvb3JkaW5hdGUgPSBnZXRUb3BMZWZ0KGV4dGVudCk7XG4gIH0gZWxzZSBpZiAoY29ybmVyID09PSAndG9wLXJpZ2h0Jykge1xuICAgIGNvb3JkaW5hdGUgPSBnZXRUb3BSaWdodChleHRlbnQpO1xuICB9IGVsc2Uge1xuICAgIGFzc2VydChmYWxzZSwgMTMpOyAvLyBJbnZhbGlkIGNvcm5lclxuICB9XG4gIHJldHVybiBjb29yZGluYXRlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVubGFyZ2VkIGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbmxhcmdlZEFyZWEoZXh0ZW50MSwgZXh0ZW50Mikge1xuICBjb25zdCBtaW5YID0gTWF0aC5taW4oZXh0ZW50MVswXSwgZXh0ZW50MlswXSk7XG4gIGNvbnN0IG1pblkgPSBNYXRoLm1pbihleHRlbnQxWzFdLCBleHRlbnQyWzFdKTtcbiAgY29uc3QgbWF4WCA9IE1hdGgubWF4KGV4dGVudDFbMl0sIGV4dGVudDJbMl0pO1xuICBjb25zdCBtYXhZID0gTWF0aC5tYXgoZXh0ZW50MVszXSwgZXh0ZW50MlszXSk7XG4gIHJldHVybiAobWF4WCAtIG1pblgpICogKG1heFkgLSBtaW5ZKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbZGVzdF0gRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplLCBkZXN0KSB7XG4gIGNvbnN0IFt4MCwgeTAsIHgxLCB5MSwgeDIsIHkyLCB4MywgeTNdID0gZ2V0Um90YXRlZFZpZXdwb3J0KFxuICAgIGNlbnRlcixcbiAgICByZXNvbHV0aW9uLFxuICAgIHJvdGF0aW9uLFxuICAgIHNpemVcbiAgKTtcbiAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKFxuICAgIE1hdGgubWluKHgwLCB4MSwgeDIsIHgzKSxcbiAgICBNYXRoLm1pbih5MCwgeTEsIHkyLCB5MyksXG4gICAgTWF0aC5tYXgoeDAsIHgxLCB4MiwgeDMpLFxuICAgIE1hdGgubWF4KHkwLCB5MSwgeTIsIHkzKSxcbiAgICBkZXN0XG4gICk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBMaW5lYXIgcmluZyByZXByZXNlbnRpbmcgdGhlIHZpZXdwb3J0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um90YXRlZFZpZXdwb3J0KGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHNpemUpIHtcbiAgY29uc3QgZHggPSAocmVzb2x1dGlvbiAqIHNpemVbMF0pIC8gMjtcbiAgY29uc3QgZHkgPSAocmVzb2x1dGlvbiAqIHNpemVbMV0pIC8gMjtcbiAgY29uc3QgY29zUm90YXRpb24gPSBNYXRoLmNvcyhyb3RhdGlvbik7XG4gIGNvbnN0IHNpblJvdGF0aW9uID0gTWF0aC5zaW4ocm90YXRpb24pO1xuICBjb25zdCB4Q29zID0gZHggKiBjb3NSb3RhdGlvbjtcbiAgY29uc3QgeFNpbiA9IGR4ICogc2luUm90YXRpb247XG4gIGNvbnN0IHlDb3MgPSBkeSAqIGNvc1JvdGF0aW9uO1xuICBjb25zdCB5U2luID0gZHkgKiBzaW5Sb3RhdGlvbjtcbiAgY29uc3QgeCA9IGNlbnRlclswXTtcbiAgY29uc3QgeSA9IGNlbnRlclsxXTtcbiAgcmV0dXJuIFtcbiAgICB4IC0geENvcyArIHlTaW4sXG4gICAgeSAtIHhTaW4gLSB5Q29zLFxuICAgIHggLSB4Q29zIC0geVNpbixcbiAgICB5IC0geFNpbiArIHlDb3MsXG4gICAgeCArIHhDb3MgLSB5U2luLFxuICAgIHkgKyB4U2luICsgeUNvcyxcbiAgICB4ICsgeENvcyArIHlTaW4sXG4gICAgeSArIHhTaW4gLSB5Q29zLFxuICAgIHggLSB4Q29zICsgeVNpbixcbiAgICB5IC0geFNpbiAtIHlDb3MsXG4gIF07XG59XG5cbi8qKlxuICogR2V0IHRoZSBoZWlnaHQgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEhlaWdodC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhlaWdodChleHRlbnQpIHtcbiAgcmV0dXJuIGV4dGVudFszXSAtIGV4dGVudFsxXTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7bnVtYmVyfSBJbnRlcnNlY3Rpb24gYXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyc2VjdGlvbkFyZWEoZXh0ZW50MSwgZXh0ZW50Mikge1xuICBjb25zdCBpbnRlcnNlY3Rpb24gPSBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50MSwgZXh0ZW50Mik7XG4gIHJldHVybiBnZXRBcmVhKGludGVyc2VjdGlvbik7XG59XG5cbi8qKlxuICogR2V0IHRoZSBpbnRlcnNlY3Rpb24gb2YgdHdvIGV4dGVudHMuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHBhcmFtIHtFeHRlbnR9IFtkZXN0XSBPcHRpb25hbCBleHRlbnQgdG8gcG9wdWxhdGUgd2l0aCBpbnRlcnNlY3Rpb24uXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEludGVyc2VjdGluZyBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50MSwgZXh0ZW50MiwgZGVzdCkge1xuICBjb25zdCBpbnRlcnNlY3Rpb24gPSBkZXN0ID8gZGVzdCA6IGNyZWF0ZUVtcHR5KCk7XG4gIGlmIChpbnRlcnNlY3RzKGV4dGVudDEsIGV4dGVudDIpKSB7XG4gICAgaWYgKGV4dGVudDFbMF0gPiBleHRlbnQyWzBdKSB7XG4gICAgICBpbnRlcnNlY3Rpb25bMF0gPSBleHRlbnQxWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcnNlY3Rpb25bMF0gPSBleHRlbnQyWzBdO1xuICAgIH1cbiAgICBpZiAoZXh0ZW50MVsxXSA+IGV4dGVudDJbMV0pIHtcbiAgICAgIGludGVyc2VjdGlvblsxXSA9IGV4dGVudDFbMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGludGVyc2VjdGlvblsxXSA9IGV4dGVudDJbMV07XG4gICAgfVxuICAgIGlmIChleHRlbnQxWzJdIDwgZXh0ZW50MlsyXSkge1xuICAgICAgaW50ZXJzZWN0aW9uWzJdID0gZXh0ZW50MVsyXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW50ZXJzZWN0aW9uWzJdID0gZXh0ZW50MlsyXTtcbiAgICB9XG4gICAgaWYgKGV4dGVudDFbM10gPCBleHRlbnQyWzNdKSB7XG4gICAgICBpbnRlcnNlY3Rpb25bM10gPSBleHRlbnQxWzNdO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcnNlY3Rpb25bM10gPSBleHRlbnQyWzNdO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjcmVhdGVPclVwZGF0ZUVtcHR5KGludGVyc2VjdGlvbik7XG4gIH1cbiAgcmV0dXJuIGludGVyc2VjdGlvbjtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWFyZ2luLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWFyZ2luKGV4dGVudCkge1xuICByZXR1cm4gZ2V0V2lkdGgoZXh0ZW50KSArIGdldEhlaWdodChleHRlbnQpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgc2l6ZSAod2lkdGgsIGhlaWdodCkgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFRoZSBleHRlbnQgc2l6ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNpemUoZXh0ZW50KSB7XG4gIHJldHVybiBbZXh0ZW50WzJdIC0gZXh0ZW50WzBdLCBleHRlbnRbM10gLSBleHRlbnRbMV1dO1xufVxuXG4vKipcbiAqIEdldCB0aGUgdG9wIGxlZnQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUb3AgbGVmdCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9wTGVmdChleHRlbnQpIHtcbiAgcmV0dXJuIFtleHRlbnRbMF0sIGV4dGVudFszXV07XG59XG5cbi8qKlxuICogR2V0IHRoZSB0b3AgcmlnaHQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUb3AgcmlnaHQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcFJpZ2h0KGV4dGVudCkge1xuICByZXR1cm4gW2V4dGVudFsyXSwgZXh0ZW50WzNdXTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHdpZHRoIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdpZHRoKGV4dGVudCkge1xuICByZXR1cm4gZXh0ZW50WzJdIC0gZXh0ZW50WzBdO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBvbmUgZXh0ZW50IGludGVyc2VjdHMgYW5vdGhlci5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBleHRlbnRzIGludGVyc2VjdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHMoZXh0ZW50MSwgZXh0ZW50Mikge1xuICByZXR1cm4gKFxuICAgIGV4dGVudDFbMF0gPD0gZXh0ZW50MlsyXSAmJlxuICAgIGV4dGVudDFbMl0gPj0gZXh0ZW50MlswXSAmJlxuICAgIGV4dGVudDFbMV0gPD0gZXh0ZW50MlszXSAmJlxuICAgIGV4dGVudDFbM10gPj0gZXh0ZW50MlsxXVxuICApO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhbiBleHRlbnQgaXMgZW1wdHkuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGVtcHR5LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eShleHRlbnQpIHtcbiAgcmV0dXJuIGV4dGVudFsyXSA8IGV4dGVudFswXSB8fCBleHRlbnRbM10gPCBleHRlbnRbMV07XG59XG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gW2Rlc3RdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmV0dXJuT3JVcGRhdGUoZXh0ZW50LCBkZXN0KSB7XG4gIGlmIChkZXN0KSB7XG4gICAgZGVzdFswXSA9IGV4dGVudFswXTtcbiAgICBkZXN0WzFdID0gZXh0ZW50WzFdO1xuICAgIGRlc3RbMl0gPSBleHRlbnRbMl07XG4gICAgZGVzdFszXSA9IGV4dGVudFszXTtcbiAgICByZXR1cm4gZGVzdDtcbiAgfVxuICByZXR1cm4gZXh0ZW50O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGVGcm9tQ2VudGVyKGV4dGVudCwgdmFsdWUpIHtcbiAgY29uc3QgZGVsdGFYID0gKChleHRlbnRbMl0gLSBleHRlbnRbMF0pIC8gMikgKiAodmFsdWUgLSAxKTtcbiAgY29uc3QgZGVsdGFZID0gKChleHRlbnRbM10gLSBleHRlbnRbMV0pIC8gMikgKiAodmFsdWUgLSAxKTtcbiAgZXh0ZW50WzBdIC09IGRlbHRhWDtcbiAgZXh0ZW50WzJdICs9IGRlbHRhWDtcbiAgZXh0ZW50WzFdIC09IGRlbHRhWTtcbiAgZXh0ZW50WzNdICs9IGRlbHRhWTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdGhlIHNlZ21lbnQgYmV0d2VlbiB0d28gY29vcmRpbmF0ZXMgaW50ZXJzZWN0cyAoY3Jvc3NlcyxcbiAqIHRvdWNoZXMsIG9yIGlzIGNvbnRhaW5lZCBieSkgdGhlIHByb3ZpZGVkIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHN0YXJ0IFNlZ21lbnQgc3RhcnQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGVuZCBTZWdtZW50IGVuZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHNlZ21lbnQgaW50ZXJzZWN0cyB0aGUgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c1NlZ21lbnQoZXh0ZW50LCBzdGFydCwgZW5kKSB7XG4gIGxldCBpbnRlcnNlY3RzID0gZmFsc2U7XG4gIGNvbnN0IHN0YXJ0UmVsID0gY29vcmRpbmF0ZVJlbGF0aW9uc2hpcChleHRlbnQsIHN0YXJ0KTtcbiAgY29uc3QgZW5kUmVsID0gY29vcmRpbmF0ZVJlbGF0aW9uc2hpcChleHRlbnQsIGVuZCk7XG4gIGlmIChcbiAgICBzdGFydFJlbCA9PT0gUmVsYXRpb25zaGlwLklOVEVSU0VDVElORyB8fFxuICAgIGVuZFJlbCA9PT0gUmVsYXRpb25zaGlwLklOVEVSU0VDVElOR1xuICApIHtcbiAgICBpbnRlcnNlY3RzID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBtaW5YID0gZXh0ZW50WzBdO1xuICAgIGNvbnN0IG1pblkgPSBleHRlbnRbMV07XG4gICAgY29uc3QgbWF4WCA9IGV4dGVudFsyXTtcbiAgICBjb25zdCBtYXhZID0gZXh0ZW50WzNdO1xuICAgIGNvbnN0IHN0YXJ0WCA9IHN0YXJ0WzBdO1xuICAgIGNvbnN0IHN0YXJ0WSA9IHN0YXJ0WzFdO1xuICAgIGNvbnN0IGVuZFggPSBlbmRbMF07XG4gICAgY29uc3QgZW5kWSA9IGVuZFsxXTtcbiAgICBjb25zdCBzbG9wZSA9IChlbmRZIC0gc3RhcnRZKSAvIChlbmRYIC0gc3RhcnRYKTtcbiAgICBsZXQgeCwgeTtcbiAgICBpZiAoISEoZW5kUmVsICYgUmVsYXRpb25zaGlwLkFCT1ZFKSAmJiAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLkFCT1ZFKSkge1xuICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyB0b3BcbiAgICAgIHggPSBlbmRYIC0gKGVuZFkgLSBtYXhZKSAvIHNsb3BlO1xuICAgICAgaW50ZXJzZWN0cyA9IHggPj0gbWluWCAmJiB4IDw9IG1heFg7XG4gICAgfVxuICAgIGlmIChcbiAgICAgICFpbnRlcnNlY3RzICYmXG4gICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuUklHSFQpICYmXG4gICAgICAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLlJJR0hUKVxuICAgICkge1xuICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyByaWdodFxuICAgICAgeSA9IGVuZFkgLSAoZW5kWCAtIG1heFgpICogc2xvcGU7XG4gICAgICBpbnRlcnNlY3RzID0geSA+PSBtaW5ZICYmIHkgPD0gbWF4WTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIWludGVyc2VjdHMgJiZcbiAgICAgICEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5CRUxPVykgJiZcbiAgICAgICEoc3RhcnRSZWwgJiBSZWxhdGlvbnNoaXAuQkVMT1cpXG4gICAgKSB7XG4gICAgICAvLyBwb3RlbnRpYWxseSBpbnRlcnNlY3RzIGJvdHRvbVxuICAgICAgeCA9IGVuZFggLSAoZW5kWSAtIG1pblkpIC8gc2xvcGU7XG4gICAgICBpbnRlcnNlY3RzID0geCA+PSBtaW5YICYmIHggPD0gbWF4WDtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIWludGVyc2VjdHMgJiZcbiAgICAgICEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5MRUZUKSAmJlxuICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5MRUZUKVxuICAgICkge1xuICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyBsZWZ0XG4gICAgICB5ID0gZW5kWSAtIChlbmRYIC0gbWluWCkgKiBzbG9wZTtcbiAgICAgIGludGVyc2VjdHMgPSB5ID49IG1pblkgJiYgeSA8PSBtYXhZO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaW50ZXJzZWN0cztcbn1cblxuLyoqXG4gKiBBcHBseSBhIHRyYW5zZm9ybSBmdW5jdGlvbiB0byB0aGUgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICogQ2FsbGVkIHdpdGggYFttaW5YLCBtaW5ZLCBtYXhYLCBtYXhZXWAgZXh0ZW50IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtFeHRlbnR9IFtkZXN0XSBEZXN0aW5hdGlvbiBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0b3BzXSBOdW1iZXIgb2Ygc3RvcHMgcGVyIHNpZGUgdXNlZCBmb3IgdGhlIHRyYW5zZm9ybS5cbiAqIEJ5IGRlZmF1bHQgb25seSB0aGUgY29ybmVycyBhcmUgdXNlZC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlUcmFuc2Zvcm0oZXh0ZW50LCB0cmFuc2Zvcm1GbiwgZGVzdCwgc3RvcHMpIHtcbiAgbGV0IGNvb3JkaW5hdGVzID0gW107XG4gIGlmIChzdG9wcyA+IDEpIHtcbiAgICBjb25zdCB3aWR0aCA9IGV4dGVudFsyXSAtIGV4dGVudFswXTtcbiAgICBjb25zdCBoZWlnaHQgPSBleHRlbnRbM10gLSBleHRlbnRbMV07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdG9wczsgKytpKSB7XG4gICAgICBjb29yZGluYXRlcy5wdXNoKFxuICAgICAgICBleHRlbnRbMF0gKyAod2lkdGggKiBpKSAvIHN0b3BzLFxuICAgICAgICBleHRlbnRbMV0sXG4gICAgICAgIGV4dGVudFsyXSxcbiAgICAgICAgZXh0ZW50WzFdICsgKGhlaWdodCAqIGkpIC8gc3RvcHMsXG4gICAgICAgIGV4dGVudFsyXSAtICh3aWR0aCAqIGkpIC8gc3RvcHMsXG4gICAgICAgIGV4dGVudFszXSxcbiAgICAgICAgZXh0ZW50WzBdLFxuICAgICAgICBleHRlbnRbM10gLSAoaGVpZ2h0ICogaSkgLyBzdG9wc1xuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29vcmRpbmF0ZXMgPSBbXG4gICAgICBleHRlbnRbMF0sXG4gICAgICBleHRlbnRbMV0sXG4gICAgICBleHRlbnRbMl0sXG4gICAgICBleHRlbnRbMV0sXG4gICAgICBleHRlbnRbMl0sXG4gICAgICBleHRlbnRbM10sXG4gICAgICBleHRlbnRbMF0sXG4gICAgICBleHRlbnRbM10sXG4gICAgXTtcbiAgfVxuICB0cmFuc2Zvcm1Gbihjb29yZGluYXRlcywgY29vcmRpbmF0ZXMsIDIpO1xuICBjb25zdCB4cyA9IFtdO1xuICBjb25zdCB5cyA9IFtdO1xuICBmb3IgKGxldCBpID0gMCwgbCA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikge1xuICAgIHhzLnB1c2goY29vcmRpbmF0ZXNbaV0pO1xuICAgIHlzLnB1c2goY29vcmRpbmF0ZXNbaSArIDFdKTtcbiAgfVxuICByZXR1cm4gX2JvdW5kaW5nRXh0ZW50WFlzKHhzLCB5cywgZGVzdCk7XG59XG5cbi8qKlxuICogTW9kaWZpZXMgdGhlIHByb3ZpZGVkIGV4dGVudCBpbi1wbGFjZSB0byBiZSB3aXRoaW4gdGhlIHJlYWwgd29ybGRcbiAqIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uXG4gKiBAcmV0dXJuIHtFeHRlbnR9IFRoZSBleHRlbnQgd2l0aGluIHRoZSByZWFsIHdvcmxkIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyYXBYKGV4dGVudCwgcHJvamVjdGlvbikge1xuICBjb25zdCBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgY29uc3QgY2VudGVyID0gZ2V0Q2VudGVyKGV4dGVudCk7XG4gIGlmIChcbiAgICBwcm9qZWN0aW9uLmNhbldyYXBYKCkgJiZcbiAgICAoY2VudGVyWzBdIDwgcHJvamVjdGlvbkV4dGVudFswXSB8fCBjZW50ZXJbMF0gPj0gcHJvamVjdGlvbkV4dGVudFsyXSlcbiAgKSB7XG4gICAgY29uc3Qgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgIGNvbnN0IHdvcmxkc0F3YXkgPSBNYXRoLmZsb29yKFxuICAgICAgKGNlbnRlclswXSAtIHByb2plY3Rpb25FeHRlbnRbMF0pIC8gd29ybGRXaWR0aFxuICAgICk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gd29ybGRzQXdheSAqIHdvcmxkV2lkdGg7XG4gICAgZXh0ZW50WzBdIC09IG9mZnNldDtcbiAgICBleHRlbnRbMl0gLT0gb2Zmc2V0O1xuICB9XG4gIHJldHVybiBleHRlbnQ7XG59XG5cbi8qKlxuICogRml0cyB0aGUgZXh0ZW50IHRvIHRoZSByZWFsIHdvcmxkXG4gKlxuICogSWYgdGhlIGV4dGVudCBkb2VzIG5vdCBjcm9zcyB0aGUgYW50aSBtZXJpZGlhbiwgdGhpcyB3aWxsIHJldHVybiB0aGUgZXh0ZW50IGluIGFuIGFycmF5XG4gKiBJZiB0aGUgZXh0ZW50IGNyb3NzZXMgdGhlIGFudGkgbWVyaWRpYW4sIHRoZSBleHRlbnQgd2lsbCBiZSBzbGljZWQsIHNvIGVhY2ggcGFydCBmaXRzIHdpdGhpbiB0aGVcbiAqIHJlYWwgd29ybGRcbiAqXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvblxuICogQHJldHVybiB7QXJyYXk8RXh0ZW50Pn0gVGhlIGV4dGVudCB3aXRoaW4gdGhlIHJlYWwgd29ybGQgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcEFuZFNsaWNlWChleHRlbnQsIHByb2plY3Rpb24pIHtcbiAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSkge1xuICAgIGNvbnN0IHByb2plY3Rpb25FeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuXG4gICAgaWYgKCFpc0Zpbml0ZShleHRlbnRbMF0pIHx8ICFpc0Zpbml0ZShleHRlbnRbMl0pKSB7XG4gICAgICByZXR1cm4gW1twcm9qZWN0aW9uRXh0ZW50WzBdLCBleHRlbnRbMV0sIHByb2plY3Rpb25FeHRlbnRbMl0sIGV4dGVudFszXV1dO1xuICAgIH1cblxuICAgIHdyYXBYKGV4dGVudCwgcHJvamVjdGlvbik7XG4gICAgY29uc3Qgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuXG4gICAgaWYgKGdldFdpZHRoKGV4dGVudCkgPiB3b3JsZFdpZHRoKSB7XG4gICAgICAvLyB0aGUgZXh0ZW50IHdyYXBzIGFyb3VuZCBvbiBpdHNlbGZcbiAgICAgIHJldHVybiBbW3Byb2plY3Rpb25FeHRlbnRbMF0sIGV4dGVudFsxXSwgcHJvamVjdGlvbkV4dGVudFsyXSwgZXh0ZW50WzNdXV07XG4gICAgfSBlbHNlIGlmIChleHRlbnRbMF0gPCBwcm9qZWN0aW9uRXh0ZW50WzBdKSB7XG4gICAgICAvLyB0aGUgZXh0ZW50IGNyb3NzZXMgdGhlIGFudGkgbWVyaWRpYW4sIHNvIGl0IG5lZWRzIHRvIGJlIHNsaWNlZFxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgW2V4dGVudFswXSArIHdvcmxkV2lkdGgsIGV4dGVudFsxXSwgcHJvamVjdGlvbkV4dGVudFsyXSwgZXh0ZW50WzNdXSxcbiAgICAgICAgW3Byb2plY3Rpb25FeHRlbnRbMF0sIGV4dGVudFsxXSwgZXh0ZW50WzJdLCBleHRlbnRbM11dLFxuICAgICAgXTtcbiAgICB9IGVsc2UgaWYgKGV4dGVudFsyXSA+IHByb2plY3Rpb25FeHRlbnRbMl0pIHtcbiAgICAgIC8vIHRoZSBleHRlbnQgY3Jvc3NlcyB0aGUgYW50aSBtZXJpZGlhbiwgc28gaXQgbmVlZHMgdG8gYmUgc2xpY2VkXG4gICAgICByZXR1cm4gW1xuICAgICAgICBbZXh0ZW50WzBdLCBleHRlbnRbMV0sIHByb2plY3Rpb25FeHRlbnRbMl0sIGV4dGVudFszXV0sXG4gICAgICAgIFtwcm9qZWN0aW9uRXh0ZW50WzBdLCBleHRlbnRbMV0sIGV4dGVudFsyXSAtIHdvcmxkV2lkdGgsIGV4dGVudFszXV0sXG4gICAgICBdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbZXh0ZW50XTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9mdW5jdGlvbnNcbiAqL1xuXG5pbXBvcnQge2VxdWFscyBhcyBhcnJheUVxdWFsc30gZnJvbSAnLi9hcnJheS5qcyc7XG5cbi8qKlxuICogQWx3YXlzIHJldHVybnMgdHJ1ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBUUlVFKCkge1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBBbHdheXMgcmV0dXJucyBmYWxzZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IGZhbHNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gRkFMU0UoKSB7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBBIHJldXNhYmxlIGZ1bmN0aW9uLCB1c2VkIGUuZy4gYXMgYSBkZWZhdWx0IGZvciBjYWxsYmFja3MuXG4gKlxuICogQHJldHVybiB7dm9pZH0gTm90aGluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFZPSUQoKSB7fVxuXG4vKipcbiAqIFdyYXAgYSBmdW5jdGlvbiBpbiBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgcmVtZW1iZXJzIHRoZSBsYXN0IHJldHVybi4gIElmIHRoZVxuICogcmV0dXJuZWQgZnVuY3Rpb24gaXMgY2FsbGVkIHR3aWNlIGluIGEgcm93IHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFuZCB0aGUgc2FtZVxuICogdGhpcyBvYmplY3QsIGl0IHdpbGwgcmV0dXJuIHRoZSB2YWx1ZSBmcm9tIHRoZSBmaXJzdCBjYWxsIGluIHRoZSBzZWNvbmQgY2FsbC5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLmFueSk6IFJldHVyblR5cGV9IGZuIFRoZSBmdW5jdGlvbiB0byBtZW1vaXplLlxuICogQHJldHVybiB7ZnVuY3Rpb24oLi4uYW55KTogUmV0dXJuVHlwZX0gVGhlIG1lbW9pemVkIGZ1bmN0aW9uLlxuICogQHRlbXBsYXRlIFJldHVyblR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lbW9pemVPbmUoZm4pIHtcbiAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuXG4gIC8qKiBAdHlwZSB7UmV0dXJuVHlwZX0gKi9cbiAgbGV0IGxhc3RSZXN1bHQ7XG5cbiAgLyoqIEB0eXBlIHtBcnJheTxhbnk+fSAqL1xuICBsZXQgbGFzdEFyZ3M7XG5cbiAgbGV0IGxhc3RUaGlzO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgbmV4dEFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgIGlmICghY2FsbGVkIHx8IHRoaXMgIT09IGxhc3RUaGlzIHx8ICFhcnJheUVxdWFscyhuZXh0QXJncywgbGFzdEFyZ3MpKSB7XG4gICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgICAgbGFzdEFyZ3MgPSBuZXh0QXJncztcbiAgICAgIGxhc3RSZXN1bHQgPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgfTtcbn1cblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtmdW5jdGlvbigpOiAoVCB8IFByb21pc2U8VD4pfSBnZXR0ZXIgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB2YWx1ZSBvciBhIHByb21pc2UgZm9yIGEgdmFsdWUuXG4gKiBAcmV0dXJuIHtQcm9taXNlPFQ+fSBBIHByb21pc2UgZm9yIHRoZSB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvUHJvbWlzZShnZXR0ZXIpIHtcbiAgZnVuY3Rpb24gcHJvbWlzZUdldHRlcigpIHtcbiAgICBsZXQgdmFsdWU7XG4gICAgdHJ5IHtcbiAgICAgIHZhbHVlID0gZ2V0dGVyKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICB9XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKTtcbiAgfVxuICByZXR1cm4gcHJvbWlzZUdldHRlcigpO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHtcbiAgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLFxuICBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLFxufSBmcm9tICcuLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHtcbiAgY3JlYXRlRW1wdHksXG4gIGNyZWF0ZU9yVXBkYXRlRW1wdHksXG4gIGdldEhlaWdodCxcbiAgcmV0dXJuT3JVcGRhdGUsXG59IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge2dldCBhcyBnZXRQcm9qZWN0aW9uLCBnZXRUcmFuc2Zvcm19IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHttZW1vaXplT25lfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHt0cmFuc2Zvcm0yRH0gZnJvbSAnLi9mbGF0L3RyYW5zZm9ybS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYgeydYWScgfCAnWFlaJyB8ICdYWU0nIHwgJ1hZWk0nfSBHZW9tZXRyeUxheW91dFxuICogVGhlIGNvb3JkaW5hdGUgbGF5b3V0IGZvciBnZW9tZXRyaWVzLCBpbmRpY2F0aW5nIHdoZXRoZXIgYSAzcmQgb3IgNHRoIHogKCdaJylcbiAqIG9yIG1lYXN1cmUgKCdNJykgY29vcmRpbmF0ZSBpcyBhdmFpbGFibGUuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7J1BvaW50JyB8ICdMaW5lU3RyaW5nJyB8ICdMaW5lYXJSaW5nJyB8ICdQb2x5Z29uJyB8ICdNdWx0aVBvaW50JyB8ICdNdWx0aUxpbmVTdHJpbmcnIHwgJ011bHRpUG9seWdvbicgfCAnR2VvbWV0cnlDb2xsZWN0aW9uJyB8ICdDaXJjbGUnfSBUeXBlXG4gKiBUaGUgZ2VvbWV0cnkgdHlwZS4gIE9uZSBvZiBgJ1BvaW50J2AsIGAnTGluZVN0cmluZydgLCBgJ0xpbmVhclJpbmcnYCxcbiAqIGAnUG9seWdvbidgLCBgJ011bHRpUG9pbnQnYCwgYCdNdWx0aUxpbmVTdHJpbmcnYCwgYCdNdWx0aVBvbHlnb24nYCxcbiAqIGAnR2VvbWV0cnlDb2xsZWN0aW9uJ2AsIG9yIGAnQ2lyY2xlJ2AuXG4gKi9cblxuLyoqXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAqL1xuY29uc3QgdG1wVHJhbnNmb3JtID0gY3JlYXRlVHJhbnNmb3JtKCk7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQmFzZSBjbGFzcyBmb3IgdmVjdG9yIGdlb21ldHJpZXMuXG4gKlxuICogVG8gZ2V0IG5vdGlmaWVkIG9mIGNoYW5nZXMgdG8gdGhlIGdlb21ldHJ5LCByZWdpc3RlciBhIGxpc3RlbmVyIGZvciB0aGVcbiAqIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgb24geW91ciBnZW9tZXRyeSBpbnN0YW5jZS5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xuY2xhc3MgR2VvbWV0cnkgZXh0ZW5kcyBCYXNlT2JqZWN0IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdGhpcy5leHRlbnRfID0gY3JlYXRlRW1wdHkoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmV4dGVudFJldmlzaW9uXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gPSAwO1xuXG4gICAgLyoqXG4gICAgICogR2V0IGEgdHJhbnNmb3JtZWQgYW5kIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJldmlzaW9uIFRoZSBnZW9tZXRyeSByZXZpc2lvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IFt0cmFuc2Zvcm1dIE9wdGlvbmFsIHRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICB0aGlzLnNpbXBsaWZ5VHJhbnNmb3JtZWRJbnRlcm5hbCA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKFxuICAgICAgcmV2aXNpb24sXG4gICAgICBzcXVhcmVkVG9sZXJhbmNlLFxuICAgICAgdHJhbnNmb3JtXG4gICAgKSB7XG4gICAgICBpZiAoIXRyYW5zZm9ybSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTaW1wbGlmaWVkR2VvbWV0cnkoc3F1YXJlZFRvbGVyYW5jZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBjbG9uZSA9IHRoaXMuY2xvbmUoKTtcbiAgICAgIGNsb25lLmFwcGx5VHJhbnNmb3JtKHRyYW5zZm9ybSk7XG4gICAgICByZXR1cm4gY2xvbmUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5KHNxdWFyZWRUb2xlcmFuY2UpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIHRyYW5zZm9ybWVkIGFuZCBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gW3RyYW5zZm9ybV0gT3B0aW9uYWwgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICovXG4gIHNpbXBsaWZ5VHJhbnNmb3JtZWQoc3F1YXJlZFRvbGVyYW5jZSwgdHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIHRoaXMuc2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsKFxuICAgICAgdGhpcy5nZXRSZXZpc2lvbigpLFxuICAgICAgc3F1YXJlZFRvbGVyYW5jZSxcbiAgICAgIHRyYW5zZm9ybVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7IUdlb21ldHJ5fSBDbG9uZS5cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICovXG4gIGNsb3Nlc3RQb2ludFhZKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICAgKi9cbiAgY29udGFpbnNYWSh4LCB5KSB7XG4gICAgY29uc3QgY29vcmQgPSB0aGlzLmdldENsb3Nlc3RQb2ludChbeCwgeV0pO1xuICAgIHJldHVybiBjb29yZFswXSA9PT0geCAmJiBjb29yZFsxXSA9PT0geTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGNsb3Nlc3QgcG9pbnQgb2YgdGhlIGdlb21ldHJ5IHRvIHRoZSBwYXNzZWQgcG9pbnQgYXNcbiAgICoge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGUgY29vcmRpbmF0ZX0uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtjbG9zZXN0UG9pbnRdIENsb3Nlc3QgcG9pbnQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ2xvc2VzdCBwb2ludC5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0Q2xvc2VzdFBvaW50KHBvaW50LCBjbG9zZXN0UG9pbnQpIHtcbiAgICBjbG9zZXN0UG9pbnQgPSBjbG9zZXN0UG9pbnQgPyBjbG9zZXN0UG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgIHRoaXMuY2xvc2VzdFBvaW50WFkocG9pbnRbMF0sIHBvaW50WzFdLCBjbG9zZXN0UG9pbnQsIEluZmluaXR5KTtcbiAgICByZXR1cm4gY2xvc2VzdFBvaW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGdlb21ldHJ5IGluY2x1ZGVzIHRoZSBzcGVjaWZpZWQgY29vcmRpbmF0ZS4gSWYgdGhlXG4gICAqIGNvb3JkaW5hdGUgaXMgb24gdGhlIGJvdW5kYXJ5IG9mIHRoZSBnZW9tZXRyeSwgcmV0dXJucyBmYWxzZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgY29vcmRpbmF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgaW50ZXJzZWN0c0Nvb3JkaW5hdGUoY29vcmRpbmF0ZSkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5zWFkoY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSk7XG4gIH1cblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKi9cbiAgY29tcHV0ZUV4dGVudChleHRlbnQpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGV4dGVudCBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRFeHRlbnQoZXh0ZW50KSB7XG4gICAgaWYgKHRoaXMuZXh0ZW50UmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgY29uc3QgZXh0ZW50ID0gdGhpcy5jb21wdXRlRXh0ZW50KHRoaXMuZXh0ZW50Xyk7XG4gICAgICBpZiAoaXNOYU4oZXh0ZW50WzBdKSB8fCBpc05hTihleHRlbnRbMV0pKSB7XG4gICAgICAgIGNyZWF0ZU9yVXBkYXRlRW1wdHkoZXh0ZW50KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXh0ZW50UmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0dXJuT3JVcGRhdGUodGhpcy5leHRlbnRfLCBleHRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJvdGF0ZSB0aGUgZ2VvbWV0cnkgYXJvdW5kIGEgZ2l2ZW4gY29vcmRpbmF0ZS4gVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnlcbiAgICogY29vcmRpbmF0ZXMgaW4gcGxhY2UuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgUm90YXRpb24gYW5nbGUgaW4gcmFkaWFucy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgKiBAYXBpXG4gICAqL1xuICByb3RhdGUoYW5nbGUsIGFuY2hvcikge1xuICAgIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogU2NhbGUgdGhlIGdlb21ldHJ5ICh3aXRoIGFuIG9wdGlvbmFsIG9yaWdpbikuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzeCBUaGUgc2NhbGluZyBmYWN0b3IgaW4gdGhlIHgtZGlyZWN0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW3N5XSBUaGUgc2NhbGluZyBmYWN0b3IgaW4gdGhlIHktZGlyZWN0aW9uIChkZWZhdWx0cyB0byBzeCkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbYW5jaG9yXSBUaGUgc2NhbGUgb3JpZ2luIChkZWZhdWx0cyB0byB0aGUgY2VudGVyXG4gICAqICAgICBvZiB0aGUgZ2VvbWV0cnkgZXh0ZW50KS5cbiAgICogQGFwaVxuICAgKi9cbiAgc2NhbGUoc3gsIHN5LCBhbmNob3IpIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5LiAgRm9yIGxpbmVzdHJpbmdzLCB0aGlzIHVzZXNcbiAgICogdGhlIFtEb3VnbGFzIFBldWNrZXJdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1JhbWVyLURvdWdsYXMtUGV1Y2tlcl9hbGdvcml0aG0pXG4gICAqIGFsZ29yaXRobS4gIEZvciBwb2x5Z29ucywgYSBxdWFudGl6YXRpb24tYmFzZWRcbiAgICogc2ltcGxpZmljYXRpb24gaXMgdXNlZCB0byBwcmVzZXJ2ZSB0b3BvbG9neS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUaGUgdG9sZXJhbmNlIGRpc3RhbmNlIGZvciBzaW1wbGlmaWNhdGlvbi5cbiAgICogQHJldHVybiB7R2VvbWV0cnl9IEEgbmV3LCBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIG9yaWdpbmFsIGdlb21ldHJ5LlxuICAgKiBAYXBpXG4gICAqL1xuICBzaW1wbGlmeSh0b2xlcmFuY2UpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTaW1wbGlmaWVkR2VvbWV0cnkodG9sZXJhbmNlICogdG9sZXJhbmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhpcyBnZW9tZXRyeSB1c2luZyB0aGUgRG91Z2xhcyBQZXVja2VyXG4gICAqIGFsZ29yaXRobS5cbiAgICogU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1JhbWVyLURvdWdsYXMtUGV1Y2tlcl9hbGdvcml0aG0uXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICogQHJldHVybiB7R2VvbWV0cnl9IFNpbXBsaWZpZWQgZ2VvbWV0cnkuXG4gICAqL1xuICBnZXRTaW1wbGlmaWVkR2VvbWV0cnkoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7VHlwZX0gR2VvbWV0cnkgdHlwZS5cbiAgICovXG4gIGdldFR5cGUoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBnZW9tZXRyeS5cbiAgICogVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgKiBJZiB5b3UgZG8gbm90IHdhbnQgdGhlIGdlb21ldHJ5IG1vZGlmaWVkIGluIHBsYWNlLCBmaXJzdCBgY2xvbmUoKWAgaXQgYW5kXG4gICAqIHRoZW4gdXNlIHRoaXMgZnVuY3Rpb24gb24gdGhlIGNsb25lLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gICAqIENhbGxlZCB3aXRoIGEgZmxhdCBhcnJheSBvZiBnZW9tZXRyeSBjb29yZGluYXRlcy5cbiAgICovXG4gIGFwcGx5VHJhbnNmb3JtKHRyYW5zZm9ybUZuKSB7XG4gICAgYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICovXG4gIGludGVyc2VjdHNFeHRlbnQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlIHRoZSBnZW9tZXRyeS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5IGNvb3JkaW5hdGVzIGluIHBsYWNlLiAgSWZcbiAgICogaW5zdGVhZCB5b3Ugd2FudCBhIG5ldyBnZW9tZXRyeSwgZmlyc3QgYGNsb25lKClgIHRoaXMgZ2VvbWV0cnkuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFYIERlbHRhIFguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVkgRGVsdGEgWS5cbiAgICogQGFwaVxuICAgKi9cbiAgdHJhbnNsYXRlKGRlbHRhWCwgZGVsdGFZKSB7XG4gICAgYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gZWFjaCBjb29yZGluYXRlIG9mIHRoZSBnZW9tZXRyeSBmcm9tIG9uZSBjb29yZGluYXRlIHJlZmVyZW5jZVxuICAgKiBzeXN0ZW0gdG8gYW5vdGhlci4gVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgKiBGb3IgZXhhbXBsZSwgYSBsaW5lIHdpbGwgYmUgdHJhbnNmb3JtZWQgdG8gYSBsaW5lIGFuZCBhIGNpcmNsZSB0byBhIGNpcmNsZS5cbiAgICogSWYgeW91IGRvIG5vdCB3YW50IHRoZSBnZW9tZXRyeSBtb2RpZmllZCBpbiBwbGFjZSwgZmlyc3QgYGNsb25lKClgIGl0IGFuZFxuICAgKiB0aGVuIHVzZSB0aGlzIGZ1bmN0aW9uIG9uIHRoZSBjbG9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBzb3VyY2UgVGhlIGN1cnJlbnQgcHJvamVjdGlvbi4gIENhbiBiZSBhXG4gICAqICAgICBzdHJpbmcgaWRlbnRpZmllciBvciBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IG9iamVjdC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBUaGUgZGVzaXJlZCBwcm9qZWN0aW9uLiAgQ2FuIGJlIGFcbiAgICogICAgIHN0cmluZyBpZGVudGlmaWVyIG9yIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0gb2JqZWN0LlxuICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gVGhpcyBnZW9tZXRyeS4gIE5vdGUgdGhhdCBvcmlnaW5hbCBnZW9tZXRyeSBpc1xuICAgKiAgICAgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAqIEBhcGlcbiAgICovXG4gIHRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gKi9cbiAgICBjb25zdCBzb3VyY2VQcm9qID0gZ2V0UHJvamVjdGlvbihzb3VyY2UpO1xuICAgIGNvbnN0IHRyYW5zZm9ybUZuID1cbiAgICAgIHNvdXJjZVByb2ouZ2V0VW5pdHMoKSA9PSAndGlsZS1waXhlbHMnXG4gICAgICAgID8gZnVuY3Rpb24gKGluQ29vcmRpbmF0ZXMsIG91dENvb3JkaW5hdGVzLCBzdHJpZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHBpeGVsRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RlZEV4dGVudCA9IHNvdXJjZVByb2ouZ2V0V29ybGRFeHRlbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gZ2V0SGVpZ2h0KHByb2plY3RlZEV4dGVudCkgLyBnZXRIZWlnaHQocGl4ZWxFeHRlbnQpO1xuICAgICAgICAgICAgY29tcG9zZVRyYW5zZm9ybShcbiAgICAgICAgICAgICAgdG1wVHJhbnNmb3JtLFxuICAgICAgICAgICAgICBwcm9qZWN0ZWRFeHRlbnRbMF0sXG4gICAgICAgICAgICAgIHByb2plY3RlZEV4dGVudFszXSxcbiAgICAgICAgICAgICAgc2NhbGUsXG4gICAgICAgICAgICAgIC1zY2FsZSxcbiAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybTJEKFxuICAgICAgICAgICAgICBpbkNvb3JkaW5hdGVzLFxuICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICBpbkNvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICAgICAgICAgICAgc3RyaWRlLFxuICAgICAgICAgICAgICB0bXBUcmFuc2Zvcm0sXG4gICAgICAgICAgICAgIG91dENvb3JkaW5hdGVzXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIGdldFRyYW5zZm9ybShzb3VyY2VQcm9qLCBkZXN0aW5hdGlvbikoXG4gICAgICAgICAgICAgIGluQ29vcmRpbmF0ZXMsXG4gICAgICAgICAgICAgIG91dENvb3JkaW5hdGVzLFxuICAgICAgICAgICAgICBzdHJpZGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICA6IGdldFRyYW5zZm9ybShzb3VyY2VQcm9qLCBkZXN0aW5hdGlvbik7XG4gICAgdGhpcy5hcHBseVRyYW5zZm9ybSh0cmFuc2Zvcm1Gbik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR2VvbWV0cnk7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3RyYW5zZm9ybVxuICovXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm0yRChcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZCxcbiAgc3RyaWRlLFxuICB0cmFuc2Zvcm0sXG4gIGRlc3Rcbikge1xuICBkZXN0ID0gZGVzdCA/IGRlc3QgOiBbXTtcbiAgbGV0IGkgPSAwO1xuICBmb3IgKGxldCBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgIGNvbnN0IHggPSBmbGF0Q29vcmRpbmF0ZXNbal07XG4gICAgY29uc3QgeSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV07XG4gICAgZGVzdFtpKytdID0gdHJhbnNmb3JtWzBdICogeCArIHRyYW5zZm9ybVsyXSAqIHkgKyB0cmFuc2Zvcm1bNF07XG4gICAgZGVzdFtpKytdID0gdHJhbnNmb3JtWzFdICogeCArIHRyYW5zZm9ybVszXSAqIHkgKyB0cmFuc2Zvcm1bNV07XG4gIH1cbiAgaWYgKGRlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgfVxuICByZXR1cm4gZGVzdDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIEFuZ2xlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhbmNob3IgUm90YXRpb24gYW5jaG9yIHBvaW50LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbZGVzdF0gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZCxcbiAgc3RyaWRlLFxuICBhbmdsZSxcbiAgYW5jaG9yLFxuICBkZXN0XG4pIHtcbiAgZGVzdCA9IGRlc3QgPyBkZXN0IDogW107XG4gIGNvbnN0IGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgY29uc3Qgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICBjb25zdCBhbmNob3JYID0gYW5jaG9yWzBdO1xuICBjb25zdCBhbmNob3JZID0gYW5jaG9yWzFdO1xuICBsZXQgaSA9IDA7XG4gIGZvciAobGV0IGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgY29uc3QgZGVsdGFYID0gZmxhdENvb3JkaW5hdGVzW2pdIC0gYW5jaG9yWDtcbiAgICBjb25zdCBkZWx0YVkgPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdIC0gYW5jaG9yWTtcbiAgICBkZXN0W2krK10gPSBhbmNob3JYICsgZGVsdGFYICogY29zIC0gZGVsdGFZICogc2luO1xuICAgIGRlc3RbaSsrXSA9IGFuY2hvclkgKyBkZWx0YVggKiBzaW4gKyBkZWx0YVkgKiBjb3M7XG4gICAgZm9yIChsZXQgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgfVxuICB9XG4gIGlmIChkZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICBkZXN0Lmxlbmd0aCA9IGk7XG4gIH1cbiAgcmV0dXJuIGRlc3Q7XG59XG5cbi8qKlxuICogU2NhbGUgdGhlIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeCBTY2FsZSBmYWN0b3IgaW4gdGhlIHgtZGlyZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciBpbiB0aGUgeS1kaXJlY3Rpb24uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFuY2hvciBTY2FsZSBhbmNob3IgcG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtkZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgc3gsXG4gIHN5LFxuICBhbmNob3IsXG4gIGRlc3Rcbikge1xuICBkZXN0ID0gZGVzdCA/IGRlc3QgOiBbXTtcbiAgY29uc3QgYW5jaG9yWCA9IGFuY2hvclswXTtcbiAgY29uc3QgYW5jaG9yWSA9IGFuY2hvclsxXTtcbiAgbGV0IGkgPSAwO1xuICBmb3IgKGxldCBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgIGNvbnN0IGRlbHRhWCA9IGZsYXRDb29yZGluYXRlc1tqXSAtIGFuY2hvclg7XG4gICAgY29uc3QgZGVsdGFZID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXSAtIGFuY2hvclk7XG4gICAgZGVzdFtpKytdID0gYW5jaG9yWCArIHN4ICogZGVsdGFYO1xuICAgIGRlc3RbaSsrXSA9IGFuY2hvclkgKyBzeSAqIGRlbHRhWTtcbiAgICBmb3IgKGxldCBrID0gaiArIDI7IGsgPCBqICsgc3RyaWRlOyArK2spIHtcbiAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1trXTtcbiAgICB9XG4gIH1cbiAgaWYgKGRlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgfVxuICByZXR1cm4gZGVzdDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWCBEZWx0YSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWSBEZWx0YSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbZGVzdF0gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZCxcbiAgc3RyaWRlLFxuICBkZWx0YVgsXG4gIGRlbHRhWSxcbiAgZGVzdFxuKSB7XG4gIGRlc3QgPSBkZXN0ID8gZGVzdCA6IFtdO1xuICBsZXQgaSA9IDA7XG4gIGZvciAobGV0IGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2pdICsgZGVsdGFYO1xuICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV0gKyBkZWx0YVk7XG4gICAgZm9yIChsZXQgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgfVxuICB9XG4gIGlmIChkZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICBkZXN0Lmxlbmd0aCA9IGk7XG4gIH1cbiAgcmV0dXJuIGRlc3Q7XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeVxuICovXG5pbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi9HZW9tZXRyeS5qcyc7XG5pbXBvcnQge2Fic3RyYWN0fSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7Y3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzLCBnZXRDZW50ZXJ9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge3JvdGF0ZSwgc2NhbGUsIHRyYW5zZm9ybTJELCB0cmFuc2xhdGV9IGZyb20gJy4vZmxhdC90cmFuc2Zvcm0uanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlczsgZG8gbm90IGluc3RhbnRpYXRlXG4gKiBpbiBhcHBzLCBhcyBjYW5ub3QgYmUgcmVuZGVyZWQuXG4gKlxuICogQGFic3RyYWN0XG4gKiBAYXBpXG4gKi9cbmNsYXNzIFNpbXBsZUdlb21ldHJ5IGV4dGVuZHMgR2VvbWV0cnkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLkdlb21ldHJ5TGF5b3V0fVxuICAgICAqL1xuICAgIHRoaXMubGF5b3V0ID0gJ1hZJztcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuc3RyaWRlID0gMjtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgKi9cbiAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqL1xuICBjb21wdXRlRXh0ZW50KGV4dGVudCkge1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZUZyb21GbGF0Q29vcmRpbmF0ZXMoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyxcbiAgICAgIDAsXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgICB0aGlzLnN0cmlkZSxcbiAgICAgIGV4dGVudFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEByZXR1cm4ge0FycmF5PCo+IHwgbnVsbH0gQ29vcmRpbmF0ZXMuXG4gICAqL1xuICBnZXRDb29yZGluYXRlcygpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGZpcnN0IGNvb3JkaW5hdGUgb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IEZpcnN0IGNvb3JkaW5hdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEZpcnN0Q29vcmRpbmF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoMCwgdGhpcy5zdHJpZGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEZsYXQgY29vcmRpbmF0ZXMuXG4gICAqL1xuICBnZXRGbGF0Q29vcmRpbmF0ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbGFzdCBjb29yZGluYXRlIG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBMYXN0IHBvaW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRMYXN0Q29vcmRpbmF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggLSB0aGlzLnN0cmlkZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSB7QGxpbmsgaW1wb3J0KFwiLi9HZW9tZXRyeS5qc1wiKS5HZW9tZXRyeUxheW91dCBsYXlvdXR9IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeS5qc1wiKS5HZW9tZXRyeUxheW91dH0gTGF5b3V0LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRMYXlvdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMubGF5b3V0O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5IHVzaW5nIHRoZSBEb3VnbGFzIFBldWNrZXIgYWxnb3JpdGhtLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICogQHJldHVybiB7U2ltcGxlR2VvbWV0cnl9IFNpbXBsaWZpZWQgZ2VvbWV0cnkuXG4gICAqL1xuICBnZXRTaW1wbGlmaWVkR2VvbWV0cnkoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgIGlmICh0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uICE9PSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSA9IDA7XG4gICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgIH1cbiAgICAvLyBJZiBzcXVhcmVkVG9sZXJhbmNlIGlzIG5lZ2F0aXZlIG9yIGlmIHdlIGtub3cgdGhhdCBzaW1wbGlmaWNhdGlvbiB3aWxsIG5vdFxuICAgIC8vIGhhdmUgYW55IGVmZmVjdCB0aGVuIGp1c3QgcmV0dXJuIHRoaXMuXG4gICAgaWYgKFxuICAgICAgc3F1YXJlZFRvbGVyYW5jZSA8IDAgfHxcbiAgICAgICh0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgIT09IDAgJiZcbiAgICAgICAgc3F1YXJlZFRvbGVyYW5jZSA8PSB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjb25zdCBzaW1wbGlmaWVkR2VvbWV0cnkgPVxuICAgICAgdGhpcy5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbChzcXVhcmVkVG9sZXJhbmNlKTtcbiAgICBjb25zdCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID0gc2ltcGxpZmllZEdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgIGlmIChzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA8IHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHNpbXBsaWZpZWRHZW9tZXRyeTtcbiAgICB9XG4gICAgLy8gU2ltcGxpZmljYXRpb24gZGlkIG5vdCBhY3R1YWxseSByZW1vdmUgYW55IGNvb3JkaW5hdGVzLiAgV2Ugbm93IGtub3dcbiAgICAvLyB0aGF0IGFueSBjYWxscyB0byBnZXRTaW1wbGlmaWVkR2VvbWV0cnkgd2l0aCBhIHNxdWFyZWRUb2xlcmFuY2UgbGVzc1xuICAgIC8vIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGN1cnJlbnQgc3F1YXJlZFRvbGVyYW5jZSB3aWxsIGFsc28gbm90IGhhdmUgYW55XG4gICAgLy8gZWZmZWN0LiAgVGhpcyBhbGxvd3MgdXMgdG8gc2hvcnQgY2lyY3VpdCBzaW1wbGlmaWNhdGlvbiAoc2F2aW5nIENQVVxuICAgIC8vIGN5Y2xlcykgYW5kIHByZXZlbnRzIHRoZSBjYWNoZSBvZiBzaW1wbGlmaWVkIGdlb21ldHJpZXMgZnJvbSBmaWxsaW5nXG4gICAgLy8gdXAgd2l0aCB1c2VsZXNzIGlkZW50aWNhbCBjb3BpZXMgb2YgdGhpcyBnZW9tZXRyeSAoc2F2aW5nIG1lbW9yeSkuXG4gICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlID0gc3F1YXJlZFRvbGVyYW5jZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICogQHJldHVybiB7U2ltcGxlR2VvbWV0cnl9IFNpbXBsaWZpZWQgZ2VvbWV0cnkuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFN0cmlkZS5cbiAgICovXG4gIGdldFN0cmlkZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHJpZGU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLkdlb21ldHJ5TGF5b3V0fSBsYXlvdXQgTGF5b3V0LlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgKi9cbiAgc2V0RmxhdENvb3JkaW5hdGVzKGxheW91dCwgZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgdGhpcy5zdHJpZGUgPSBnZXRTdHJpZGVGb3JMYXlvdXQobGF5b3V0KTtcbiAgICB0aGlzLmxheW91dCA9IGxheW91dDtcbiAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IGZsYXRDb29yZGluYXRlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHshQXJyYXk8Kj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9IFtsYXlvdXRdIExheW91dC5cbiAgICovXG4gIHNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzLCBsYXlvdXQpIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeS5qc1wiKS5HZW9tZXRyeUxheW91dHx1bmRlZmluZWR9IGxheW91dCBMYXlvdXQuXG4gICAqIEBwYXJhbSB7QXJyYXk8Kj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbmVzdGluZyBOZXN0aW5nLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBzZXRMYXlvdXQobGF5b3V0LCBjb29yZGluYXRlcywgbmVzdGluZykge1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIGxldCBzdHJpZGU7XG4gICAgaWYgKGxheW91dCkge1xuICAgICAgc3RyaWRlID0gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmVzdGluZzsgKytpKSB7XG4gICAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLmxheW91dCA9ICdYWSc7XG4gICAgICAgICAgdGhpcy5zdHJpZGUgPSAyO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7QXJyYXl9ICovIChjb29yZGluYXRlc1swXSk7XG4gICAgICB9XG4gICAgICBzdHJpZGUgPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICBsYXlvdXQgPSBnZXRMYXlvdXRGb3JTdHJpZGUoc3RyaWRlKTtcbiAgICB9XG4gICAgdGhpcy5sYXlvdXQgPSBsYXlvdXQ7XG4gICAgdGhpcy5zdHJpZGUgPSBzdHJpZGU7XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBnZW9tZXRyeS5cbiAgICogVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgKiBJZiB5b3UgZG8gbm90IHdhbnQgdGhlIGdlb21ldHJ5IG1vZGlmaWVkIGluIHBsYWNlLCBmaXJzdCBgY2xvbmUoKWAgaXQgYW5kXG4gICAqIHRoZW4gdXNlIHRoaXMgZnVuY3Rpb24gb24gdGhlIGNsb25lLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICogQ2FsbGVkIHdpdGggYSBmbGF0IGFycmF5IG9mIGdlb21ldHJ5IGNvb3JkaW5hdGVzLlxuICAgKiBAYXBpXG4gICAqL1xuICBhcHBseVRyYW5zZm9ybSh0cmFuc2Zvcm1Gbikge1xuICAgIGlmICh0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdHJhbnNmb3JtRm4odGhpcy5mbGF0Q29vcmRpbmF0ZXMsIHRoaXMuZmxhdENvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUm90YXRlIHRoZSBnZW9tZXRyeSBhcm91bmQgYSBnaXZlbiBjb29yZGluYXRlLiBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIGFuZ2xlIGluIGNvdW50ZXItY2xvY2t3aXNlIHJhZGlhbnMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICogQGFwaVxuICAgKi9cbiAgcm90YXRlKGFuZ2xlLCBhbmNob3IpIHtcbiAgICBjb25zdCBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIGNvbnN0IHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICByb3RhdGUoXG4gICAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgICAgMCxcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICAgICAgc3RyaWRlLFxuICAgICAgICBhbmdsZSxcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNcbiAgICAgICk7XG4gICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2NhbGUgdGhlIGdlb21ldHJ5ICh3aXRoIGFuIG9wdGlvbmFsIG9yaWdpbikuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHN4IFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeC1kaXJlY3Rpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbc3ldIFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeS1kaXJlY3Rpb24gKGRlZmF1bHRzIHRvIHN4KS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIFRoZSBzY2FsZSBvcmlnaW4gKGRlZmF1bHRzIHRvIHRoZSBjZW50ZXJcbiAgICogICAgIG9mIHRoZSBnZW9tZXRyeSBleHRlbnQpLlxuICAgKiBAYXBpXG4gICAqL1xuICBzY2FsZShzeCwgc3ksIGFuY2hvcikge1xuICAgIGlmIChzeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBzeSA9IHN4O1xuICAgIH1cbiAgICBpZiAoIWFuY2hvcikge1xuICAgICAgYW5jaG9yID0gZ2V0Q2VudGVyKHRoaXMuZ2V0RXh0ZW50KCkpO1xuICAgIH1cbiAgICBjb25zdCBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIGNvbnN0IHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICBzY2FsZShcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgICAwLFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgICAgICBzdHJpZGUsXG4gICAgICAgIHN4LFxuICAgICAgICBzeSxcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNcbiAgICAgICk7XG4gICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlIHRoZSBnZW9tZXRyeS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5IGNvb3JkaW5hdGVzIGluIHBsYWNlLiAgSWZcbiAgICogaW5zdGVhZCB5b3Ugd2FudCBhIG5ldyBnZW9tZXRyeSwgZmlyc3QgYGNsb25lKClgIHRoaXMgZ2VvbWV0cnkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVggRGVsdGEgWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWSBEZWx0YSBZLlxuICAgKiBAYXBpXG4gICAqL1xuICB0cmFuc2xhdGUoZGVsdGFYLCBkZWx0YVkpIHtcbiAgICBjb25zdCBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIGNvbnN0IHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICB0cmFuc2xhdGUoXG4gICAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgICAgMCxcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICAgICAgc3RyaWRlLFxuICAgICAgICBkZWx0YVgsXG4gICAgICAgIGRlbHRhWSxcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzXG4gICAgICApO1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLkdlb21ldHJ5TGF5b3V0fSBsYXlvdXQgTGF5b3V0LlxuICovXG5mdW5jdGlvbiBnZXRMYXlvdXRGb3JTdHJpZGUoc3RyaWRlKSB7XG4gIGxldCBsYXlvdXQ7XG4gIGlmIChzdHJpZGUgPT0gMikge1xuICAgIGxheW91dCA9ICdYWSc7XG4gIH0gZWxzZSBpZiAoc3RyaWRlID09IDMpIHtcbiAgICBsYXlvdXQgPSAnWFlaJztcbiAgfSBlbHNlIGlmIChzdHJpZGUgPT0gNCkge1xuICAgIGxheW91dCA9ICdYWVpNJztcbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLkdlb21ldHJ5TGF5b3V0fSAqLyAobGF5b3V0KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9IGxheW91dCBMYXlvdXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFN0cmlkZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN0cmlkZUZvckxheW91dChsYXlvdXQpIHtcbiAgbGV0IHN0cmlkZTtcbiAgaWYgKGxheW91dCA9PSAnWFknKSB7XG4gICAgc3RyaWRlID0gMjtcbiAgfSBlbHNlIGlmIChsYXlvdXQgPT0gJ1hZWicgfHwgbGF5b3V0ID09ICdYWU0nKSB7XG4gICAgc3RyaWRlID0gMztcbiAgfSBlbHNlIGlmIChsYXlvdXQgPT0gJ1hZWk0nKSB7XG4gICAgc3RyaWRlID0gNDtcbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChzdHJpZGUpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7U2ltcGxlR2VvbWV0cnl9IHNpbXBsZUdlb21ldHJ5IFNpbXBsZSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgZmxhdCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybUdlb20yRChzaW1wbGVHZW9tZXRyeSwgdHJhbnNmb3JtLCBkZXN0KSB7XG4gIGNvbnN0IGZsYXRDb29yZGluYXRlcyA9IHNpbXBsZUdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICBpZiAoIWZsYXRDb29yZGluYXRlcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHN0cmlkZSA9IHNpbXBsZUdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICByZXR1cm4gdHJhbnNmb3JtMkQoXG4gICAgZmxhdENvb3JkaW5hdGVzLFxuICAgIDAsXG4gICAgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICBzdHJpZGUsXG4gICAgdHJhbnNmb3JtLFxuICAgIGRlc3RcbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgU2ltcGxlR2VvbWV0cnk7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2Nsb3Nlc3RcbiAqL1xuaW1wb3J0IHtsZXJwLCBzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZER4fSBmcm9tICcuLi8uLi9tYXRoLmpzJztcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwb2ludCBvbiB0aGUgMkQgbGluZSBzZWdtZW50IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXSB0b1xuICogZmxhdENvb3JkaW5hdGVzW29mZnNldDJdIHRoYXQgaXMgY2xvc2VzdCB0byB0aGUgcG9pbnQgKHgsIHkpLiAgRXh0cmFcbiAqIGRpbWVuc2lvbnMgYXJlIGxpbmVhcmx5IGludGVycG9sYXRlZC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0MSBPZmZzZXQgMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQyIE9mZnNldCAyLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gKi9cbmZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3QoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0MSxcbiAgb2Zmc2V0MixcbiAgc3RyaWRlLFxuICB4LFxuICB5LFxuICBjbG9zZXN0UG9pbnRcbikge1xuICBjb25zdCB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXTtcbiAgY29uc3QgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MSArIDFdO1xuICBjb25zdCBkeCA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyXSAtIHgxO1xuICBjb25zdCBkeSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyICsgMV0gLSB5MTtcbiAgbGV0IG9mZnNldDtcbiAgaWYgKGR4ID09PSAwICYmIGR5ID09PSAwKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0MTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB0ID0gKCh4IC0geDEpICogZHggKyAoeSAtIHkxKSAqIGR5KSAvIChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgaWYgKHQgPiAxKSB7XG4gICAgICBvZmZzZXQgPSBvZmZzZXQyO1xuICAgIH0gZWxzZSBpZiAodCA+IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gbGVycChcbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MSArIGldLFxuICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQyICsgaV0sXG4gICAgICAgICAgdFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgb2Zmc2V0ID0gb2Zmc2V0MTtcbiAgICB9XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgIGNsb3Nlc3RQb2ludFtpXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpXTtcbiAgfVxuICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgc3F1YXJlZCBvZiB0aGUgbGFyZ2VzdCBkaXN0YW5jZSBiZXR3ZWVuIGFueSBwYWlyIG9mIGNvbnNlY3V0aXZlXG4gKiBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IE1heCBzcXVhcmVkIGRlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfSBNYXggc3F1YXJlZCBkZWx0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heCkge1xuICBsZXQgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgbGV0IHkxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICBmb3IgKG9mZnNldCArPSBzdHJpZGU7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgIGNvbnN0IHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgY29uc3QgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgY29uc3Qgc3F1YXJlZERlbHRhID0gc3F1YXJlZER4KHgxLCB5MSwgeDIsIHkyKTtcbiAgICBpZiAoc3F1YXJlZERlbHRhID4gbWF4KSB7XG4gICAgICBtYXggPSBzcXVhcmVkRGVsdGE7XG4gICAgfVxuICAgIHgxID0geDI7XG4gICAgeTEgPSB5MjtcbiAgfVxuICByZXR1cm4gbWF4O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IE1heCBzcXVhcmVkIGRlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfSBNYXggc3F1YXJlZCBkZWx0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5TWF4U3F1YXJlZERlbHRhKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kcyxcbiAgc3RyaWRlLFxuICBtYXhcbikge1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBlbmQgPSBlbmRzW2ldO1xuICAgIG1heCA9IG1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heCk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBtYXg7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggTWF4IHNxdWFyZWQgZGVsdGEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1heCBzcXVhcmVkIGRlbHRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlBcnJheU1heFNxdWFyZWREZWx0YShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHNzLFxuICBzdHJpZGUsXG4gIG1heFxuKSB7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBlbmRzID0gZW5kc3NbaV07XG4gICAgbWF4ID0gYXJyYXlNYXhTcXVhcmVkRGVsdGEoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgbWF4KTtcbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIG1heDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heERlbHRhIE1heCBkZWx0YS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNSaW5nIElzIHJpbmcuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW3RtcFBvaW50XSBUZW1wb3JhcnkgcG9pbnQgb2JqZWN0LlxuICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ25DbG9zZXN0UG9pbnQoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgbWF4RGVsdGEsXG4gIGlzUmluZyxcbiAgeCxcbiAgeSxcbiAgY2xvc2VzdFBvaW50LFxuICBtaW5TcXVhcmVkRGlzdGFuY2UsXG4gIHRtcFBvaW50XG4pIHtcbiAgaWYgKG9mZnNldCA9PSBlbmQpIHtcbiAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICB9XG4gIGxldCBpLCBzcXVhcmVkRGlzdGFuY2U7XG4gIGlmIChtYXhEZWx0YSA9PT0gMCkge1xuICAgIC8vIEFsbCBwb2ludHMgYXJlIGlkZW50aWNhbCwgc28ganVzdCB0ZXN0IHRoZSBmaXJzdCBwb2ludC5cbiAgICBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLFxuICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdXG4gICAgKTtcbiAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgICAgfVxuICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2U7XG4gICAgfVxuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gIH1cbiAgdG1wUG9pbnQgPSB0bXBQb2ludCA/IHRtcFBvaW50IDogW05hTiwgTmFOXTtcbiAgbGV0IGluZGV4ID0gb2Zmc2V0ICsgc3RyaWRlO1xuICB3aGlsZSAoaW5kZXggPCBlbmQpIHtcbiAgICBhc3NpZ25DbG9zZXN0KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgaW5kZXggLSBzdHJpZGUsXG4gICAgICBpbmRleCxcbiAgICAgIHN0cmlkZSxcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgdG1wUG9pbnRcbiAgICApO1xuICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCB0bXBQb2ludFswXSwgdG1wUG9pbnRbMV0pO1xuICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSB0bXBQb2ludFtpXTtcbiAgICAgIH1cbiAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICBpbmRleCArPSBzdHJpZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNraXAgYWhlYWQgbXVsdGlwbGUgcG9pbnRzLCBiZWNhdXNlIHdlIGtub3cgdGhhdCBhbGwgdGhlIHNraXBwZWRcbiAgICAgIC8vIHBvaW50cyBjYW5ub3QgYmUgYW55IGNsb3NlciB0aGFuIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc29cbiAgICAgIC8vIGZhci4gIFdlIGtub3cgdGhpcyBiZWNhdXNlIHdlIGtub3cgaG93IGNsb3NlIHRoZSBjdXJyZW50IHBvaW50IGlzLCBob3dcbiAgICAgIC8vIGNsb3NlIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc28gZmFyIGlzLCBhbmQgdGhlIG1heGltdW1cbiAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gY29uc2VjdXRpdmUgcG9pbnRzLiAgRm9yIGV4YW1wbGUsIGlmIHdlJ3JlIGN1cnJlbnRseVxuICAgICAgLy8gYXQgZGlzdGFuY2UgMTAsIHRoZSBiZXN0IHdlJ3ZlIGZvdW5kIHNvIGZhciBpcyAzLCBhbmQgdGhhdCB0aGUgbWF4aW11bVxuICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiBjb25zZWN1dGl2ZSBwb2ludHMgaXMgMiwgdGhlbiB3ZSdsbCBuZWVkIHRvIHNraXAgYXRcbiAgICAgIC8vIGxlYXN0ICgxMCAtIDMpIC8gMiA9PSAzIChyb3VuZGVkIGRvd24pIHBvaW50cyB0byBoYXZlIGFueSBjaGFuY2Ugb2ZcbiAgICAgIC8vIGZpbmRpbmcgYSBjbG9zZXIgcG9pbnQuICBXZSB1c2UgTWF0aC5tYXgoLi4uLCAxKSB0byBlbnN1cmUgdGhhdCB3ZVxuICAgICAgLy8gYWx3YXlzIGFkdmFuY2UgYXQgbGVhc3Qgb25lIHBvaW50LCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgaW5kZXggKz1cbiAgICAgICAgc3RyaWRlICpcbiAgICAgICAgTWF0aC5tYXgoXG4gICAgICAgICAgKChNYXRoLnNxcnQoc3F1YXJlZERpc3RhbmNlKSAtIE1hdGguc3FydChtaW5TcXVhcmVkRGlzdGFuY2UpKSAvXG4gICAgICAgICAgICBtYXhEZWx0YSkgfFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAxXG4gICAgICAgICk7XG4gICAgfVxuICB9XG4gIGlmIChpc1JpbmcpIHtcbiAgICAvLyBDaGVjayB0aGUgY2xvc2luZyBzZWdtZW50LlxuICAgIGFzc2lnbkNsb3Nlc3QoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBlbmQgLSBzdHJpZGUsXG4gICAgICBvZmZzZXQsXG4gICAgICBzdHJpZGUsXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHRtcFBvaW50XG4gICAgKTtcbiAgICBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoeCwgeSwgdG1wUG9pbnRbMF0sIHRtcFBvaW50WzFdKTtcbiAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gdG1wUG9pbnRbaV07XG4gICAgICB9XG4gICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RGVsdGEgTWF4IGRlbHRhLlxuICogQHBhcmFtIHtib29sZWFufSBpc1JpbmcgSXMgcmluZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbdG1wUG9pbnRdIFRlbXBvcmFyeSBwb2ludCBvYmplY3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3RBcnJheVBvaW50KFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kcyxcbiAgc3RyaWRlLFxuICBtYXhEZWx0YSxcbiAgaXNSaW5nLFxuICB4LFxuICB5LFxuICBjbG9zZXN0UG9pbnQsXG4gIG1pblNxdWFyZWREaXN0YW5jZSxcbiAgdG1wUG9pbnRcbikge1xuICB0bXBQb2ludCA9IHRtcFBvaW50ID8gdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBlbmQgPSBlbmRzW2ldO1xuICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IGFzc2lnbkNsb3Nlc3RQb2ludChcbiAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgIG9mZnNldCxcbiAgICAgIGVuZCxcbiAgICAgIHN0cmlkZSxcbiAgICAgIG1heERlbHRhLFxuICAgICAgaXNSaW5nLFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICBjbG9zZXN0UG9pbnQsXG4gICAgICBtaW5TcXVhcmVkRGlzdGFuY2UsXG4gICAgICB0bXBQb2ludFxuICAgICk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFt0bXBQb2ludF0gVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdE11bHRpQXJyYXlQb2ludChcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHNzLFxuICBzdHJpZGUsXG4gIG1heERlbHRhLFxuICBpc1JpbmcsXG4gIHgsXG4gIHksXG4gIGNsb3Nlc3RQb2ludCxcbiAgbWluU3F1YXJlZERpc3RhbmNlLFxuICB0bXBQb2ludFxuKSB7XG4gIHRtcFBvaW50ID0gdG1wUG9pbnQgPyB0bXBQb2ludCA6IFtOYU4sIE5hTl07XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBlbmRzID0gZW5kc3NbaV07XG4gICAgbWluU3F1YXJlZERpc3RhbmNlID0gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBlbmRzLFxuICAgICAgc3RyaWRlLFxuICAgICAgbWF4RGVsdGEsXG4gICAgICBpc1JpbmcsXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIGNsb3Nlc3RQb2ludCxcbiAgICAgIG1pblNxdWFyZWREaXN0YW5jZSxcbiAgICAgIHRtcFBvaW50XG4gICAgKTtcbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvZGVmbGF0ZVxuICovXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZUNvb3JkaW5hdGUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGUsIHN0cmlkZSkge1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBjb29yZGluYXRlLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0KytdID0gY29vcmRpbmF0ZVtpXTtcbiAgfVxuICByZXR1cm4gb2Zmc2V0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVDb29yZGluYXRlcyhcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGNvb3JkaW5hdGVzLFxuICBzdHJpZGVcbikge1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgY29uc3QgY29vcmRpbmF0ZSA9IGNvb3JkaW5hdGVzW2ldO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3RyaWRlOyArK2opIHtcbiAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQrK10gPSBjb29yZGluYXRlW2pdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb2Zmc2V0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IGNvb3JkaW5hdGVzcyBDb29yZGluYXRlc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2VuZHNdIEVuZHMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBFbmRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBjb29yZGluYXRlc3MsXG4gIHN0cmlkZSxcbiAgZW5kc1xuKSB7XG4gIGVuZHMgPSBlbmRzID8gZW5kcyA6IFtdO1xuICBsZXQgaSA9IDA7XG4gIGZvciAobGV0IGogPSAwLCBqaiA9IGNvb3JkaW5hdGVzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgY29uc3QgZW5kID0gZGVmbGF0ZUNvb3JkaW5hdGVzKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgY29vcmRpbmF0ZXNzW2pdLFxuICAgICAgc3RyaWRlXG4gICAgKTtcbiAgICBlbmRzW2krK10gPSBlbmQ7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIGVuZHMubGVuZ3RoID0gaTtcbiAgcmV0dXJuIGVuZHM7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pj59IGNvb3JkaW5hdGVzc3MgQ29vcmRpbmF0ZXNzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gW2VuZHNzXSBFbmRzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PG51bWJlcj4+fSBFbmRzcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBjb29yZGluYXRlc3NzLFxuICBzdHJpZGUsXG4gIGVuZHNzXG4pIHtcbiAgZW5kc3MgPSBlbmRzcyA/IGVuZHNzIDogW107XG4gIGxldCBpID0gMDtcbiAgZm9yIChsZXQgaiA9IDAsIGpqID0gY29vcmRpbmF0ZXNzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgY29uc3QgZW5kcyA9IGRlZmxhdGVDb29yZGluYXRlc0FycmF5KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgY29vcmRpbmF0ZXNzc1tqXSxcbiAgICAgIHN0cmlkZSxcbiAgICAgIGVuZHNzW2ldXG4gICAgKTtcbiAgICBpZiAoZW5kcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGVuZHNbMF0gPSBvZmZzZXQ7XG4gICAgfVxuICAgIGVuZHNzW2krK10gPSBlbmRzO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICBlbmRzcy5sZW5ndGggPSBpO1xuICByZXR1cm4gZW5kc3M7XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3NpbXBsaWZ5XG4gKi9cbi8vIEJhc2VkIG9uIHNpbXBsaWZ5LWpzIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3VybmVyL3NpbXBsaWZ5LWpzXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTIsIFZsYWRpbWlyIEFnYWZvbmtpblxuLy8gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuLy9cbi8vICAgIDEuIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbi8vICAgICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4vL1xuLy8gICAgMi4gUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHRcbi8vICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGVcbi8vICAgICAgIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbi8vIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbi8vIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFXG4vLyBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFXG4vLyBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SXG4vLyBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRlxuLy8gU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTXG4vLyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTlxuLy8gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSlcbi8vIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFXG4vLyBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cblxuaW1wb3J0IHtzcXVhcmVkRGlzdGFuY2UsIHNxdWFyZWRTZWdtZW50RGlzdGFuY2V9IGZyb20gJy4uLy4uL21hdGguanMnO1xuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaGlnaFF1YWxpdHkgSGlnaGVzdCBxdWFsaXR5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc10gU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBTaW1wbGlmaWVkIGxpbmUgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2ltcGxpZnlMaW5lU3RyaW5nKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kLFxuICBzdHJpZGUsXG4gIHNxdWFyZWRUb2xlcmFuY2UsXG4gIGhpZ2hRdWFsaXR5LFxuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzXG4pIHtcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyAhPT0gdW5kZWZpbmVkID8gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA6IFtdO1xuICBpZiAoIWhpZ2hRdWFsaXR5KSB7XG4gICAgZW5kID0gcmFkaWFsRGlzdGFuY2UoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBlbmQsXG4gICAgICBzdHJpZGUsXG4gICAgICBzcXVhcmVkVG9sZXJhbmNlLFxuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyxcbiAgICAgIDBcbiAgICApO1xuICAgIGZsYXRDb29yZGluYXRlcyA9IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXM7XG4gICAgb2Zmc2V0ID0gMDtcbiAgICBzdHJpZGUgPSAyO1xuICB9XG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZG91Z2xhc1BldWNrZXIoXG4gICAgZmxhdENvb3JkaW5hdGVzLFxuICAgIG9mZnNldCxcbiAgICBlbmQsXG4gICAgc3RyaWRlLFxuICAgIHNxdWFyZWRUb2xlcmFuY2UsXG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyxcbiAgICAwXG4gICk7XG4gIHJldHVybiBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdWdsYXNQZXVja2VyKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kLFxuICBzdHJpZGUsXG4gIHNxdWFyZWRUb2xlcmFuY2UsXG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsXG4gIHNpbXBsaWZpZWRPZmZzZXRcbikge1xuICBjb25zdCBuID0gKGVuZCAtIG9mZnNldCkgLyBzdHJpZGU7XG4gIGlmIChuIDwgMykge1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIH1cbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgfVxuICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gIGNvbnN0IG1hcmtlcnMgPSBuZXcgQXJyYXkobik7XG4gIG1hcmtlcnNbMF0gPSAxO1xuICBtYXJrZXJzW24gLSAxXSA9IDE7XG4gIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgY29uc3Qgc3RhY2sgPSBbb2Zmc2V0LCBlbmQgLSBzdHJpZGVdO1xuICBsZXQgaW5kZXggPSAwO1xuICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGxhc3QgPSBzdGFjay5wb3AoKTtcbiAgICBjb25zdCBmaXJzdCA9IHN0YWNrLnBvcCgpO1xuICAgIGxldCBtYXhTcXVhcmVkRGlzdGFuY2UgPSAwO1xuICAgIGNvbnN0IHgxID0gZmxhdENvb3JkaW5hdGVzW2ZpcnN0XTtcbiAgICBjb25zdCB5MSA9IGZsYXRDb29yZGluYXRlc1tmaXJzdCArIDFdO1xuICAgIGNvbnN0IHgyID0gZmxhdENvb3JkaW5hdGVzW2xhc3RdO1xuICAgIGNvbnN0IHkyID0gZmxhdENvb3JkaW5hdGVzW2xhc3QgKyAxXTtcbiAgICBmb3IgKGxldCBpID0gZmlyc3QgKyBzdHJpZGU7IGkgPCBsYXN0OyBpICs9IHN0cmlkZSkge1xuICAgICAgY29uc3QgeCA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgIGNvbnN0IHkgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgY29uc3Qgc3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZFNlZ21lbnREaXN0YW5jZSh4LCB5LCB4MSwgeTEsIHgyLCB5Mik7XG4gICAgICBpZiAoc3F1YXJlZERpc3RhbmNlID4gbWF4U3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgbWF4U3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZERpc3RhbmNlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWF4U3F1YXJlZERpc3RhbmNlID4gc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgbWFya2Vyc1soaW5kZXggLSBvZmZzZXQpIC8gc3RyaWRlXSA9IDE7XG4gICAgICBpZiAoZmlyc3QgKyBzdHJpZGUgPCBpbmRleCkge1xuICAgICAgICBzdGFjay5wdXNoKGZpcnN0LCBpbmRleCk7XG4gICAgICB9XG4gICAgICBpZiAoaW5kZXggKyBzdHJpZGUgPCBsYXN0KSB7XG4gICAgICAgIHN0YWNrLnB1c2goaW5kZXgsIGxhc3QpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgIGlmIChtYXJrZXJzW2ldKSB7XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaSAqIHN0cmlkZV07XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaSAqIHN0cmlkZSArIDFdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEVuZHMgU2ltcGxpZmllZCBlbmRzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdWdsYXNQZXVja2VyQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmRzLFxuICBzdHJpZGUsXG4gIHNxdWFyZWRUb2xlcmFuY2UsXG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsXG4gIHNpbXBsaWZpZWRPZmZzZXQsXG4gIHNpbXBsaWZpZWRFbmRzXG4pIHtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgY29uc3QgZW5kID0gZW5kc1tpXTtcbiAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gZG91Z2xhc1BldWNrZXIoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBlbmQsXG4gICAgICBzdHJpZGUsXG4gICAgICBzcXVhcmVkVG9sZXJhbmNlLFxuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyxcbiAgICAgIHNpbXBsaWZpZWRPZmZzZXRcbiAgICApO1xuICAgIHNpbXBsaWZpZWRFbmRzLnB1c2goc2ltcGxpZmllZE9mZnNldCk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gc2ltcGxpZmllZEVuZHNzIFNpbXBsaWZpZWQgZW5kc3MuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG91Z2xhc1BldWNrZXJNdWx0aUFycmF5KFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kc3MsXG4gIHN0cmlkZSxcbiAgc3F1YXJlZFRvbGVyYW5jZSxcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyxcbiAgc2ltcGxpZmllZE9mZnNldCxcbiAgc2ltcGxpZmllZEVuZHNzXG4pIHtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZHMgPSBlbmRzc1tpXTtcbiAgICBjb25zdCBzaW1wbGlmaWVkRW5kcyA9IFtdO1xuICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBkb3VnbGFzUGV1Y2tlckFycmF5KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZW5kcyxcbiAgICAgIHN0cmlkZSxcbiAgICAgIHNxdWFyZWRUb2xlcmFuY2UsXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICAgICAgc2ltcGxpZmllZE9mZnNldCxcbiAgICAgIHNpbXBsaWZpZWRFbmRzXG4gICAgKTtcbiAgICBzaW1wbGlmaWVkRW5kc3MucHVzaChzaW1wbGlmaWVkRW5kcyk7XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhZGlhbERpc3RhbmNlKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kLFxuICBzdHJpZGUsXG4gIHNxdWFyZWRUb2xlcmFuY2UsXG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsXG4gIHNpbXBsaWZpZWRPZmZzZXRcbikge1xuICBpZiAoZW5kIDw9IG9mZnNldCArIHN0cmlkZSkge1xuICAgIC8vIHplcm8gb3Igb25lIHBvaW50LCBubyBzaW1wbGlmaWNhdGlvbiBwb3NzaWJsZSwgc28gY29weSBhbmQgcmV0dXJuXG4gICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICB9XG4gIGxldCB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICBsZXQgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gIC8vIGNvcHkgZmlyc3QgcG9pbnRcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDE7XG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkxO1xuICBsZXQgeDIgPSB4MTtcbiAgbGV0IHkyID0geTE7XG4gIGZvciAob2Zmc2V0ICs9IHN0cmlkZTsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICBpZiAoc3F1YXJlZERpc3RhbmNlKHgxLCB5MSwgeDIsIHkyKSA+IHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgIC8vIGNvcHkgcG9pbnQgYXQgb2Zmc2V0XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgICAgeDEgPSB4MjtcbiAgICAgIHkxID0geTI7XG4gICAgfVxuICB9XG4gIGlmICh4MiAhPSB4MSB8fCB5MiAhPSB5MSkge1xuICAgIC8vIGNvcHkgbGFzdCBwb2ludFxuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHJldHVybiB7bnVtYmVyfSBSb3VuZGVkIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc25hcCh2YWx1ZSwgdG9sZXJhbmNlKSB7XG4gIHJldHVybiB0b2xlcmFuY2UgKiBNYXRoLnJvdW5kKHZhbHVlIC8gdG9sZXJhbmNlKTtcbn1cblxuLyoqXG4gKiBTaW1wbGlmaWVzIGEgbGluZSBzdHJpbmcgdXNpbmcgYW4gYWxnb3JpdGhtIGRlc2lnbmVkIGJ5IFRpbSBTY2hhdWIuXG4gKiBDb29yZGluYXRlcyBhcmUgc25hcHBlZCB0byB0aGUgbmVhcmVzdCB2YWx1ZSBpbiBhIHZpcnR1YWwgZ3JpZCBhbmRcbiAqIGNvbnNlY3V0aXZlIGR1cGxpY2F0ZSBjb29yZGluYXRlcyBhcmUgZGlzY2FyZGVkLiAgVGhpcyBlZmZlY3RpdmVseSBwcmVzZXJ2ZXNcbiAqIHRvcG9sb2d5IGFzIHRoZSBzaW1wbGlmaWNhdGlvbiBvZiBhbnkgc3Vic2VjdGlvbiBvZiBhIGxpbmUgc3RyaW5nIGlzXG4gKiBpbmRlcGVuZGVudCBvZiB0aGUgcmVzdCBvZiB0aGUgbGluZSBzdHJpbmcuICBUaGlzIG1lYW5zIHRoYXQsIGZvciBleGFtcGxlcyxcbiAqIHRoZSBjb21tb24gZWRnZSBiZXR3ZWVuIHR3byBwb2x5Z29ucyB3aWxsIGJlIHNpbXBsaWZpZWQgdG8gdGhlIHNhbWUgbGluZVxuICogc3RyaW5nIGluZGVwZW5kZW50bHkgaW4gYm90aCBwb2x5Z29ucy4gIFRoaXMgaW1wbGVtZW50YXRpb24gdXNlcyBhIHNpbmdsZVxuICogcGFzcyBvdmVyIHRoZSBjb29yZGluYXRlcyBhbmQgZWxpbWluYXRlcyBpbnRlcm1lZGlhdGUgY29sbGluZWFyIHBvaW50cy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kLFxuICBzdHJpZGUsXG4gIHRvbGVyYW5jZSxcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyxcbiAgc2ltcGxpZmllZE9mZnNldFxuKSB7XG4gIC8vIGRvIG5vdGhpbmcgaWYgdGhlIGxpbmUgaXMgZW1wdHlcbiAgaWYgKG9mZnNldCA9PSBlbmQpIHtcbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgfVxuICAvLyBzbmFwIHRoZSBmaXJzdCBjb29yZGluYXRlIChQMSlcbiAgbGV0IHgxID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgdG9sZXJhbmNlKTtcbiAgbGV0IHkxID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0sIHRvbGVyYW5jZSk7XG4gIG9mZnNldCArPSBzdHJpZGU7XG4gIC8vIGFkZCB0aGUgZmlyc3QgY29vcmRpbmF0ZSB0byB0aGUgb3V0cHV0XG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgxO1xuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MTtcbiAgLy8gZmluZCB0aGUgbmV4dCBjb29yZGluYXRlIHRoYXQgZG9lcyBub3Qgc25hcCB0byB0aGUgc2FtZSB2YWx1ZSBhcyB0aGUgZmlyc3RcbiAgLy8gY29vcmRpbmF0ZSAoUDIpXG4gIGxldCB4MiwgeTI7XG4gIGRvIHtcbiAgICB4MiA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIHRvbGVyYW5jZSk7XG4gICAgeTIgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSwgdG9sZXJhbmNlKTtcbiAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgIGlmIChvZmZzZXQgPT0gZW5kKSB7XG4gICAgICAvLyBhbGwgY29vcmRpbmF0ZXMgc25hcCB0byB0aGUgc2FtZSB2YWx1ZSwgdGhlIGxpbmUgY29sbGFwc2VzIHRvIGEgcG9pbnRcbiAgICAgIC8vIHB1c2ggdGhlIGxhc3Qgc25hcHBlZCB2YWx1ZSBhbnl3YXkgdG8gZW5zdXJlIHRoYXQgdGhlIG91dHB1dCBjb250YWluc1xuICAgICAgLy8gYXQgbGVhc3QgdHdvIHBvaW50c1xuICAgICAgLy8gRklYTUUgc2hvdWxkIHdlIHJlYWxseSByZXR1cm4gYXQgbGVhc3QgdHdvIHBvaW50cyBhbnl3YXk/XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gICAgfVxuICB9IHdoaWxlICh4MiA9PSB4MSAmJiB5MiA9PSB5MSk7XG4gIHdoaWxlIChvZmZzZXQgPCBlbmQpIHtcbiAgICAvLyBzbmFwIHRoZSBuZXh0IGNvb3JkaW5hdGUgKFAzKVxuICAgIGNvbnN0IHgzID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgdG9sZXJhbmNlKTtcbiAgICBjb25zdCB5MyA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgLy8gc2tpcCBQMyBpZiBpdCBpcyBlcXVhbCB0byBQMlxuICAgIGlmICh4MyA9PSB4MiAmJiB5MyA9PSB5Mikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIGNhbGN1bGF0ZSB0aGUgZGVsdGEgYmV0d2VlbiBQMSBhbmQgUDJcbiAgICBjb25zdCBkeDEgPSB4MiAtIHgxO1xuICAgIGNvbnN0IGR5MSA9IHkyIC0geTE7XG4gICAgLy8gY2FsY3VsYXRlIHRoZSBkZWx0YSBiZXR3ZWVuIFAzIGFuZCBQMVxuICAgIGNvbnN0IGR4MiA9IHgzIC0geDE7XG4gICAgY29uc3QgZHkyID0geTMgLSB5MTtcbiAgICAvLyBpZiBQMSwgUDIsIGFuZCBQMyBhcmUgY29saW5lYXIgYW5kIFAzIGlzIGZ1cnRoZXIgZnJvbSBQMSB0aGFuIFAyIGlzIGZyb21cbiAgICAvLyBQMSBpbiB0aGUgc2FtZSBkaXJlY3Rpb24gdGhlbiBQMiBpcyBvbiB0aGUgc3RyYWlnaHQgbGluZSBiZXR3ZWVuIFAxIGFuZFxuICAgIC8vIFAzXG4gICAgaWYgKFxuICAgICAgZHgxICogZHkyID09IGR5MSAqIGR4MiAmJlxuICAgICAgKChkeDEgPCAwICYmIGR4MiA8IGR4MSkgfHwgZHgxID09IGR4MiB8fCAoZHgxID4gMCAmJiBkeDIgPiBkeDEpKSAmJlxuICAgICAgKChkeTEgPCAwICYmIGR5MiA8IGR5MSkgfHwgZHkxID09IGR5MiB8fCAoZHkxID4gMCAmJiBkeTIgPiBkeTEpKVxuICAgICkge1xuICAgICAgLy8gZGlzY2FyZCBQMiBhbmQgc2V0IFAyID0gUDNcbiAgICAgIHgyID0geDM7XG4gICAgICB5MiA9IHkzO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIGVpdGhlciBQMSwgUDIsIGFuZCBQMyBhcmUgbm90IGNvbGluZWFyLCBvciB0aGV5IGFyZSBjb2xpbmVhciBidXQgUDMgaXNcbiAgICAvLyBiZXR3ZWVuIFAzIGFuZCBQMSBvciBvbiB0aGUgb3Bwb3NpdGUgaGFsZiBvZiB0aGUgbGluZSB0byBQMi4gIGFkZCBQMixcbiAgICAvLyBhbmQgY29udGludWUgd2l0aCBQMSA9IFAyIGFuZCBQMiA9IFAzXG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgeDEgPSB4MjtcbiAgICB5MSA9IHkyO1xuICAgIHgyID0geDM7XG4gICAgeTIgPSB5MztcbiAgfVxuICAvLyBhZGQgdGhlIGxhc3QgcG9pbnQgKFAyKVxuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRW5kcyBTaW1wbGlmaWVkIGVuZHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemVBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHMsXG4gIHN0cmlkZSxcbiAgdG9sZXJhbmNlLFxuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICBzaW1wbGlmaWVkT2Zmc2V0LFxuICBzaW1wbGlmaWVkRW5kc1xuKSB7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZCA9IGVuZHNbaV07XG4gICAgc2ltcGxpZmllZE9mZnNldCA9IHF1YW50aXplKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZW5kLFxuICAgICAgc3RyaWRlLFxuICAgICAgdG9sZXJhbmNlLFxuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyxcbiAgICAgIHNpbXBsaWZpZWRPZmZzZXRcbiAgICApO1xuICAgIHNpbXBsaWZpZWRFbmRzLnB1c2goc2ltcGxpZmllZE9mZnNldCk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gc2ltcGxpZmllZEVuZHNzIFNpbXBsaWZpZWQgZW5kc3MuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemVNdWx0aUFycmF5KFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kc3MsXG4gIHN0cmlkZSxcbiAgdG9sZXJhbmNlLFxuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICBzaW1wbGlmaWVkT2Zmc2V0LFxuICBzaW1wbGlmaWVkRW5kc3Ncbikge1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgY29uc3QgZW5kcyA9IGVuZHNzW2ldO1xuICAgIGNvbnN0IHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgc2ltcGxpZmllZE9mZnNldCA9IHF1YW50aXplQXJyYXkoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBlbmRzLFxuICAgICAgc3RyaWRlLFxuICAgICAgdG9sZXJhbmNlLFxuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyxcbiAgICAgIHNpbXBsaWZpZWRPZmZzZXQsXG4gICAgICBzaW1wbGlmaWVkRW5kc1xuICAgICk7XG4gICAgc2ltcGxpZmllZEVuZHNzLnB1c2goc2ltcGxpZmllZEVuZHMpO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW5mbGF0ZVxuICovXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gW2Nvb3JkaW5hdGVzXSBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IENvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZUNvb3JkaW5hdGVzKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kLFxuICBzdHJpZGUsXG4gIGNvb3JkaW5hdGVzXG4pIHtcbiAgY29vcmRpbmF0ZXMgPSBjb29yZGluYXRlcyAhPT0gdW5kZWZpbmVkID8gY29vcmRpbmF0ZXMgOiBbXTtcbiAgbGV0IGkgPSAwO1xuICBmb3IgKGxldCBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgIGNvb3JkaW5hdGVzW2krK10gPSBmbGF0Q29vcmRpbmF0ZXMuc2xpY2UoaiwgaiArIHN0cmlkZSk7XG4gIH1cbiAgY29vcmRpbmF0ZXMubGVuZ3RoID0gaTtcbiAgcmV0dXJuIGNvb3JkaW5hdGVzO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBbY29vcmRpbmF0ZXNzXSBDb29yZGluYXRlc3MuXG4gKiBAcmV0dXJuIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gQ29vcmRpbmF0ZXNzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmRzLFxuICBzdHJpZGUsXG4gIGNvb3JkaW5hdGVzc1xuKSB7XG4gIGNvb3JkaW5hdGVzcyA9IGNvb3JkaW5hdGVzcyAhPT0gdW5kZWZpbmVkID8gY29vcmRpbmF0ZXNzIDogW107XG4gIGxldCBpID0gMDtcbiAgZm9yIChsZXQgaiA9IDAsIGpqID0gZW5kcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgY29uc3QgZW5kID0gZW5kc1tqXTtcbiAgICBjb29yZGluYXRlc3NbaSsrXSA9IGluZmxhdGVDb29yZGluYXRlcyhcbiAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgIG9mZnNldCxcbiAgICAgIGVuZCxcbiAgICAgIHN0cmlkZSxcbiAgICAgIGNvb3JkaW5hdGVzc1tpXVxuICAgICk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIGNvb3JkaW5hdGVzcy5sZW5ndGggPSBpO1xuICByZXR1cm4gY29vcmRpbmF0ZXNzO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn0gW2Nvb3JkaW5hdGVzc3NdXG4gKiAgICAgQ29vcmRpbmF0ZXNzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn0gQ29vcmRpbmF0ZXNzcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmRzcyxcbiAgc3RyaWRlLFxuICBjb29yZGluYXRlc3NzXG4pIHtcbiAgY29vcmRpbmF0ZXNzcyA9IGNvb3JkaW5hdGVzc3MgIT09IHVuZGVmaW5lZCA/IGNvb3JkaW5hdGVzc3MgOiBbXTtcbiAgbGV0IGkgPSAwO1xuICBmb3IgKGxldCBqID0gMCwgamogPSBlbmRzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgY29uc3QgZW5kcyA9IGVuZHNzW2pdO1xuICAgIGNvb3JkaW5hdGVzc3NbaSsrXSA9XG4gICAgICBlbmRzLmxlbmd0aCA9PT0gMSAmJiBlbmRzWzBdID09PSBvZmZzZXRcbiAgICAgICAgPyBbXVxuICAgICAgICA6IGluZmxhdGVDb29yZGluYXRlc0FycmF5KFxuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgICAgICAgb2Zmc2V0LFxuICAgICAgICAgICAgZW5kcyxcbiAgICAgICAgICAgIHN0cmlkZSxcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzc3NbaV1cbiAgICAgICAgICApO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICBjb29yZGluYXRlc3NzLmxlbmd0aCA9IGk7XG4gIHJldHVybiBjb29yZGluYXRlc3NzO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9hcmVhXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgbGV0IHR3aWNlQXJlYSA9IDA7XG4gIGxldCB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICBsZXQgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICBjb25zdCB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgIGNvbnN0IHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIHR3aWNlQXJlYSArPSB5MSAqIHgyIC0geDEgKiB5MjtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIHR3aWNlQXJlYSAvIDI7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpIHtcbiAgbGV0IGFyZWEgPSAwO1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBlbmQgPSBlbmRzW2ldO1xuICAgIGFyZWEgKz0gbGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gYXJlYTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlKSB7XG4gIGxldCBhcmVhID0gMDtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZHMgPSBlbmRzc1tpXTtcbiAgICBhcmVhICs9IGxpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gYXJlYTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL0xpbmVhclJpbmdcbiAqL1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHthc3NpZ25DbG9zZXN0UG9pbnQsIG1heFNxdWFyZWREZWx0YX0gZnJvbSAnLi9mbGF0L2Nsb3Nlc3QuanMnO1xuaW1wb3J0IHtjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFl9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge2RlZmxhdGVDb29yZGluYXRlc30gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHtkb3VnbGFzUGV1Y2tlcn0gZnJvbSAnLi9mbGF0L3NpbXBsaWZ5LmpzJztcbmltcG9ydCB7aW5mbGF0ZUNvb3JkaW5hdGVzfSBmcm9tICcuL2ZsYXQvaW5mbGF0ZS5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmcgYXMgbGluZWFyUmluZ0FyZWF9IGZyb20gJy4vZmxhdC9hcmVhLmpzJztcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBMaW5lYXIgcmluZyBnZW9tZXRyeS4gT25seSB1c2VkIGFzIHBhcnQgb2YgcG9seWdvbjsgY2Fubm90IGJlIHJlbmRlcmVkXG4gKiBvbiBpdHMgb3duLlxuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgTGluZWFyUmluZyBleHRlbmRzIFNpbXBsZUdlb21ldHJ5IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPnxBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICogICAgIEZvciBpbnRlcm5hbCB1c2UsIGZsYXQgY29vcmRpbmF0ZXMgaW4gY29tYmluYXRpb24gd2l0aCBgbGF5b3V0YCBhcmUgYWxzbyBhY2NlcHRlZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLkdlb21ldHJ5TGF5b3V0fSBbbGF5b3V0XSBMYXlvdXQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb29yZGluYXRlcywgbGF5b3V0KSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heERlbHRhXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSAtMTtcblxuICAgIGlmIChsYXlvdXQgIT09IHVuZGVmaW5lZCAmJiAhQXJyYXkuaXNBcnJheShjb29yZGluYXRlc1swXSkpIHtcbiAgICAgIHRoaXMuc2V0RmxhdENvb3JkaW5hdGVzKFxuICAgICAgICBsYXlvdXQsXG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRDb29yZGluYXRlcyhcbiAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSAqLyAoXG4gICAgICAgICAgY29vcmRpbmF0ZXNcbiAgICAgICAgKSxcbiAgICAgICAgbGF5b3V0XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEByZXR1cm4geyFMaW5lYXJSaW5nfSBDbG9uZS5cbiAgICogQGFwaVxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICovXG4gIGNsb3Nlc3RQb2ludFhZKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSh0aGlzLmdldEV4dGVudCgpLCB4LCB5KSkge1xuICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICB9XG4gICAgaWYgKHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICB0aGlzLm1heERlbHRhXyA9IE1hdGguc3FydChcbiAgICAgICAgbWF4U3F1YXJlZERlbHRhKFxuICAgICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLFxuICAgICAgICAgIDAsXG4gICAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgICAgICAgIHRoaXMuc3RyaWRlLFxuICAgICAgICAgIDBcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiBhc3NpZ25DbG9zZXN0UG9pbnQoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyxcbiAgICAgIDAsXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgICB0aGlzLnN0cmlkZSxcbiAgICAgIHRoaXMubWF4RGVsdGFfLFxuICAgICAgdHJ1ZSxcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgY2xvc2VzdFBvaW50LFxuICAgICAgbWluU3F1YXJlZERpc3RhbmNlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGFyZWEgb2YgdGhlIGxpbmVhciByaW5nIG9uIHByb2plY3RlZCBwbGFuZS5cbiAgICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChvbiBwcm9qZWN0ZWQgcGxhbmUpLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRBcmVhKCkge1xuICAgIHJldHVybiBsaW5lYXJSaW5nQXJlYShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLFxuICAgICAgMCxcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICAgIHRoaXMuc3RyaWRlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBsaW5lYXIgcmluZy5cbiAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gQ29vcmRpbmF0ZXMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldENvb3JkaW5hdGVzKCkge1xuICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXMoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyxcbiAgICAgIDAsXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgICB0aGlzLnN0cmlkZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAqIEByZXR1cm4ge0xpbmVhclJpbmd9IFNpbXBsaWZpZWQgTGluZWFyUmluZy5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgIGNvbnN0IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRvdWdsYXNQZXVja2VyKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsXG4gICAgICAwLFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgICAgdGhpcy5zdHJpZGUsXG4gICAgICBzcXVhcmVkVG9sZXJhbmNlLFxuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyxcbiAgICAgIDBcbiAgICApO1xuICAgIHJldHVybiBuZXcgTGluZWFyUmluZyhzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAnWFknKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHR5cGUgb2YgdGhpcyBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeS5qc1wiKS5UeXBlfSBHZW9tZXRyeSB0eXBlLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRUeXBlKCkge1xuICAgIHJldHVybiAnTGluZWFyUmluZyc7XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBwYXNzZWQgZXh0ZW50IGludGVyc2VjdC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICogQGFwaVxuICAgKi9cbiAgaW50ZXJzZWN0c0V4dGVudChleHRlbnQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGluZWFyIHJpbmcuXG4gICAqIEBwYXJhbSB7IUFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9IFtsYXlvdXRdIExheW91dC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIGxheW91dCkge1xuICAgIHRoaXMuc2V0TGF5b3V0KGxheW91dCwgY29vcmRpbmF0ZXMsIDEpO1xuICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgfVxuICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRlZmxhdGVDb29yZGluYXRlcyhcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLFxuICAgICAgMCxcbiAgICAgIGNvb3JkaW5hdGVzLFxuICAgICAgdGhpcy5zdHJpZGVcbiAgICApO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExpbmVhclJpbmc7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9Qb2ludFxuICovXG5pbXBvcnQgU2ltcGxlR2VvbWV0cnkgZnJvbSAnLi9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQge2NvbnRhaW5zWFksIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGV9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge2RlZmxhdGVDb29yZGluYXRlfSBmcm9tICcuL2ZsYXQvZGVmbGF0ZS5qcyc7XG5pbXBvcnQge3NxdWFyZWREaXN0YW5jZSBhcyBzcXVhcmVkRHh9IGZyb20gJy4uL21hdGguanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFBvaW50IGdlb21ldHJ5LlxuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgUG9pbnQgZXh0ZW5kcyBTaW1wbGVHZW9tZXRyeSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeS5qc1wiKS5HZW9tZXRyeUxheW91dH0gW2xheW91dF0gTGF5b3V0LlxuICAgKi9cbiAgY29uc3RydWN0b3IoY29vcmRpbmF0ZXMsIGxheW91dCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5zZXRDb29yZGluYXRlcyhjb29yZGluYXRlcywgbGF5b3V0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEByZXR1cm4geyFQb2ludH0gQ2xvbmUuXG4gICAqIEBhcGlcbiAgICovXG4gIGNsb25lKCkge1xuICAgIGNvbnN0IHBvaW50ID0gbmV3IFBvaW50KHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0KTtcbiAgICBwb2ludC5hcHBseVByb3BlcnRpZXModGhpcyk7XG4gICAgcmV0dXJuIHBvaW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgKi9cbiAgY2xvc2VzdFBvaW50WFkoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICBjb25zdCBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICBjb25zdCBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIGZsYXRDb29yZGluYXRlc1swXSxcbiAgICAgIGZsYXRDb29yZGluYXRlc1sxXVxuICAgICk7XG4gICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgY29uc3Qgc3RyaWRlID0gdGhpcy5zdHJpZGU7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgIH1cbiAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZXMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldENvb3JkaW5hdGVzKCkge1xuICAgIHJldHVybiAhdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPyBbXSA6IHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqL1xuICBjb21wdXRlRXh0ZW50KGV4dGVudCkge1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlKHRoaXMuZmxhdENvb3JkaW5hdGVzLCBleHRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLlR5cGV9IEdlb21ldHJ5IHR5cGUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFR5cGUoKSB7XG4gICAgcmV0dXJuICdQb2ludCc7XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBwYXNzZWQgZXh0ZW50IGludGVyc2VjdC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICogQGFwaVxuICAgKi9cbiAgaW50ZXJzZWN0c0V4dGVudChleHRlbnQpIHtcbiAgICByZXR1cm4gY29udGFpbnNYWShleHRlbnQsIHRoaXMuZmxhdENvb3JkaW5hdGVzWzBdLCB0aGlzLmZsYXRDb29yZGluYXRlc1sxXSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8Kj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9IFtsYXlvdXRdIExheW91dC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIGxheW91dCkge1xuICAgIHRoaXMuc2V0TGF5b3V0KGxheW91dCwgY29vcmRpbmF0ZXMsIDApO1xuICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgfVxuICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRlZmxhdGVDb29yZGluYXRlKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsXG4gICAgICAwLFxuICAgICAgY29vcmRpbmF0ZXMsXG4gICAgICB0aGlzLnN0cmlkZVxuICAgICk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9pbnQ7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3JldmVyc2VcbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgd2hpbGUgKG9mZnNldCA8IGVuZCAtIHN0cmlkZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgIGNvbnN0IHRtcCA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpXTtcbiAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpXSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyBpXTtcbiAgICAgIGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyBpXSA9IHRtcDtcbiAgICB9XG4gICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICBlbmQgLT0gc3RyaWRlO1xuICB9XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L29yaWVudFxuICovXG5pbXBvcnQge2Nvb3JkaW5hdGVzIGFzIHJldmVyc2VDb29yZGluYXRlc30gZnJvbSAnLi9yZXZlcnNlLmpzJztcblxuLyoqXG4gKiBJcyB0aGUgbGluZWFyIHJpbmcgb3JpZW50ZWQgY2xvY2t3aXNlIGluIGEgY29vcmRpbmF0ZSBzeXN0ZW0gd2l0aCBhIGJvdHRvbS1sZWZ0XG4gKiBjb29yZGluYXRlIG9yaWdpbj8gRm9yIGEgY29vcmRpbmF0ZSBzeXN0ZW0gd2l0aCBhIHRvcC1sZWZ0IGNvb3JkaW5hdGUgb3JpZ2luLFxuICogdGhlIHJpbmcncyBvcmllbnRhdGlvbiBpcyBjbG9ja3dpc2Ugd2hlbiB0aGlzIGZ1bmN0aW9uIHJldHVybnMgZmFsc2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gSXMgY2xvY2t3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0lzQ2xvY2t3aXNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMTE2NTY0Ny9jbG9ja3dpc2UtbWV0aG9kIzExNjU5NDNcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL09TR2VvL2dkYWwvYmxvYi9tYXN0ZXIvZ2RhbC9vZ3Ivb2dybGluZWFycmluZy5jcHBcbiAgbGV0IGVkZ2UgPSAwO1xuICBsZXQgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgbGV0IHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgY29uc3QgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICBjb25zdCB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICBlZGdlICs9ICh4MiAtIHgxKSAqICh5MiArIHkxKTtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIGVkZ2UgPT09IDAgPyB1bmRlZmluZWQgOiBlZGdlID4gMDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGxpbmVhciByaW5ncyBhcmUgb3JpZW50ZWQuICBCeSBkZWZhdWx0LCBsZWZ0LWhhbmQgb3JpZW50YXRpb25cbiAqIGlzIHRlc3RlZCAoZmlyc3QgcmluZyBtdXN0IGJlIGNsb2Nrd2lzZSwgcmVtYWluaW5nIHJpbmdzIGNvdW50ZXItY2xvY2t3aXNlKS5cbiAqIFRvIHRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb24sIHVzZSB0aGUgYHJpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgQXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JpZ2h0XSBUZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uXG4gKiAgICAgKGNvdW50ZXItY2xvY2t3aXNlIGV4dGVyaW9yIHJpbmcgYW5kIGNsb2Nrd2lzZSBpbnRlcmlvciByaW5ncykuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSaW5ncyBhcmUgY29ycmVjdGx5IG9yaWVudGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NBcmVPcmllbnRlZChcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHMsXG4gIHN0cmlkZSxcbiAgcmlnaHRcbikge1xuICByaWdodCA9IHJpZ2h0ICE9PSB1bmRlZmluZWQgPyByaWdodCA6IGZhbHNlO1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBlbmQgPSBlbmRzW2ldO1xuICAgIGNvbnN0IGlzQ2xvY2t3aXNlID0gbGluZWFyUmluZ0lzQ2xvY2t3aXNlKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZW5kLFxuICAgICAgc3RyaWRlXG4gICAgKTtcbiAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgaWYgKChyaWdodCAmJiBpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiAhaXNDbG9ja3dpc2UpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKChyaWdodCAmJiAhaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgaXNDbG9ja3dpc2UpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIERldGVybWluZXMgaWYgbGluZWFyIHJpbmdzIGFyZSBvcmllbnRlZC4gIEJ5IGRlZmF1bHQsIGxlZnQtaGFuZCBvcmllbnRhdGlvblxuICogaXMgdGVzdGVkIChmaXJzdCByaW5nIG11c3QgYmUgY2xvY2t3aXNlLCByZW1haW5pbmcgcmluZ3MgY291bnRlci1jbG9ja3dpc2UpLlxuICogVG8gdGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvbiwgdXNlIHRoZSBgcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEFycmF5IG9mIGFycmF5IG9mIGVuZCBpbmRleGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtyaWdodF0gVGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvblxuICogICAgIChjb3VudGVyLWNsb2Nrd2lzZSBleHRlcmlvciByaW5nIGFuZCBjbG9ja3dpc2UgaW50ZXJpb3IgcmluZ3MpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gUmluZ3MgYXJlIGNvcnJlY3RseSBvcmllbnRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzc0FyZU9yaWVudGVkKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kc3MsXG4gIHN0cmlkZSxcbiAgcmlnaHRcbikge1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgY29uc3QgZW5kcyA9IGVuZHNzW2ldO1xuICAgIGlmICghbGluZWFyUmluZ3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCByaWdodCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGVuZHMubGVuZ3RoKSB7XG4gICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIE9yaWVudCBjb29yZGluYXRlcyBpbiBhIGZsYXQgYXJyYXkgb2YgbGluZWFyIHJpbmdzLiAgQnkgZGVmYXVsdCwgcmluZ3NcbiAqIGFyZSBvcmllbnRlZCBmb2xsb3dpbmcgdGhlIGxlZnQtaGFuZCBydWxlIChjbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZFxuICogY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS4gIFRvIG9yaWVudCBhY2NvcmRpbmcgdG8gdGhlXG4gKiByaWdodC1oYW5kIHJ1bGUsIHVzZSB0aGUgYHJpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFufSBbcmlnaHRdIEZvbGxvdyB0aGUgcmlnaHQtaGFuZCBydWxlIGZvciBvcmllbnRhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gRW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3JpZW50TGluZWFyUmluZ3MoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmRzLFxuICBzdHJpZGUsXG4gIHJpZ2h0XG4pIHtcbiAgcmlnaHQgPSByaWdodCAhPT0gdW5kZWZpbmVkID8gcmlnaHQgOiBmYWxzZTtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgY29uc3QgZW5kID0gZW5kc1tpXTtcbiAgICBjb25zdCBpc0Nsb2Nrd2lzZSA9IGxpbmVhclJpbmdJc0Nsb2Nrd2lzZShcbiAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgIG9mZnNldCxcbiAgICAgIGVuZCxcbiAgICAgIHN0cmlkZVxuICAgICk7XG4gICAgY29uc3QgcmV2ZXJzZSA9XG4gICAgICBpID09PSAwXG4gICAgICAgID8gKHJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSlcbiAgICAgICAgOiAocmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmIGlzQ2xvY2t3aXNlKTtcbiAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgcmV2ZXJzZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgfVxuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gb2Zmc2V0O1xufVxuXG4vKipcbiAqIE9yaWVudCBjb29yZGluYXRlcyBpbiBhIGZsYXQgYXJyYXkgb2YgbGluZWFyIHJpbmdzLiAgQnkgZGVmYXVsdCwgcmluZ3NcbiAqIGFyZSBvcmllbnRlZCBmb2xsb3dpbmcgdGhlIGxlZnQtaGFuZCBydWxlIChjbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZFxuICogY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS4gIFRvIG9yaWVudCBhY2NvcmRpbmcgdG8gdGhlXG4gKiByaWdodC1oYW5kIHJ1bGUsIHVzZSB0aGUgYHJpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBBcnJheSBvZiBhcnJheSBvZiBlbmQgaW5kZXhlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFufSBbcmlnaHRdIEZvbGxvdyB0aGUgcmlnaHQtaGFuZCBydWxlIGZvciBvcmllbnRhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gRW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3JpZW50TGluZWFyUmluZ3NBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHNzLFxuICBzdHJpZGUsXG4gIHJpZ2h0XG4pIHtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIG9mZnNldCA9IG9yaWVudExpbmVhclJpbmdzKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZW5kc3NbaV0sXG4gICAgICBzdHJpZGUsXG4gICAgICByaWdodFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIG9mZnNldDtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYSB0d28tZGltZW5zaW9uYWwgZW5kc3NcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBMaW5lYXIgcmluZyBlbmQgaW5kZXhlc1xuICogQHJldHVybiB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IFR3byBkaW1lbnNpb25hbCBlbmRzcyBhcnJheSB0aGF0IGNhblxuICogYmUgdXNlZCB0byBjb250cnVjdCBhIE11bHRpUG9seWdvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZUVuZHMoZmxhdENvb3JkaW5hdGVzLCBlbmRzKSB7XG4gIGNvbnN0IGVuZHNzID0gW107XG4gIGxldCBvZmZzZXQgPSAwO1xuICBsZXQgcHJldkVuZEluZGV4ID0gMDtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgY29uc3QgZW5kID0gZW5kc1tpXTtcbiAgICAvLyBjbGFzc2lmaWVzIGFuIGFycmF5IG9mIHJpbmdzIGludG8gcG9seWdvbnMgd2l0aCBvdXRlciByaW5ncyBhbmQgaG9sZXNcbiAgICBpZiAoIWxpbmVhclJpbmdJc0Nsb2Nrd2lzZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCAyKSkge1xuICAgICAgZW5kc3MucHVzaChlbmRzLnNsaWNlKHByZXZFbmRJbmRleCwgaSArIDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGVuZHNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGVuZHNzW2VuZHNzLmxlbmd0aCAtIDFdLnB1c2goZW5kc1twcmV2RW5kSW5kZXhdKTtcbiAgICB9XG4gICAgcHJldkVuZEluZGV4ID0gaSArIDE7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBlbmRzcztcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL1BvbHlnb25cbiAqL1xuaW1wb3J0IExpbmVhclJpbmcgZnJvbSAnLi9MaW5lYXJSaW5nLmpzJztcbmltcG9ydCBQb2ludCBmcm9tICcuL1BvaW50LmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7YXJyYXlNYXhTcXVhcmVkRGVsdGEsIGFzc2lnbkNsb3Nlc3RBcnJheVBvaW50fSBmcm9tICcuL2ZsYXQvY2xvc2VzdC5qcyc7XG5pbXBvcnQge2Nsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSwgZ2V0Q2VudGVyfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheX0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHtleHRlbmR9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7Z2V0SW50ZXJpb3JQb2ludE9mQXJyYXl9IGZyb20gJy4vZmxhdC9pbnRlcmlvcnBvaW50LmpzJztcbmltcG9ydCB7aW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXl9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7aW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheX0gZnJvbSAnLi9mbGF0L2ludGVyc2VjdHNleHRlbnQuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nc0FyZU9yaWVudGVkLCBvcmllbnRMaW5lYXJSaW5nc30gZnJvbSAnLi9mbGF0L29yaWVudC5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmdzIGFzIGxpbmVhclJpbmdzQXJlYX0gZnJvbSAnLi9mbGF0L2FyZWEuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nc0NvbnRhaW5zWFl9IGZyb20gJy4vZmxhdC9jb250YWlucy5qcyc7XG5pbXBvcnQge21vZHVsb30gZnJvbSAnLi4vbWF0aC5qcyc7XG5pbXBvcnQge3F1YW50aXplQXJyYXl9IGZyb20gJy4vZmxhdC9zaW1wbGlmeS5qcyc7XG5pbXBvcnQge29mZnNldCBhcyBzcGhlcmVPZmZzZXR9IGZyb20gJy4uL3NwaGVyZS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogUG9seWdvbiBnZW9tZXRyeS5cbiAqXG4gKiBAYXBpXG4gKi9cbmNsYXNzIFBvbHlnb24gZXh0ZW5kcyBTaW1wbGVHZW9tZXRyeSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+PnwhQXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXNcbiAgICogICAgIEFycmF5IG9mIGxpbmVhciByaW5ncyB0aGF0IGRlZmluZSB0aGUgcG9seWdvbi4gVGhlIGZpcnN0IGxpbmVhciByaW5nIG9mIHRoZVxuICAgKiAgICAgYXJyYXkgZGVmaW5lcyB0aGUgb3V0ZXItYm91bmRhcnkgb3Igc3VyZmFjZSBvZiB0aGUgcG9seWdvbi4gRWFjaCBzdWJzZXF1ZW50XG4gICAqICAgICBsaW5lYXIgcmluZyBkZWZpbmVzIGEgaG9sZSBpbiB0aGUgc3VyZmFjZSBvZiB0aGUgcG9seWdvbi4gQSBsaW5lYXIgcmluZyBpc1xuICAgKiAgICAgYW4gYXJyYXkgb2YgdmVydGljZXMnIGNvb3JkaW5hdGVzIHdoZXJlIHRoZSBmaXJzdCBjb29yZGluYXRlIGFuZCB0aGUgbGFzdCBhcmVcbiAgICogICAgIGVxdWl2YWxlbnQuIChGb3IgaW50ZXJuYWwgdXNlLCBmbGF0IGNvb3JkaW5hdGVzIGluIGNvbWJpbmF0aW9uIHdpdGhcbiAgICogICAgIGBsYXlvdXRgIGFuZCBgZW5kc2AgYXJlIGFsc28gYWNjZXB0ZWQuKVxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9IFtsYXlvdXRdIExheW91dC5cbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbZW5kc10gRW5kcyAoZm9yIGludGVybmFsIHVzZSB3aXRoIGZsYXQgY29vcmRpbmF0ZXMpLlxuICAgKi9cbiAgY29uc3RydWN0b3IoY29vcmRpbmF0ZXMsIGxheW91dCwgZW5kcykge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZW5kc18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICovXG4gICAgdGhpcy5mbGF0SW50ZXJpb3JQb2ludF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFfID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMub3JpZW50ZWRSZXZpc2lvbl8gPSAtMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBudWxsO1xuXG4gICAgaWYgKGxheW91dCAhPT0gdW5kZWZpbmVkICYmIGVuZHMpIHtcbiAgICAgIHRoaXMuc2V0RmxhdENvb3JkaW5hdGVzKFxuICAgICAgICBsYXlvdXQsXG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKVxuICAgICAgKTtcbiAgICAgIHRoaXMuZW5kc18gPSBlbmRzO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldENvb3JkaW5hdGVzKFxuICAgICAgICAvKiogQHR5cGUge0FycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSAqLyAoXG4gICAgICAgICAgY29vcmRpbmF0ZXNcbiAgICAgICAgKSxcbiAgICAgICAgbGF5b3V0XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBlbmQgdGhlIHBhc3NlZCBsaW5lYXIgcmluZyB0byB0aGlzIHBvbHlnb24uXG4gICAqIEBwYXJhbSB7TGluZWFyUmluZ30gbGluZWFyUmluZyBMaW5lYXIgcmluZy5cbiAgICogQGFwaVxuICAgKi9cbiAgYXBwZW5kTGluZWFyUmluZyhsaW5lYXJSaW5nKSB7XG4gICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBsaW5lYXJSaW5nLmdldEZsYXRDb29yZGluYXRlcygpLnNsaWNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4dGVuZCh0aGlzLmZsYXRDb29yZGluYXRlcywgbGluZWFyUmluZy5nZXRGbGF0Q29vcmRpbmF0ZXMoKSk7XG4gICAgfVxuICAgIHRoaXMuZW5kc18ucHVzaCh0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgpO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7IVBvbHlnb259IENsb25lLlxuICAgKiBAYXBpXG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICBjb25zdCBwb2x5Z29uID0gbmV3IFBvbHlnb24oXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgpLFxuICAgICAgdGhpcy5sYXlvdXQsXG4gICAgICB0aGlzLmVuZHNfLnNsaWNlKClcbiAgICApO1xuICAgIHBvbHlnb24uYXBwbHlQcm9wZXJ0aWVzKHRoaXMpO1xuICAgIHJldHVybiBwb2x5Z29uO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgKi9cbiAgY2xvc2VzdFBvaW50WFkoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICBpZiAobWluU3F1YXJlZERpc3RhbmNlIDwgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKHRoaXMuZ2V0RXh0ZW50KCksIHgsIHkpKSB7XG4gICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KFxuICAgICAgICBhcnJheU1heFNxdWFyZWREZWx0YShcbiAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyxcbiAgICAgICAgICAwLFxuICAgICAgICAgIHRoaXMuZW5kc18sXG4gICAgICAgICAgdGhpcy5zdHJpZGUsXG4gICAgICAgICAgMFxuICAgICAgICApXG4gICAgICApO1xuICAgICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIGFzc2lnbkNsb3Nlc3RBcnJheVBvaW50KFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsXG4gICAgICAwLFxuICAgICAgdGhpcy5lbmRzXyxcbiAgICAgIHRoaXMuc3RyaWRlLFxuICAgICAgdGhpcy5tYXhEZWx0YV8sXG4gICAgICB0cnVlLFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICBjbG9zZXN0UG9pbnQsXG4gICAgICBtaW5TcXVhcmVkRGlzdGFuY2VcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAgICovXG4gIGNvbnRhaW5zWFkoeCwgeSkge1xuICAgIHJldHVybiBsaW5lYXJSaW5nc0NvbnRhaW5zWFkoXG4gICAgICB0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksXG4gICAgICAwLFxuICAgICAgdGhpcy5lbmRzXyxcbiAgICAgIHRoaXMuc3RyaWRlLFxuICAgICAgeCxcbiAgICAgIHlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgYXJlYSBvZiB0aGUgcG9seWdvbiBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAob24gcHJvamVjdGVkIHBsYW5lKS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0QXJlYSgpIHtcbiAgICByZXR1cm4gbGluZWFyUmluZ3NBcmVhKFxuICAgICAgdGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLFxuICAgICAgMCxcbiAgICAgIHRoaXMuZW5kc18sXG4gICAgICB0aGlzLnN0cmlkZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjb29yZGluYXRlIGFycmF5IGZvciB0aGlzIGdlb21ldHJ5LiAgVGhpcyBhcnJheSBoYXMgdGhlIHN0cnVjdHVyZVxuICAgKiBvZiBhIEdlb0pTT04gY29vcmRpbmF0ZSBhcnJheSBmb3IgcG9seWdvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JpZ2h0XSBPcmllbnQgY29vcmRpbmF0ZXMgYWNjb3JkaW5nIHRvIHRoZSByaWdodC1oYW5kXG4gICAqICAgICBydWxlIChjb3VudGVyLWNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kIGNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLlxuICAgKiAgICAgSWYgYGZhbHNlYCwgY29vcmRpbmF0ZXMgd2lsbCBiZSBvcmllbnRlZCBhY2NvcmRpbmcgdG8gdGhlIGxlZnQtaGFuZCBydWxlXG4gICAqICAgICAoY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmQgY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS5cbiAgICogICAgIEJ5IGRlZmF1bHQsIGNvb3JkaW5hdGUgb3JpZW50YXRpb24gd2lsbCBkZXBlbmQgb24gaG93IHRoZSBnZW9tZXRyeSB3YXNcbiAgICogICAgIGNvbnN0cnVjdGVkLlxuICAgKiBAcmV0dXJuIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gQ29vcmRpbmF0ZXMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldENvb3JkaW5hdGVzKHJpZ2h0KSB7XG4gICAgbGV0IGZsYXRDb29yZGluYXRlcztcbiAgICBpZiAocmlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLnNsaWNlKCk7XG4gICAgICBvcmllbnRMaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCByaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIH1cblxuICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBFbmRzLlxuICAgKi9cbiAgZ2V0RW5kcygpIHtcbiAgICByZXR1cm4gdGhpcy5lbmRzXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnRlcmlvciBwb2ludC5cbiAgICovXG4gIGdldEZsYXRJbnRlcmlvclBvaW50KCkge1xuICAgIGlmICh0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgY29uc3QgZmxhdENlbnRlciA9IGdldENlbnRlcih0aGlzLmdldEV4dGVudCgpKTtcbiAgICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRfID0gZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkoXG4gICAgICAgIHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSxcbiAgICAgICAgMCxcbiAgICAgICAgdGhpcy5lbmRzXyxcbiAgICAgICAgdGhpcy5zdHJpZGUsXG4gICAgICAgIGZsYXRDZW50ZXIsXG4gICAgICAgIDBcbiAgICAgICk7XG4gICAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mbGF0SW50ZXJpb3JQb2ludF87XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGludGVyaW9yIHBvaW50IG9mIHRoZSBwb2x5Z29uLlxuICAgKiBAcmV0dXJuIHtQb2ludH0gSW50ZXJpb3IgcG9pbnQgYXMgWFlNIGNvb3JkaW5hdGUsIHdoZXJlIE0gaXMgdGhlXG4gICAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0SW50ZXJpb3JQb2ludCgpIHtcbiAgICByZXR1cm4gbmV3IFBvaW50KHRoaXMuZ2V0RmxhdEludGVyaW9yUG9pbnQoKSwgJ1hZTScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbnVtYmVyIG9mIHJpbmdzIG9mIHRoZSBwb2x5Z29uLCAgdGhpcyBpbmNsdWRlcyB0aGUgZXh0ZXJpb3JcbiAgICogcmluZyBhbmQgYW55IGludGVyaW9yIHJpbmdzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE51bWJlciBvZiByaW5ncy5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0TGluZWFyUmluZ0NvdW50KCkge1xuICAgIHJldHVybiB0aGlzLmVuZHNfLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIE50aCBsaW5lYXIgcmluZyBvZiB0aGUgcG9seWdvbiBnZW9tZXRyeS4gUmV0dXJuIGBudWxsYCBpZiB0aGVcbiAgICogZ2l2ZW4gaW5kZXggaXMgb3V0IG9mIHJhbmdlLlxuICAgKiBUaGUgZXh0ZXJpb3IgbGluZWFyIHJpbmcgaXMgYXZhaWxhYmxlIGF0IGluZGV4IGAwYCBhbmQgdGhlIGludGVyaW9yIHJpbmdzXG4gICAqIGF0IGluZGV4IGAxYCBhbmQgYmV5b25kLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAqIEByZXR1cm4ge0xpbmVhclJpbmd8bnVsbH0gTGluZWFyIHJpbmcuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldExpbmVhclJpbmcoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMuZW5kc18ubGVuZ3RoIDw9IGluZGV4KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoXG4gICAgICAgIGluZGV4ID09PSAwID8gMCA6IHRoaXMuZW5kc19baW5kZXggLSAxXSxcbiAgICAgICAgdGhpcy5lbmRzX1tpbmRleF1cbiAgICAgICksXG4gICAgICB0aGlzLmxheW91dFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsaW5lYXIgcmluZ3Mgb2YgdGhlIHBvbHlnb24uXG4gICAqIEByZXR1cm4ge0FycmF5PExpbmVhclJpbmc+fSBMaW5lYXIgcmluZ3MuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldExpbmVhclJpbmdzKCkge1xuICAgIGNvbnN0IGxheW91dCA9IHRoaXMubGF5b3V0O1xuICAgIGNvbnN0IGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIGNvbnN0IGVuZHMgPSB0aGlzLmVuZHNfO1xuICAgIGNvbnN0IGxpbmVhclJpbmdzID0gW107XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBjb25zdCBlbmQgPSBlbmRzW2ldO1xuICAgICAgY29uc3QgbGluZWFyUmluZyA9IG5ldyBMaW5lYXJSaW5nKFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMuc2xpY2Uob2Zmc2V0LCBlbmQpLFxuICAgICAgICBsYXlvdXRcbiAgICAgICk7XG4gICAgICBsaW5lYXJSaW5ncy5wdXNoKGxpbmVhclJpbmcpO1xuICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gbGluZWFyUmluZ3M7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3JpZW50ZWQgZmxhdCBjb29yZGluYXRlcy5cbiAgICovXG4gIGdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCkge1xuICAgIGlmICh0aGlzLm9yaWVudGVkUmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgY29uc3QgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgICBpZiAobGluZWFyUmluZ3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKSkge1xuICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IGZsYXRDb29yZGluYXRlcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfID0gZmxhdENvb3JkaW5hdGVzLnNsaWNlKCk7XG4gICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfLmxlbmd0aCA9IG9yaWVudExpbmVhclJpbmdzKFxuICAgICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfLFxuICAgICAgICAgIDAsXG4gICAgICAgICAgdGhpcy5lbmRzXyxcbiAgICAgICAgICB0aGlzLnN0cmlkZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy5vcmllbnRlZFJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgKiBAcmV0dXJuIHtQb2x5Z29ufSBTaW1wbGlmaWVkIFBvbHlnb24uXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICBjb25zdCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgY29uc3Qgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IHF1YW50aXplQXJyYXkoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyxcbiAgICAgIDAsXG4gICAgICB0aGlzLmVuZHNfLFxuICAgICAgdGhpcy5zdHJpZGUsXG4gICAgICBNYXRoLnNxcnQoc3F1YXJlZFRvbGVyYW5jZSksXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICAgICAgMCxcbiAgICAgIHNpbXBsaWZpZWRFbmRzXG4gICAgKTtcbiAgICByZXR1cm4gbmV3IFBvbHlnb24oc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgJ1hZJywgc2ltcGxpZmllZEVuZHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLlR5cGV9IEdlb21ldHJ5IHR5cGUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFR5cGUoKSB7XG4gICAgcmV0dXJuICdQb2x5Z29uJztcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgKiBAYXBpXG4gICAqL1xuICBpbnRlcnNlY3RzRXh0ZW50KGV4dGVudCkge1xuICAgIHJldHVybiBpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5KFxuICAgICAgdGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLFxuICAgICAgMCxcbiAgICAgIHRoaXMuZW5kc18sXG4gICAgICB0aGlzLnN0cmlkZSxcbiAgICAgIGV4dGVudFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgcG9seWdvbi5cbiAgICogQHBhcmFtIHshQXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9IFtsYXlvdXRdIExheW91dC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIGxheW91dCkge1xuICAgIHRoaXMuc2V0TGF5b3V0KGxheW91dCwgY29vcmRpbmF0ZXMsIDIpO1xuICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgfVxuICAgIGNvbnN0IGVuZHMgPSBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLFxuICAgICAgMCxcbiAgICAgIGNvb3JkaW5hdGVzLFxuICAgICAgdGhpcy5zdHJpZGUsXG4gICAgICB0aGlzLmVuZHNfXG4gICAgKTtcbiAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBlbmRzLmxlbmd0aCA9PT0gMCA/IDAgOiBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9seWdvbjtcblxuLyoqXG4gKiBDcmVhdGUgYW4gYXBwcm94aW1hdGlvbiBvZiBhIGNpcmNsZSBvbiB0aGUgc3VyZmFjZSBvZiBhIHNwaGVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyIChgW2xvbiwgbGF0XWAgaW4gZGVncmVlcykuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFRoZSBncmVhdC1jaXJjbGUgZGlzdGFuY2UgZnJvbSB0aGUgY2VudGVyIHRvXG4gKiAgICAgdGhlIHBvbHlnb24gdmVydGljZXMgaW4gbWV0ZXJzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtuXSBPcHRpb25hbCBudW1iZXIgb2YgdmVydGljZXMgZm9yIHRoZSByZXN1bHRpbmdcbiAqICAgICBwb2x5Z29uLiBEZWZhdWx0IGlzIGAzMmAuXG4gKiBAcGFyYW0ge251bWJlcn0gW3NwaGVyZVJhZGl1c10gT3B0aW9uYWwgcmFkaXVzIGZvciB0aGUgc3BoZXJlIChkZWZhdWx0cyB0b1xuICogICAgIHRoZSBFYXJ0aCdzIG1lYW4gcmFkaXVzIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQpLlxuICogQHJldHVybiB7UG9seWdvbn0gVGhlIFwiY2lyY3VsYXJcIiBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2lyY3VsYXIoY2VudGVyLCByYWRpdXMsIG4sIHNwaGVyZVJhZGl1cykge1xuICBuID0gbiA/IG4gOiAzMjtcbiAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICBjb25zdCBmbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICBleHRlbmQoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBzcGhlcmVPZmZzZXQoY2VudGVyLCByYWRpdXMsICgyICogTWF0aC5QSSAqIGkpIC8gbiwgc3BoZXJlUmFkaXVzKVxuICAgICk7XG4gIH1cbiAgZmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdLCBmbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICByZXR1cm4gbmV3IFBvbHlnb24oZmxhdENvb3JkaW5hdGVzLCAnWFknLCBbZmxhdENvb3JkaW5hdGVzLmxlbmd0aF0pO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHBvbHlnb24gZnJvbSBhbiBleHRlbnQuIFRoZSBsYXlvdXQgdXNlZCBpcyBgWFlgLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEByZXR1cm4ge1BvbHlnb259IFRoZSBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUV4dGVudChleHRlbnQpIHtcbiAgY29uc3QgbWluWCA9IGV4dGVudFswXTtcbiAgY29uc3QgbWluWSA9IGV4dGVudFsxXTtcbiAgY29uc3QgbWF4WCA9IGV4dGVudFsyXTtcbiAgY29uc3QgbWF4WSA9IGV4dGVudFszXTtcbiAgY29uc3QgZmxhdENvb3JkaW5hdGVzID0gW1xuICAgIG1pblgsXG4gICAgbWluWSxcbiAgICBtaW5YLFxuICAgIG1heFksXG4gICAgbWF4WCxcbiAgICBtYXhZLFxuICAgIG1heFgsXG4gICAgbWluWSxcbiAgICBtaW5YLFxuICAgIG1pblksXG4gIF07XG4gIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsICdYWScsIFtmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoXSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcmVndWxhciBwb2x5Z29uIGZyb20gYSBjaXJjbGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBDaXJjbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge251bWJlcn0gW3NpZGVzXSBOdW1iZXIgb2Ygc2lkZXMgb2YgdGhlIHBvbHlnb24uIERlZmF1bHQgaXMgMzIuXG4gKiBAcGFyYW0ge251bWJlcn0gW2FuZ2xlXSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIGNvdW50ZXItY2xvY2t3aXNlIHJhZGlhbnMuIDAgbWVhbnMgRWFzdC4gRGVmYXVsdCBpcyAwLlxuICogQHJldHVybiB7UG9seWdvbn0gUG9seWdvbiBnZW9tZXRyeS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21DaXJjbGUoY2lyY2xlLCBzaWRlcywgYW5nbGUpIHtcbiAgc2lkZXMgPSBzaWRlcyA/IHNpZGVzIDogMzI7XG4gIGNvbnN0IHN0cmlkZSA9IGNpcmNsZS5nZXRTdHJpZGUoKTtcbiAgY29uc3QgbGF5b3V0ID0gY2lyY2xlLmdldExheW91dCgpO1xuICBjb25zdCBjZW50ZXIgPSBjaXJjbGUuZ2V0Q2VudGVyKCk7XG4gIGNvbnN0IGFycmF5TGVuZ3RoID0gc3RyaWRlICogKHNpZGVzICsgMSk7XG4gIGNvbnN0IGZsYXRDb29yZGluYXRlcyA9IG5ldyBBcnJheShhcnJheUxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlMZW5ndGg7IGkgKz0gc3RyaWRlKSB7XG4gICAgZmxhdENvb3JkaW5hdGVzW2ldID0gMDtcbiAgICBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdID0gMDtcbiAgICBmb3IgKGxldCBqID0gMjsgaiA8IHN0cmlkZTsgaisrKSB7XG4gICAgICBmbGF0Q29vcmRpbmF0ZXNbaSArIGpdID0gY2VudGVyW2pdO1xuICAgIH1cbiAgfVxuICBjb25zdCBlbmRzID0gW2ZsYXRDb29yZGluYXRlcy5sZW5ndGhdO1xuICBjb25zdCBwb2x5Z29uID0gbmV3IFBvbHlnb24oZmxhdENvb3JkaW5hdGVzLCBsYXlvdXQsIGVuZHMpO1xuICBtYWtlUmVndWxhcihwb2x5Z29uLCBjZW50ZXIsIGNpcmNsZS5nZXRSYWRpdXMoKSwgYW5nbGUpO1xuICByZXR1cm4gcG9seWdvbjtcbn1cblxuLyoqXG4gKiBNb2RpZnkgdGhlIGNvb3JkaW5hdGVzIG9mIGEgcG9seWdvbiB0byBtYWtlIGl0IGEgcmVndWxhciBwb2x5Z29uLlxuICogQHBhcmFtIHtQb2x5Z29ufSBwb2x5Z29uIFBvbHlnb24gZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlciBvZiB0aGUgcmVndWxhciBwb2x5Z29uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBSYWRpdXMgb2YgdGhlIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbYW5nbGVdIFN0YXJ0IGFuZ2xlIGZvciB0aGUgZmlyc3QgdmVydGV4IG9mIHRoZSBwb2x5Z29uIGluXG4gKiAgICAgY291bnRlci1jbG9ja3dpc2UgcmFkaWFucy4gMCBtZWFucyBFYXN0LiBEZWZhdWx0IGlzIDAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUmVndWxhcihwb2x5Z29uLCBjZW50ZXIsIHJhZGl1cywgYW5nbGUpIHtcbiAgY29uc3QgZmxhdENvb3JkaW5hdGVzID0gcG9seWdvbi5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgY29uc3Qgc3RyaWRlID0gcG9seWdvbi5nZXRTdHJpZGUoKTtcbiAgY29uc3Qgc2lkZXMgPSBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC8gc3RyaWRlIC0gMTtcbiAgY29uc3Qgc3RhcnRBbmdsZSA9IGFuZ2xlID8gYW5nbGUgOiAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8PSBzaWRlczsgKytpKSB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gaSAqIHN0cmlkZTtcbiAgICBjb25zdCBhbmdsZSA9IHN0YXJ0QW5nbGUgKyAobW9kdWxvKGksIHNpZGVzKSAqIDIgKiBNYXRoLlBJKSAvIHNpZGVzO1xuICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdID0gY2VudGVyWzBdICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpO1xuICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSA9IGNlbnRlclsxXSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKTtcbiAgfVxuICBwb2x5Z29uLmNoYW5nZWQoKTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW50ZXJpb3Jwb2ludFxuICovXG5pbXBvcnQge2FzY2VuZGluZ30gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nc0NvbnRhaW5zWFl9IGZyb20gJy4vY29udGFpbnMuanMnO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgYSBwb2ludCB0aGF0IGlzIGxpa2VseSB0byBsaWUgaW4gdGhlIGludGVyaW9yIG9mIHRoZSBsaW5lYXIgcmluZ3MuXG4gKiBJbnNwaXJlZCBieSBKVFMncyBjb20udml2aWRzb2x1dGlvbnMuanRzLmdlb20uR2VvbWV0cnkjZ2V0SW50ZXJpb3JQb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDZW50ZXJzIEZsYXQgY2VudGVycy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmbGF0Q2VudGVyc09mZnNldCBGbGF0IGNlbnRlciBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtkZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IERlc3RpbmF0aW9uIHBvaW50IGFzIFhZTSBjb29yZGluYXRlLCB3aGVyZSBNIGlzIHRoZVxuICogbGVuZ3RoIG9mIHRoZSBob3Jpem9udGFsIGludGVyc2VjdGlvbiB0aGF0IHRoZSBwb2ludCBiZWxvbmdzIHRvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmRzLFxuICBzdHJpZGUsXG4gIGZsYXRDZW50ZXJzLFxuICBmbGF0Q2VudGVyc09mZnNldCxcbiAgZGVzdFxuKSB7XG4gIGxldCBpLCBpaSwgeCwgeDEsIHgyLCB5MSwgeTI7XG4gIGNvbnN0IHkgPSBmbGF0Q2VudGVyc1tmbGF0Q2VudGVyc09mZnNldCArIDFdO1xuICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gIGNvbnN0IGludGVyc2VjdGlvbnMgPSBbXTtcbiAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbnMgd2l0aCB0aGUgaG9yaXpvbnRhbCBsaW5lXG4gIGZvciAobGV0IHIgPSAwLCByciA9IGVuZHMubGVuZ3RoOyByIDwgcnI7ICsrcikge1xuICAgIGNvbnN0IGVuZCA9IGVuZHNbcl07XG4gICAgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgICB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBlbmQ7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB4MiA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgIHkyID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgIGlmICgoeSA8PSB5MSAmJiB5MiA8PSB5KSB8fCAoeTEgPD0geSAmJiB5IDw9IHkyKSkge1xuICAgICAgICB4ID0gKCh5IC0geTEpIC8gKHkyIC0geTEpKSAqICh4MiAtIHgxKSArIHgxO1xuICAgICAgICBpbnRlcnNlY3Rpb25zLnB1c2goeCk7XG4gICAgICB9XG4gICAgICB4MSA9IHgyO1xuICAgICAgeTEgPSB5MjtcbiAgICB9XG4gIH1cbiAgLy8gRmluZCB0aGUgbG9uZ2VzdCBzZWdtZW50IG9mIHRoZSBob3Jpem9udGFsIGxpbmUgdGhhdCBoYXMgaXRzIGNlbnRlciBwb2ludFxuICAvLyBpbnNpZGUgdGhlIGxpbmVhciByaW5nLlxuICBsZXQgcG9pbnRYID0gTmFOO1xuICBsZXQgbWF4U2VnbWVudExlbmd0aCA9IC1JbmZpbml0eTtcbiAgaW50ZXJzZWN0aW9ucy5zb3J0KGFzY2VuZGluZyk7XG4gIHgxID0gaW50ZXJzZWN0aW9uc1swXTtcbiAgZm9yIChpID0gMSwgaWkgPSBpbnRlcnNlY3Rpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB4MiA9IGludGVyc2VjdGlvbnNbaV07XG4gICAgY29uc3Qgc2VnbWVudExlbmd0aCA9IE1hdGguYWJzKHgyIC0geDEpO1xuICAgIGlmIChzZWdtZW50TGVuZ3RoID4gbWF4U2VnbWVudExlbmd0aCkge1xuICAgICAgeCA9ICh4MSArIHgyKSAvIDI7XG4gICAgICBpZiAobGluZWFyUmluZ3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICAgIHBvaW50WCA9IHg7XG4gICAgICAgIG1heFNlZ21lbnRMZW5ndGggPSBzZWdtZW50TGVuZ3RoO1xuICAgICAgfVxuICAgIH1cbiAgICB4MSA9IHgyO1xuICB9XG4gIGlmIChpc05hTihwb2ludFgpKSB7XG4gICAgLy8gVGhlcmUgaXMgbm8gaG9yaXpvbnRhbCBsaW5lIHRoYXQgaGFzIGl0cyBjZW50ZXIgcG9pbnQgaW5zaWRlIHRoZSBsaW5lYXJcbiAgICAvLyByaW5nLiAgVXNlIHRoZSBjZW50ZXIgb2YgdGhlIHRoZSBsaW5lYXIgcmluZydzIGV4dGVudC5cbiAgICBwb2ludFggPSBmbGF0Q2VudGVyc1tmbGF0Q2VudGVyc09mZnNldF07XG4gIH1cbiAgaWYgKGRlc3QpIHtcbiAgICBkZXN0LnB1c2gocG9pbnRYLCB5LCBtYXhTZWdtZW50TGVuZ3RoKTtcbiAgICByZXR1cm4gZGVzdDtcbiAgfVxuICByZXR1cm4gW3BvaW50WCwgeSwgbWF4U2VnbWVudExlbmd0aF07XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENlbnRlcnMgRmxhdCBjZW50ZXJzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSW50ZXJpb3IgcG9pbnRzIGFzIFhZTSBjb29yZGluYXRlcywgd2hlcmUgTSBpcyB0aGVcbiAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnRzT2ZNdWx0aUFycmF5KFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kc3MsXG4gIHN0cmlkZSxcbiAgZmxhdENlbnRlcnNcbikge1xuICBsZXQgaW50ZXJpb3JQb2ludHMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZHMgPSBlbmRzc1tpXTtcbiAgICBpbnRlcmlvclBvaW50cyA9IGdldEludGVyaW9yUG9pbnRPZkFycmF5KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZW5kcyxcbiAgICAgIHN0cmlkZSxcbiAgICAgIGZsYXRDZW50ZXJzLFxuICAgICAgMiAqIGksXG4gICAgICBpbnRlcmlvclBvaW50c1xuICAgICk7XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBpbnRlcmlvclBvaW50cztcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvY29udGFpbnNcbiAqL1xuaW1wb3J0IHtmb3JFYWNoQ29ybmVyfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgZXh0ZW50XG4pIHtcbiAgY29uc3Qgb3V0c2lkZSA9IGZvckVhY2hDb3JuZXIoXG4gICAgZXh0ZW50LFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICByZXR1cm4gIWxpbmVhclJpbmdDb250YWluc1hZKFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICAgIG9mZnNldCxcbiAgICAgICAgZW5kLFxuICAgICAgICBzdHJpZGUsXG4gICAgICAgIGNvb3JkaW5hdGVbMF0sXG4gICAgICAgIGNvb3JkaW5hdGVbMV1cbiAgICAgICk7XG4gICAgfVxuICApO1xuICByZXR1cm4gIW91dHNpZGU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0NvbnRhaW5zWFkoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgeCxcbiAgeVxuKSB7XG4gIC8vIGh0dHBzOi8vZ2VvbWFsZ29yaXRobXMuY29tL2EwMy1faW5jbHVzaW9uLmh0bWxcbiAgLy8gQ29weXJpZ2h0IDIwMDAgc29mdFN1cmZlciwgMjAxMiBEYW4gU3VuZGF5XG4gIC8vIFRoaXMgY29kZSBtYXkgYmUgZnJlZWx5IHVzZWQgYW5kIG1vZGlmaWVkIGZvciBhbnkgcHVycG9zZVxuICAvLyBwcm92aWRpbmcgdGhhdCB0aGlzIGNvcHlyaWdodCBub3RpY2UgaXMgaW5jbHVkZWQgd2l0aCBpdC5cbiAgLy8gU29mdFN1cmZlciBtYWtlcyBubyB3YXJyYW50eSBmb3IgdGhpcyBjb2RlLCBhbmQgY2Fubm90IGJlIGhlbGRcbiAgLy8gbGlhYmxlIGZvciBhbnkgcmVhbCBvciBpbWFnaW5lZCBkYW1hZ2UgcmVzdWx0aW5nIGZyb20gaXRzIHVzZS5cbiAgLy8gVXNlcnMgb2YgdGhpcyBjb2RlIG11c3QgdmVyaWZ5IGNvcnJlY3RuZXNzIGZvciB0aGVpciBhcHBsaWNhdGlvbi5cbiAgbGV0IHduID0gMDtcbiAgbGV0IHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gIGxldCB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgIGNvbnN0IHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgY29uc3QgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgaWYgKHkxIDw9IHkpIHtcbiAgICAgIGlmICh5MiA+IHkgJiYgKHgyIC0geDEpICogKHkgLSB5MSkgLSAoeCAtIHgxKSAqICh5MiAtIHkxKSA+IDApIHtcbiAgICAgICAgd24rKztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHkyIDw9IHkgJiYgKHgyIC0geDEpICogKHkgLSB5MSkgLSAoeCAtIHgxKSAqICh5MiAtIHkxKSA8IDApIHtcbiAgICAgIHduLS07XG4gICAgfVxuICAgIHgxID0geDI7XG4gICAgeTEgPSB5MjtcbiAgfVxuICByZXR1cm4gd24gIT09IDA7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NDb250YWluc1hZKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kcyxcbiAgc3RyaWRlLFxuICB4LFxuICB5XG4pIHtcbiAgaWYgKGVuZHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICghbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbMF0sIHN0cmlkZSwgeCwgeSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDEsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgaWYgKFxuICAgICAgbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBlbmRzW2kgLSAxXSwgZW5kc1tpXSwgc3RyaWRlLCB4LCB5KVxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc3NDb250YWluc1hZKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kc3MsXG4gIHN0cmlkZSxcbiAgeCxcbiAgeVxuKSB7XG4gIGlmIChlbmRzcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZHMgPSBlbmRzc1tpXTtcbiAgICBpZiAobGluZWFyUmluZ3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudFxuICovXG5pbXBvcnQge1xuICBjb250YWluc0V4dGVudCxcbiAgY3JlYXRlRW1wdHksXG4gIGV4dGVuZEZsYXRDb29yZGluYXRlcyxcbiAgaW50ZXJzZWN0cyxcbiAgaW50ZXJzZWN0c1NlZ21lbnQsXG59IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge2ZvckVhY2ggYXMgZm9yRWFjaFNlZ21lbnR9IGZyb20gJy4vc2VnbWVudHMuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQsIGxpbmVhclJpbmdDb250YWluc1hZfSBmcm9tICcuL2NvbnRhaW5zLmpzJztcblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVTdHJpbmcoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgZXh0ZW50XG4pIHtcbiAgY29uc3QgY29vcmRpbmF0ZXNFeHRlbnQgPSBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoXG4gICAgY3JlYXRlRW1wdHkoKSxcbiAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgb2Zmc2V0LFxuICAgIGVuZCxcbiAgICBzdHJpZGVcbiAgKTtcbiAgaWYgKCFpbnRlcnNlY3RzKGV4dGVudCwgY29vcmRpbmF0ZXNFeHRlbnQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChjb250YWluc0V4dGVudChleHRlbnQsIGNvb3JkaW5hdGVzRXh0ZW50KSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChjb29yZGluYXRlc0V4dGVudFswXSA+PSBleHRlbnRbMF0gJiYgY29vcmRpbmF0ZXNFeHRlbnRbMl0gPD0gZXh0ZW50WzJdKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGNvb3JkaW5hdGVzRXh0ZW50WzFdID49IGV4dGVudFsxXSAmJiBjb29yZGluYXRlc0V4dGVudFszXSA8PSBleHRlbnRbM10pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZm9yRWFjaFNlZ21lbnQoXG4gICAgZmxhdENvb3JkaW5hdGVzLFxuICAgIG9mZnNldCxcbiAgICBlbmQsXG4gICAgc3RyaWRlLFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludDEgU3RhcnQgcG9pbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50MiBFbmQgcG9pbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBzZWdtZW50IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdCxcbiAgICAgKiAgICAgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHBvaW50MSwgcG9pbnQyKSB7XG4gICAgICByZXR1cm4gaW50ZXJzZWN0c1NlZ21lbnQoZXh0ZW50LCBwb2ludDEsIHBvaW50Mik7XG4gICAgfVxuICApO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZVN0cmluZ0FycmF5KFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kcyxcbiAgc3RyaWRlLFxuICBleHRlbnRcbikge1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBpZiAoXG4gICAgICBpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1tpXSwgc3RyaWRlLCBleHRlbnQpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgb2Zmc2V0ID0gZW5kc1tpXTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kLFxuICBzdHJpZGUsXG4gIGV4dGVudFxuKSB7XG4gIGlmIChpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoXG4gICAgbGluZWFyUmluZ0NvbnRhaW5zWFkoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBlbmQsXG4gICAgICBzdHJpZGUsXG4gICAgICBleHRlbnRbMF0sXG4gICAgICBleHRlbnRbMV1cbiAgICApXG4gICkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChcbiAgICBsaW5lYXJSaW5nQ29udGFpbnNYWShcbiAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgIG9mZnNldCxcbiAgICAgIGVuZCxcbiAgICAgIHN0cmlkZSxcbiAgICAgIGV4dGVudFswXSxcbiAgICAgIGV4dGVudFszXVxuICAgIClcbiAgKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKFxuICAgIGxpbmVhclJpbmdDb250YWluc1hZKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZW5kLFxuICAgICAgc3RyaWRlLFxuICAgICAgZXh0ZW50WzJdLFxuICAgICAgZXh0ZW50WzFdXG4gICAgKVxuICApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoXG4gICAgbGluZWFyUmluZ0NvbnRhaW5zWFkoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBlbmQsXG4gICAgICBzdHJpZGUsXG4gICAgICBleHRlbnRbMl0sXG4gICAgICBleHRlbnRbM11cbiAgICApXG4gICkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHMsXG4gIHN0cmlkZSxcbiAgZXh0ZW50XG4pIHtcbiAgaWYgKCFpbnRlcnNlY3RzTGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1swXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChlbmRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGZvciAobGV0IGkgPSAxLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGlmIChcbiAgICAgIGxpbmVhclJpbmdDb250YWluc0V4dGVudChcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgICBlbmRzW2kgLSAxXSxcbiAgICAgICAgZW5kc1tpXSxcbiAgICAgICAgc3RyaWRlLFxuICAgICAgICBleHRlbnRcbiAgICAgIClcbiAgICApIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWludGVyc2VjdHNMaW5lU3RyaW5nKFxuICAgICAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgICAgICBlbmRzW2kgLSAxXSxcbiAgICAgICAgICBlbmRzW2ldLFxuICAgICAgICAgIHN0cmlkZSxcbiAgICAgICAgICBleHRlbnRcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nTXVsdGlBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHNzLFxuICBzdHJpZGUsXG4gIGV4dGVudFxuKSB7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBlbmRzID0gZW5kc3NbaV07XG4gICAgaWYgKFxuICAgICAgaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBleHRlbnQpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2VnbWVudHNcbiAqL1xuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FsbHMgYGNhbGxiYWNrYCBmb3IgZWFjaCBzZWdtZW50IG9mIHRoZSBmbGF0IGNvb3JkaW5hdGVzXG4gKiBhcnJheS4gSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYSB0cnV0aHkgdmFsdWUgdGhlIGZ1bmN0aW9uIHJldHVybnMgdGhhdFxuICogdmFsdWUgaW1tZWRpYXRlbHkuIE90aGVyd2lzZSB0aGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlLCBpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBUfSBjYWxsYmFjayBGdW5jdGlvblxuICogICAgIGNhbGxlZCBmb3IgZWFjaCBzZWdtZW50LlxuICogQHJldHVybiB7VHxib29sZWFufSBWYWx1ZS5cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY2FsbGJhY2spIHtcbiAgbGV0IHJldDtcbiAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgIHJldCA9IGNhbGxiYWNrKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLnNsaWNlKG9mZnNldCAtIHN0cmlkZSwgb2Zmc2V0KSxcbiAgICAgIGZsYXRDb29yZGluYXRlcy5zbGljZShvZmZzZXQsIG9mZnNldCArIHN0cmlkZSlcbiAgICApO1xuICAgIGlmIChyZXQpIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9oYXNcbiAqL1xuXG5jb25zdCB1YSA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBuYXZpZ2F0b3IudXNlckFnZW50ICE9PSAndW5kZWZpbmVkJ1xuICAgID8gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpXG4gICAgOiAnJztcblxuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggRmlyZWZveCBhcyBicm93c2VyLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBGSVJFRk9YID0gdWEuaW5jbHVkZXMoJ2ZpcmVmb3gnKTtcblxuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggU2FmYXJpIGFzIGJyb3dzZXIuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IFNBRkFSSSA9IHVhLmluY2x1ZGVzKCdzYWZhcmknKSAmJiAhdWEuaW5jbHVkZXMoJ2Nocm9tJyk7XG5cbi8qKlxuICogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTIzNzkwNlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBTQUZBUklfQlVHXzIzNzkwNiA9XG4gIFNBRkFSSSAmJlxuICAodWEuaW5jbHVkZXMoJ3ZlcnNpb24vMTUuNCcpIHx8XG4gICAgL2NwdSAob3N8aXBob25lIG9zKSAxNV80IGxpa2UgbWFjIG9zIHgvLnRlc3QodWEpKTtcblxuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggYSBXZWJLaXQgZW5naW5lLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBXRUJLSVQgPSB1YS5pbmNsdWRlcygnd2Via2l0JykgJiYgIXVhLmluY2x1ZGVzKCdlZGdlJyk7XG5cbi8qKlxuICogVXNlciBhZ2VudCBzdHJpbmcgc2F5cyB3ZSBhcmUgZGVhbGluZyB3aXRoIGEgTWFjIGFzIHBsYXRmb3JtLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBNQUMgPSB1YS5pbmNsdWRlcygnbWFjaW50b3NoJyk7XG5cbi8qKlxuICogVGhlIHJhdGlvIGJldHdlZW4gcGh5c2ljYWwgcGl4ZWxzIGFuZCBkZXZpY2UtaW5kZXBlbmRlbnQgcGl4ZWxzXG4gKiAoZGlwcykgb24gdGhlIGRldmljZSAoYHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvYCkuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBERVZJQ0VfUElYRUxfUkFUSU8gPVxuICB0eXBlb2YgZGV2aWNlUGl4ZWxSYXRpbyAhPT0gJ3VuZGVmaW5lZCcgPyBkZXZpY2VQaXhlbFJhdGlvIDogMTtcblxuLyoqXG4gKiBUaGUgZXhlY3V0aW9uIGNvbnRleHQgaXMgYSB3b3JrZXIgd2l0aCBPZmZzY3JlZW5DYW52YXMgYXZhaWxhYmxlLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTID1cbiAgdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAndW5kZWZpbmVkJyAmJlxuICB0eXBlb2YgT2Zmc2NyZWVuQ2FudmFzICE9PSAndW5kZWZpbmVkJyAmJlxuICBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGU7IC8vZXNsaW50LWRpc2FibGUtbGluZVxuXG4vKipcbiAqIEltYWdlLnByb3RvdHlwZS5kZWNvZGUoKSBpcyBzdXBwb3J0ZWQuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IElNQUdFX0RFQ09ERSA9XG4gIHR5cGVvZiBJbWFnZSAhPT0gJ3VuZGVmaW5lZCcgJiYgSW1hZ2UucHJvdG90eXBlLmRlY29kZTtcblxuLyoqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IFBBU1NJVkVfRVZFTlRfTElTVEVORVJTID0gKGZ1bmN0aW9uICgpIHtcbiAgbGV0IHBhc3NpdmUgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICBwYXNzaXZlID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignXycsIG51bGwsIG9wdGlvbnMpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdfJywgbnVsbCwgb3B0aW9ucyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gcGFzc2l2ZSBub3Qgc3VwcG9ydGVkXG4gIH1cbiAgcmV0dXJuIHBhc3NpdmU7XG59KSgpO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0Jhc2VcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBMYXllclByb3BlcnR5IGZyb20gJy4vUHJvcGVydHkuanMnO1xuaW1wb3J0IHthYnN0cmFjdH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcblxuLyoqXG4gKiBBIGNzcyBjb2xvciwgb3IgYSBmdW5jdGlvbiBjYWxsZWQgd2l0aCBhIHZpZXcgcmVzb2x1dGlvbiByZXR1cm5pbmcgYSBjc3MgY29sb3IuXG4gKlxuICogQHR5cGVkZWYge3N0cmluZ3xmdW5jdGlvbihudW1iZXIpOnN0cmluZ30gQmFja2dyb3VuZENvbG9yXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6ZXh0ZW50J3wnY2hhbmdlOm1heFJlc29sdXRpb24nfCdjaGFuZ2U6bWF4Wm9vbSd8XG4gKiAgICAnY2hhbmdlOm1pblJlc29sdXRpb24nfCdjaGFuZ2U6bWluWm9vbSd8J2NoYW5nZTpvcGFjaXR5J3wnY2hhbmdlOnZpc2libGUnfCdjaGFuZ2U6ekluZGV4J30gQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc1xuICovXG5cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPEJhc2VMYXllck9iamVjdEV2ZW50VHlwZXMsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8QmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlcywgUmV0dXJuPn0gQmFzZUxheWVyT25TaWduYXR1cmVcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1sYXllciddIEEgQ1NTIGNsYXNzIG5hbWUgdG8gc2V0IHRvIHRoZSBsYXllciBlbGVtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge0JhY2tncm91bmRDb2xvcn0gW2JhY2tncm91bmRdIEJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBsYXllci4gSWYgbm90IHNwZWNpZmllZCwgbm8gYmFja2dyb3VuZFxuICogd2lsbCBiZSByZW5kZXJlZC5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IFtwcm9wZXJ0aWVzXSBBcmJpdHJhcnkgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzLiBDYW4gYmUgYWNjZXNzZWQgd2l0aCBgI2dldCgpYCBhbmQgYCNzZXQoKWAuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBOb3RlIHRoYXQgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2V+QmFzZUxheWVyfSBhbmQgYWxsIGl0cyBzdWJjbGFzc2VzLCBhbnkgcHJvcGVydHkgc2V0IGluXG4gKiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fSBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0LCBzb1xuICogaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAYXBpXG4gKi9cbmNsYXNzIEJhc2VMYXllciBleHRlbmRzIEJhc2VPYmplY3Qge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIExheWVyIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7QmFzZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbjtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7QmFzZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbmNlO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtCYXNlTGF5ZXJPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgKi9cbiAgICB0aGlzLnVuO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0JhY2tncm91bmRDb2xvcnxmYWxzZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYmFja2dyb3VuZF8gPSBvcHRpb25zLmJhY2tncm91bmQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICovXG4gICAgY29uc3QgcHJvcGVydGllcyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5wcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuICAgICAgZGVsZXRlIHByb3BlcnRpZXMucHJvcGVydGllcztcbiAgICAgIE9iamVjdC5hc3NpZ24ocHJvcGVydGllcywgb3B0aW9ucy5wcm9wZXJ0aWVzKTtcbiAgICB9XG5cbiAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuT1BBQ0lUWV0gPVxuICAgICAgb3B0aW9ucy5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9wYWNpdHkgOiAxO1xuICAgIGFzc2VydCh0eXBlb2YgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk9QQUNJVFldID09PSAnbnVtYmVyJywgNjQpOyAvLyBMYXllciBvcGFjaXR5IG11c3QgYmUgYSBudW1iZXJcblxuICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5WSVNJQkxFXSA9XG4gICAgICBvcHRpb25zLnZpc2libGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudmlzaWJsZSA6IHRydWU7XG4gICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5LlpfSU5ERVhdID0gb3B0aW9ucy56SW5kZXg7XG4gICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk1BWF9SRVNPTFVUSU9OXSA9XG4gICAgICBvcHRpb25zLm1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4UmVzb2x1dGlvbiA6IEluZmluaXR5O1xuICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTl0gPVxuICAgICAgb3B0aW9ucy5taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblJlc29sdXRpb24gOiAwO1xuICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NSU5fWk9PTV0gPVxuICAgICAgb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiAtSW5maW5pdHk7XG4gICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk1BWF9aT09NXSA9XG4gICAgICBvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4Wm9vbSA6IEluZmluaXR5O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuY2xhc3NOYW1lXyA9XG4gICAgICBwcm9wZXJ0aWVzLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gcHJvcGVydGllcy5jbGFzc05hbWUgOiAnb2wtbGF5ZXInO1xuICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmNsYXNzTmFtZTtcblxuICAgIHRoaXMuc2V0UHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zdGF0ZV8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgYmFja2dyb3VuZCBmb3IgdGhpcyBsYXllci5cbiAgICogQHJldHVybiB7QmFja2dyb3VuZENvbG9yfGZhbHNlfSBMYXllciBiYWNrZ3JvdW5kLlxuICAgKi9cbiAgZ2V0QmFja2dyb3VuZCgpIHtcbiAgICByZXR1cm4gdGhpcy5iYWNrZ3JvdW5kXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IENTUyBjbGFzcyBuYW1lLlxuICAgKi9cbiAgZ2V0Q2xhc3NOYW1lKCkge1xuICAgIHJldHVybiB0aGlzLmNsYXNzTmFtZV87XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgaXMgbm90IG1lYW50IHRvIGJlIGNhbGxlZCBieSBsYXllcnMgb3IgbGF5ZXIgcmVuZGVyZXJzIGJlY2F1c2UgdGhlIHN0YXRlXG4gICAqIGlzIGluY29ycmVjdCBpZiB0aGUgbGF5ZXIgaXMgaW5jbHVkZWQgaW4gYSBsYXllciBncm91cC5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbbWFuYWdlZF0gTGF5ZXIgaXMgbWFuYWdlZC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX0gTGF5ZXIgc3RhdGUuXG4gICAqL1xuICBnZXRMYXllclN0YXRlKG1hbmFnZWQpIHtcbiAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGV9ICovXG4gICAgY29uc3Qgc3RhdGUgPVxuICAgICAgdGhpcy5zdGF0ZV8gfHxcbiAgICAgIC8qKiBAdHlwZSB7P30gKi8gKHtcbiAgICAgICAgbGF5ZXI6IHRoaXMsXG4gICAgICAgIG1hbmFnZWQ6IG1hbmFnZWQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBtYW5hZ2VkLFxuICAgICAgfSk7XG4gICAgY29uc3QgekluZGV4ID0gdGhpcy5nZXRaSW5kZXgoKTtcbiAgICBzdGF0ZS5vcGFjaXR5ID0gY2xhbXAoTWF0aC5yb3VuZCh0aGlzLmdldE9wYWNpdHkoKSAqIDEwMCkgLyAxMDAsIDAsIDEpO1xuICAgIHN0YXRlLnZpc2libGUgPSB0aGlzLmdldFZpc2libGUoKTtcbiAgICBzdGF0ZS5leHRlbnQgPSB0aGlzLmdldEV4dGVudCgpO1xuICAgIHN0YXRlLnpJbmRleCA9IHpJbmRleCA9PT0gdW5kZWZpbmVkICYmICFzdGF0ZS5tYW5hZ2VkID8gSW5maW5pdHkgOiB6SW5kZXg7XG4gICAgc3RhdGUubWF4UmVzb2x1dGlvbiA9IHRoaXMuZ2V0TWF4UmVzb2x1dGlvbigpO1xuICAgIHN0YXRlLm1pblJlc29sdXRpb24gPSBNYXRoLm1heCh0aGlzLmdldE1pblJlc29sdXRpb24oKSwgMCk7XG4gICAgc3RhdGUubWluWm9vbSA9IHRoaXMuZ2V0TWluWm9vbSgpO1xuICAgIHN0YXRlLm1heFpvb20gPSB0aGlzLmdldE1heFpvb20oKTtcbiAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuXG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IFthcnJheV0gQXJyYXkgb2YgbGF5ZXJzICh0byBiZVxuICAgKiAgICAgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAqL1xuICBnZXRMYXllcnNBcnJheShhcnJheSkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBbc3RhdGVzXSBPcHRpb25hbCBsaXN0IG9mIGxheWVyXG4gICAqICAgICBzdGF0ZXMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IExpc3Qgb2YgbGF5ZXIgc3RhdGVzLlxuICAgKi9cbiAgZ2V0TGF5ZXJTdGF0ZXNBcnJheShzdGF0ZXMpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHtAbGluayBtb2R1bGU6b2wvZXh0ZW50fkV4dGVudCBleHRlbnR9IG9mIHRoZSBsYXllciBvciBgdW5kZWZpbmVkYCBpZiBpdFxuICAgKiB3aWxsIGJlIHZpc2libGUgcmVnYXJkbGVzcyBvZiBleHRlbnQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSBUaGUgbGF5ZXIgZXh0ZW50LlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRFeHRlbnQoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudHx1bmRlZmluZWR9ICovIChcbiAgICAgIHRoaXMuZ2V0KExheWVyUHJvcGVydHkuRVhURU5UKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRNYXhSZXNvbHV0aW9uKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT04pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE1pblJlc29sdXRpb24oKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTikpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbWluaW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0TWluWm9vbSgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1JTl9aT09NKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRNYXhab29tKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUFYX1pPT00pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyIChiZXR3ZWVuIDAgYW5kIDEpLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBvcGFjaXR5IG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0T3BhY2l0eSgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk9QQUNJVFkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5TdGF0ZX0gU291cmNlIHN0YXRlLlxuICAgKi9cbiAgZ2V0U291cmNlU3RhdGUoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllciAoYHRydWVgIG9yIGBmYWxzZWApLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFZpc2libGUoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuVklTSUJMRSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIsIHdoaWNoIGlzIHVzZWQgdG8gb3JkZXIgbGF5ZXJzIGJlZm9yZVxuICAgKiByZW5kZXJpbmcuIFRoZSBkZWZhdWx0IFotaW5kZXggaXMgMC5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFpJbmRleCgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LlpfSU5ERVgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgKiBAcGFyYW0ge0JhY2tncm91bmRDb2xvcn0gW2JhY2tncm91bmRdIEJhY2tncm91bmQgY29sb3IuXG4gICAqL1xuICBzZXRCYWNrZ3JvdW5kKGJhY2tncm91bmQpIHtcbiAgICB0aGlzLmJhY2tncm91bmRfID0gYmFja2dyb3VuZDtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGV4dGVudCBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS4gIElmIGB1bmRlZmluZWRgLCB0aGUgbGF5ZXJcbiAgICogd2lsbCBiZSB2aXNpYmxlIGF0IGFsbCBleHRlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSBleHRlbnQgVGhlIGV4dGVudCBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldEV4dGVudChleHRlbnQpIHtcbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5LkVYVEVOVCwgZXh0ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG1heGltdW0gcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldE1heFJlc29sdXRpb24obWF4UmVzb2x1dGlvbikge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT04sIG1heFJlc29sdXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgbWluaW11bSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWluUmVzb2x1dGlvbiBUaGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgc2V0TWluUmVzb2x1dGlvbihtaW5SZXNvbHV0aW9uKSB7XG4gICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTiwgbWluUmVzb2x1dGlvbik7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBtYXhpbXVtIHpvb20gKGV4Y2x1c2l2ZSkgYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuXG4gICAqIE5vdGUgdGhhdCB0aGUgem9vbSBsZXZlbHMgZm9yIGxheWVyIHZpc2liaWxpdHkgYXJlIGJhc2VkIG9uIHRoZVxuICAgKiB2aWV3IHpvb20gbGV2ZWwsIHdoaWNoIG1heSBiZSBkaWZmZXJlbnQgZnJvbSBhIHRpbGUgc291cmNlIHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhab29tIFRoZSBtYXhpbXVtIHpvb20gb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRNYXhab29tKG1heFpvb20pIHtcbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1BWF9aT09NLCBtYXhab29tKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG1pbmltdW0gem9vbSAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICogTm90ZSB0aGF0IHRoZSB6b29tIGxldmVscyBmb3IgbGF5ZXIgdmlzaWJpbGl0eSBhcmUgYmFzZWQgb24gdGhlXG4gICAqIHZpZXcgem9vbSBsZXZlbCwgd2hpY2ggbWF5IGJlIGRpZmZlcmVudCBmcm9tIGEgdGlsZSBzb3VyY2Ugem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pblpvb20gVGhlIG1pbmltdW0gem9vbSBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldE1pblpvb20obWluWm9vbSkge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUlOX1pPT00sIG1pblpvb20pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIsIGFsbG93ZWQgdmFsdWVzIHJhbmdlIGZyb20gMCB0byAxLlxuICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBUaGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldE9wYWNpdHkob3BhY2l0eSkge1xuICAgIGFzc2VydCh0eXBlb2Ygb3BhY2l0eSA9PT0gJ251bWJlcicsIDY0KTsgLy8gTGF5ZXIgb3BhY2l0eSBtdXN0IGJlIGEgbnVtYmVyXG4gICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZLCBvcGFjaXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyIChgdHJ1ZWAgb3IgYGZhbHNlYCkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmlzaWJsZSBUaGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFZpc2libGUodmlzaWJsZSkge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuVklTSUJMRSwgdmlzaWJsZSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IFotaW5kZXggb2YgdGhlIGxheWVyLCB3aGljaCBpcyB1c2VkIHRvIG9yZGVyIGxheWVycyBiZWZvcmUgcmVuZGVyaW5nLlxuICAgKiBUaGUgZGVmYXVsdCBaLWluZGV4IGlzIDAuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6aW5kZXggVGhlIHotaW5kZXggb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRaSW5kZXgoemluZGV4KSB7XG4gICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5aX0lOREVYLCB6aW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwLlxuICAgKi9cbiAgZGlzcG9zZUludGVybmFsKCkge1xuICAgIGlmICh0aGlzLnN0YXRlXykge1xuICAgICAgdGhpcy5zdGF0ZV8ubGF5ZXIgPSBudWxsO1xuICAgICAgdGhpcy5zdGF0ZV8gPSBudWxsO1xuICAgIH1cbiAgICBzdXBlci5kaXNwb3NlSW50ZXJuYWwoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlTGF5ZXI7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvTGF5ZXJcbiAqL1xuaW1wb3J0IEJhc2VMYXllciBmcm9tICcuL0Jhc2UuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBMYXllclByb3BlcnR5IGZyb20gJy4vUHJvcGVydHkuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBWaWV3IGZyb20gJy4uL1ZpZXcuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtpbnRlcnNlY3RzfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlKTpIVE1MRWxlbWVudH0gUmVuZGVyRnVuY3Rpb25cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHsnc291cmNlcmVhZHknfCdjaGFuZ2U6c291cmNlJ30gTGF5ZXJFdmVudFR5cGVcbiAqL1xuXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgICBMYXllckV2ZW50VHlwZSwgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlXCIpLkxheWVyUmVuZGVyRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50XCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfExheWVyRXZlbnRUeXBlfFxuICogICAgIGltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGVcIikuTGF5ZXJSZW5kZXJFdmVudFR5cGVzLCBSZXR1cm4+fSBMYXllck9uU2lnbmF0dXJlXG4gKi9cblxuLyoqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gW1NvdXJjZVR5cGU9aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5kZWZhdWx0XVxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7U291cmNlVHlwZX0gW3NvdXJjZV0gU291cmNlIGZvciB0aGlzIGxheWVyLiAgSWYgbm90IHByb3ZpZGVkIHRvIHRoZSBjb25zdHJ1Y3RvcixcbiAqIHRoZSBzb3VyY2UgY2FuIGJlIHNldCBieSBjYWxsaW5nIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIjc2V0U291cmNlIGxheWVyLnNldFNvdXJjZShzb3VyY2UpfSBhZnRlclxuICogY29uc3RydWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdHxudWxsfSBbbWFwXSBNYXAuXG4gKiBAcHJvcGVydHkge1JlbmRlckZ1bmN0aW9ufSBbcmVuZGVyXSBSZW5kZXIgZnVuY3Rpb24uIFRha2VzIHRoZSBmcmFtZSBzdGF0ZSBhcyBpbnB1dCBhbmQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGFuXG4gKiBIVE1MIGVsZW1lbnQuIFdpbGwgb3ZlcndyaXRlIHRoZSBkZWZhdWx0IHJlbmRlcmluZyBmb3IgdGhlIGxheWVyLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gW3Byb3BlcnRpZXNdIEFyYml0cmFyeSBvYnNlcnZhYmxlIHByb3BlcnRpZXMuIENhbiBiZSBhY2Nlc3NlZCB3aXRoIGAjZ2V0KClgIGFuZCBgI3NldCgpYC5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LCB0aGUgdmFsdWUgaXMgcm91bmRlZCB0byB0d28gZGlnaXRzIHRvIGFwcGVhciBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gdmlzaWJsZSBWaXNpYmxlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBtYW5hZ2VkIE1hbmFnZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIEV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB6SW5kZXggWkluZGV4LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4aW11bSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluaW11bSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1pblpvb20gTWluaW11bSB6b29tLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFpvb20gTWF4aW11bSB6b29tLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmcm9tIHdoaWNoIGFsbCBsYXllciB0eXBlcyBhcmUgZGVyaXZlZC4gVGhpcyBzaG91bGQgb25seSBiZSBpbnN0YW50aWF0ZWRcbiAqIGluIHRoZSBjYXNlIHdoZXJlIGEgY3VzdG9tIGxheWVyIGlzIGFkZGVkIHRvIHRoZSBtYXAgd2l0aCBhIGN1c3RvbSBgcmVuZGVyYCBmdW5jdGlvbi5cbiAqIFN1Y2ggYSBmdW5jdGlvbiBjYW4gYmUgc3BlY2lmaWVkIGluIHRoZSBgb3B0aW9uc2Agb2JqZWN0LCBhbmQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGFuIEhUTUwgZWxlbWVudC5cbiAqXG4gKiBBIHZpc3VhbCByZXByZXNlbnRhdGlvbiBvZiByYXN0ZXIgb3IgdmVjdG9yIG1hcCBkYXRhLlxuICogTGF5ZXJzIGdyb3VwIHRvZ2V0aGVyIHRob3NlIHByb3BlcnRpZXMgdGhhdCBwZXJ0YWluIHRvIGhvdyB0aGUgZGF0YSBpcyB0byBiZVxuICogZGlzcGxheWVkLCBpcnJlc3BlY3RpdmUgb2YgdGhlIHNvdXJjZSBvZiB0aGF0IGRhdGEuXG4gKlxuICogTGF5ZXJzIGFyZSB1c3VhbGx5IGFkZGVkIHRvIGEgbWFwIHdpdGggW21hcC5hZGRMYXllcigpXXtAbGluayBpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdCNhZGRMYXllcn0uXG4gKiBDb21wb25lbnRzIGxpa2Uge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmF3fkRyYXd9IHVzZSB1bm1hbmFnZWQgbGF5ZXJzXG4gKiBpbnRlcm5hbGx5LiBUaGVzZSB1bm1hbmFnZWQgbGF5ZXJzIGFyZSBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcCB1c2luZ1xuICogW2xheWVyLnNldE1hcCgpXXtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIjc2V0TWFwfSBpbnN0ZWFkLlxuICpcbiAqIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyBmaXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKiBBIGBzb3VyY2VyZWFkeWAgZXZlbnQgaXMgZmlyZWQgd2hlbiB0aGUgbGF5ZXIncyBzb3VyY2UgaXMgcmVhZHkuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4uL3JlbmRlci9FdmVudC5qc1wiKS5SZW5kZXJFdmVudCNwcmVyZW5kZXJcbiAqIEBmaXJlcyBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnQuanNcIikuUmVuZGVyRXZlbnQjcG9zdHJlbmRlclxuICogQGZpcmVzIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5CYXNlRXZlbnQjc291cmNlcmVhZHlcbiAqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gW1NvdXJjZVR5cGU9aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5kZWZhdWx0XVxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9yZW5kZXJlci9MYXllci5qc1wiKS5kZWZhdWx0fSBbUmVuZGVyZXJUeXBlPWltcG9ydChcIi4uL3JlbmRlcmVyL0xheWVyLmpzXCIpLmRlZmF1bHRdXG4gKiBAYXBpXG4gKi9cbmNsYXNzIExheWVyIGV4dGVuZHMgQmFzZUxheWVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uczxTb3VyY2VUeXBlPn0gb3B0aW9ucyBMYXllciBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIGNvbnN0IGJhc2VPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgZGVsZXRlIGJhc2VPcHRpb25zLnNvdXJjZTtcblxuICAgIHN1cGVyKGJhc2VPcHRpb25zKTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7TGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub25jZTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7TGF5ZXJPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgKi9cbiAgICB0aGlzLnVuO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICovXG4gICAgdGhpcy5tYXBQcmVjb21wb3NlS2V5XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgKi9cbiAgICB0aGlzLm1hcFJlbmRlcktleV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICovXG4gICAgdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1JlbmRlcmVyVHlwZX1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVyXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuc291cmNlUmVhZHlfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZCA9IGZhbHNlO1xuXG4gICAgLy8gT3ZlcndyaXRlIGRlZmF1bHQgcmVuZGVyIG1ldGhvZCB3aXRoIGEgY3VzdG9tIG9uZVxuICAgIGlmIChvcHRpb25zLnJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5tYXApIHtcbiAgICAgIHRoaXMuc2V0TWFwKG9wdGlvbnMubWFwKTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKFxuICAgICAgTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UsXG4gICAgICB0aGlzLmhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlX1xuICAgICk7XG5cbiAgICBjb25zdCBzb3VyY2UgPSBvcHRpb25zLnNvdXJjZVxuICAgICAgPyAvKiogQHR5cGUge1NvdXJjZVR5cGV9ICovIChvcHRpb25zLnNvdXJjZSlcbiAgICAgIDogbnVsbDtcbiAgICB0aGlzLnNldFNvdXJjZShzb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gW2FycmF5XSBBcnJheSBvZiBsYXllcnMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gQXJyYXkgb2YgbGF5ZXJzLlxuICAgKi9cbiAgZ2V0TGF5ZXJzQXJyYXkoYXJyYXkpIHtcbiAgICBhcnJheSA9IGFycmF5ID8gYXJyYXkgOiBbXTtcbiAgICBhcnJheS5wdXNoKHRoaXMpO1xuICAgIHJldHVybiBhcnJheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBbc3RhdGVzXSBPcHRpb25hbCBsaXN0IG9mIGxheWVyIHN0YXRlcyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gTGlzdCBvZiBsYXllciBzdGF0ZXMuXG4gICAqL1xuICBnZXRMYXllclN0YXRlc0FycmF5KHN0YXRlcykge1xuICAgIHN0YXRlcyA9IHN0YXRlcyA/IHN0YXRlcyA6IFtdO1xuICAgIHN0YXRlcy5wdXNoKHRoaXMuZ2V0TGF5ZXJTdGF0ZSgpKTtcbiAgICByZXR1cm4gc3RhdGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGF5ZXIgc291cmNlLlxuICAgKiBAcmV0dXJuIHtTb3VyY2VUeXBlfG51bGx9IFRoZSBsYXllciBzb3VyY2UgKG9yIGBudWxsYCBpZiBub3QgeWV0IHNldCkuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFNvdXJjZSgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtTb3VyY2VUeXBlfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UpKSB8fCBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1NvdXJjZVR5cGV8bnVsbH0gVGhlIHNvdXJjZSBiZWluZyByZW5kZXJlZC5cbiAgICovXG4gIGdldFJlbmRlclNvdXJjZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTb3VyY2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlLmpzXCIpLlN0YXRlfSBTb3VyY2Ugc3RhdGUuXG4gICAqL1xuICBnZXRTb3VyY2VTdGF0ZSgpIHtcbiAgICBjb25zdCBzb3VyY2UgPSB0aGlzLmdldFNvdXJjZSgpO1xuICAgIHJldHVybiAhc291cmNlID8gJ3VuZGVmaW5lZCcgOiBzb3VyY2UuZ2V0U3RhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlU291cmNlQ2hhbmdlXygpIHtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICBpZiAodGhpcy5zb3VyY2VSZWFkeV8gfHwgdGhpcy5nZXRTb3VyY2UoKS5nZXRTdGF0ZSgpICE9PSAncmVhZHknKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc291cmNlUmVhZHlfID0gdHJ1ZTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ3NvdXJjZXJlYWR5Jyk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlXygpIHtcbiAgICBpZiAodGhpcy5zb3VyY2VDaGFuZ2VLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMuc291cmNlQ2hhbmdlS2V5Xyk7XG4gICAgICB0aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnNvdXJjZVJlYWR5XyA9IGZhbHNlO1xuICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbGlzdGVuKFxuICAgICAgICBzb3VyY2UsXG4gICAgICAgIEV2ZW50VHlwZS5DSEFOR0UsXG4gICAgICAgIHRoaXMuaGFuZGxlU291cmNlQ2hhbmdlXyxcbiAgICAgICAgdGhpc1xuICAgICAgKTtcbiAgICAgIGlmIChzb3VyY2UuZ2V0U3RhdGUoKSA9PT0gJ3JlYWR5Jykge1xuICAgICAgICB0aGlzLnNvdXJjZVJlYWR5XyA9IHRydWU7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCgnc291cmNlcmVhZHknKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWxcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PGltcG9ydChcIi4uL0ZlYXR1cmVcIikuRmVhdHVyZUxpa2U+Pn0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGhcbiAgICogYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAqL1xuICBnZXRGZWF0dXJlcyhwaXhlbCkge1xuICAgIGlmICghdGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZ2V0RmVhdHVyZXMocGl4ZWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWxcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgKiBAcmV0dXJuIHtVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5fEZsb2F0MzJBcnJheXxEYXRhVmlld3xudWxsfSBQaXhlbCBkYXRhLlxuICAgKi9cbiAgZ2V0RGF0YShwaXhlbCkge1xuICAgIGlmICghdGhpcy5yZW5kZXJlcl8gfHwgIXRoaXMucmVuZGVyZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZ2V0RGF0YShwaXhlbCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGxheWVyIGlzIHZpc2libGUgaW4gdGhlIGdpdmVuIHZpZXcsIGkuZS4gd2l0aGluIGl0cyBtaW4vbWF4IHJlc29sdXRpb24gb3Igem9vbSBhbmRcbiAgICogZXh0ZW50LCBhbmQgYGdldFZpc2libGUoKWAgaXMgYHRydWVgLlxuICAgKiBAcGFyYW0ge1ZpZXd8aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5WaWV3U3RhdGVBbmRFeHRlbnR9IHZpZXcgVmlldyBvciB7QGxpbmsgaW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbGF5ZXIgaXMgdmlzaWJsZSBpbiB0aGUgY3VycmVudCB2aWV3LlxuICAgKiBAYXBpXG4gICAqL1xuICBpc1Zpc2libGUodmlldykge1xuICAgIGxldCBmcmFtZVN0YXRlO1xuICAgIGlmICh2aWV3IGluc3RhbmNlb2YgVmlldykge1xuICAgICAgZnJhbWVTdGF0ZSA9IHtcbiAgICAgICAgdmlld1N0YXRlOiB2aWV3LmdldFN0YXRlKCksXG4gICAgICAgIGV4dGVudDogdmlldy5jYWxjdWxhdGVFeHRlbnQoKSxcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYW1lU3RhdGUgPSB2aWV3O1xuICAgIH1cbiAgICBjb25zdCBsYXllckV4dGVudCA9IHRoaXMuZ2V0RXh0ZW50KCk7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZ2V0VmlzaWJsZSgpICYmXG4gICAgICBpblZpZXcodGhpcy5nZXRMYXllclN0YXRlKCksIGZyYW1lU3RhdGUudmlld1N0YXRlKSAmJlxuICAgICAgKCFsYXllckV4dGVudCB8fCBpbnRlcnNlY3RzKGxheWVyRXh0ZW50LCBmcmFtZVN0YXRlLmV4dGVudCkpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGF0dHJpYnV0aW9ucyBvZiB0aGUgc291cmNlIG9mIHRoaXMgbGF5ZXIgZm9yIHRoZSBnaXZlbiB2aWV3LlxuICAgKiBAcGFyYW0ge1ZpZXd8aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5WaWV3U3RhdGVBbmRFeHRlbnR9IHZpZXcgVmlldyBvciAge0BsaW5rIGltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfS5cbiAgICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gQXR0cmlidXRpb25zIGZvciB0aGlzIGxheWVyIGF0IHRoZSBnaXZlbiB2aWV3LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRBdHRyaWJ1dGlvbnModmlldykge1xuICAgIGlmICghdGhpcy5pc1Zpc2libGUodmlldykpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgbGV0IGdldEF0dHJpYnV0aW9ucztcbiAgICBjb25zdCBzb3VyY2UgPSB0aGlzLmdldFNvdXJjZSgpO1xuICAgIGlmIChzb3VyY2UpIHtcbiAgICAgIGdldEF0dHJpYnV0aW9ucyA9IHNvdXJjZS5nZXRBdHRyaWJ1dGlvbnMoKTtcbiAgICB9XG4gICAgaWYgKCFnZXRBdHRyaWJ1dGlvbnMpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgY29uc3QgZnJhbWVTdGF0ZSA9XG4gICAgICB2aWV3IGluc3RhbmNlb2YgVmlldyA/IHZpZXcuZ2V0Vmlld1N0YXRlQW5kRXh0ZW50KCkgOiB2aWV3O1xuICAgIGxldCBhdHRyaWJ1dGlvbnMgPSBnZXRBdHRyaWJ1dGlvbnMoZnJhbWVTdGF0ZSk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGF0dHJpYnV0aW9ucykpIHtcbiAgICAgIGF0dHJpYnV0aW9ucyA9IFthdHRyaWJ1dGlvbnNdO1xuICAgIH1cbiAgICByZXR1cm4gYXR0cmlidXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEluIGNoYXJnZSB0byBtYW5hZ2UgdGhlIHJlbmRlcmluZyBvZiB0aGUgbGF5ZXIuIE9uZSBsYXllciB0eXBlIGlzXG4gICAqIGJvdW5kZWQgd2l0aCBvbmUgbGF5ZXIgcmVuZGVyZXIuXG4gICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgVGFyZ2V0IHdoaWNoIHRoZSByZW5kZXJlciBtYXkgKGJ1dCBuZWVkIG5vdCkgdXNlXG4gICAqIGZvciByZW5kZXJpbmcgaXRzIGNvbnRlbnQuXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgcmVuZGVyZWQgZWxlbWVudC5cbiAgICovXG4gIHJlbmRlcihmcmFtZVN0YXRlLCB0YXJnZXQpIHtcbiAgICBjb25zdCBsYXllclJlbmRlcmVyID0gdGhpcy5nZXRSZW5kZXJlcigpO1xuXG4gICAgaWYgKGxheWVyUmVuZGVyZXIucHJlcGFyZUZyYW1lKGZyYW1lU3RhdGUpKSB7XG4gICAgICB0aGlzLnJlbmRlcmVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBsYXllclJlbmRlcmVyLnJlbmRlckZyYW1lKGZyYW1lU3RhdGUsIHRhcmdldCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGEgbGF5ZXIgaXMgbm90IHZpc2libGUgZHVyaW5nIGEgbWFwIHJlbmRlci5cbiAgICovXG4gIHVucmVuZGVyKCkge1xuICAgIHRoaXMucmVuZGVyZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgdXNlIGluc2lkZSB0aGUgbGlicmFyeSBvbmx5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fG51bGx9IG1hcCBNYXAuXG4gICAqL1xuICBzZXRNYXBJbnRlcm5hbChtYXApIHtcbiAgICBpZiAoIW1hcCkge1xuICAgICAgdGhpcy51bnJlbmRlcigpO1xuICAgIH1cbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1BUCwgbWFwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgdXNlIGluc2lkZSB0aGUgbGlicmFyeSBvbmx5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdHxudWxsfSBNYXAuXG4gICAqL1xuICBnZXRNYXBJbnRlcm5hbCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NQVApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGxheWVyIHRvIGJlIHJlbmRlcmVkIG9uIHRvcCBvZiBvdGhlciBsYXllcnMgb24gYSBtYXAuIFRoZSBtYXAgd2lsbFxuICAgKiBub3QgbWFuYWdlIHRoaXMgbGF5ZXIgaW4gaXRzIGxheWVycyBjb2xsZWN0aW9uLiBUaGlzXG4gICAqIGlzIHVzZWZ1bCBmb3IgdGVtcG9yYXJ5IGxheWVycy4gVG8gcmVtb3ZlIGFuIHVubWFuYWdlZCBsYXllciBmcm9tIHRoZSBtYXAsXG4gICAqIHVzZSBgI3NldE1hcChudWxsKWAuXG4gICAqXG4gICAqIFRvIGFkZCB0aGUgbGF5ZXIgdG8gYSBtYXAgYW5kIGhhdmUgaXQgbWFuYWdlZCBieSB0aGUgbWFwLCB1c2VcbiAgICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwI2FkZExheWVyfSBpbnN0ZWFkLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fG51bGx9IG1hcCBNYXAuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldE1hcChtYXApIHtcbiAgICBpZiAodGhpcy5tYXBQcmVjb21wb3NlS2V5Xykge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLm1hcFByZWNvbXBvc2VLZXlfKTtcbiAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBudWxsO1xuICAgIH1cbiAgICBpZiAoIW1hcCkge1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1hcFJlbmRlcktleV8pIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5tYXBSZW5kZXJLZXlfKTtcbiAgICAgIHRoaXMubWFwUmVuZGVyS2V5XyA9IG51bGw7XG4gICAgfVxuICAgIGlmIChtYXApIHtcbiAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBsaXN0ZW4oXG4gICAgICAgIG1hcCxcbiAgICAgICAgUmVuZGVyRXZlbnRUeXBlLlBSRUNPTVBPU0UsXG4gICAgICAgIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICBjb25zdCByZW5kZXJFdmVudCA9XG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL3JlbmRlci9FdmVudC5qc1wiKS5kZWZhdWx0fSAqLyAoZXZ0KTtcbiAgICAgICAgICBjb25zdCBsYXllclN0YXRlc0FycmF5ID0gcmVuZGVyRXZlbnQuZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgICAgICAgIGNvbnN0IGxheWVyU3RhdGUgPSB0aGlzLmdldExheWVyU3RhdGUoZmFsc2UpO1xuICAgICAgICAgIC8vIEEgbGF5ZXIgY2FuIG9ubHkgYmUgYWRkZWQgdG8gdGhlIG1hcCBvbmNlLiBVc2UgZWl0aGVyIGBsYXllci5zZXRNYXAoKWAgb3IgYG1hcC5hZGRMYXllcigpYCwgbm90IGJvdGguXG4gICAgICAgICAgYXNzZXJ0KFxuICAgICAgICAgICAgIWxheWVyU3RhdGVzQXJyYXkuc29tZShmdW5jdGlvbiAoYXJyYXlMYXllclN0YXRlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBhcnJheUxheWVyU3RhdGUubGF5ZXIgPT09IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIDY3XG4gICAgICAgICAgKTtcbiAgICAgICAgICBsYXllclN0YXRlc0FycmF5LnB1c2gobGF5ZXJTdGF0ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRoaXNcbiAgICAgICk7XG4gICAgICB0aGlzLm1hcFJlbmRlcktleV8gPSBsaXN0ZW4odGhpcywgRXZlbnRUeXBlLkNIQU5HRSwgbWFwLnJlbmRlciwgbWFwKTtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGxheWVyIHNvdXJjZS5cbiAgICogQHBhcmFtIHtTb3VyY2VUeXBlfG51bGx9IHNvdXJjZSBUaGUgbGF5ZXIgc291cmNlLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRTb3VyY2Uoc291cmNlKSB7XG4gICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UsIHNvdXJjZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSByZW5kZXJlciBmb3IgdGhpcyBsYXllci5cbiAgICogQHJldHVybiB7UmVuZGVyZXJUeXBlfG51bGx9IFRoZSBsYXllciByZW5kZXJlci5cbiAgICovXG4gIGdldFJlbmRlcmVyKCkge1xuICAgIGlmICghdGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgIHRoaXMucmVuZGVyZXJfID0gdGhpcy5jcmVhdGVSZW5kZXJlcigpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGxheWVyIGhhcyBhIHJlbmRlcmVyLlxuICAgKi9cbiAgaGFzUmVuZGVyZXIoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5yZW5kZXJlcl87XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgcmVuZGVyZXIgZm9yIHRoaXMgbGF5ZXIuXG4gICAqIEByZXR1cm4ge1JlbmRlcmVyVHlwZX0gQSBsYXllciByZW5kZXJlci5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgY3JlYXRlUmVuZGVyZXIoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAuXG4gICAqL1xuICBkaXNwb3NlSW50ZXJuYWwoKSB7XG4gICAgaWYgKHRoaXMucmVuZGVyZXJfKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyXy5kaXNwb3NlKCk7XG4gICAgICBkZWxldGUgdGhpcy5yZW5kZXJlcl87XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTb3VyY2UobnVsbCk7XG4gICAgc3VwZXIuZGlzcG9zZUludGVybmFsKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBsYXllciBpcyB2aXNpYmxlIGFuZCBpZiB0aGUgcHJvdmlkZWQgdmlldyBzdGF0ZVxuICogaGFzIHJlc29sdXRpb24gYW5kIHpvb20gbGV2ZWxzIHRoYXQgYXJlIGluIHJhbmdlIG9mIHRoZSBsYXllcidzIG1pbi9tYXguXG4gKiBAcGFyYW0ge1N0YXRlfSBsYXllclN0YXRlIExheWVyIHN0YXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLlN0YXRlfSB2aWV3U3RhdGUgVmlldyBzdGF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBsYXllciBpcyB2aXNpYmxlIGF0IHRoZSBnaXZlbiB2aWV3IHN0YXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkge1xuICBpZiAoIWxheWVyU3RhdGUudmlzaWJsZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCByZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG4gIGlmIChcbiAgICByZXNvbHV0aW9uIDwgbGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uIHx8XG4gICAgcmVzb2x1dGlvbiA+PSBsYXllclN0YXRlLm1heFJlc29sdXRpb25cbiAgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHpvb20gPSB2aWV3U3RhdGUuem9vbTtcbiAgcmV0dXJuIHpvb20gPiBsYXllclN0YXRlLm1pblpvb20gJiYgem9vbSA8PSBsYXllclN0YXRlLm1heFpvb207XG59XG5cbmV4cG9ydCBkZWZhdWx0IExheWVyO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1Byb3BlcnR5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIE9QQUNJVFk6ICdvcGFjaXR5JyxcbiAgVklTSUJMRTogJ3Zpc2libGUnLFxuICBFWFRFTlQ6ICdleHRlbnQnLFxuICBaX0lOREVYOiAnekluZGV4JyxcbiAgTUFYX1JFU09MVVRJT046ICdtYXhSZXNvbHV0aW9uJyxcbiAgTUlOX1JFU09MVVRJT046ICdtaW5SZXNvbHV0aW9uJyxcbiAgTUFYX1pPT006ICdtYXhab29tJyxcbiAgTUlOX1pPT006ICdtaW5ab29tJyxcbiAgU09VUkNFOiAnc291cmNlJyxcbiAgTUFQOiAnbWFwJyxcbn07XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvVGlsZVByb3BlcnR5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIFBSRUxPQUQ6ICdwcmVsb2FkJyxcbiAgVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1I6ICd1c2VJbnRlcmltVGlsZXNPbkVycm9yJyxcbn07XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvQmFzZVRpbGVcbiAqL1xuaW1wb3J0IExheWVyIGZyb20gJy4vTGF5ZXIuanMnO1xuaW1wb3J0IFRpbGVQcm9wZXJ0eSBmcm9tICcuL1RpbGVQcm9wZXJ0eS5qcyc7XG5cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfFxuICogICAgIGltcG9ydChcIi4vTGF5ZXIuanNcIikuTGF5ZXJFdmVudFR5cGV8J2NoYW5nZTpwcmVsb2FkJ3wnY2hhbmdlOnVzZUludGVyaW1UaWxlc09uRXJyb3InLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGVcIikuTGF5ZXJSZW5kZXJFdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi9CYXNlXCIpLkJhc2VMYXllck9iamVjdEV2ZW50VHlwZXN8XG4gKiAgIGltcG9ydChcIi4vTGF5ZXIuanNcIikuTGF5ZXJFdmVudFR5cGV8J2NoYW5nZTpwcmVsb2FkJ3wnY2hhbmdlOnVzZUludGVyaW1UaWxlc09uRXJyb3InfGltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGVcIikuTGF5ZXJSZW5kZXJFdmVudFR5cGVzLCBSZXR1cm4+fSBCYXNlVGlsZUxheWVyT25TaWduYXR1cmVcbiAqL1xuXG4vKipcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZVNvdXJjZVR5cGVcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1sYXllciddIEEgQ1NTIGNsYXNzIG5hbWUgdG8gc2V0IHRvIHRoZSBsYXllciBlbGVtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3ByZWxvYWQ9MF0gUHJlbG9hZC4gTG9hZCBsb3ctcmVzb2x1dGlvbiB0aWxlcyB1cCB0byBgcHJlbG9hZGAgbGV2ZWxzLiBgMGBcbiAqIG1lYW5zIG5vIHByZWxvYWRpbmcuXG4gKiBAcHJvcGVydHkge1RpbGVTb3VyY2VUeXBlfSBbc291cmNlXSBTb3VyY2UgZm9yIHRoaXMgbGF5ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fSBbbWFwXSBTZXRzIHRoZSBsYXllciBhcyBvdmVybGF5IG9uIGEgbWFwLiBUaGUgbWFwIHdpbGwgbm90IG1hbmFnZVxuICogdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgbGF5ZXIgd2lsbCBiZSByZW5kZXJlZCBvbiB0b3AuIFRoaXMgaXMgdXNlZnVsIGZvclxuICogdGVtcG9yYXJ5IGxheWVycy4gVGhlIHN0YW5kYXJkIHdheSB0byBhZGQgYSBsYXllciB0byBhIG1hcCBhbmQgaGF2ZSBpdCBtYW5hZ2VkIGJ5IHRoZSBtYXAgaXMgdG9cbiAqIHVzZSB7QGxpbmsgaW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHQjYWRkTGF5ZXIgbWFwLmFkZExheWVyKCl9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlSW50ZXJpbVRpbGVzT25FcnJvcj10cnVlXSBVc2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IFtwcm9wZXJ0aWVzXSBBcmJpdHJhcnkgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzLiBDYW4gYmUgYWNjZXNzZWQgd2l0aCBgI2dldCgpYCBhbmQgYCNzZXQoKWAuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBGb3IgbGF5ZXIgc291cmNlcyB0aGF0IHByb3ZpZGUgcHJlLXJlbmRlcmVkLCB0aWxlZCBpbWFnZXMgaW4gZ3JpZHMgdGhhdCBhcmVcbiAqIG9yZ2FuaXplZCBieSB6b29tIGxldmVscyBmb3Igc3BlY2lmaWMgcmVzb2x1dGlvbnMuXG4gKiBOb3RlIHRoYXQgYW55IHByb3BlcnR5IHNldCBpbiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fVxuICogcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdDsgZm9yIGV4YW1wbGUsIHNldHRpbmcgYHRpdGxlOiAnTXkgVGl0bGUnYCBpbiB0aGVcbiAqIG9wdGlvbnMgbWVhbnMgdGhhdCBgdGl0bGVgIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlU291cmNlVHlwZVxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9yZW5kZXJlci9MYXllci5qc1wiKS5kZWZhdWx0fSBSZW5kZXJlclR5cGVcbiAqIEBleHRlbmRzIHtMYXllcjxUaWxlU291cmNlVHlwZSwgUmVuZGVyZXJUeXBlPn1cbiAqIEBhcGlcbiAqL1xuY2xhc3MgQmFzZVRpbGVMYXllciBleHRlbmRzIExheWVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uczxUaWxlU291cmNlVHlwZT59IFtvcHRpb25zXSBUaWxlIGxheWVyIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICBjb25zdCBiYXNlT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuXG4gICAgZGVsZXRlIGJhc2VPcHRpb25zLnByZWxvYWQ7XG4gICAgZGVsZXRlIGJhc2VPcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3I7XG4gICAgc3VwZXIoYmFzZU9wdGlvbnMpO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtCYXNlVGlsZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbjtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7QmFzZVRpbGVMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub25jZTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7QmFzZVRpbGVMYXllck9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAqL1xuICAgIHRoaXMudW47XG5cbiAgICB0aGlzLnNldFByZWxvYWQob3B0aW9ucy5wcmVsb2FkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnByZWxvYWQgOiAwKTtcbiAgICB0aGlzLnNldFVzZUludGVyaW1UaWxlc09uRXJyb3IoXG4gICAgICBvcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3IgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvclxuICAgICAgICA6IHRydWVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbGV2ZWwgYXMgbnVtYmVyIHRvIHdoaWNoIHdlIHdpbGwgcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbGV2ZWwgdG8gcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0UHJlbG9hZCgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChUaWxlUHJvcGVydHkuUFJFTE9BRCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgbGV2ZWwgYXMgbnVtYmVyIHRvIHdoaWNoIHdlIHdpbGwgcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHByZWxvYWQgVGhlIGxldmVsIHRvIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFByZWxvYWQocHJlbG9hZCkge1xuICAgIHRoaXMuc2V0KFRpbGVQcm9wZXJ0eS5QUkVMT0FELCBwcmVsb2FkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHdlIHVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBVc2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcigpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAoXG4gICAgICB0aGlzLmdldChUaWxlUHJvcGVydHkuVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1IpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgd2hldGhlciB3ZSB1c2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICogQHBhcmFtIHtib29sZWFufSB1c2VJbnRlcmltVGlsZXNPbkVycm9yIFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKHVzZUludGVyaW1UaWxlc09uRXJyb3IpIHtcbiAgICB0aGlzLnNldChUaWxlUHJvcGVydHkuVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1IsIHVzZUludGVyaW1UaWxlc09uRXJyb3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBkYXRhIGZvciBhIHBpeGVsIGxvY2F0aW9uLiAgVGhlIHJldHVybiB0eXBlIGRlcGVuZHMgb24gdGhlIHNvdXJjZSBkYXRhLiAgRm9yIGltYWdlIHRpbGVzLFxuICAgKiBhIGZvdXIgZWxlbWVudCBSR0JBIGFycmF5IHdpbGwgYmUgcmV0dXJuZWQuICBGb3IgZGF0YSB0aWxlcywgdGhlIGFycmF5IGxlbmd0aCB3aWxsIG1hdGNoIHRoZVxuICAgKiBudW1iZXIgb2YgYmFuZHMgaW4gdGhlIGRhdGFzZXQuICBGb3IgcmVxdWVzdHMgb3V0c2lkZSB0aGUgbGF5ZXIgZXh0ZW50LCBgbnVsbGAgd2lsbCBiZSByZXR1cm5lZC5cbiAgICogRGF0YSBmb3IgYSBpbWFnZSB0aWxlcyBjYW4gb25seSBiZSByZXRyaWV2ZWQgaWYgdGhlIHNvdXJjZSdzIGBjcm9zc09yaWdpbmAgcHJvcGVydHkgaXMgc2V0LlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAvLyBkaXNwbGF5IGxheWVyIGRhdGEgb24gZXZlcnkgcG9pbnRlciBtb3ZlXG4gICAqIG1hcC5vbigncG9pbnRlcm1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhsYXllci5nZXREYXRhKGV2ZW50LnBpeGVsKSk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbFwiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAqIEByZXR1cm4ge1VpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXl8RmxvYXQzMkFycmF5fERhdGFWaWV3fG51bGx9IFBpeGVsIGRhdGEuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldERhdGEocGl4ZWwpIHtcbiAgICByZXR1cm4gc3VwZXIuZ2V0RGF0YShwaXhlbCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmFzZVRpbGVMYXllcjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9MYXllclxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEltYWdlU3RhdGUgZnJvbSAnLi4vSW1hZ2VTdGF0ZS5qcyc7XG5pbXBvcnQgT2JzZXJ2YWJsZSBmcm9tICcuLi9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4uL3V0aWwuanMnO1xuXG4vKipcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gTGF5ZXJUeXBlXG4gKi9cbmNsYXNzIExheWVyUmVuZGVyZXIgZXh0ZW5kcyBPYnNlcnZhYmxlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7TGF5ZXJUeXBlfSBsYXllciBMYXllci5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGxheWVyKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSByZW5kZXJlciBpcyBpbml0aWFsaXplZCBhbmQgcmVhZHkgdG8gcmVuZGVyLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucmVhZHkgPSB0cnVlO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgdGhpcy5ib3VuZEhhbmRsZUltYWdlQ2hhbmdlXyA9IHRoaXMuaGFuZGxlSW1hZ2VDaGFuZ2VfLmJpbmQodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge0xheWVyVHlwZX1cbiAgICAgKi9cbiAgICB0aGlzLmxheWVyXyA9IGxheWVyO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvRXhlY3V0b3JHcm91cFwiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMuZGVjbHV0dGVyRXhlY3V0b3JHcm91cCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQXN5bmNocm9ub3VzIGxheWVyIGxldmVsIGhpdCBkZXRlY3Rpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PGltcG9ydChcIi4uL0ZlYXR1cmVcIikuRmVhdHVyZUxpa2U+Pn0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGhcbiAgICogYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAqL1xuICBnZXRGZWF0dXJlcyhwaXhlbCkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgKiBAcmV0dXJuIHtVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5fEZsb2F0MzJBcnJheXxEYXRhVmlld3xudWxsfSBQaXhlbCBkYXRhLlxuICAgKi9cbiAgZ2V0RGF0YShwaXhlbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSB3aGV0aGVyIHJlbmRlciBzaG91bGQgYmUgY2FsbGVkLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gTGF5ZXIgaXMgcmVhZHkgdG8gYmUgcmVuZGVyZWQuXG4gICAqL1xuICBwcmVwYXJlRnJhbWUoZnJhbWVTdGF0ZSkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciB0aGUgbGF5ZXIuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgVGFyZ2V0IHRoYXQgbWF5IGJlIHVzZWQgdG8gcmVuZGVyIGNvbnRlbnQgdG8uXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgcmVuZGVyZWQgZWxlbWVudC5cbiAgICovXG4gIHJlbmRlckZyYW1lKGZyYW1lU3RhdGUsIHRhcmdldCkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59IHRpbGVzIExvb2t1cCBvZiBsb2FkZWQgdGlsZXMgYnkgem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbnx2b2lkfSBJZiBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZSBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICovXG4gIGxvYWRlZFRpbGVDYWxsYmFjayh0aWxlcywgem9vbSwgdGlsZSkge1xuICAgIGlmICghdGlsZXNbem9vbV0pIHtcbiAgICAgIHRpbGVzW3pvb21dID0ge307XG4gICAgfVxuICAgIHRpbGVzW3pvb21dW3RpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCldID0gdGlsZTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgYWRkcyBsb2FkZWQgdGlsZXMgdG8gdGhlIHRpbGUgbG9va3VwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uIG9mIHRoZSB0aWxlcy5cbiAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlXG4gICAqICAgICBjYWxsZWQgd2l0aCBhIHpvb20gbGV2ZWwgYW5kIGEgdGlsZSByYW5nZSB0byBhZGQgbG9hZGVkIHRpbGVzIHRvIHRoZSBsb29rdXAuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIoc291cmNlLCBwcm9qZWN0aW9uLCB0aWxlcykge1xuICAgIHJldHVybiAoXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0aWxlIHJhbmdlIGlzIGZ1bGx5IGxvYWRlZC5cbiAgICAgICAqL1xuICAgICAgKHpvb20sIHRpbGVSYW5nZSkgPT4ge1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9IHRoaXMubG9hZGVkVGlsZUNhbGxiYWNrLmJpbmQodGhpcywgdGlsZXMsIHpvb20pO1xuICAgICAgICByZXR1cm4gc291cmNlLmZvckVhY2hMb2FkZWRUaWxlKHByb2plY3Rpb24sIHpvb20sIHRpbGVSYW5nZSwgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdmVjdG9yLmpzXCIpLkZlYXR1cmVDYWxsYmFjazxUPn0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL01hcC5qc1wiKS5IaXRNYXRjaDxUPj59IG1hdGNoZXMgVGhlIGhpdCBkZXRlY3RlZCBtYXRjaGVzIHdpdGggdG9sZXJhbmNlLlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoXG4gICAgY29vcmRpbmF0ZSxcbiAgICBmcmFtZVN0YXRlLFxuICAgIGhpdFRvbGVyYW5jZSxcbiAgICBjYWxsYmFjayxcbiAgICBtYXRjaGVzXG4gICkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7TGF5ZXJUeXBlfSBMYXllci5cbiAgICovXG4gIGdldExheWVyKCkge1xuICAgIHJldHVybiB0aGlzLmxheWVyXztcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGFjdGlvbiBuZWNlc3NhcnkgdG8gZ2V0IHRoZSBsYXllciByZW5kZXJlZCBhZnRlciBuZXcgZm9udHMgaGF2ZSBsb2FkZWRcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBoYW5kbGVGb250c0NoYW5nZWQoKSB7fVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgY2hhbmdlcyBpbiBpbWFnZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgSW1hZ2UgY2hhbmdlIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlSW1hZ2VDaGFuZ2VfKGV2ZW50KSB7XG4gICAgY29uc3QgaW1hZ2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL0ltYWdlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgIGlmIChpbWFnZS5nZXRTdGF0ZSgpID09PSBJbWFnZVN0YXRlLkxPQURFRCkge1xuICAgICAgdGhpcy5yZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIHRoZSBpbWFnZSBpZiBub3QgYWxyZWFkeSBsb2FkZWQsIGFuZCByZWdpc3RlciB0aGUgaW1hZ2UgY2hhbmdlXG4gICAqIGxpc3RlbmVyIGlmIG5lZWRlZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9JbWFnZUJhc2UuanNcIikuZGVmYXVsdH0gaW1hZ2UgSW1hZ2UuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgaW1hZ2UgaXMgYWxyZWFkeSBsb2FkZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBsb2FkSW1hZ2UoaW1hZ2UpIHtcbiAgICBsZXQgaW1hZ2VTdGF0ZSA9IGltYWdlLmdldFN0YXRlKCk7XG4gICAgaWYgKGltYWdlU3RhdGUgIT0gSW1hZ2VTdGF0ZS5MT0FERUQgJiYgaW1hZ2VTdGF0ZSAhPSBJbWFnZVN0YXRlLkVSUk9SKSB7XG4gICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVJbWFnZUNoYW5nZV8pO1xuICAgIH1cbiAgICBpZiAoaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLklETEUpIHtcbiAgICAgIGltYWdlLmxvYWQoKTtcbiAgICAgIGltYWdlU3RhdGUgPSBpbWFnZS5nZXRTdGF0ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLkxPQURFRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICByZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSgpIHtcbiAgICBjb25zdCBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICBpZiAobGF5ZXIgJiYgbGF5ZXIuZ2V0VmlzaWJsZSgpICYmIGxheWVyLmdldFNvdXJjZVN0YXRlKCkgPT09ICdyZWFkeScpIHtcbiAgICAgIGxheWVyLmNoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAuXG4gICAqL1xuICBkaXNwb3NlSW50ZXJuYWwoKSB7XG4gICAgZGVsZXRlIHRoaXMubGF5ZXJfO1xuICAgIHN1cGVyLmRpc3Bvc2VJbnRlcm5hbCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExheWVyUmVuZGVyZXI7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VTdGF0ZVxuICovXG5cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBJRExFOiAwLFxuICBMT0FESU5HOiAxLFxuICBMT0FERUQ6IDIsXG4gIEVSUk9SOiAzLFxuICBFTVBUWTogNCxcbn07XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL0xheWVyXG4gKi9cbmltcG9ydCBMYXllclJlbmRlcmVyIGZyb20gJy4uL0xheWVyLmpzJztcbmltcG9ydCBSZW5kZXJFdmVudCBmcm9tICcuLi8uLi9yZW5kZXIvRXZlbnQuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi8uLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7XG4gIGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLFxuICBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sXG4gIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sXG59IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQge2FzQXJyYXl9IGZyb20gJy4uLy4uL2NvbG9yLmpzJztcbmltcG9ydCB7Y3JlYXRlQ2FudmFzQ29udGV4dDJEfSBmcm9tICcuLi8uLi9kb20uanMnO1xuaW1wb3J0IHtlcXVhbHN9IGZyb20gJy4uLy4uL2FycmF5LmpzJztcbmltcG9ydCB7XG4gIGdldEJvdHRvbUxlZnQsXG4gIGdldEJvdHRvbVJpZ2h0LFxuICBnZXRUb3BMZWZ0LFxuICBnZXRUb3BSaWdodCxcbn0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcblxuLyoqXG4gKiBAdHlwZSB7QXJyYXk8SFRNTENhbnZhc0VsZW1lbnQ+fVxuICovXG5leHBvcnQgY29uc3QgY2FudmFzUG9vbCA9IFtdO1xuXG4vKipcbiAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gKi9cbmxldCBwaXhlbENvbnRleHQgPSBudWxsO1xuXG5mdW5jdGlvbiBjcmVhdGVQaXhlbENvbnRleHQoKSB7XG4gIHBpeGVsQ29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgxLCAxLCB1bmRlZmluZWQsIHtcbiAgICB3aWxsUmVhZEZyZXF1ZW50bHk6IHRydWUsXG4gIH0pO1xufVxuXG4vKipcbiAqIEBhYnN0cmFjdFxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi8uLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBMYXllclR5cGVcbiAqIEBleHRlbmRzIHtMYXllclJlbmRlcmVyPExheWVyVHlwZT59XG4gKi9cbmNsYXNzIENhbnZhc0xheWVyUmVuZGVyZXIgZXh0ZW5kcyBMYXllclJlbmRlcmVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7TGF5ZXJUeXBlfSBsYXllciBMYXllci5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGxheWVyKSB7XG4gICAgc3VwZXIobGF5ZXIpO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmNvbnRhaW5lciA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVkUmVzb2x1dGlvbjtcblxuICAgIC8qKlxuICAgICAqIEEgdGVtcG9yYXJ5IHRyYW5zZm9ybS4gIFRoZSB2YWx1ZXMgaW4gdGhpcyB0cmFuc2Zvcm0gc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiBhXG4gICAgICogZnVuY3Rpb24gdGhhdCBzZXRzIHRoZSB2YWx1ZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMudGVtcFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zZm9ybSBmb3IgcmVuZGVyZWQgcGl4ZWxzIHRvIHZpZXdwb3J0IENTUyBwaXhlbHMuICBUaGlzIHRyYW5zZm9ybSBtdXN0XG4gICAgICogYmUgc2V0IHdoZW4gcmVuZGVyaW5nIGEgZnJhbWUgYW5kIG1heSBiZSB1c2VkIGJ5IG90aGVyIGZ1bmN0aW9ucyBhZnRlciByZW5kZXJpbmcuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWxUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2Zvcm0gZm9yIHZpZXdwb3J0IENTUyBwaXhlbHMgdG8gcmVuZGVyZWQgcGl4ZWxzLiAgVGhpcyB0cmFuc2Zvcm0gbXVzdFxuICAgICAqIGJlIHNldCB3aGVuIHJlbmRlcmluZyBhIGZyYW1lIGFuZCBtYXkgYmUgdXNlZCBieSBvdGhlciBmdW5jdGlvbnMgYWZ0ZXIgcmVuZGVyaW5nLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgKi9cbiAgICB0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgKi9cbiAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5jb250YWluZXJSZXVzZWQgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgKi9cbiAgICB0aGlzLnBpeGVsQ29udGV4dF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9NYXAuanNcIikuRnJhbWVTdGF0ZXxudWxsfVxuICAgICAqL1xuICAgIHRoaXMuZnJhbWVTdGF0ZSA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGltYWdlIEltYWdlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gY29sIFRoZSBjb2x1bW4gaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByb3cgVGhlIHJvdyBpbmRleC5cbiAgICogQHJldHVybiB7VWludDhDbGFtcGVkQXJyYXl8bnVsbH0gVGhlIGltYWdlIGRhdGEuXG4gICAqL1xuICBnZXRJbWFnZURhdGEoaW1hZ2UsIGNvbCwgcm93KSB7XG4gICAgaWYgKCFwaXhlbENvbnRleHQpIHtcbiAgICAgIGNyZWF0ZVBpeGVsQ29udGV4dCgpO1xuICAgIH1cbiAgICBwaXhlbENvbnRleHQuY2xlYXJSZWN0KDAsIDAsIDEsIDEpO1xuXG4gICAgbGV0IGRhdGE7XG4gICAgdHJ5IHtcbiAgICAgIHBpeGVsQ29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIGNvbCwgcm93LCAxLCAxLCAwLCAwLCAxLCAxKTtcbiAgICAgIGRhdGEgPSBwaXhlbENvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIDEsIDEpLmRhdGE7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBwaXhlbENvbnRleHQgPSBudWxsO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9NYXAuanMnKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IEJhY2tncm91bmQgY29sb3IuXG4gICAqL1xuICBnZXRCYWNrZ3JvdW5kKGZyYW1lU3RhdGUpIHtcbiAgICBjb25zdCBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICBsZXQgYmFja2dyb3VuZCA9IGxheWVyLmdldEJhY2tncm91bmQoKTtcbiAgICBpZiAodHlwZW9mIGJhY2tncm91bmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGJhY2tncm91bmQgPSBiYWNrZ3JvdW5kKGZyYW1lU3RhdGUudmlld1N0YXRlLnJlc29sdXRpb24pO1xuICAgIH1cbiAgICByZXR1cm4gYmFja2dyb3VuZCB8fCB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgcmVuZGVyaW5nIGNvbnRhaW5lciBmcm9tIGFuIGV4aXN0aW5nIHRhcmdldCwgaWYgY29tcGF0aWJsZS5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IFBvdGVudGlhbCByZW5kZXIgdGFyZ2V0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHJhbnNmb3JtIENTUyBUcmFuc2Zvcm0uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbYmFja2dyb3VuZENvbG9yXSBCYWNrZ3JvdW5kIGNvbG9yLlxuICAgKi9cbiAgdXNlQ29udGFpbmVyKHRhcmdldCwgdHJhbnNmb3JtLCBiYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICBjb25zdCBsYXllckNsYXNzTmFtZSA9IHRoaXMuZ2V0TGF5ZXIoKS5nZXRDbGFzc05hbWUoKTtcbiAgICBsZXQgY29udGFpbmVyLCBjb250ZXh0O1xuICAgIGlmIChcbiAgICAgIHRhcmdldCAmJlxuICAgICAgdGFyZ2V0LmNsYXNzTmFtZSA9PT0gbGF5ZXJDbGFzc05hbWUgJiZcbiAgICAgICghYmFja2dyb3VuZENvbG9yIHx8XG4gICAgICAgICh0YXJnZXQgJiZcbiAgICAgICAgICB0YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yICYmXG4gICAgICAgICAgZXF1YWxzKFxuICAgICAgICAgICAgYXNBcnJheSh0YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yKSxcbiAgICAgICAgICAgIGFzQXJyYXkoYmFja2dyb3VuZENvbG9yKVxuICAgICAgICAgICkpKVxuICAgICkge1xuICAgICAgY29uc3QgY2FudmFzID0gdGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgaWYgKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5jYW52YXMuc3R5bGUudHJhbnNmb3JtID09PSB0cmFuc2Zvcm0pIHtcbiAgICAgIC8vIENvbnRhaW5lciBvZiB0aGUgcHJldmlvdXMgbGF5ZXIgcmVuZGVyZXIgY2FuIGJlIHVzZWQuXG4gICAgICB0aGlzLmNvbnRhaW5lciA9IHRhcmdldDtcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICB0aGlzLmNvbnRhaW5lclJldXNlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbnRhaW5lclJldXNlZCkge1xuICAgICAgLy8gUHJldmlvdXNseSByZXVzZWQgY29udGFpbmVyIGNhbm5vdCBiZSB1c2VkIGFueSBtb3JlLlxuICAgICAgdGhpcy5jb250YWluZXIgPSBudWxsO1xuICAgICAgdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgICAgIHRoaXMuY29udGFpbmVyUmV1c2VkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICghdGhpcy5jb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IGxheWVyQ2xhc3NOYW1lO1xuICAgICAgbGV0IHN0eWxlID0gY29udGFpbmVyLnN0eWxlO1xuICAgICAgc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICBzdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKCk7XG4gICAgICBjb25zdCBjYW52YXMgPSBjb250ZXh0LmNhbnZhcztcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgICAgc3R5bGUgPSBjYW52YXMuc3R5bGU7XG4gICAgICBzdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICBzdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gJ3RvcCBsZWZ0JztcbiAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIXRoaXMuY29udGFpbmVyUmV1c2VkICYmXG4gICAgICBiYWNrZ3JvdW5kQ29sb3IgJiZcbiAgICAgICF0aGlzLmNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3JcbiAgICApIHtcbiAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmRDb2xvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgQ2xpcCBleHRlbnQuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGNsaXBVbnJvdGF0ZWQoY29udGV4dCwgZnJhbWVTdGF0ZSwgZXh0ZW50KSB7XG4gICAgY29uc3QgdG9wTGVmdCA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICBjb25zdCB0b3BSaWdodCA9IGdldFRvcFJpZ2h0KGV4dGVudCk7XG4gICAgY29uc3QgYm90dG9tUmlnaHQgPSBnZXRCb3R0b21SaWdodChleHRlbnQpO1xuICAgIGNvbnN0IGJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG5cbiAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BMZWZ0KTtcbiAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BSaWdodCk7XG4gICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgYm90dG9tUmlnaHQpO1xuICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGJvdHRvbUxlZnQpO1xuXG4gICAgY29uc3QgaW52ZXJ0ZWQgPSB0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybTtcbiAgICBhcHBseVRyYW5zZm9ybShpbnZlcnRlZCwgdG9wTGVmdCk7XG4gICAgYXBwbHlUcmFuc2Zvcm0oaW52ZXJ0ZWQsIHRvcFJpZ2h0KTtcbiAgICBhcHBseVRyYW5zZm9ybShpbnZlcnRlZCwgYm90dG9tUmlnaHQpO1xuICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCBib3R0b21MZWZ0KTtcblxuICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29udGV4dC5tb3ZlVG8oTWF0aC5yb3VuZCh0b3BMZWZ0WzBdKSwgTWF0aC5yb3VuZCh0b3BMZWZ0WzFdKSk7XG4gICAgY29udGV4dC5saW5lVG8oTWF0aC5yb3VuZCh0b3BSaWdodFswXSksIE1hdGgucm91bmQodG9wUmlnaHRbMV0pKTtcbiAgICBjb250ZXh0LmxpbmVUbyhNYXRoLnJvdW5kKGJvdHRvbVJpZ2h0WzBdKSwgTWF0aC5yb3VuZChib3R0b21SaWdodFsxXSkpO1xuICAgIGNvbnRleHQubGluZVRvKE1hdGgucm91bmQoYm90dG9tTGVmdFswXSksIE1hdGgucm91bmQoYm90dG9tTGVmdFsxXSkpO1xuICAgIGNvbnRleHQuY2xpcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkaXNwYXRjaFJlbmRlckV2ZW50Xyh0eXBlLCBjb250ZXh0LCBmcmFtZVN0YXRlKSB7XG4gICAgY29uc3QgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgaWYgKGxheWVyLmhhc0xpc3RlbmVyKHR5cGUpKSB7XG4gICAgICBjb25zdCBldmVudCA9IG5ldyBSZW5kZXJFdmVudChcbiAgICAgICAgdHlwZSxcbiAgICAgICAgdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIGNvbnRleHRcbiAgICAgICk7XG4gICAgICBsYXllci5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgcHJlUmVuZGVyKGNvbnRleHQsIGZyYW1lU3RhdGUpIHtcbiAgICB0aGlzLmZyYW1lU3RhdGUgPSBmcmFtZVN0YXRlO1xuICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudF8oUmVuZGVyRXZlbnRUeXBlLlBSRVJFTkRFUiwgY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgcG9zdFJlbmRlcihjb250ZXh0LCBmcmFtZVN0YXRlKSB7XG4gICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50XyhSZW5kZXJFdmVudFR5cGUuUE9TVFJFTkRFUiwgY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nIHRvIGFuIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHJvdGF0ZWQgYWZ0ZXIgcmVuZGVyaW5nLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHRoZSByZW5kZXJlZCBlbGVtZW50IChpbiBwaXhlbHMpLlxuICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiB0aGUgcmVuZGVyZWQgZWxlbWVudCAoaW4gcGl4ZWxzKS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFggT2Zmc2V0IG9uIHRoZSB4LWF4aXMgaW4gdmlldyBjb29yZGluYXRlcy5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gVHJhbnNmb3JtLlxuICAgKi9cbiAgZ2V0UmVuZGVyVHJhbnNmb3JtKFxuICAgIGNlbnRlcixcbiAgICByZXNvbHV0aW9uLFxuICAgIHJvdGF0aW9uLFxuICAgIHBpeGVsUmF0aW8sXG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0LFxuICAgIG9mZnNldFhcbiAgKSB7XG4gICAgY29uc3QgZHgxID0gd2lkdGggLyAyO1xuICAgIGNvbnN0IGR5MSA9IGhlaWdodCAvIDI7XG4gICAgY29uc3Qgc3ggPSBwaXhlbFJhdGlvIC8gcmVzb2x1dGlvbjtcbiAgICBjb25zdCBzeSA9IC1zeDtcbiAgICBjb25zdCBkeDIgPSAtY2VudGVyWzBdICsgb2Zmc2V0WDtcbiAgICBjb25zdCBkeTIgPSAtY2VudGVyWzFdO1xuICAgIHJldHVybiBjb21wb3NlVHJhbnNmb3JtKFxuICAgICAgdGhpcy50ZW1wVHJhbnNmb3JtLFxuICAgICAgZHgxLFxuICAgICAgZHkxLFxuICAgICAgc3gsXG4gICAgICBzeSxcbiAgICAgIC1yb3RhdGlvbixcbiAgICAgIGR4MixcbiAgICAgIGR5MlxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAuXG4gICAqL1xuICBkaXNwb3NlSW50ZXJuYWwoKSB7XG4gICAgZGVsZXRlIHRoaXMuZnJhbWVTdGF0ZTtcbiAgICBzdXBlci5kaXNwb3NlSW50ZXJuYWwoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNMYXllclJlbmRlcmVyO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXJcbiAqL1xuaW1wb3J0IENhbnZhc0xheWVyUmVuZGVyZXIgZnJvbSAnLi9MYXllci5qcyc7XG5pbXBvcnQgSW1hZ2VUaWxlIGZyb20gJy4uLy4uL0ltYWdlVGlsZS5qcyc7XG5pbXBvcnQgUmVwcm9qVGlsZSBmcm9tICcuLi8uLi9yZXByb2ovVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVJhbmdlIGZyb20gJy4uLy4uL1RpbGVSYW5nZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uLy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQge1xuICBhcHBseSBhcyBhcHBseVRyYW5zZm9ybSxcbiAgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLFxuICBtYWtlSW52ZXJzZSxcbiAgdG9TdHJpbmcgYXMgdG9UcmFuc2Zvcm1TdHJpbmcsXG59IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQge2FzY2VuZGluZ30gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuaW1wb3J0IHtcbiAgY29udGFpbnNDb29yZGluYXRlLFxuICBjcmVhdGVFbXB0eSxcbiAgZXF1YWxzLFxuICBnZXRIZWlnaHQsXG4gIGdldEludGVyc2VjdGlvbixcbiAgZ2V0Um90YXRlZFZpZXdwb3J0LFxuICBnZXRUb3BMZWZ0LFxuICBnZXRXaWR0aCxcbiAgaW50ZXJzZWN0cyxcbn0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7ZnJvbVVzZXJFeHRlbnR9IGZyb20gJy4uLy4uL3Byb2ouanMnO1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uLy4uL3V0aWwuanMnO1xuaW1wb3J0IHt0b1NpemV9IGZyb20gJy4uLy4uL3NpemUuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyByZW5kZXJlciBmb3IgdGlsZSBsYXllcnMuXG4gKiBAYXBpXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uLy4uL2xheWVyL1RpbGUuanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0PnxpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9IFtMYXllclR5cGU9aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVGlsZS5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHQ+fGltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdF1cbiAqIEBleHRlbmRzIHtDYW52YXNMYXllclJlbmRlcmVyPExheWVyVHlwZT59XG4gKi9cbmNsYXNzIENhbnZhc1RpbGVMYXllclJlbmRlcmVyIGV4dGVuZHMgQ2FudmFzTGF5ZXJSZW5kZXJlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0xheWVyVHlwZX0gdGlsZUxheWVyIFRpbGUgbGF5ZXIuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0aWxlTGF5ZXIpIHtcbiAgICBzdXBlcih0aWxlTGF5ZXIpO1xuXG4gICAgLyoqXG4gICAgICogUmVuZGVyZWQgZXh0ZW50IGhhcyBjaGFuZ2VkIHNpbmNlIHRoZSBwcmV2aW91cyBgcmVuZGVyRnJhbWUoKWAgY2FsbFxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuZXh0ZW50Q2hhbmdlZCA9IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVkRXh0ZW50XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVkUGl4ZWxSYXRpbztcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFByb2plY3Rpb24gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFJldmlzaW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVkVGlsZXMgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5uZXdUaWxlc18gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLnRtcEV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnRtcFRpbGVSYW5nZV8gPSBuZXcgVGlsZVJhbmdlKDAsIDAsIDAsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGlsZSBpcyBkcmF3YWJsZS5cbiAgICovXG4gIGlzRHJhd2FibGVUaWxlKHRpbGUpIHtcbiAgICBjb25zdCB0aWxlTGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgY29uc3QgdGlsZVN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgIGNvbnN0IHVzZUludGVyaW1UaWxlc09uRXJyb3IgPSB0aWxlTGF5ZXIuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcigpO1xuICAgIHJldHVybiAoXG4gICAgICB0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkxPQURFRCB8fFxuICAgICAgdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FTVBUWSB8fFxuICAgICAgKHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuRVJST1IgJiYgIXVzZUludGVyaW1UaWxlc09uRXJyb3IpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlLlxuICAgKi9cbiAgZ2V0VGlsZSh6LCB4LCB5LCBmcmFtZVN0YXRlKSB7XG4gICAgY29uc3QgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICBjb25zdCBwcm9qZWN0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICBjb25zdCB0aWxlTGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgY29uc3QgdGlsZVNvdXJjZSA9IHRpbGVMYXllci5nZXRTb3VyY2UoKTtcbiAgICBsZXQgdGlsZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZSh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5FUlJPUikge1xuICAgICAgaWYgKHRpbGVMYXllci5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKCkgJiYgdGlsZUxheWVyLmdldFByZWxvYWQoKSA+IDApIHtcbiAgICAgICAgLy8gUHJlbG9hZGVkIHRpbGVzIGZvciBsb3dlciByZXNvbHV0aW9ucyBtaWdodCBoYXZlIGZpbmlzaGVkIGxvYWRpbmcuXG4gICAgICAgIHRoaXMubmV3VGlsZXNfID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLmlzRHJhd2FibGVUaWxlKHRpbGUpKSB7XG4gICAgICB0aWxlID0gdGlsZS5nZXRJbnRlcmltVGlsZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGlsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICogQHJldHVybiB7VWludDhDbGFtcGVkQXJyYXl9IERhdGEgYXQgdGhlIHBpeGVsIGxvY2F0aW9uLlxuICAgKi9cbiAgZ2V0RGF0YShwaXhlbCkge1xuICAgIGNvbnN0IGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGU7XG4gICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICBjb25zdCBjb29yZGluYXRlID0gYXBwbHlUcmFuc2Zvcm0oXG4gICAgICBmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLFxuICAgICAgcGl4ZWwuc2xpY2UoKVxuICAgICk7XG5cbiAgICBjb25zdCBsYXllckV4dGVudCA9IGxheWVyLmdldEV4dGVudCgpO1xuICAgIGlmIChsYXllckV4dGVudCkge1xuICAgICAgaWYgKCFjb250YWluc0Nvb3JkaW5hdGUobGF5ZXJFeHRlbnQsIGNvb3JkaW5hdGUpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgY29uc3QgcHJvamVjdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgY29uc3Qgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgY29uc3Qgc291cmNlID0gbGF5ZXIuZ2V0UmVuZGVyU291cmNlKCk7XG4gICAgY29uc3QgdGlsZUdyaWQgPSBzb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHZpZXdTdGF0ZS5wcm9qZWN0aW9uKTtcbiAgICBjb25zdCB0aWxlUGl4ZWxSYXRpbyA9IHNvdXJjZS5nZXRUaWxlUGl4ZWxSYXRpbyhmcmFtZVN0YXRlLnBpeGVsUmF0aW8pO1xuXG4gICAgZm9yIChcbiAgICAgIGxldCB6ID0gdGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24odmlld1N0YXRlLnJlc29sdXRpb24pO1xuICAgICAgeiA+PSB0aWxlR3JpZC5nZXRNaW5ab29tKCk7XG4gICAgICAtLXpcbiAgICApIHtcbiAgICAgIGNvbnN0IHRpbGVDb29yZCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWihjb29yZGluYXRlLCB6KTtcbiAgICAgIGNvbnN0IHRpbGUgPSBzb3VyY2UuZ2V0VGlsZShcbiAgICAgICAgeixcbiAgICAgICAgdGlsZUNvb3JkWzFdLFxuICAgICAgICB0aWxlQ29vcmRbMl0sXG4gICAgICAgIHBpeGVsUmF0aW8sXG4gICAgICAgIHByb2plY3Rpb25cbiAgICAgICk7XG4gICAgICBpZiAoXG4gICAgICAgICEodGlsZSBpbnN0YW5jZW9mIEltYWdlVGlsZSB8fCB0aWxlIGluc3RhbmNlb2YgUmVwcm9qVGlsZSkgfHxcbiAgICAgICAgKHRpbGUgaW5zdGFuY2VvZiBSZXByb2pUaWxlICYmIHRpbGUuZ2V0U3RhdGUoKSA9PT0gVGlsZVN0YXRlLkVNUFRZKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpICE9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0aWxlT3JpZ2luID0gdGlsZUdyaWQuZ2V0T3JpZ2luKHopO1xuICAgICAgY29uc3QgdGlsZVNpemUgPSB0b1NpemUodGlsZUdyaWQuZ2V0VGlsZVNpemUoeikpO1xuICAgICAgY29uc3QgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xuXG4gICAgICBjb25zdCBjb2wgPSBNYXRoLmZsb29yKFxuICAgICAgICB0aWxlUGl4ZWxSYXRpbyAqXG4gICAgICAgICAgKChjb29yZGluYXRlWzBdIC0gdGlsZU9yaWdpblswXSkgLyB0aWxlUmVzb2x1dGlvbiAtXG4gICAgICAgICAgICB0aWxlQ29vcmRbMV0gKiB0aWxlU2l6ZVswXSlcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJvdyA9IE1hdGguZmxvb3IoXG4gICAgICAgIHRpbGVQaXhlbFJhdGlvICpcbiAgICAgICAgICAoKHRpbGVPcmlnaW5bMV0gLSBjb29yZGluYXRlWzFdKSAvIHRpbGVSZXNvbHV0aW9uIC1cbiAgICAgICAgICAgIHRpbGVDb29yZFsyXSAqIHRpbGVTaXplWzFdKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgZ3V0dGVyID0gTWF0aC5yb3VuZChcbiAgICAgICAgdGlsZVBpeGVsUmF0aW8gKiBzb3VyY2UuZ2V0R3V0dGVyRm9yUHJvamVjdGlvbih2aWV3U3RhdGUucHJvamVjdGlvbilcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB0aGlzLmdldEltYWdlRGF0YSh0aWxlLmdldEltYWdlKCksIGNvbCArIGd1dHRlciwgcm93ICsgZ3V0dGVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdDxudW1iZXIsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdD4+fSB0aWxlcyBMb29rdXAgb2YgbG9hZGVkIHRpbGVzIGJ5IHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW58dm9pZH0gSWYgYGZhbHNlYCwgdGhlIHRpbGUgd2lsbCBub3QgYmUgY29uc2lkZXJlZCBsb2FkZWQuXG4gICAqL1xuICBsb2FkZWRUaWxlQ2FsbGJhY2sodGlsZXMsIHpvb20sIHRpbGUpIHtcbiAgICBpZiAodGhpcy5pc0RyYXdhYmxlVGlsZSh0aWxlKSkge1xuICAgICAgcmV0dXJuIHN1cGVyLmxvYWRlZFRpbGVDYWxsYmFjayh0aWxlcywgem9vbSwgdGlsZSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgd2hldGhlciByZW5kZXIgc2hvdWxkIGJlIGNhbGxlZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gTGF5ZXIgaXMgcmVhZHkgdG8gYmUgcmVuZGVyZWQuXG4gICAqL1xuICBwcmVwYXJlRnJhbWUoZnJhbWVTdGF0ZSkge1xuICAgIHJldHVybiAhIXRoaXMuZ2V0TGF5ZXIoKS5nZXRTb3VyY2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIgdGhlIGxheWVyLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgVGFyZ2V0IHRoYXQgbWF5IGJlIHVzZWQgdG8gcmVuZGVyIGNvbnRlbnQgdG8uXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgcmVuZGVyZWQgZWxlbWVudC5cbiAgICovXG4gIHJlbmRlckZyYW1lKGZyYW1lU3RhdGUsIHRhcmdldCkge1xuICAgIGNvbnN0IGxheWVyU3RhdGUgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXlbZnJhbWVTdGF0ZS5sYXllckluZGV4XTtcbiAgICBjb25zdCB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICBjb25zdCBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgY29uc3Qgdmlld1Jlc29sdXRpb24gPSB2aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICBjb25zdCB2aWV3Q2VudGVyID0gdmlld1N0YXRlLmNlbnRlcjtcbiAgICBjb25zdCByb3RhdGlvbiA9IHZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICBjb25zdCBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuXG4gICAgY29uc3QgdGlsZUxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgIGNvbnN0IHRpbGVTb3VyY2UgPSB0aWxlTGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgY29uc3Qgc291cmNlUmV2aXNpb24gPSB0aWxlU291cmNlLmdldFJldmlzaW9uKCk7XG4gICAgY29uc3QgdGlsZUdyaWQgPSB0aWxlU291cmNlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICBjb25zdCB6ID0gdGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24odmlld1Jlc29sdXRpb24sIHRpbGVTb3VyY2UuekRpcmVjdGlvbik7XG4gICAgY29uc3QgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xuXG4gICAgbGV0IGV4dGVudCA9IGZyYW1lU3RhdGUuZXh0ZW50O1xuICAgIGNvbnN0IHJlc29sdXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgIGNvbnN0IHRpbGVQaXhlbFJhdGlvID0gdGlsZVNvdXJjZS5nZXRUaWxlUGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcbiAgICAvLyBkZXNpcmVkIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyBpbiBwaXhlbHNcbiAgICBjb25zdCB3aWR0aCA9IE1hdGgucm91bmQoKGdldFdpZHRoKGV4dGVudCkgLyByZXNvbHV0aW9uKSAqIHBpeGVsUmF0aW8pO1xuICAgIGNvbnN0IGhlaWdodCA9IE1hdGgucm91bmQoKGdldEhlaWdodChleHRlbnQpIC8gcmVzb2x1dGlvbikgKiBwaXhlbFJhdGlvKTtcblxuICAgIGNvbnN0IGxheWVyRXh0ZW50ID1cbiAgICAgIGxheWVyU3RhdGUuZXh0ZW50ICYmIGZyb21Vc2VyRXh0ZW50KGxheWVyU3RhdGUuZXh0ZW50LCBwcm9qZWN0aW9uKTtcbiAgICBpZiAobGF5ZXJFeHRlbnQpIHtcbiAgICAgIGV4dGVudCA9IGdldEludGVyc2VjdGlvbihcbiAgICAgICAgZXh0ZW50LFxuICAgICAgICBmcm9tVXNlckV4dGVudChsYXllclN0YXRlLmV4dGVudCwgcHJvamVjdGlvbilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgZHggPSAodGlsZVJlc29sdXRpb24gKiB3aWR0aCkgLyAyIC8gdGlsZVBpeGVsUmF0aW87XG4gICAgY29uc3QgZHkgPSAodGlsZVJlc29sdXRpb24gKiBoZWlnaHQpIC8gMiAvIHRpbGVQaXhlbFJhdGlvO1xuICAgIGNvbnN0IGNhbnZhc0V4dGVudCA9IFtcbiAgICAgIHZpZXdDZW50ZXJbMF0gLSBkeCxcbiAgICAgIHZpZXdDZW50ZXJbMV0gLSBkeSxcbiAgICAgIHZpZXdDZW50ZXJbMF0gKyBkeCxcbiAgICAgIHZpZXdDZW50ZXJbMV0gKyBkeSxcbiAgICBdO1xuXG4gICAgY29uc3QgdGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHopO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdDxudW1iZXIsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdD4+fVxuICAgICAqL1xuICAgIGNvbnN0IHRpbGVzVG9EcmF3QnlaID0ge307XG4gICAgdGlsZXNUb0RyYXdCeVpbel0gPSB7fTtcblxuICAgIGNvbnN0IGZpbmRMb2FkZWRUaWxlcyA9IHRoaXMuY3JlYXRlTG9hZGVkVGlsZUZpbmRlcihcbiAgICAgIHRpbGVTb3VyY2UsXG4gICAgICBwcm9qZWN0aW9uLFxuICAgICAgdGlsZXNUb0RyYXdCeVpcbiAgICApO1xuXG4gICAgY29uc3QgdG1wRXh0ZW50ID0gdGhpcy50bXBFeHRlbnQ7XG4gICAgY29uc3QgdG1wVGlsZVJhbmdlID0gdGhpcy50bXBUaWxlUmFuZ2VfO1xuICAgIHRoaXMubmV3VGlsZXNfID0gZmFsc2U7XG4gICAgY29uc3Qgdmlld3BvcnQgPSByb3RhdGlvblxuICAgICAgPyBnZXRSb3RhdGVkVmlld3BvcnQoXG4gICAgICAgICAgdmlld1N0YXRlLmNlbnRlcixcbiAgICAgICAgICByZXNvbHV0aW9uLFxuICAgICAgICAgIHJvdGF0aW9uLFxuICAgICAgICAgIGZyYW1lU3RhdGUuc2l6ZVxuICAgICAgICApXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgICBmb3IgKGxldCB4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xuICAgICAgZm9yIChsZXQgeSA9IHRpbGVSYW5nZS5taW5ZOyB5IDw9IHRpbGVSYW5nZS5tYXhZOyArK3kpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHJvdGF0aW9uICYmXG4gICAgICAgICAgIXRpbGVHcmlkLnRpbGVDb29yZEludGVyc2VjdHNWaWV3cG9ydChbeiwgeCwgeV0sIHZpZXdwb3J0KVxuICAgICAgICApIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0aWxlID0gdGhpcy5nZXRUaWxlKHosIHgsIHksIGZyYW1lU3RhdGUpO1xuICAgICAgICBpZiAodGhpcy5pc0RyYXdhYmxlVGlsZSh0aWxlKSkge1xuICAgICAgICAgIGNvbnN0IHVpZCA9IGdldFVpZCh0aGlzKTtcbiAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgIHRpbGVzVG9EcmF3QnlaW3pdW3RpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCldID0gdGlsZTtcbiAgICAgICAgICAgIGxldCBpblRyYW5zaXRpb24gPSB0aWxlLmluVHJhbnNpdGlvbih1aWQpO1xuICAgICAgICAgICAgaWYgKGluVHJhbnNpdGlvbiAmJiBsYXllclN0YXRlLm9wYWNpdHkgIT09IDEpIHtcbiAgICAgICAgICAgICAgLy8gU2tpcHBpbmcgdHJhbnNpdGlvbiB3aGVuIGxheWVyIGlzIG5vdCBmdWxseSBvcGFxdWUgYXZvaWRzIHZpc3VhbCBhcnRpZmFjdHMuXG4gICAgICAgICAgICAgIHRpbGUuZW5kVHJhbnNpdGlvbih1aWQpO1xuICAgICAgICAgICAgICBpblRyYW5zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIXRoaXMubmV3VGlsZXNfICYmXG4gICAgICAgICAgICAgIChpblRyYW5zaXRpb24gfHwgIXRoaXMucmVuZGVyZWRUaWxlcy5pbmNsdWRlcyh0aWxlKSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICB0aGlzLm5ld1RpbGVzXyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aWxlLmdldEFscGhhKHVpZCwgZnJhbWVTdGF0ZS50aW1lKSA9PT0gMSkge1xuICAgICAgICAgICAgLy8gZG9uJ3QgbG9vayBmb3IgYWx0IHRpbGVzIGlmIGFscGhhIGlzIDFcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNoaWxkVGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2hpbGRUaWxlUmFuZ2UoXG4gICAgICAgICAgdGlsZS50aWxlQ29vcmQsXG4gICAgICAgICAgdG1wVGlsZVJhbmdlLFxuICAgICAgICAgIHRtcEV4dGVudFxuICAgICAgICApO1xuXG4gICAgICAgIGxldCBjb3ZlcmVkID0gZmFsc2U7XG4gICAgICAgIGlmIChjaGlsZFRpbGVSYW5nZSkge1xuICAgICAgICAgIGNvdmVyZWQgPSBmaW5kTG9hZGVkVGlsZXMoeiArIDEsIGNoaWxkVGlsZVJhbmdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvdmVyZWQpIHtcbiAgICAgICAgICB0aWxlR3JpZC5mb3JFYWNoVGlsZUNvb3JkUGFyZW50VGlsZVJhbmdlKFxuICAgICAgICAgICAgdGlsZS50aWxlQ29vcmQsXG4gICAgICAgICAgICBmaW5kTG9hZGVkVGlsZXMsXG4gICAgICAgICAgICB0bXBUaWxlUmFuZ2UsXG4gICAgICAgICAgICB0bXBFeHRlbnRcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2FudmFzU2NhbGUgPVxuICAgICAgKCh0aWxlUmVzb2x1dGlvbiAvIHZpZXdSZXNvbHV0aW9uKSAqIHBpeGVsUmF0aW8pIC8gdGlsZVBpeGVsUmF0aW87XG5cbiAgICAvLyBzZXQgZm9yd2FyZCBhbmQgaW52ZXJzZSBwaXhlbCB0cmFuc2Zvcm1zXG4gICAgY29tcG9zZVRyYW5zZm9ybShcbiAgICAgIHRoaXMucGl4ZWxUcmFuc2Zvcm0sXG4gICAgICBmcmFtZVN0YXRlLnNpemVbMF0gLyAyLFxuICAgICAgZnJhbWVTdGF0ZS5zaXplWzFdIC8gMixcbiAgICAgIDEgLyBwaXhlbFJhdGlvLFxuICAgICAgMSAvIHBpeGVsUmF0aW8sXG4gICAgICByb3RhdGlvbixcbiAgICAgIC13aWR0aCAvIDIsXG4gICAgICAtaGVpZ2h0IC8gMlxuICAgICk7XG5cbiAgICBjb25zdCBjYW52YXNUcmFuc2Zvcm0gPSB0b1RyYW5zZm9ybVN0cmluZyh0aGlzLnBpeGVsVHJhbnNmb3JtKTtcblxuICAgIHRoaXMudXNlQ29udGFpbmVyKHRhcmdldCwgY2FudmFzVHJhbnNmb3JtLCB0aGlzLmdldEJhY2tncm91bmQoZnJhbWVTdGF0ZSkpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG4gICAgY29uc3QgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG5cbiAgICBtYWtlSW52ZXJzZSh0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSwgdGhpcy5waXhlbFRyYW5zZm9ybSk7XG5cbiAgICAvLyBzZXQgc2NhbGUgdHJhbnNmb3JtIGZvciBjYWxjdWxhdGluZyB0aWxlIHBvc2l0aW9ucyBvbiB0aGUgY2FudmFzXG4gICAgY29tcG9zZVRyYW5zZm9ybShcbiAgICAgIHRoaXMudGVtcFRyYW5zZm9ybSxcbiAgICAgIHdpZHRoIC8gMixcbiAgICAgIGhlaWdodCAvIDIsXG4gICAgICBjYW52YXNTY2FsZSxcbiAgICAgIGNhbnZhc1NjYWxlLFxuICAgICAgMCxcbiAgICAgIC13aWR0aCAvIDIsXG4gICAgICAtaGVpZ2h0IC8gMlxuICAgICk7XG5cbiAgICBpZiAoY2FudmFzLndpZHRoICE9IHdpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT0gaGVpZ2h0KSB7XG4gICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfSBlbHNlIGlmICghdGhpcy5jb250YWluZXJSZXVzZWQpIHtcbiAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cblxuICAgIGlmIChsYXllckV4dGVudCkge1xuICAgICAgdGhpcy5jbGlwVW5yb3RhdGVkKGNvbnRleHQsIGZyYW1lU3RhdGUsIGxheWVyRXh0ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoIXRpbGVTb3VyY2UuZ2V0SW50ZXJwb2xhdGUoKSkge1xuICAgICAgY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLnByZVJlbmRlcihjb250ZXh0LCBmcmFtZVN0YXRlKTtcblxuICAgIHRoaXMucmVuZGVyZWRUaWxlcy5sZW5ndGggPSAwO1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICBsZXQgenMgPSBPYmplY3Qua2V5cyh0aWxlc1RvRHJhd0J5WikubWFwKE51bWJlcik7XG4gICAgenMuc29ydChhc2NlbmRpbmcpO1xuXG4gICAgbGV0IGNsaXBzLCBjbGlwWnMsIGN1cnJlbnRDbGlwO1xuICAgIGlmIChcbiAgICAgIGxheWVyU3RhdGUub3BhY2l0eSA9PT0gMSAmJlxuICAgICAgKCF0aGlzLmNvbnRhaW5lclJldXNlZCB8fFxuICAgICAgICB0aWxlU291cmNlLmdldE9wYXF1ZShmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uKSlcbiAgICApIHtcbiAgICAgIHpzID0genMucmV2ZXJzZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbGlwcyA9IFtdO1xuICAgICAgY2xpcFpzID0gW107XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSB6cy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgY29uc3QgY3VycmVudFogPSB6c1tpXTtcbiAgICAgIGNvbnN0IGN1cnJlbnRUaWxlUGl4ZWxTaXplID0gdGlsZVNvdXJjZS5nZXRUaWxlUGl4ZWxTaXplKFxuICAgICAgICBjdXJyZW50WixcbiAgICAgICAgcGl4ZWxSYXRpbyxcbiAgICAgICAgcHJvamVjdGlvblxuICAgICAgKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbihjdXJyZW50Wik7XG4gICAgICBjb25zdCBjdXJyZW50U2NhbGUgPSBjdXJyZW50UmVzb2x1dGlvbiAvIHRpbGVSZXNvbHV0aW9uO1xuICAgICAgY29uc3QgZHggPSBjdXJyZW50VGlsZVBpeGVsU2l6ZVswXSAqIGN1cnJlbnRTY2FsZSAqIGNhbnZhc1NjYWxlO1xuICAgICAgY29uc3QgZHkgPSBjdXJyZW50VGlsZVBpeGVsU2l6ZVsxXSAqIGN1cnJlbnRTY2FsZSAqIGNhbnZhc1NjYWxlO1xuICAgICAgY29uc3Qgb3JpZ2luVGlsZUNvb3JkID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaKFxuICAgICAgICBnZXRUb3BMZWZ0KGNhbnZhc0V4dGVudCksXG4gICAgICAgIGN1cnJlbnRaXG4gICAgICApO1xuICAgICAgY29uc3Qgb3JpZ2luVGlsZUV4dGVudCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudChvcmlnaW5UaWxlQ29vcmQpO1xuICAgICAgY29uc3Qgb3JpZ2luID0gYXBwbHlUcmFuc2Zvcm0odGhpcy50ZW1wVHJhbnNmb3JtLCBbXG4gICAgICAgICh0aWxlUGl4ZWxSYXRpbyAqIChvcmlnaW5UaWxlRXh0ZW50WzBdIC0gY2FudmFzRXh0ZW50WzBdKSkgL1xuICAgICAgICAgIHRpbGVSZXNvbHV0aW9uLFxuICAgICAgICAodGlsZVBpeGVsUmF0aW8gKiAoY2FudmFzRXh0ZW50WzNdIC0gb3JpZ2luVGlsZUV4dGVudFszXSkpIC9cbiAgICAgICAgICB0aWxlUmVzb2x1dGlvbixcbiAgICAgIF0pO1xuICAgICAgY29uc3QgdGlsZUd1dHRlciA9XG4gICAgICAgIHRpbGVQaXhlbFJhdGlvICogdGlsZVNvdXJjZS5nZXRHdXR0ZXJGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgY29uc3QgdGlsZXNUb0RyYXcgPSB0aWxlc1RvRHJhd0J5WltjdXJyZW50Wl07XG4gICAgICBmb3IgKGNvbnN0IHRpbGVDb29yZEtleSBpbiB0aWxlc1RvRHJhdykge1xuICAgICAgICBjb25zdCB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gKi8gKFxuICAgICAgICAgIHRpbGVzVG9EcmF3W3RpbGVDb29yZEtleV1cbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgdGlsZUNvb3JkID0gdGlsZS50aWxlQ29vcmQ7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIGludGVnZXIgcG9zaXRpb25zIGFuZCBzaXplcyBzbyB0aGF0IHRpbGVzIGFsaWduXG4gICAgICAgIGNvbnN0IHhJbmRleCA9IG9yaWdpblRpbGVDb29yZFsxXSAtIHRpbGVDb29yZFsxXTtcbiAgICAgICAgY29uc3QgbmV4dFggPSBNYXRoLnJvdW5kKG9yaWdpblswXSAtICh4SW5kZXggLSAxKSAqIGR4KTtcbiAgICAgICAgY29uc3QgeUluZGV4ID0gb3JpZ2luVGlsZUNvb3JkWzJdIC0gdGlsZUNvb3JkWzJdO1xuICAgICAgICBjb25zdCBuZXh0WSA9IE1hdGgucm91bmQob3JpZ2luWzFdIC0gKHlJbmRleCAtIDEpICogZHkpO1xuICAgICAgICBjb25zdCB4ID0gTWF0aC5yb3VuZChvcmlnaW5bMF0gLSB4SW5kZXggKiBkeCk7XG4gICAgICAgIGNvbnN0IHkgPSBNYXRoLnJvdW5kKG9yaWdpblsxXSAtIHlJbmRleCAqIGR5KTtcbiAgICAgICAgY29uc3QgdyA9IG5leHRYIC0geDtcbiAgICAgICAgY29uc3QgaCA9IG5leHRZIC0geTtcbiAgICAgICAgY29uc3QgdHJhbnNpdGlvbiA9IHogPT09IGN1cnJlbnRaO1xuXG4gICAgICAgIGNvbnN0IGluVHJhbnNpdGlvbiA9XG4gICAgICAgICAgdHJhbnNpdGlvbiAmJiB0aWxlLmdldEFscGhhKGdldFVpZCh0aGlzKSwgZnJhbWVTdGF0ZS50aW1lKSAhPT0gMTtcbiAgICAgICAgbGV0IGNvbnRleHRTYXZlZCA9IGZhbHNlO1xuICAgICAgICBpZiAoIWluVHJhbnNpdGlvbikge1xuICAgICAgICAgIGlmIChjbGlwcykge1xuICAgICAgICAgICAgLy8gQ2xpcCBtYXNrIGZvciByZWdpb25zIGluIHRoaXMgdGlsZSB0aGF0IGFscmVhZHkgZmlsbGVkIGJ5IGEgaGlnaGVyIHogdGlsZVxuICAgICAgICAgICAgY3VycmVudENsaXAgPSBbeCwgeSwgeCArIHcsIHksIHggKyB3LCB5ICsgaCwgeCwgeSArIGhdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gY2xpcHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICBpZiAoeiAhPT0gY3VycmVudFogJiYgY3VycmVudFogPCBjbGlwWnNbaV0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGlwID0gY2xpcHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0cyhcbiAgICAgICAgICAgICAgICAgICAgW3gsIHksIHggKyB3LCB5ICsgaF0sXG4gICAgICAgICAgICAgICAgICAgIFtjbGlwWzBdLCBjbGlwWzNdLCBjbGlwWzRdLCBjbGlwWzddXVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0U2F2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRTYXZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgICAgLy8gY291bnRlci1jbG9ja3dpc2UgKG91dGVyIHJpbmcpIGZvciBjdXJyZW50IHRpbGVcbiAgICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKGN1cnJlbnRDbGlwWzBdLCBjdXJyZW50Q2xpcFsxXSk7XG4gICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFsyXSwgY3VycmVudENsaXBbM10pO1xuICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY3VycmVudENsaXBbNF0sIGN1cnJlbnRDbGlwWzVdKTtcbiAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGN1cnJlbnRDbGlwWzZdLCBjdXJyZW50Q2xpcFs3XSk7XG4gICAgICAgICAgICAgICAgICAvLyBjbG9ja3dpc2UgKGlubmVyIHJpbmcpIGZvciBoaWdoZXIgeiB0aWxlXG4gICAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhjbGlwWzZdLCBjbGlwWzddKTtcbiAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbNF0sIGNsaXBbNV0pO1xuICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFsyXSwgY2xpcFszXSk7XG4gICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzBdLCBjbGlwWzFdKTtcbiAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xpcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xpcHMucHVzaChjdXJyZW50Q2xpcCk7XG4gICAgICAgICAgICBjbGlwWnMucHVzaChjdXJyZW50Wik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KHgsIHksIHcsIGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRyYXdUaWxlSW1hZ2UoXG4gICAgICAgICAgdGlsZSxcbiAgICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICAgIHgsXG4gICAgICAgICAgeSxcbiAgICAgICAgICB3LFxuICAgICAgICAgIGgsXG4gICAgICAgICAgdGlsZUd1dHRlcixcbiAgICAgICAgICB0cmFuc2l0aW9uXG4gICAgICAgICk7XG4gICAgICAgIGlmIChjbGlwcyAmJiAhaW5UcmFuc2l0aW9uKSB7XG4gICAgICAgICAgaWYgKGNvbnRleHRTYXZlZCkge1xuICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy51bnNoaWZ0KHRpbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy5wdXNoKHRpbGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlVXNlZFRpbGVzKGZyYW1lU3RhdGUudXNlZFRpbGVzLCB0aWxlU291cmNlLCB0aWxlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcmVkUmV2aXNpb24gPSBzb3VyY2VSZXZpc2lvbjtcbiAgICB0aGlzLnJlbmRlcmVkUmVzb2x1dGlvbiA9IHRpbGVSZXNvbHV0aW9uO1xuICAgIHRoaXMuZXh0ZW50Q2hhbmdlZCA9XG4gICAgICAhdGhpcy5yZW5kZXJlZEV4dGVudF8gfHwgIWVxdWFscyh0aGlzLnJlbmRlcmVkRXh0ZW50XywgY2FudmFzRXh0ZW50KTtcbiAgICB0aGlzLnJlbmRlcmVkRXh0ZW50XyA9IGNhbnZhc0V4dGVudDtcbiAgICB0aGlzLnJlbmRlcmVkUGl4ZWxSYXRpbyA9IHBpeGVsUmF0aW87XG4gICAgdGhpcy5yZW5kZXJlZFByb2plY3Rpb24gPSBwcm9qZWN0aW9uO1xuXG4gICAgdGhpcy5tYW5hZ2VUaWxlUHlyYW1pZChcbiAgICAgIGZyYW1lU3RhdGUsXG4gICAgICB0aWxlU291cmNlLFxuICAgICAgdGlsZUdyaWQsXG4gICAgICBwaXhlbFJhdGlvLFxuICAgICAgcHJvamVjdGlvbixcbiAgICAgIGV4dGVudCxcbiAgICAgIHosXG4gICAgICB0aWxlTGF5ZXIuZ2V0UHJlbG9hZCgpXG4gICAgKTtcbiAgICB0aGlzLnNjaGVkdWxlRXhwaXJlQ2FjaGUoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSk7XG5cbiAgICB0aGlzLnBvc3RSZW5kZXIoY29udGV4dCwgZnJhbWVTdGF0ZSk7XG5cbiAgICBpZiAobGF5ZXJTdGF0ZS5leHRlbnQpIHtcbiAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cbiAgICBjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHRydWU7XG5cbiAgICBpZiAoY2FudmFzVHJhbnNmb3JtICE9PSBjYW52YXMuc3R5bGUudHJhbnNmb3JtKSB7XG4gICAgICBjYW52YXMuc3R5bGUudHJhbnNmb3JtID0gY2FudmFzVHJhbnNmb3JtO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IExlZnQgb2YgdGhlIHRpbGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRvcCBvZiB0aGUgdGlsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHcgV2lkdGggb2YgdGhlIHRpbGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoIEhlaWdodCBvZiB0aGUgdGlsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBUaWxlIGd1dHRlci5cbiAgICogQHBhcmFtIHtib29sZWFufSB0cmFuc2l0aW9uIEFwcGx5IGFuIGFscGhhIHRyYW5zaXRpb24uXG4gICAqL1xuICBkcmF3VGlsZUltYWdlKHRpbGUsIGZyYW1lU3RhdGUsIHgsIHksIHcsIGgsIGd1dHRlciwgdHJhbnNpdGlvbikge1xuICAgIGNvbnN0IGltYWdlID0gdGhpcy5nZXRUaWxlSW1hZ2UodGlsZSk7XG4gICAgaWYgKCFpbWFnZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB1aWQgPSBnZXRVaWQodGhpcyk7XG4gICAgY29uc3QgbGF5ZXJTdGF0ZSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheVtmcmFtZVN0YXRlLmxheWVySW5kZXhdO1xuICAgIGNvbnN0IGFscGhhID1cbiAgICAgIGxheWVyU3RhdGUub3BhY2l0eSAqXG4gICAgICAodHJhbnNpdGlvbiA/IHRpbGUuZ2V0QWxwaGEodWlkLCBmcmFtZVN0YXRlLnRpbWUpIDogMSk7XG4gICAgY29uc3QgYWxwaGFDaGFuZ2VkID0gYWxwaGEgIT09IHRoaXMuY29udGV4dC5nbG9iYWxBbHBoYTtcbiAgICBpZiAoYWxwaGFDaGFuZ2VkKSB7XG4gICAgICB0aGlzLmNvbnRleHQuc2F2ZSgpO1xuICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhID0gYWxwaGE7XG4gICAgfVxuICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICBpbWFnZSxcbiAgICAgIGd1dHRlcixcbiAgICAgIGd1dHRlcixcbiAgICAgIGltYWdlLndpZHRoIC0gMiAqIGd1dHRlcixcbiAgICAgIGltYWdlLmhlaWdodCAtIDIgKiBndXR0ZXIsXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHcsXG4gICAgICBoXG4gICAgKTtcblxuICAgIGlmIChhbHBoYUNoYW5nZWQpIHtcbiAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7XG4gICAgfVxuICAgIGlmIChhbHBoYSAhPT0gbGF5ZXJTdGF0ZS5vcGFjaXR5KSB7XG4gICAgICBmcmFtZVN0YXRlLmFuaW1hdGUgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodHJhbnNpdGlvbikge1xuICAgICAgdGlsZS5lbmRUcmFuc2l0aW9uKHVpZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBJbWFnZVxuICAgKi9cbiAgZ2V0SW1hZ2UoKSB7XG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICByZXR1cm4gY29udGV4dCA/IGNvbnRleHQuY2FudmFzIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGltYWdlIGZyb20gYSB0aWxlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGdldFRpbGVJbWFnZSh0aWxlKSB7XG4gICAgcmV0dXJuIHRpbGUuZ2V0SW1hZ2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHNjaGVkdWxlRXhwaXJlQ2FjaGUoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSkge1xuICAgIGlmICh0aWxlU291cmNlLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9NYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IHBvc3RSZW5kZXJGdW5jdGlvbiA9IGZ1bmN0aW9uICh0aWxlU291cmNlLCBtYXAsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgY29uc3QgdGlsZVNvdXJjZUtleSA9IGdldFVpZCh0aWxlU291cmNlKTtcbiAgICAgICAgaWYgKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS51c2VkVGlsZXMpIHtcbiAgICAgICAgICB0aWxlU291cmNlLmV4cGlyZUNhY2hlKFxuICAgICAgICAgICAgZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbixcbiAgICAgICAgICAgIGZyYW1lU3RhdGUudXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfS5iaW5kKG51bGwsIHRpbGVTb3VyY2UpO1xuXG4gICAgICBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaChcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9NYXAuanNcIikuUG9zdFJlbmRlckZ1bmN0aW9ufSAqLyAoXG4gICAgICAgICAgcG9zdFJlbmRlckZ1bmN0aW9uXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICFPYmplY3Q8c3RyaW5nLCBib29sZWFuPj59IHVzZWRUaWxlcyBVc2VkIHRpbGVzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9UaWxlLmpzJykuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICB1cGRhdGVVc2VkVGlsZXModXNlZFRpbGVzLCB0aWxlU291cmNlLCB0aWxlKSB7XG4gICAgLy8gRklYTUUgc2hvdWxkIHdlIHVzZSB0aWxlc1RvRHJhd0J5WiBpbnN0ZWFkP1xuICAgIGNvbnN0IHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgaWYgKCEodGlsZVNvdXJjZUtleSBpbiB1c2VkVGlsZXMpKSB7XG4gICAgICB1c2VkVGlsZXNbdGlsZVNvdXJjZUtleV0gPSB7fTtcbiAgICB9XG4gICAgdXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3RpbGUuZ2V0S2V5KCldID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYW5hZ2UgdGlsZSBweXJhbWlkLlxuICAgKiBUaGlzIGZ1bmN0aW9uIHBlcmZvcm1zIGEgbnVtYmVyIG9mIGZ1bmN0aW9ucyByZWxhdGVkIHRvIHRoZSB0aWxlcyBhdCB0aGVcbiAgICogY3VycmVudCB6b29tIGFuZCBsb3dlciB6b29tIGxldmVsczpcbiAgICogLSByZWdpc3RlcnMgaWRsZSB0aWxlcyBpbiBmcmFtZVN0YXRlLndhbnRlZFRpbGVzIHNvIHRoYXQgdGhleSBhcmUgbm90XG4gICAqICAgZGlzY2FyZGVkIGJ5IHRoZSB0aWxlIHF1ZXVlXG4gICAqIC0gZW5xdWV1ZXMgbWlzc2luZyB0aWxlc1xuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjdXJyZW50WiBDdXJyZW50IFouXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwcmVsb2FkIExvYWQgbG93IHJlc29sdXRpb24gdGlsZXMgdXAgdG8gYHByZWxvYWRgIGxldmVscy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHQpOnZvaWR9IFt0aWxlQ2FsbGJhY2tdIFRpbGUgY2FsbGJhY2suXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIG1hbmFnZVRpbGVQeXJhbWlkKFxuICAgIGZyYW1lU3RhdGUsXG4gICAgdGlsZVNvdXJjZSxcbiAgICB0aWxlR3JpZCxcbiAgICBwaXhlbFJhdGlvLFxuICAgIHByb2plY3Rpb24sXG4gICAgZXh0ZW50LFxuICAgIGN1cnJlbnRaLFxuICAgIHByZWxvYWQsXG4gICAgdGlsZUNhbGxiYWNrXG4gICkge1xuICAgIGNvbnN0IHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgaWYgKCEodGlsZVNvdXJjZUtleSBpbiBmcmFtZVN0YXRlLndhbnRlZFRpbGVzKSkge1xuICAgICAgZnJhbWVTdGF0ZS53YW50ZWRUaWxlc1t0aWxlU291cmNlS2V5XSA9IHt9O1xuICAgIH1cbiAgICBjb25zdCB3YW50ZWRUaWxlcyA9IGZyYW1lU3RhdGUud2FudGVkVGlsZXNbdGlsZVNvdXJjZUtleV07XG4gICAgY29uc3QgdGlsZVF1ZXVlID0gZnJhbWVTdGF0ZS50aWxlUXVldWU7XG4gICAgY29uc3QgbWluWm9vbSA9IHRpbGVHcmlkLmdldE1pblpvb20oKTtcbiAgICBjb25zdCByb3RhdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uO1xuICAgIGNvbnN0IHZpZXdwb3J0ID0gcm90YXRpb25cbiAgICAgID8gZ2V0Um90YXRlZFZpZXdwb3J0KFxuICAgICAgICAgIGZyYW1lU3RhdGUudmlld1N0YXRlLmNlbnRlcixcbiAgICAgICAgICBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yZXNvbHV0aW9uLFxuICAgICAgICAgIHJvdGF0aW9uLFxuICAgICAgICAgIGZyYW1lU3RhdGUuc2l6ZVxuICAgICAgICApXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgICBsZXQgdGlsZUNvdW50ID0gMDtcbiAgICBsZXQgdGlsZSwgdGlsZVJhbmdlLCB0aWxlUmVzb2x1dGlvbiwgeCwgeSwgejtcbiAgICBmb3IgKHogPSBtaW5ab29tOyB6IDw9IGN1cnJlbnRaOyArK3opIHtcbiAgICAgIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6LCB0aWxlUmFuZ2UpO1xuICAgICAgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgZm9yICh4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xuICAgICAgICBmb3IgKHkgPSB0aWxlUmFuZ2UubWluWTsgeSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt5KSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcm90YXRpb24gJiZcbiAgICAgICAgICAgICF0aWxlR3JpZC50aWxlQ29vcmRJbnRlcnNlY3RzVmlld3BvcnQoW3osIHgsIHldLCB2aWV3cG9ydClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY3VycmVudFogLSB6IDw9IHByZWxvYWQpIHtcbiAgICAgICAgICAgICsrdGlsZUNvdW50O1xuICAgICAgICAgICAgdGlsZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZSh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgICAgd2FudGVkVGlsZXNbdGlsZS5nZXRLZXkoKV0gPSB0cnVlO1xuICAgICAgICAgICAgICBpZiAoIXRpbGVRdWV1ZS5pc0tleVF1ZXVlZCh0aWxlLmdldEtleSgpKSkge1xuICAgICAgICAgICAgICAgIHRpbGVRdWV1ZS5lbnF1ZXVlKFtcbiAgICAgICAgICAgICAgICAgIHRpbGUsXG4gICAgICAgICAgICAgICAgICB0aWxlU291cmNlS2V5LFxuICAgICAgICAgICAgICAgICAgdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2VudGVyKHRpbGUudGlsZUNvb3JkKSxcbiAgICAgICAgICAgICAgICAgIHRpbGVSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGlsZUNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgdGlsZUNhbGxiYWNrKHRpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aWxlU291cmNlLnVzZVRpbGUoeiwgeCwgeSwgcHJvamVjdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRpbGVTb3VyY2UudXBkYXRlQ2FjaGVTaXplKHRpbGVDb3VudCwgcHJvamVjdGlvbik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXI7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvVGlsZVxuICovXG5pbXBvcnQgQmFzZVRpbGVMYXllciBmcm9tICcuL0Jhc2VUaWxlLmpzJztcbmltcG9ydCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciBmcm9tICcuLi9yZW5kZXJlci9jYW52YXMvVGlsZUxheWVyLmpzJztcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBGb3IgbGF5ZXIgc291cmNlcyB0aGF0IHByb3ZpZGUgcHJlLXJlbmRlcmVkLCB0aWxlZCBpbWFnZXMgaW4gZ3JpZHMgdGhhdCBhcmVcbiAqIG9yZ2FuaXplZCBieSB6b29tIGxldmVscyBmb3Igc3BlY2lmaWMgcmVzb2x1dGlvbnMuXG4gKiBOb3RlIHRoYXQgYW55IHByb3BlcnR5IHNldCBpbiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fVxuICogcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdDsgZm9yIGV4YW1wbGUsIHNldHRpbmcgYHRpdGxlOiAnTXkgVGl0bGUnYCBpbiB0aGVcbiAqIG9wdGlvbnMgbWVhbnMgdGhhdCBgdGl0bGVgIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlU291cmNlVHlwZVxuICogQGV4dGVuZHMgQmFzZVRpbGVMYXllcjxUaWxlU291cmNlVHlwZSwgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXI+XG4gKiBAYXBpXG4gKi9cbmNsYXNzIFRpbGVMYXllciBleHRlbmRzIEJhc2VUaWxlTGF5ZXIge1xuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0Jhc2VUaWxlLmpzXCIpLk9wdGlvbnM8VGlsZVNvdXJjZVR5cGU+fSBbb3B0aW9uc10gVGlsZSBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKG9wdGlvbnMpO1xuICB9XG5cbiAgY3JlYXRlUmVuZGVyZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcih0aGlzKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaWxlTGF5ZXI7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvbWF0aFxuICovXG5cbi8qKlxuICogVGFrZXMgYSBudW1iZXIgYW5kIGNsYW1wcyBpdCB0byB3aXRoaW4gdGhlIHByb3ZpZGVkIGJvdW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBUaGUgaW5wdXQgbnVtYmVyLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pbiBUaGUgbWluaW11bSB2YWx1ZSB0byByZXR1cm4uXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IFRoZSBtYXhpbXVtIHZhbHVlIHRvIHJldHVybi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGlucHV0IG51bWJlciBpZiBpdCBpcyB3aXRoaW4gYm91bmRzLCBvciB0aGUgbmVhcmVzdFxuICogICAgIG51bWJlciB3aXRoaW4gdGhlIGJvdW5kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsdWUsIG1pbiksIG1heCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc3F1YXJlIG9mIHRoZSBjbG9zZXN0IGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50ICh4LCB5KSBhbmQgdGhlXG4gKiBsaW5lIHNlZ21lbnQgKHgxLCB5MSkgdG8gKHgyLCB5MikuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWRTZWdtZW50RGlzdGFuY2UoeCwgeSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgY29uc3QgZHggPSB4MiAtIHgxO1xuICBjb25zdCBkeSA9IHkyIC0geTE7XG4gIGlmIChkeCAhPT0gMCB8fCBkeSAhPT0gMCkge1xuICAgIGNvbnN0IHQgPSAoKHggLSB4MSkgKiBkeCArICh5IC0geTEpICogZHkpIC8gKGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICBpZiAodCA+IDEpIHtcbiAgICAgIHgxID0geDI7XG4gICAgICB5MSA9IHkyO1xuICAgIH0gZWxzZSBpZiAodCA+IDApIHtcbiAgICAgIHgxICs9IGR4ICogdDtcbiAgICAgIHkxICs9IGR5ICogdDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZSh4LCB5LCB4MSwgeTEpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnRzICh4MSwgeTEpIGFuZCAoeDIsIHkyKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZSh4MSwgeTEsIHgyLCB5Mikge1xuICBjb25zdCBkeCA9IHgyIC0geDE7XG4gIGNvbnN0IGR5ID0geTIgLSB5MTtcbiAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuXG4vKipcbiAqIFNvbHZlcyBzeXN0ZW0gb2YgbGluZWFyIGVxdWF0aW9ucyB1c2luZyBHYXVzc2lhbiBlbGltaW5hdGlvbiBtZXRob2QuXG4gKlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gbWF0IEF1Z21lbnRlZCBtYXRyaXggKG4geCBuICsgMSBjb2x1bW4pXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiByb3ctbWFqb3Igb3JkZXIuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUaGUgcmVzdWx0aW5nIHZlY3Rvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbHZlTGluZWFyU3lzdGVtKG1hdCkge1xuICBjb25zdCBuID0gbWF0Lmxlbmd0aDtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgIC8vIEZpbmQgbWF4IGluIHRoZSBpLXRoIGNvbHVtbiAoaWdub3JpbmcgaSAtIDEgZmlyc3Qgcm93cylcbiAgICBsZXQgbWF4Um93ID0gaTtcbiAgICBsZXQgbWF4RWwgPSBNYXRoLmFicyhtYXRbaV1baV0pO1xuICAgIGZvciAobGV0IHIgPSBpICsgMTsgciA8IG47IHIrKykge1xuICAgICAgY29uc3QgYWJzVmFsdWUgPSBNYXRoLmFicyhtYXRbcl1baV0pO1xuICAgICAgaWYgKGFic1ZhbHVlID4gbWF4RWwpIHtcbiAgICAgICAgbWF4RWwgPSBhYnNWYWx1ZTtcbiAgICAgICAgbWF4Um93ID0gcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWF4RWwgPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsOyAvLyBtYXRyaXggaXMgc2luZ3VsYXJcbiAgICB9XG5cbiAgICAvLyBTd2FwIG1heCByb3cgd2l0aCBpLXRoIChjdXJyZW50KSByb3dcbiAgICBjb25zdCB0bXAgPSBtYXRbbWF4Um93XTtcbiAgICBtYXRbbWF4Um93XSA9IG1hdFtpXTtcbiAgICBtYXRbaV0gPSB0bXA7XG5cbiAgICAvLyBTdWJ0cmFjdCB0aGUgaS10aCByb3cgdG8gbWFrZSBhbGwgdGhlIHJlbWFpbmluZyByb3dzIDAgaW4gdGhlIGktdGggY29sdW1uXG4gICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbjsgaisrKSB7XG4gICAgICBjb25zdCBjb2VmID0gLW1hdFtqXVtpXSAvIG1hdFtpXVtpXTtcbiAgICAgIGZvciAobGV0IGsgPSBpOyBrIDwgbiArIDE7IGsrKykge1xuICAgICAgICBpZiAoaSA9PSBrKSB7XG4gICAgICAgICAgbWF0W2pdW2tdID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXRbal1ba10gKz0gY29lZiAqIG1hdFtpXVtrXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFNvbHZlIEF4PWIgZm9yIHVwcGVyIHRyaWFuZ3VsYXIgbWF0cml4IEEgKG1hdClcbiAgY29uc3QgeCA9IG5ldyBBcnJheShuKTtcbiAgZm9yIChsZXQgbCA9IG4gLSAxOyBsID49IDA7IGwtLSkge1xuICAgIHhbbF0gPSBtYXRbbF1bbl0gLyBtYXRbbF1bbF07XG4gICAgZm9yIChsZXQgbSA9IGwgLSAxOyBtID49IDA7IG0tLSkge1xuICAgICAgbWF0W21dW25dIC09IG1hdFttXVtsXSAqIHhbbF07XG4gICAgfVxuICB9XG4gIHJldHVybiB4O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHJhZGlhbnMgdG8gdG8gZGVncmVlcy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGVJblJhZGlhbnMgQW5nbGUgaW4gcmFkaWFucy5cbiAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgaW4gZGVncmVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRGVncmVlcyhhbmdsZUluUmFkaWFucykge1xuICByZXR1cm4gKGFuZ2xlSW5SYWRpYW5zICogMTgwKSAvIE1hdGguUEk7XG59XG5cbi8qKlxuICogQ29udmVydHMgZGVncmVlcyB0byByYWRpYW5zLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluRGVncmVlcyBBbmdsZSBpbiBkZWdyZWVzLlxuICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBpbiByYWRpYW5zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9SYWRpYW5zKGFuZ2xlSW5EZWdyZWVzKSB7XG4gIHJldHVybiAoYW5nbGVJbkRlZ3JlZXMgKiBNYXRoLlBJKSAvIDE4MDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtb2R1bG8gb2YgYSAvIGIsIGRlcGVuZGluZyBvbiB0aGUgc2lnbiBvZiBiLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIERpdmlkZW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IGIgRGl2aXNvci5cbiAqIEByZXR1cm4ge251bWJlcn0gTW9kdWxvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbW9kdWxvKGEsIGIpIHtcbiAgY29uc3QgciA9IGEgJSBiO1xuICByZXR1cm4gciAqIGIgPCAwID8gciArIGIgOiByO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxpbmVhcmx5IGludGVycG9sYXRlZCB2YWx1ZSBvZiB4IGJldHdlZW4gYSBhbmQgYi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYSBOdW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIE51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IHggVmFsdWUgdG8gYmUgaW50ZXJwb2xhdGVkLlxuICogQHJldHVybiB7bnVtYmVyfSBJbnRlcnBvbGF0ZWQgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsZXJwKGEsIGIsIHgpIHtcbiAgcmV0dXJuIGEgKyB4ICogKGIgLSBhKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbnVtYmVyIHdpdGggYSBsaW1pdGVkIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBpbnB1dCBudW1iZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVjaW1hbHMgVGhlIG1heGltdW0gbnVtYmVyIG9mIGRlY2ltYWwgZGlnaXRzLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5wdXQgbnVtYmVyIHdpdGggYSBsaW1pdGVkIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRml4ZWQobiwgZGVjaW1hbHMpIHtcbiAgY29uc3QgZmFjdG9yID0gTWF0aC5wb3coMTAsIGRlY2ltYWxzKTtcbiAgcmV0dXJuIE1hdGgucm91bmQobiAqIGZhY3RvcikgLyBmYWN0b3I7XG59XG5cbi8qKlxuICogUm91bmRzIGEgbnVtYmVyIHRvIHRoZSBuZWFyZXN0IGludGVnZXIgdmFsdWUgY29uc2lkZXJpbmcgb25seSB0aGUgZ2l2ZW4gbnVtYmVyXG4gKiBvZiBkZWNpbWFsIGRpZ2l0cyAod2l0aCByb3VuZGluZyBvbiB0aGUgZmluYWwgZGlnaXQpLlxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIGlucHV0IG51bWJlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWNpbWFscyBUaGUgbWF4aW11bSBudW1iZXIgb2YgZGVjaW1hbCBkaWdpdHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBuZWFyZXN0IGludGVnZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3VuZChuLCBkZWNpbWFscykge1xuICByZXR1cm4gTWF0aC5yb3VuZCh0b0ZpeGVkKG4sIGRlY2ltYWxzKSk7XG59XG5cbi8qKlxuICogUm91bmRzIGEgbnVtYmVyIHRvIHRoZSBuZXh0IHNtYWxsZXIgaW50ZWdlciBjb25zaWRlcmluZyBvbmx5IHRoZSBnaXZlbiBudW1iZXJcbiAqIG9mIGRlY2ltYWwgZGlnaXRzICh3aXRoIHJvdW5kaW5nIG9uIHRoZSBmaW5hbCBkaWdpdCkuXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgaW5wdXQgbnVtYmVyLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlY2ltYWxzIFRoZSBtYXhpbXVtIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cy5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG5leHQgc21hbGxlciBpbnRlZ2VyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmxvb3IobiwgZGVjaW1hbHMpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IodG9GaXhlZChuLCBkZWNpbWFscykpO1xufVxuXG4vKipcbiAqIFJvdW5kcyBhIG51bWJlciB0byB0aGUgbmV4dCBiaWdnZXIgaW50ZWdlciBjb25zaWRlcmluZyBvbmx5IHRoZSBnaXZlbiBudW1iZXJcbiAqIG9mIGRlY2ltYWwgZGlnaXRzICh3aXRoIHJvdW5kaW5nIG9uIHRoZSBmaW5hbCBkaWdpdCkuXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgaW5wdXQgbnVtYmVyLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlY2ltYWxzIFRoZSBtYXhpbXVtIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cy5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG5leHQgYmlnZ2VyIGludGVnZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjZWlsKG4sIGRlY2ltYWxzKSB7XG4gIHJldHVybiBNYXRoLmNlaWwodG9GaXhlZChuLCBkZWNpbWFscykpO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL29ialxuICovXG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgcHJvcGVydGllcyBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjbGVhci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKG9iamVjdCkge1xuICBmb3IgKGNvbnN0IHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgIGRlbGV0ZSBvYmplY3RbcHJvcGVydHldO1xuICB9XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBoYXMgYW55IHByb3BlcnRpZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgb2JqZWN0IGlzIGVtcHR5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eShvYmplY3QpIHtcbiAgbGV0IHByb3BlcnR5O1xuICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gIXByb3BlcnR5O1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovVW5pdHNcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHsncmFkaWFucycgfCAnZGVncmVlcycgfCAnZnQnIHwgJ20nIHwgJ3BpeGVscycgfCAndGlsZS1waXhlbHMnIHwgJ3VzLWZ0J30gVW5pdHNcbiAqIFByb2plY3Rpb24gdW5pdHMuXG4gKi9cblxuLyoqXG4gKiBTZWUgaHR0cDovL2R1ZmYuZXNzLndhc2hpbmd0b24uZWR1L2RhdGEvcmFzdGVyL2RyZy9kb2NzL2dlb3RpZmYudHh0XG4gKiBAdHlwZSB7T2JqZWN0PG51bWJlciwgVW5pdHM+fVxuICovXG5jb25zdCB1bml0QnlDb2RlID0ge1xuICAnOTAwMSc6ICdtJyxcbiAgJzkwMDInOiAnZnQnLFxuICAnOTAwMyc6ICd1cy1mdCcsXG4gICc5MTAxJzogJ3JhZGlhbnMnLFxuICAnOTEwMic6ICdkZWdyZWVzJyxcbn07XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IGNvZGUgVW5pdCBjb2RlLlxuICogQHJldHVybiB7VW5pdHN9IFVuaXRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUNvZGUoY29kZSkge1xuICByZXR1cm4gdW5pdEJ5Q29kZVtjb2RlXTtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNZXRlcnNQZXJVbml0TG9va3VwXG4gKiBAcHJvcGVydHkge251bWJlcn0gcmFkaWFucyBSYWRpYW5zXG4gKiBAcHJvcGVydHkge251bWJlcn0gZGVncmVlcyBEZWdyZWVzXG4gKiBAcHJvcGVydHkge251bWJlcn0gZnQgIEZlZXRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtIE1ldGVyc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IHVzLWZ0IFVTIGZlZXRcbiAqL1xuXG4vKipcbiAqIE1ldGVycyBwZXIgdW5pdCBsb29rdXAgdGFibGUuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtNZXRlcnNQZXJVbml0TG9va3VwfVxuICogQGFwaVxuICovXG5leHBvcnQgY29uc3QgTUVURVJTX1BFUl9VTklUID0ge1xuICAvLyB1c2UgdGhlIHJhZGl1cyBvZiB0aGUgTm9ybWFsIHNwaGVyZVxuICAncmFkaWFucyc6IDYzNzA5OTcgLyAoMiAqIE1hdGguUEkpLFxuICAnZGVncmVlcyc6ICgyICogTWF0aC5QSSAqIDYzNzA5OTcpIC8gMzYwLFxuICAnZnQnOiAwLjMwNDgsXG4gICdtJzogMSxcbiAgJ3VzLWZ0JzogMTIwMCAvIDM5MzcsXG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovUHJvamVjdGlvblxuICovXG5pbXBvcnQge01FVEVSU19QRVJfVU5JVH0gZnJvbSAnLi9Vbml0cy5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IGNvZGUgVGhlIFNSUyBpZGVudGlmaWVyIGNvZGUsIGUuZy4gYEVQU0c6NDMyNmAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vVW5pdHMuanNcIikuVW5pdHN9IFt1bml0c10gVW5pdHMuIFJlcXVpcmVkIHVubGVzcyBhXG4gKiBwcm9qNCBwcm9qZWN0aW9uIGlzIGRlZmluZWQgZm9yIGBjb2RlYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIHZhbGlkaXR5IGV4dGVudCBmb3IgdGhlIFNSUy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbYXhpc09yaWVudGF0aW9uPSdlbnUnXSBUaGUgYXhpcyBvcmllbnRhdGlvbiBhcyBzcGVjaWZpZWQgaW4gUHJvajQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtnbG9iYWw9ZmFsc2VdIFdoZXRoZXIgdGhlIHByb2plY3Rpb24gaXMgdmFsaWQgZm9yIHRoZSB3aG9sZSBnbG9iZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWV0ZXJzUGVyVW5pdF0gVGhlIG1ldGVycyBwZXIgdW5pdCBmb3IgdGhlIFNSUy5cbiAqIElmIG5vdCBwcm92aWRlZCwgdGhlIGB1bml0c2AgYXJlIHVzZWQgdG8gZ2V0IHRoZSBtZXRlcnMgcGVyIHVuaXQgZnJvbSB0aGUge0BsaW5rIE1FVEVSU19QRVJfVU5JVH1cbiAqIGxvb2t1cCB0YWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW3dvcmxkRXh0ZW50XSBUaGUgd29ybGQgZXh0ZW50IGZvciB0aGUgU1JTLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6bnVtYmVyfSBbZ2V0UG9pbnRSZXNvbHV0aW9uXVxuICogRnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHJlc29sdXRpb24gYXQgYSBwb2ludC4gVGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFcbiAqIGBudW1iZXJgIHZpZXcgcmVzb2x1dGlvbiBhbmQgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYXMgYXJndW1lbnRzLCBhbmQgcmV0dXJuc1xuICogdGhlIGBudW1iZXJgIHJlc29sdXRpb24gaW4gcHJvamVjdGlvbiB1bml0cyBhdCB0aGUgcGFzc2VkIGNvb3JkaW5hdGUuIElmIHRoaXMgaXMgYHVuZGVmaW5lZGAsXG4gKiB0aGUgZGVmYXVsdCB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouZ2V0UG9pbnRSZXNvbHV0aW9ufSBmdW5jdGlvbiB3aWxsIGJlIHVzZWQuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcm9qZWN0aW9uIGRlZmluaXRpb24gY2xhc3MuIE9uZSBvZiB0aGVzZSBpcyBjcmVhdGVkIGZvciBlYWNoIHByb2plY3Rpb25cbiAqIHN1cHBvcnRlZCBpbiB0aGUgYXBwbGljYXRpb24gYW5kIHN0b3JlZCBpbiB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qfSBuYW1lc3BhY2UuXG4gKiBZb3UgY2FuIHVzZSB0aGVzZSBpbiBhcHBsaWNhdGlvbnMsIGJ1dCB0aGlzIGlzIG5vdCByZXF1aXJlZCwgYXMgQVBJIHBhcmFtc1xuICogYW5kIG9wdGlvbnMgdXNlIHtAbGluayBtb2R1bGU6b2wvcHJvan5Qcm9qZWN0aW9uTGlrZX0gd2hpY2ggbWVhbnMgdGhlIHNpbXBsZSBzdHJpbmdcbiAqIGNvZGUgd2lsbCBzdWZmaWNlLlxuICpcbiAqIFlvdSBjYW4gdXNlIHtAbGluayBtb2R1bGU6b2wvcHJvai5nZXR9IHRvIHJldHJpZXZlIHRoZSBvYmplY3QgZm9yIGEgcGFydGljdWxhclxuICogcHJvamVjdGlvbi5cbiAqXG4gKiBUaGUgbGlicmFyeSBpbmNsdWRlcyBkZWZpbml0aW9ucyBmb3IgYEVQU0c6NDMyNmAgYW5kIGBFUFNHOjM4NTdgLCB0b2dldGhlclxuICogd2l0aCB0aGUgZm9sbG93aW5nIGFsaWFzZXM6XG4gKiAqIGBFUFNHOjQzMjZgOiBDUlM6ODQsIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuNjo0MzI2LFxuICogICAgIHVybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0LCB1cm46b2djOmRlZjpjcnM6T0dDOjI6ODQsXG4gKiAgICAgaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzQzMjYsXG4gKiAgICAgdXJuOngtb2djOmRlZjpjcnM6RVBTRzo0MzI2XG4gKiAqIGBFUFNHOjM4NTdgOiBFUFNHOjEwMjEwMCwgRVBTRzoxMDIxMTMsIEVQU0c6OTAwOTEzLFxuICogICAgIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuMTg6MzozODU3LFxuICogICAgIGh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCMzODU3XG4gKlxuICogSWYgeW91IHVzZSBbcHJvajRqc10oaHR0cHM6Ly9naXRodWIuY29tL3Byb2o0anMvcHJvajRqcyksIGFsaWFzZXMgY2FuXG4gKiBiZSBhZGRlZCB1c2luZyBgcHJvajQuZGVmcygpYC4gQWZ0ZXIgYWxsIHJlcXVpcmVkIHByb2plY3Rpb24gZGVmaW5pdGlvbnMgYXJlXG4gKiBhZGRlZCwgY2FsbCB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qL3Byb2o0LnJlZ2lzdGVyfSBmdW5jdGlvbi5cbiAqXG4gKiBAYXBpXG4gKi9cbmNsYXNzIFByb2plY3Rpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFByb2plY3Rpb24gb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5jb2RlXyA9IG9wdGlvbnMuY29kZTtcblxuICAgIC8qKlxuICAgICAqIFVuaXRzIG9mIHByb2plY3RlZCBjb29yZGluYXRlcy4gV2hlbiBzZXQgdG8gYFRJTEVfUElYRUxTYCwgYVxuICAgICAqIGB0aGlzLmV4dGVudF9gIGFuZCBgdGhpcy53b3JsZEV4dGVudF9gIG11c3QgYmUgY29uZmlndXJlZCBwcm9wZXJseSBmb3IgZWFjaFxuICAgICAqIHRpbGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5Vbml0c31cbiAgICAgKi9cbiAgICB0aGlzLnVuaXRzXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5Vbml0c30gKi8gKG9wdGlvbnMudW5pdHMpO1xuXG4gICAgLyoqXG4gICAgICogVmFsaWRpdHkgZXh0ZW50IG9mIHRoZSBwcm9qZWN0aW9uIGluIHByb2plY3RlZCBjb29yZGluYXRlcy4gRm9yIHByb2plY3Rpb25zXG4gICAgICogd2l0aCBgVElMRV9QSVhFTFNgIHVuaXRzLCB0aGlzIGlzIHRoZSBleHRlbnQgb2YgdGhlIHRpbGUgaW5cbiAgICAgKiB0aWxlIHBpeGVsIHNwYWNlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdGhpcy5leHRlbnRfID0gb3B0aW9ucy5leHRlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZXh0ZW50IDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEV4dGVudCBvZiB0aGUgd29ybGQgaW4gRVBTRzo0MzI2LiBGb3IgcHJvamVjdGlvbnMgd2l0aFxuICAgICAqIGBUSUxFX1BJWEVMU2AgdW5pdHMsIHRoaXMgaXMgdGhlIGV4dGVudCBvZiB0aGUgdGlsZSBpblxuICAgICAqIHByb2plY3RlZCBjb29yZGluYXRlIHNwYWNlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdGhpcy53b3JsZEV4dGVudF8gPVxuICAgICAgb3B0aW9ucy53b3JsZEV4dGVudCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53b3JsZEV4dGVudCA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5heGlzT3JpZW50YXRpb25fID1cbiAgICAgIG9wdGlvbnMuYXhpc09yaWVudGF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF4aXNPcmllbnRhdGlvbiA6ICdlbnUnO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmdsb2JhbF8gPSBvcHRpb25zLmdsb2JhbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5nbG9iYWwgOiBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5jYW5XcmFwWF8gPSAhISh0aGlzLmdsb2JhbF8gJiYgdGhpcy5leHRlbnRfKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuZ2V0UG9pbnRSZXNvbHV0aW9uRnVuY18gPSBvcHRpb25zLmdldFBvaW50UmVzb2x1dGlvbjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5kZWZhdWx0VGlsZUdyaWRfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5tZXRlcnNQZXJVbml0XyA9IG9wdGlvbnMubWV0ZXJzUGVyVW5pdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgcHJvamVjdGlvbiBpcyBzdWl0YWJsZSBmb3Igd3JhcHBpbmcgdGhlIHgtYXhpc1xuICAgKi9cbiAgY2FuV3JhcFgoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FuV3JhcFhfO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29kZSBmb3IgdGhpcyBwcm9qZWN0aW9uLCBlLmcuICdFUFNHOjQzMjYnLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IENvZGUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldENvZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29kZV87XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWxpZGl0eSBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRFeHRlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZW50XztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHVuaXRzIG9mIHRoaXMgcHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5Vbml0c30gVW5pdHMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFVuaXRzKCkge1xuICAgIHJldHVybiB0aGlzLnVuaXRzXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFtb3VudCBvZiBtZXRlcnMgcGVyIHVuaXQgb2YgdGhpcyBwcm9qZWN0aW9uLiAgSWYgdGhlIHByb2plY3Rpb24gaXNcbiAgICogbm90IGNvbmZpZ3VyZWQgd2l0aCBgbWV0ZXJzUGVyVW5pdGAgb3IgYSB1bml0cyBpZGVudGlmaWVyLCB0aGUgcmV0dXJuIGlzXG4gICAqIGB1bmRlZmluZWRgLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBNZXRlcnMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE1ldGVyc1BlclVuaXQoKSB7XG4gICAgcmV0dXJuIHRoaXMubWV0ZXJzUGVyVW5pdF8gfHwgTUVURVJTX1BFUl9VTklUW3RoaXMudW5pdHNfXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdvcmxkIGV4dGVudCBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFdvcmxkRXh0ZW50KCkge1xuICAgIHJldHVybiB0aGlzLndvcmxkRXh0ZW50XztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGF4aXMgb3JpZW50YXRpb24gb2YgdGhpcyBwcm9qZWN0aW9uLlxuICAgKiBFeGFtcGxlIHZhbHVlcyBhcmU6XG4gICAqIGVudSAtIHRoZSBkZWZhdWx0IGVhc3RpbmcsIG5vcnRoaW5nLCBlbGV2YXRpb24uXG4gICAqIG5ldSAtIG5vcnRoaW5nLCBlYXN0aW5nLCB1cCAtIHVzZWZ1bCBmb3IgXCJsYXQvbG9uZ1wiIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMsXG4gICAqICAgICBvciBzb3V0aCBvcmllbnRhdGVkIHRyYW5zdmVyc2UgbWVyY2F0b3IuXG4gICAqIHdudSAtIHdlc3RpbmcsIG5vcnRoaW5nLCB1cCAtIHNvbWUgcGxhbmV0YXJ5IGNvb3JkaW5hdGUgc3lzdGVtcyBoYXZlXG4gICAqICAgICBcIndlc3QgcG9zaXRpdmVcIiBjb29yZGluYXRlIHN5c3RlbXNcbiAgICogQHJldHVybiB7c3RyaW5nfSBBeGlzIG9yaWVudGF0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRBeGlzT3JpZW50YXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXhpc09yaWVudGF0aW9uXztcbiAgfVxuXG4gIC8qKlxuICAgKiBJcyB0aGlzIHByb2plY3Rpb24gYSBnbG9iYWwgcHJvamVjdGlvbiB3aGljaCBzcGFucyB0aGUgd2hvbGUgd29ybGQ/XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHByb2plY3Rpb24gaXMgZ2xvYmFsLlxuICAgKiBAYXBpXG4gICAqL1xuICBpc0dsb2JhbCgpIHtcbiAgICByZXR1cm4gdGhpcy5nbG9iYWxfO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBpZiB0aGUgcHJvamVjdGlvbiBpcyBhIGdsb2JhbCBwcm9qZWN0aW9uIHdoaWNoIHNwYW5zIHRoZSB3aG9sZSB3b3JsZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGdsb2JhbCBXaGV0aGVyIHRoZSBwcm9qZWN0aW9uIGlzIGdsb2JhbC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0R2xvYmFsKGdsb2JhbCkge1xuICAgIHRoaXMuZ2xvYmFsXyA9IGdsb2JhbDtcbiAgICB0aGlzLmNhbldyYXBYXyA9ICEhKGdsb2JhbCAmJiB0aGlzLmV4dGVudF8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRoZSBkZWZhdWx0IHRpbGUgZ3JpZC5cbiAgICovXG4gIGdldERlZmF1bHRUaWxlR3JpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kZWZhdWx0VGlsZUdyaWRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGhlIGRlZmF1bHQgdGlsZSBncmlkLlxuICAgKi9cbiAgc2V0RGVmYXVsdFRpbGVHcmlkKHRpbGVHcmlkKSB7XG4gICAgdGhpcy5kZWZhdWx0VGlsZUdyaWRfID0gdGlsZUdyaWQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSB2YWxpZGl0eSBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRFeHRlbnQoZXh0ZW50KSB7XG4gICAgdGhpcy5leHRlbnRfID0gZXh0ZW50O1xuICAgIHRoaXMuY2FuV3JhcFhfID0gISEodGhpcy5nbG9iYWxfICYmIGV4dGVudCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSB3b3JsZCBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSB3b3JsZEV4dGVudCBXb3JsZCBleHRlbnRcbiAgICogICAgIFttaW5sb24sIG1pbmxhdCwgbWF4bG9uLCBtYXhsYXRdLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRXb3JsZEV4dGVudCh3b3JsZEV4dGVudCkge1xuICAgIHRoaXMud29ybGRFeHRlbnRfID0gd29ybGRFeHRlbnQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBnZXRQb2ludFJlc29sdXRpb24gZnVuY3Rpb24gKHNlZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouZ2V0UG9pbnRSZXNvbHV0aW9ufVxuICAgKiBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ9IGZ1bmMgRnVuY3Rpb25cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0R2V0UG9pbnRSZXNvbHV0aW9uKGZ1bmMpIHtcbiAgICB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfID0gZnVuYztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1c3RvbSBwb2ludCByZXNvbHV0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIHByb2plY3Rpb24gKGlmIHNldCkuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ8dW5kZWZpbmVkfSBUaGUgY3VzdG9tIHBvaW50XG4gICAqIHJlc29sdXRpb24gZnVuY3Rpb24gKGlmIHNldCkuXG4gICAqL1xuICBnZXRQb2ludFJlc29sdXRpb25GdW5jKCkge1xuICAgIHJldHVybiB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFByb2plY3Rpb247XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9lcHNnMzg1N1xuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL1Byb2plY3Rpb24uanMnO1xuXG4vKipcbiAqIFJhZGl1cyBvZiBXR1M4NCBzcGhlcmVcbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBSQURJVVMgPSA2Mzc4MTM3O1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IEhBTEZfU0laRSA9IE1hdGguUEkgKiBSQURJVVM7XG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IGNvbnN0IEVYVEVOVCA9IFstSEFMRl9TSVpFLCAtSEFMRl9TSVpFLCBIQUxGX1NJWkUsIEhBTEZfU0laRV07XG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IGNvbnN0IFdPUkxEX0VYVEVOVCA9IFstMTgwLCAtODUsIDE4MCwgODVdO1xuXG4vKipcbiAqIE1heGltdW0gc2FmZSB2YWx1ZSBpbiB5IGRpcmVjdGlvblxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgTUFYX1NBRkVfWSA9IFJBRElVUyAqIE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgLyAyKSk7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJvamVjdGlvbiBvYmplY3QgZm9yIHdlYi9zcGhlcmljYWwgTWVyY2F0b3IgKEVQU0c6Mzg1NykuXG4gKi9cbmNsYXNzIEVQU0czODU3UHJvamVjdGlvbiBleHRlbmRzIFByb2plY3Rpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgQ29kZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvZGUpIHtcbiAgICBzdXBlcih7XG4gICAgICBjb2RlOiBjb2RlLFxuICAgICAgdW5pdHM6ICdtJyxcbiAgICAgIGV4dGVudDogRVhURU5ULFxuICAgICAgZ2xvYmFsOiB0cnVlLFxuICAgICAgd29ybGRFeHRlbnQ6IFdPUkxEX0VYVEVOVCxcbiAgICAgIGdldFBvaW50UmVzb2x1dGlvbjogZnVuY3Rpb24gKHJlc29sdXRpb24sIHBvaW50KSB7XG4gICAgICAgIHJldHVybiByZXNvbHV0aW9uIC8gTWF0aC5jb3NoKHBvaW50WzFdIC8gUkFESVVTKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBQcm9qZWN0aW9ucyBlcXVhbCB0byBFUFNHOjM4NTcuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICovXG5leHBvcnQgY29uc3QgUFJPSkVDVElPTlMgPSBbXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6Mzg1NycpLFxuICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjEwMjEwMCcpLFxuICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjEwMjExMycpLFxuICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjkwMDkxMycpLFxuICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdodHRwOi8vd3d3Lm9wZW5naXMubmV0L2RlZi9jcnMvRVBTRy8wLzM4NTcnKSxcbiAgbmV3IEVQU0czODU3UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzM4NTcnKSxcbl07XG5cbi8qKlxuICogVHJhbnNmb3JtYXRpb24gZnJvbSBFUFNHOjQzMjYgdG8gRVBTRzozODU3LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvdXRwdXRdIE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZGltZW5zaW9uXSBEaW1lbnNpb24gKGRlZmF1bHQgaXMgYDJgKS5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21FUFNHNDMyNihpbnB1dCwgb3V0cHV0LCBkaW1lbnNpb24pIHtcbiAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICBkaW1lbnNpb24gPSBkaW1lbnNpb24gPiAxID8gZGltZW5zaW9uIDogMjtcbiAgaWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgfVxuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgIG91dHB1dFtpXSA9IChIQUxGX1NJWkUgKiBpbnB1dFtpXSkgLyAxODA7XG4gICAgbGV0IHkgPSBSQURJVVMgKiBNYXRoLmxvZyhNYXRoLnRhbigoTWF0aC5QSSAqICgraW5wdXRbaSArIDFdICsgOTApKSAvIDM2MCkpO1xuICAgIGlmICh5ID4gTUFYX1NBRkVfWSkge1xuICAgICAgeSA9IE1BWF9TQUZFX1k7XG4gICAgfSBlbHNlIGlmICh5IDwgLU1BWF9TQUZFX1kpIHtcbiAgICAgIHkgPSAtTUFYX1NBRkVfWTtcbiAgICB9XG4gICAgb3V0cHV0W2kgKyAxXSA9IHk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm1hdGlvbiBmcm9tIEVQU0c6Mzg1NyB0byBFUFNHOjQzMjYuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW291dHB1dF0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtkaW1lbnNpb25dIERpbWVuc2lvbiAoZGVmYXVsdCBpcyBgMmApLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9FUFNHNDMyNihpbnB1dCwgb3V0cHV0LCBkaW1lbnNpb24pIHtcbiAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICBkaW1lbnNpb24gPSBkaW1lbnNpb24gPiAxID8gZGltZW5zaW9uIDogMjtcbiAgaWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgfVxuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgIG91dHB1dFtpXSA9ICgxODAgKiBpbnB1dFtpXSkgLyBIQUxGX1NJWkU7XG4gICAgb3V0cHV0W2kgKyAxXSA9XG4gICAgICAoMzYwICogTWF0aC5hdGFuKE1hdGguZXhwKGlucHV0W2kgKyAxXSAvIFJBRElVUykpKSAvIE1hdGguUEkgLSA5MDtcbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovZXBzZzQzMjZcbiAqL1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9Qcm9qZWN0aW9uLmpzJztcblxuLyoqXG4gKiBTZW1pLW1ham9yIHJhZGl1cyBvZiB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IFJBRElVUyA9IDYzNzgxMzc7XG5cbi8qKlxuICogRXh0ZW50IG9mIHRoZSBFUFNHOjQzMjYgcHJvamVjdGlvbiB3aGljaCBpcyB0aGUgd2hvbGUgd29ybGQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IGNvbnN0IEVYVEVOVCA9IFstMTgwLCAtOTAsIDE4MCwgOTBdO1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IE1FVEVSU19QRVJfVU5JVCA9IChNYXRoLlBJICogUkFESVVTKSAvIDE4MDtcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcm9qZWN0aW9uIG9iamVjdCBmb3IgV0dTODQgZ2VvZ3JhcGhpYyBjb29yZGluYXRlcyAoRVBTRzo0MzI2KS5cbiAqXG4gKiBOb3RlIHRoYXQgT3BlbkxheWVycyBkb2VzIG5vdCBzdHJpY3RseSBjb21wbHkgd2l0aCB0aGUgRVBTRyBkZWZpbml0aW9uLlxuICogVGhlIEVQU0cgcmVnaXN0cnkgZGVmaW5lcyA0MzI2IGFzIGEgQ1JTIGZvciBMYXRpdHVkZSxMb25naXR1ZGUgKHkseCkuXG4gKiBPcGVuTGF5ZXJzIHRyZWF0cyBFUFNHOjQzMjYgYXMgYSBwc2V1ZG8tcHJvamVjdGlvbiwgd2l0aCB4LHkgY29vcmRpbmF0ZXMuXG4gKi9cbmNsYXNzIEVQU0c0MzI2UHJvamVjdGlvbiBleHRlbmRzIFByb2plY3Rpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgQ29kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtheGlzT3JpZW50YXRpb25dIEF4aXMgb3JpZW50YXRpb24uXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb2RlLCBheGlzT3JpZW50YXRpb24pIHtcbiAgICBzdXBlcih7XG4gICAgICBjb2RlOiBjb2RlLFxuICAgICAgdW5pdHM6ICdkZWdyZWVzJyxcbiAgICAgIGV4dGVudDogRVhURU5ULFxuICAgICAgYXhpc09yaWVudGF0aW9uOiBheGlzT3JpZW50YXRpb24sXG4gICAgICBnbG9iYWw6IHRydWUsXG4gICAgICBtZXRlcnNQZXJVbml0OiBNRVRFUlNfUEVSX1VOSVQsXG4gICAgICB3b3JsZEV4dGVudDogRVhURU5ULFxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogUHJvamVjdGlvbnMgZXF1YWwgdG8gRVBTRzo0MzI2LlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xuZXhwb3J0IGNvbnN0IFBST0pFQ1RJT05TID0gW1xuICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCdDUlM6ODQnKSxcbiAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignRVBTRzo0MzI2JywgJ25ldScpLFxuICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCd1cm46b2djOmRlZjpjcnM6T0dDOjEuMzpDUlM4NCcpLFxuICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCd1cm46b2djOmRlZjpjcnM6T0dDOjI6ODQnKSxcbiAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9kZWYvY3JzL09HQy8xLjMvQ1JTODQnKSxcbiAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzQzMjYnLCAnbmV1JyksXG4gIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZGVmL2Nycy9FUFNHLzAvNDMyNicsICduZXUnKSxcbl07XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9wcm9qZWN0aW9uc1xuICovXG5cbi8qKlxuICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xubGV0IGNhY2hlID0ge307XG5cbi8qKlxuICogQ2xlYXIgdGhlIHByb2plY3Rpb25zIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIoKSB7XG4gIGNhY2hlID0ge307XG59XG5cbi8qKlxuICogR2V0IGEgY2FjaGVkIHByb2plY3Rpb24gYnkgY29kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIFRoZSBjb2RlIGZvciB0aGUgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBUaGUgcHJvamVjdGlvbiAoaWYgY2FjaGVkKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChjb2RlKSB7XG4gIHJldHVybiAoXG4gICAgY2FjaGVbY29kZV0gfHxcbiAgICBjYWNoZVtjb2RlLnJlcGxhY2UoL3VybjooeC0pP29nYzpkZWY6Y3JzOkVQU0c6KC4qOik/KFxcdyspJC8sICdFUFNHOiQzJyldIHx8XG4gICAgbnVsbFxuICApO1xufVxuXG4vKipcbiAqIEFkZCBhIHByb2plY3Rpb24gdG8gdGhlIGNhY2hlLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgVGhlIHByb2plY3Rpb24gY29kZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24gdG8gY2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGQoY29kZSwgcHJvamVjdGlvbikge1xuICBjYWNoZVtjb2RlXSA9IHByb2plY3Rpb247XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai90cmFuc2Zvcm1zXG4gKi9cbmltcG9ydCB7aXNFbXB0eX0gZnJvbSAnLi4vb2JqLmpzJztcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9uPj59XG4gKi9cbmxldCB0cmFuc2Zvcm1zID0ge307XG5cbi8qKlxuICogQ2xlYXIgdGhlIHRyYW5zZm9ybSBjYWNoZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKCkge1xuICB0cmFuc2Zvcm1zID0ge307XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgY29udmVyc2lvbiBmdW5jdGlvbiB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZVxuICogcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2UgU291cmNlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gZGVzdGluYXRpb24gRGVzdGluYXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChzb3VyY2UsIGRlc3RpbmF0aW9uLCB0cmFuc2Zvcm1Gbikge1xuICBjb25zdCBzb3VyY2VDb2RlID0gc291cmNlLmdldENvZGUoKTtcbiAgY29uc3QgZGVzdGluYXRpb25Db2RlID0gZGVzdGluYXRpb24uZ2V0Q29kZSgpO1xuICBpZiAoIShzb3VyY2VDb2RlIGluIHRyYW5zZm9ybXMpKSB7XG4gICAgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXSA9IHt9O1xuICB9XG4gIHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXSA9IHRyYW5zZm9ybUZuO1xufVxuXG4vKipcbiAqIFVucmVnaXN0ZXJzIHRoZSBjb252ZXJzaW9uIGZ1bmN0aW9uIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLiAgVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjbGVhbiB1cFxuICogY2FjaGVkIHRyYW5zZm9ybXMgZHVyaW5nIHRlc3RpbmcuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRoZSB1bnJlZ2lzdGVyZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgY29uc3Qgc291cmNlQ29kZSA9IHNvdXJjZS5nZXRDb2RlKCk7XG4gIGNvbnN0IGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uLmdldENvZGUoKTtcbiAgY29uc3QgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdO1xuICBkZWxldGUgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdO1xuICBpZiAoaXNFbXB0eSh0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdKSkge1xuICAgIGRlbGV0ZSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdO1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm07XG59XG5cbi8qKlxuICogR2V0IGEgdHJhbnNmb3JtIGdpdmVuIGEgc291cmNlIGNvZGUgYW5kIGEgZGVzdGluYXRpb24gY29kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VDb2RlIFRoZSBjb2RlIGZvciB0aGUgc291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb25Db2RlIFRoZSBjb2RlIGZvciB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb258dW5kZWZpbmVkfSBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIChpZiBmb3VuZCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQoc291cmNlQ29kZSwgZGVzdGluYXRpb25Db2RlKSB7XG4gIGxldCB0cmFuc2Zvcm07XG4gIGlmIChzb3VyY2VDb2RlIGluIHRyYW5zZm9ybXMgJiYgZGVzdGluYXRpb25Db2RlIGluIHRyYW5zZm9ybXNbc291cmNlQ29kZV0pIHtcbiAgICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV07XG4gIH1cbiAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9zcGhlcmVcbiAqL1xuaW1wb3J0IHt0b0RlZ3JlZXMsIHRvUmFkaWFuc30gZnJvbSAnLi9tYXRoLmpzJztcblxuLyoqXG4gKiBPYmplY3QgbGl0ZXJhbCB3aXRoIG9wdGlvbnMgZm9yIHRoZSB7QGxpbmsgZ2V0TGVuZ3RofSBvciB7QGxpbmsgZ2V0QXJlYX1cbiAqIGZ1bmN0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNwaGVyZU1ldHJpY09wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbj0nRVBTRzozODU3J11cbiAqIFByb2plY3Rpb24gb2YgdGhlICBnZW9tZXRyeS4gIEJ5IGRlZmF1bHQsIHRoZSBnZW9tZXRyeSBpcyBhc3N1bWVkIHRvIGJlIGluXG4gKiBXZWIgTWVyY2F0b3IuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JhZGl1cz02MzcxMDA4LjhdIFNwaGVyZSByYWRpdXMuICBCeSBkZWZhdWx0LCB0aGVcbiAqIFttZWFuIEVhcnRoIHJhZGl1c10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRWFydGhfcmFkaXVzI01lYW5fcmFkaXVzKVxuICogZm9yIHRoZSBXR1M4NCBlbGxpcHNvaWQgaXMgdXNlZC5cbiAqL1xuXG4vKipcbiAqIFRoZSBtZWFuIEVhcnRoIHJhZGl1cyAoMS8zICogKDJhICsgYikpIGZvciB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRWFydGhfcmFkaXVzI01lYW5fcmFkaXVzXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9SQURJVVMgPSA2MzcxMDA4Ljg7XG5cbi8qKlxuICogR2V0IHRoZSBncmVhdCBjaXJjbGUgZGlzdGFuY2UgKGluIG1ldGVycykgYmV0d2VlbiB0d28gZ2VvZ3JhcGhpYyBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7QXJyYXl9IGMxIFN0YXJ0aW5nIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0FycmF5fSBjMiBFbmRpbmcgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbcmFkaXVzXSBUaGUgc3BoZXJlIHJhZGl1cyB0byB1c2UuICBEZWZhdWx0cyB0byB0aGUgRWFydGgnc1xuICogICAgIG1lYW4gcmFkaXVzIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBncmVhdCBjaXJjbGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnRzIChpbiBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGlzdGFuY2UoYzEsIGMyLCByYWRpdXMpIHtcbiAgcmFkaXVzID0gcmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICBjb25zdCBsYXQxID0gdG9SYWRpYW5zKGMxWzFdKTtcbiAgY29uc3QgbGF0MiA9IHRvUmFkaWFucyhjMlsxXSk7XG4gIGNvbnN0IGRlbHRhTGF0QnkyID0gKGxhdDIgLSBsYXQxKSAvIDI7XG4gIGNvbnN0IGRlbHRhTG9uQnkyID0gdG9SYWRpYW5zKGMyWzBdIC0gYzFbMF0pIC8gMjtcbiAgY29uc3QgYSA9XG4gICAgTWF0aC5zaW4oZGVsdGFMYXRCeTIpICogTWF0aC5zaW4oZGVsdGFMYXRCeTIpICtcbiAgICBNYXRoLnNpbihkZWx0YUxvbkJ5MikgKlxuICAgICAgTWF0aC5zaW4oZGVsdGFMb25CeTIpICpcbiAgICAgIE1hdGguY29zKGxhdDEpICpcbiAgICAgIE1hdGguY29zKGxhdDIpO1xuICByZXR1cm4gMiAqIHJhZGl1cyAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMSAtIGEpKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGN1bXVsYXRpdmUgZ3JlYXQgY2lyY2xlIGxlbmd0aCBvZiBsaW5lc3RyaW5nIGNvb3JkaW5hdGVzIChnZW9ncmFwaGljKS5cbiAqIEBwYXJhbSB7QXJyYXl9IGNvb3JkaW5hdGVzIExpbmVzdHJpbmcgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFRoZSBzcGhlcmUgcmFkaXVzIHRvIHVzZS5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGxlbmd0aCAoaW4gbWV0ZXJzKS5cbiAqL1xuZnVuY3Rpb24gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRpbmF0ZXMsIHJhZGl1cykge1xuICBsZXQgbGVuZ3RoID0gMDtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWkgLSAxOyArK2kpIHtcbiAgICBsZW5ndGggKz0gZ2V0RGlzdGFuY2UoY29vcmRpbmF0ZXNbaV0sIGNvb3JkaW5hdGVzW2kgKyAxXSwgcmFkaXVzKTtcbiAgfVxuICByZXR1cm4gbGVuZ3RoO1xufVxuXG4vKipcbiAqIEdldCB0aGUgc3BoZXJpY2FsIGxlbmd0aCBvZiBhIGdlb21ldHJ5LiAgVGhpcyBsZW5ndGggaXMgdGhlIHN1bSBvZiB0aGVcbiAqIGdyZWF0IGNpcmNsZSBkaXN0YW5jZXMgYmV0d2VlbiBjb29yZGluYXRlcy4gIEZvciBwb2x5Z29ucywgdGhlIGxlbmd0aCBpc1xuICogdGhlIHN1bSBvZiBhbGwgcmluZ3MuICBGb3IgcG9pbnRzLCB0aGUgbGVuZ3RoIGlzIHplcm8uICBGb3IgbXVsdGktcGFydFxuICogZ2VvbWV0cmllcywgdGhlIGxlbmd0aCBpcyB0aGUgc3VtIG9mIHRoZSBsZW5ndGggb2YgZWFjaCBwYXJ0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgQSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7U3BoZXJlTWV0cmljT3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMgZm9yIHRoZVxuICogbGVuZ3RoIGNhbGN1bGF0aW9uLiAgQnkgZGVmYXVsdCwgZ2VvbWV0cmllcyBhcmUgYXNzdW1lZCB0byBiZSBpbiAnRVBTRzozODU3Jy5cbiAqIFlvdSBjYW4gY2hhbmdlIHRoaXMgYnkgcHJvdmlkaW5nIGEgYHByb2plY3Rpb25gIG9wdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHNwaGVyaWNhbCBsZW5ndGggKGluIG1ldGVycykuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZW5ndGgoZ2VvbWV0cnksIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICBjb25zdCBwcm9qZWN0aW9uID0gb3B0aW9ucy5wcm9qZWN0aW9uIHx8ICdFUFNHOjM4NTcnO1xuICBjb25zdCB0eXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xuICBpZiAodHlwZSAhPT0gJ0dlb21ldHJ5Q29sbGVjdGlvbicpIHtcbiAgICBnZW9tZXRyeSA9IGdlb21ldHJ5LmNsb25lKCkudHJhbnNmb3JtKHByb2plY3Rpb24sICdFUFNHOjQzMjYnKTtcbiAgfVxuICBsZXQgbGVuZ3RoID0gMDtcbiAgbGV0IGNvb3JkaW5hdGVzLCBjb29yZHMsIGksIGlpLCBqLCBqajtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnUG9pbnQnOlxuICAgIGNhc2UgJ011bHRpUG9pbnQnOiB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAnTGluZVN0cmluZyc6XG4gICAgY2FzZSAnTGluZWFyUmluZyc6IHtcbiAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKFxuICAgICAgICBnZW9tZXRyeVxuICAgICAgKS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgbGVuZ3RoID0gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRpbmF0ZXMsIHJhZGl1cyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzpcbiAgICBjYXNlICdQb2x5Z29uJzoge1xuICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoXG4gICAgICAgIGdlb21ldHJ5XG4gICAgICApLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgbGVuZ3RoICs9IGdldExlbmd0aEludGVybmFsKGNvb3JkaW5hdGVzW2ldLCByYWRpdXMpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ011bHRpUG9seWdvbic6IHtcbiAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKFxuICAgICAgICBnZW9tZXRyeVxuICAgICAgKS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGNvb3JkcyA9IGNvb3JkaW5hdGVzW2ldO1xuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGNvb3Jkcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgbGVuZ3RoICs9IGdldExlbmd0aEludGVybmFsKGNvb3Jkc1tqXSwgcmFkaXVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ0dlb21ldHJ5Q29sbGVjdGlvbic6IHtcbiAgICAgIGNvbnN0IGdlb21ldHJpZXMgPVxuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gKi8gKFxuICAgICAgICAgIGdlb21ldHJ5XG4gICAgICAgICkuZ2V0R2VvbWV0cmllcygpO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgbGVuZ3RoICs9IGdldExlbmd0aChnZW9tZXRyaWVzW2ldLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6ICcgKyB0eXBlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGxlbmd0aDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzcGhlcmljYWwgYXJlYSBmb3IgYSBsaXN0IG9mIGNvb3JkaW5hdGVzLlxuICpcbiAqIFtSZWZlcmVuY2VdKGh0dHBzOi8vdHJzLmpwbC5uYXNhLmdvdi9oYW5kbGUvMjAxNC80MDQwOSlcbiAqIFJvYmVydC4gRy4gQ2hhbWJlcmxhaW4gYW5kIFdpbGxpYW0gSC4gRHVxdWV0dGUsIFwiU29tZSBBbGdvcml0aG1zIGZvclxuICogUG9seWdvbnMgb24gYSBTcGhlcmVcIiwgSlBMIFB1YmxpY2F0aW9uIDA3LTAzLCBKZXQgUHJvcHVsc2lvblxuICogTGFib3JhdG9yeSwgUGFzYWRlbmEsIENBLCBKdW5lIDIwMDdcbiAqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgTGlzdCBvZiBjb29yZGluYXRlcyBvZiBhIGxpbmVhclxuICogcmluZy4gSWYgdGhlIHJpbmcgaXMgb3JpZW50ZWQgY2xvY2t3aXNlLCB0aGUgYXJlYSB3aWxsIGJlIHBvc2l0aXZlLFxuICogb3RoZXJ3aXNlIGl0IHdpbGwgYmUgbmVnYXRpdmUuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFRoZSBzcGhlcmUgcmFkaXVzLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChpbiBzcXVhcmUgbWV0ZXJzKS5cbiAqL1xuZnVuY3Rpb24gZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzLCByYWRpdXMpIHtcbiAgbGV0IGFyZWEgPSAwO1xuICBjb25zdCBsZW4gPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gIGxldCB4MSA9IGNvb3JkaW5hdGVzW2xlbiAtIDFdWzBdO1xuICBsZXQgeTEgPSBjb29yZGluYXRlc1tsZW4gLSAxXVsxXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IHgyID0gY29vcmRpbmF0ZXNbaV1bMF07XG4gICAgY29uc3QgeTIgPSBjb29yZGluYXRlc1tpXVsxXTtcbiAgICBhcmVhICs9XG4gICAgICB0b1JhZGlhbnMoeDIgLSB4MSkgKlxuICAgICAgKDIgKyBNYXRoLnNpbih0b1JhZGlhbnMoeTEpKSArIE1hdGguc2luKHRvUmFkaWFucyh5MikpKTtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIChhcmVhICogcmFkaXVzICogcmFkaXVzKSAvIDIuMDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHNwaGVyaWNhbCBhcmVhIG9mIGEgZ2VvbWV0cnkuICBUaGlzIGlzIHRoZSBhcmVhIChpbiBtZXRlcnMpIGFzc3VtaW5nXG4gKiB0aGF0IHBvbHlnb24gZWRnZXMgYXJlIHNlZ21lbnRzIG9mIGdyZWF0IGNpcmNsZXMgb24gYSBzcGhlcmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBBIGdlb21ldHJ5LlxuICogQHBhcmFtIHtTcGhlcmVNZXRyaWNPcHRpb25zfSBbb3B0aW9uc10gT3B0aW9ucyBmb3IgdGhlIGFyZWFcbiAqICAgICBjYWxjdWxhdGlvbi4gIEJ5IGRlZmF1bHQsIGdlb21ldHJpZXMgYXJlIGFzc3VtZWQgdG8gYmUgaW4gJ0VQU0c6Mzg1NycuXG4gKiAgICAgWW91IGNhbiBjaGFuZ2UgdGhpcyBieSBwcm92aWRpbmcgYSBgcHJvamVjdGlvbmAgb3B0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgc3BoZXJpY2FsIGFyZWEgKGluIHNxdWFyZSBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJlYShnZW9tZXRyeSwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgY29uc3QgcmFkaXVzID0gb3B0aW9ucy5yYWRpdXMgfHwgREVGQVVMVF9SQURJVVM7XG4gIGNvbnN0IHByb2plY3Rpb24gPSBvcHRpb25zLnByb2plY3Rpb24gfHwgJ0VQU0c6Mzg1Nyc7XG4gIGNvbnN0IHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gIGlmICh0eXBlICE9PSAnR2VvbWV0cnlDb2xsZWN0aW9uJykge1xuICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKS50cmFuc2Zvcm0ocHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICB9XG4gIGxldCBhcmVhID0gMDtcbiAgbGV0IGNvb3JkaW5hdGVzLCBjb29yZHMsIGksIGlpLCBqLCBqajtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnUG9pbnQnOlxuICAgIGNhc2UgJ011bHRpUG9pbnQnOlxuICAgIGNhc2UgJ0xpbmVTdHJpbmcnOlxuICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6XG4gICAgY2FzZSAnTGluZWFyUmluZyc6IHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlICdQb2x5Z29uJzoge1xuICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChcbiAgICAgICAgZ2VvbWV0cnlcbiAgICAgICkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIGFyZWEgPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRpbmF0ZXNbMF0sIHJhZGl1cykpO1xuICAgICAgZm9yIChpID0gMSwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGFyZWEgLT0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzW2ldLCByYWRpdXMpKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlICdNdWx0aVBvbHlnb24nOiB7XG4gICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChcbiAgICAgICAgZ2VvbWV0cnlcbiAgICAgICkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBjb29yZHMgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgYXJlYSArPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRzWzBdLCByYWRpdXMpKTtcbiAgICAgICAgZm9yIChqID0gMSwgamogPSBjb29yZHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIGFyZWEgLT0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3Jkc1tqXSwgcmFkaXVzKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlICdHZW9tZXRyeUNvbGxlY3Rpb24nOiB7XG4gICAgICBjb25zdCBnZW9tZXRyaWVzID1cbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChcbiAgICAgICAgICBnZW9tZXRyeVxuICAgICAgICApLmdldEdlb21ldHJpZXMoKTtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gZ2VvbWV0cmllcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGFyZWEgKz0gZ2V0QXJlYShnZW9tZXRyaWVzW2ldLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6ICcgKyB0eXBlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFyZWE7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZSBhdCB0aGUgZ2l2ZW4gZGlzdGFuY2UgYW5kIGJlYXJpbmcgZnJvbSBgYzFgLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMxIFRoZSBvcmlnaW4gcG9pbnQgKGBbbG9uLCBsYXRdYCBpbiBkZWdyZWVzKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZSBUaGUgZ3JlYXQtY2lyY2xlIGRpc3RhbmNlIGJldHdlZW4gdGhlIG9yaWdpblxuICogICAgIHBvaW50IGFuZCB0aGUgdGFyZ2V0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IGJlYXJpbmcgVGhlIGJlYXJpbmcgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIHtudW1iZXJ9IFtyYWRpdXNdIFRoZSBzcGhlcmUgcmFkaXVzIHRvIHVzZS4gIERlZmF1bHRzIHRvIHRoZSBFYXJ0aCdzXG4gKiAgICAgbWVhbiByYWRpdXMgdXNpbmcgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUaGUgdGFyZ2V0IHBvaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gb2Zmc2V0KGMxLCBkaXN0YW5jZSwgYmVhcmluZywgcmFkaXVzKSB7XG4gIHJhZGl1cyA9IHJhZGl1cyB8fCBERUZBVUxUX1JBRElVUztcbiAgY29uc3QgbGF0MSA9IHRvUmFkaWFucyhjMVsxXSk7XG4gIGNvbnN0IGxvbjEgPSB0b1JhZGlhbnMoYzFbMF0pO1xuICBjb25zdCBkQnlSID0gZGlzdGFuY2UgLyByYWRpdXM7XG4gIGNvbnN0IGxhdCA9IE1hdGguYXNpbihcbiAgICBNYXRoLnNpbihsYXQxKSAqIE1hdGguY29zKGRCeVIpICtcbiAgICAgIE1hdGguY29zKGxhdDEpICogTWF0aC5zaW4oZEJ5UikgKiBNYXRoLmNvcyhiZWFyaW5nKVxuICApO1xuICBjb25zdCBsb24gPVxuICAgIGxvbjEgK1xuICAgIE1hdGguYXRhbjIoXG4gICAgICBNYXRoLnNpbihiZWFyaW5nKSAqIE1hdGguc2luKGRCeVIpICogTWF0aC5jb3MobGF0MSksXG4gICAgICBNYXRoLmNvcyhkQnlSKSAtIE1hdGguc2luKGxhdDEpICogTWF0aC5zaW4obGF0KVxuICAgICk7XG4gIHJldHVybiBbdG9EZWdyZWVzKGxvbiksIHRvRGVncmVlcyhsYXQpXTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qXG4gKi9cblxuLyoqXG4gKiBUaGUgb2wvcHJvaiBtb2R1bGUgc3RvcmVzOlxuICogKiBhIGxpc3Qgb2Yge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn1cbiAqIG9iamVjdHMsIG9uZSBmb3IgZWFjaCBwcm9qZWN0aW9uIHN1cHBvcnRlZCBieSB0aGUgYXBwbGljYXRpb25cbiAqICogYSBsaXN0IG9mIHRyYW5zZm9ybSBmdW5jdGlvbnMgbmVlZGVkIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgaW4gb25lIHByb2plY3Rpb25cbiAqIGludG8gYW5vdGhlci5cbiAqXG4gKiBUaGUgc3RhdGljIGZ1bmN0aW9ucyBhcmUgdGhlIG1ldGhvZHMgdXNlZCB0byBtYWludGFpbiB0aGVzZS5cbiAqIEVhY2ggdHJhbnNmb3JtIGZ1bmN0aW9uIGNhbiBoYW5kbGUgbm90IG9ubHkgc2ltcGxlIGNvb3JkaW5hdGUgcGFpcnMsIGJ1dCBhbHNvXG4gKiBsYXJnZSBhcnJheXMgb2YgY29vcmRpbmF0ZXMgc3VjaCBhcyB2ZWN0b3IgZ2VvbWV0cmllcy5cbiAqXG4gKiBXaGVuIGxvYWRlZCwgdGhlIGxpYnJhcnkgYWRkcyBwcm9qZWN0aW9uIG9iamVjdHMgZm9yIEVQU0c6NDMyNiAoV0dTODRcbiAqIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMpIGFuZCBFUFNHOjM4NTcgKFdlYiBvciBTcGhlcmljYWwgTWVyY2F0b3IsIGFzIHVzZWRcbiAqIGZvciBleGFtcGxlIGJ5IEJpbmcgTWFwcyBvciBPcGVuU3RyZWV0TWFwKSwgdG9nZXRoZXIgd2l0aCB0aGUgcmVsZXZhbnRcbiAqIHRyYW5zZm9ybSBmdW5jdGlvbnMuXG4gKlxuICogQWRkaXRpb25hbCB0cmFuc2Zvcm1zIG1heSBiZSBhZGRlZCBieSB1c2luZyB0aGUgaHR0cDovL3Byb2o0anMub3JnL1xuICogbGlicmFyeSAodmVyc2lvbiAyLjIgb3IgbGF0ZXIpLiBZb3UgY2FuIHVzZSB0aGUgZnVsbCBidWlsZCBzdXBwbGllZCBieVxuICogUHJvajRqcywgb3IgY3JlYXRlIGEgY3VzdG9tIGJ1aWxkIHRvIHN1cHBvcnQgdGhvc2UgcHJvamVjdGlvbnMgeW91IG5lZWQ7IHNlZVxuICogdGhlIFByb2o0anMgd2Vic2l0ZSBmb3IgaG93IHRvIGRvIHRoaXMuIFlvdSBhbHNvIG5lZWQgdGhlIFByb2o0anMgZGVmaW5pdGlvbnNcbiAqIGZvciB0aGUgcmVxdWlyZWQgcHJvamVjdGlvbnMuIFRoZXNlIGRlZmluaXRpb25zIGNhbiBiZSBvYnRhaW5lZCBmcm9tXG4gKiBodHRwczovL2Vwc2cuaW8vLCBhbmQgYXJlIGEgSlMgZnVuY3Rpb24sIHNvIGNhbiBiZSBsb2FkZWQgaW4gYSBzY3JpcHRcbiAqIHRhZyAoYXMgaW4gdGhlIGV4YW1wbGVzKSBvciBwYXN0ZWQgaW50byB5b3VyIGFwcGxpY2F0aW9uLlxuICpcbiAqIEFmdGVyIGFsbCByZXF1aXJlZCBwcm9qZWN0aW9uIGRlZmluaXRpb25zIGFyZSBhZGRlZCB0byBwcm9qNCdzIHJlZ2lzdHJ5IChieVxuICogdXNpbmcgYHByb2o0LmRlZnMoKWApLCBzaW1wbHkgY2FsbCBgcmVnaXN0ZXIocHJvajQpYCBmcm9tIHRoZSBgb2wvcHJvai9wcm9qNGBcbiAqIHBhY2thZ2UuIEV4aXN0aW5nIHRyYW5zZm9ybXMgYXJlIG5vdCBjaGFuZ2VkIGJ5IHRoaXMgZnVuY3Rpb24uIFNlZVxuICogZXhhbXBsZXMvd21zLWltYWdlLWN1c3RvbS1wcm9qIGZvciBhbiBleGFtcGxlIG9mIHRoaXMuXG4gKlxuICogQWRkaXRpb25hbCBwcm9qZWN0aW9uIGRlZmluaXRpb25zIGNhbiBiZSByZWdpc3RlcmVkIHdpdGggYHByb2o0LmRlZnMoKWAgYW55XG4gKiB0aW1lLiBKdXN0IG1ha2Ugc3VyZSB0byBjYWxsIGByZWdpc3Rlcihwcm9qNClgIGFnYWluOyBmb3IgZXhhbXBsZSwgd2l0aCB1c2VyLXN1cHBsaWVkIGRhdGEgd2hlcmUgeW91IGRvbid0XG4gKiBrbm93IGluIGFkdmFuY2Ugd2hhdCBwcm9qZWN0aW9ucyBhcmUgbmVlZGVkLCB5b3UgY2FuIGluaXRpYWxseSBsb2FkIG1pbmltYWxcbiAqIHN1cHBvcnQgYW5kIHRoZW4gbG9hZCB3aGljaGV2ZXIgYXJlIHJlcXVlc3RlZC5cbiAqXG4gKiBOb3RlIHRoYXQgUHJvajRqcyBkb2VzIG5vdCBzdXBwb3J0IHByb2plY3Rpb24gZXh0ZW50cy4gSWYgeW91IHdhbnQgdG8gYWRkXG4gKiBvbmUgZm9yIGNyZWF0aW5nIGRlZmF1bHQgdGlsZSBncmlkcywgeW91IGNhbiBhZGQgaXQgYWZ0ZXIgdGhlIFByb2plY3Rpb25cbiAqIG9iamVjdCBoYXMgYmVlbiBjcmVhdGVkIHdpdGggYHNldEV4dGVudGAsIGZvciBleGFtcGxlLFxuICogYGdldCgnRVBTRzoxMjM0Jykuc2V0RXh0ZW50KGV4dGVudClgLlxuICpcbiAqIEluIGFkZGl0aW9uIHRvIFByb2o0anMgc3VwcG9ydCwgYW55IHRyYW5zZm9ybSBmdW5jdGlvbnMgY2FuIGJlIGFkZGVkIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRDb29yZGluYXRlVHJhbnNmb3Jtc30uIFRvIHVzZSB0aGlzLCB5b3UgbXVzdCBmaXJzdCBjcmVhdGVcbiAqIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0gb2JqZWN0IGZvciB0aGUgbmV3IHByb2plY3Rpb24gYW5kIGFkZCBpdCB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouYWRkUHJvamVjdGlvbn0uIFlvdSBjYW4gdGhlbiBhZGQgdGhlIGZvcndhcmQgYW5kIGludmVyc2VcbiAqIGZ1bmN0aW9ucyB3aXRoIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRDb29yZGluYXRlVHJhbnNmb3Jtc30uIFNlZVxuICogZXhhbXBsZXMvd21zLWN1c3RvbS1wcm9qIGZvciBhbiBleGFtcGxlIG9mIHRoaXMuXG4gKlxuICogTm90ZSB0aGF0IGlmIG5vIHRyYW5zZm9ybXMgYXJlIG5lZWRlZCBhbmQgeW91IG9ubHkgbmVlZCB0byBkZWZpbmUgdGhlXG4gKiBwcm9qZWN0aW9uLCBqdXN0IGFkZCBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRQcm9qZWN0aW9ufS4gU2VlIGV4YW1wbGVzL3dtcy1uby1wcm9qIGZvciBhbiBleGFtcGxlIG9mXG4gKiB0aGlzLlxuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL3Byb2ovUHJvamVjdGlvbi5qcyc7XG5pbXBvcnQge1xuICBQUk9KRUNUSU9OUyBhcyBFUFNHMzg1N19QUk9KRUNUSU9OUyxcbiAgZnJvbUVQU0c0MzI2LFxuICB0b0VQU0c0MzI2LFxufSBmcm9tICcuL3Byb2ovZXBzZzM4NTcuanMnO1xuaW1wb3J0IHtQUk9KRUNUSU9OUyBhcyBFUFNHNDMyNl9QUk9KRUNUSU9OU30gZnJvbSAnLi9wcm9qL2Vwc2c0MzI2LmpzJztcbmltcG9ydCB7TUVURVJTX1BFUl9VTklUfSBmcm9tICcuL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0IHtcbiAgYWRkIGFzIGFkZFByb2osXG4gIGNsZWFyIGFzIGNsZWFyUHJvaixcbiAgZ2V0IGFzIGdldFByb2osXG59IGZyb20gJy4vcHJvai9wcm9qZWN0aW9ucy5qcyc7XG5pbXBvcnQge1xuICBhZGQgYXMgYWRkVHJhbnNmb3JtRnVuYyxcbiAgY2xlYXIgYXMgY2xlYXJUcmFuc2Zvcm1GdW5jcyxcbiAgZ2V0IGFzIGdldFRyYW5zZm9ybUZ1bmMsXG59IGZyb20gJy4vcHJvai90cmFuc2Zvcm1zLmpzJztcbmltcG9ydCB7YXBwbHlUcmFuc2Zvcm0sIGdldFdpZHRofSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQge2NsYW1wLCBtb2R1bG99IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQge2VxdWFscywgZ2V0V29ybGRzQXdheX0gZnJvbSAnLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7Z2V0RGlzdGFuY2V9IGZyb20gJy4vc3BoZXJlLmpzJztcbmltcG9ydCB7d2Fybn0gZnJvbSAnLi9jb25zb2xlLmpzJztcblxuLyoqXG4gKiBBIHByb2plY3Rpb24gYXMge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0sIFNSUyBpZGVudGlmaWVyXG4gKiBzdHJpbmcgb3IgdW5kZWZpbmVkLlxuICogQHR5cGVkZWYge1Byb2plY3Rpb258c3RyaW5nfHVuZGVmaW5lZH0gUHJvamVjdGlvbkxpa2VcbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIGFjY2VwdHMgYW4gYXJyYXkgb2YgaW5wdXQgY29vcmRpbmF0ZSB2YWx1ZXMsIGFuIG9wdGlvbmFsXG4gKiBvdXRwdXQgYXJyYXksIGFuZCBhbiBvcHRpb25hbCBkaW1lbnNpb24gKGRlZmF1bHQgc2hvdWxkIGJlIDIpLiAgVGhlIGZ1bmN0aW9uXG4gKiB0cmFuc2Zvcm1zIHRoZSBpbnB1dCBjb29yZGluYXRlIHZhbHVlcywgcG9wdWxhdGVzIHRoZSBvdXRwdXQgYXJyYXksIGFuZFxuICogcmV0dXJucyB0aGUgb3V0cHV0IGFycmF5LlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihBcnJheTxudW1iZXI+LCBBcnJheTxudW1iZXI+PSwgbnVtYmVyPSk6IEFycmF5PG51bWJlcj59IFRyYW5zZm9ybUZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cblxuZXhwb3J0IHtNRVRFUlNfUEVSX1VOSVR9O1xuXG5leHBvcnQge1Byb2plY3Rpb259O1xuXG5sZXQgc2hvd0Nvb3JkaW5hdGVXYXJuaW5nID0gdHJ1ZTtcblxuLyoqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtkaXNhYmxlID0gdHJ1ZV0gRGlzYWJsZSBjb25zb2xlIGluZm8gYWJvdXQgYHVzZUdlb2dyYXBoaWMoKWBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVDb29yZGluYXRlV2FybmluZyhkaXNhYmxlKSB7XG4gIGNvbnN0IGhpZGUgPSBkaXNhYmxlID09PSB1bmRlZmluZWQgPyB0cnVlIDogZGlzYWJsZTtcbiAgc2hvd0Nvb3JkaW5hdGVXYXJuaW5nID0gIWhpZGU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBjb29yZGluYXRlIGFycmF5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3V0cHV0XSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQgY29vcmRpbmF0ZSBhcnJheSAobmV3IGFycmF5LCBzYW1lIGNvb3JkaW5hdGVcbiAqICAgICB2YWx1ZXMpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVUcmFuc2Zvcm0oaW5wdXQsIG91dHB1dCkge1xuICBpZiAob3V0cHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBpbnB1dC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBvdXRwdXRbaV0gPSBpbnB1dFtpXTtcbiAgICB9XG4gICAgb3V0cHV0ID0gb3V0cHV0O1xuICB9IGVsc2Uge1xuICAgIG91dHB1dCA9IGlucHV0LnNsaWNlKCk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0IGNvb3JkaW5hdGUgYXJyYXkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvdXRwdXRdIE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IElucHV0IGNvb3JkaW5hdGUgYXJyYXkgKHNhbWUgYXJyYXkgYXMgaW5wdXQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHlUcmFuc2Zvcm0oaW5wdXQsIG91dHB1dCkge1xuICBpZiAob3V0cHV0ICE9PSB1bmRlZmluZWQgJiYgaW5wdXQgIT09IG91dHB1dCkge1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGlucHV0Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIG91dHB1dFtpXSA9IGlucHV0W2ldO1xuICAgIH1cbiAgICBpbnB1dCA9IG91dHB1dDtcbiAgfVxuICByZXR1cm4gaW5wdXQ7XG59XG5cbi8qKlxuICogQWRkIGEgUHJvamVjdGlvbiBvYmplY3QgdG8gdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIHByb2plY3Rpb25zIHRoYXQgY2FuIGJlXG4gKiBsb29rZWQgdXAgYnkgdGhlaXIgY29kZS5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24gUHJvamVjdGlvbiBpbnN0YW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICBhZGRQcm9qKHByb2plY3Rpb24uZ2V0Q29kZSgpLCBwcm9qZWN0aW9uKTtcbiAgYWRkVHJhbnNmb3JtRnVuYyhwcm9qZWN0aW9uLCBwcm9qZWN0aW9uLCBjbG9uZVRyYW5zZm9ybSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMgUHJvamVjdGlvbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRQcm9qZWN0aW9ucyhwcm9qZWN0aW9ucykge1xuICBwcm9qZWN0aW9ucy5mb3JFYWNoKGFkZFByb2plY3Rpb24pO1xufVxuXG4vKipcbiAqIEZldGNoZXMgYSBQcm9qZWN0aW9uIG9iamVjdCBmb3IgdGhlIGNvZGUgc3BlY2lmaWVkLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb25MaWtlIEVpdGhlciBhIGNvZGUgc3RyaW5nIHdoaWNoIGlzXG4gKiAgICAgYSBjb21iaW5hdGlvbiBvZiBhdXRob3JpdHkgYW5kIGlkZW50aWZpZXIgc3VjaCBhcyBcIkVQU0c6NDMyNlwiLCBvciBhblxuICogICAgIGV4aXN0aW5nIHByb2plY3Rpb24gb2JqZWN0LCBvciB1bmRlZmluZWQuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufG51bGx9IFByb2plY3Rpb24gb2JqZWN0LCBvciBudWxsIGlmIG5vdCBpbiBsaXN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KHByb2plY3Rpb25MaWtlKSB7XG4gIHJldHVybiB0eXBlb2YgcHJvamVjdGlvbkxpa2UgPT09ICdzdHJpbmcnXG4gICAgPyBnZXRQcm9qKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocHJvamVjdGlvbkxpa2UpKVxuICAgIDogLyoqIEB0eXBlIHtQcm9qZWN0aW9ufSAqLyAocHJvamVjdGlvbkxpa2UpIHx8IG51bGw7XG59XG5cbi8qKlxuICogR2V0IHRoZSByZXNvbHV0aW9uIG9mIHRoZSBwb2ludCBpbiBkZWdyZWVzIG9yIGRpc3RhbmNlIHVuaXRzLlxuICogRm9yIHByb2plY3Rpb25zIHdpdGggZGVncmVlcyBhcyB0aGUgdW5pdCB0aGlzIHdpbGwgc2ltcGx5IHJldHVybiB0aGVcbiAqIHByb3ZpZGVkIHJlc29sdXRpb24uIEZvciBvdGhlciBwcm9qZWN0aW9ucyB0aGUgcG9pbnQgcmVzb2x1dGlvbiBpc1xuICogYnkgZGVmYXVsdCBlc3RpbWF0ZWQgYnkgdHJhbnNmb3JtaW5nIHRoZSBgcG9pbnRgIHBpeGVsIHRvIEVQU0c6NDMyNixcbiAqIG1lYXN1cmluZyBpdHMgd2lkdGggYW5kIGhlaWdodCBvbiB0aGUgbm9ybWFsIHNwaGVyZSxcbiAqIGFuZCB0YWtpbmcgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHdpZHRoIGFuZCBoZWlnaHQuXG4gKiBBIGN1c3RvbSBmdW5jdGlvbiBjYW4gYmUgcHJvdmlkZWQgZm9yIGEgc3BlY2lmaWMgcHJvamVjdGlvbiwgZWl0aGVyXG4gKiBieSBzZXR0aW5nIHRoZSBgZ2V0UG9pbnRSZXNvbHV0aW9uYCBvcHRpb24gaW4gdGhlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBjb25zdHJ1Y3RvciBvciBieSB1c2luZ1xuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbiNzZXRHZXRQb2ludFJlc29sdXRpb259IHRvIGNoYW5nZSBhbiBleGlzdGluZ1xuICogcHJvamVjdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFRoZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gTm9taW5hbCByZXNvbHV0aW9uIGluIHByb2plY3Rpb24gdW5pdHMuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludCB0byBmaW5kIGFkanVzdGVkIHJlc29sdXRpb24gYXQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Vbml0cy5qc1wiKS5Vbml0c30gW3VuaXRzXSBVbml0cyB0byBnZXQgdGhlIHBvaW50IHJlc29sdXRpb24gaW4uXG4gKiBEZWZhdWx0IGlzIHRoZSBwcm9qZWN0aW9uJ3MgdW5pdHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBvaW50IHJlc29sdXRpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb2ludFJlc29sdXRpb24ocHJvamVjdGlvbiwgcmVzb2x1dGlvbiwgcG9pbnQsIHVuaXRzKSB7XG4gIHByb2plY3Rpb24gPSBnZXQocHJvamVjdGlvbik7XG4gIGxldCBwb2ludFJlc29sdXRpb247XG4gIGNvbnN0IGdldHRlciA9IHByb2plY3Rpb24uZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYygpO1xuICBpZiAoZ2V0dGVyKSB7XG4gICAgcG9pbnRSZXNvbHV0aW9uID0gZ2V0dGVyKHJlc29sdXRpb24sIHBvaW50KTtcbiAgICBpZiAodW5pdHMgJiYgdW5pdHMgIT09IHByb2plY3Rpb24uZ2V0VW5pdHMoKSkge1xuICAgICAgY29uc3QgbWV0ZXJzUGVyVW5pdCA9IHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgaWYgKG1ldGVyc1BlclVuaXQpIHtcbiAgICAgICAgcG9pbnRSZXNvbHV0aW9uID1cbiAgICAgICAgICAocG9pbnRSZXNvbHV0aW9uICogbWV0ZXJzUGVyVW5pdCkgLyBNRVRFUlNfUEVSX1VOSVRbdW5pdHNdO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCBwcm9qVW5pdHMgPSBwcm9qZWN0aW9uLmdldFVuaXRzKCk7XG4gICAgaWYgKChwcm9qVW5pdHMgPT0gJ2RlZ3JlZXMnICYmICF1bml0cykgfHwgdW5pdHMgPT0gJ2RlZ3JlZXMnKSB7XG4gICAgICBwb2ludFJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFc3RpbWF0ZSBwb2ludCByZXNvbHV0aW9uIGJ5IHRyYW5zZm9ybWluZyB0aGUgY2VudGVyIHBpeGVsIHRvIEVQU0c6NDMyNixcbiAgICAgIC8vIG1lYXN1cmluZyBpdHMgd2lkdGggYW5kIGhlaWdodCBvbiB0aGUgbm9ybWFsIHNwaGVyZSwgYW5kIHRha2luZyB0aGVcbiAgICAgIC8vIGF2ZXJhZ2Ugb2YgdGhlIHdpZHRoIGFuZCBoZWlnaHQuXG4gICAgICBjb25zdCB0b0VQU0c0MzI2ID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKFxuICAgICAgICBwcm9qZWN0aW9uLFxuICAgICAgICBnZXQoJ0VQU0c6NDMyNicpXG4gICAgICApO1xuICAgICAgaWYgKHRvRVBTRzQzMjYgPT09IGlkZW50aXR5VHJhbnNmb3JtICYmIHByb2pVbml0cyAhPT0gJ2RlZ3JlZXMnKSB7XG4gICAgICAgIC8vIG5vIHRyYW5zZm9ybSBpcyBhdmFpbGFibGVcbiAgICAgICAgcG9pbnRSZXNvbHV0aW9uID0gcmVzb2x1dGlvbiAqIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHZlcnRpY2VzID0gW1xuICAgICAgICAgIHBvaW50WzBdIC0gcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgICAgcG9pbnRbMV0sXG4gICAgICAgICAgcG9pbnRbMF0gKyByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgICBwb2ludFsxXSxcbiAgICAgICAgICBwb2ludFswXSxcbiAgICAgICAgICBwb2ludFsxXSAtIHJlc29sdXRpb24gLyAyLFxuICAgICAgICAgIHBvaW50WzBdLFxuICAgICAgICAgIHBvaW50WzFdICsgcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgIF07XG4gICAgICAgIHZlcnRpY2VzID0gdG9FUFNHNDMyNih2ZXJ0aWNlcywgdmVydGljZXMsIDIpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IGdldERpc3RhbmNlKHZlcnRpY2VzLnNsaWNlKDAsIDIpLCB2ZXJ0aWNlcy5zbGljZSgyLCA0KSk7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGdldERpc3RhbmNlKHZlcnRpY2VzLnNsaWNlKDQsIDYpLCB2ZXJ0aWNlcy5zbGljZSg2LCA4KSk7XG4gICAgICAgIHBvaW50UmVzb2x1dGlvbiA9ICh3aWR0aCArIGhlaWdodCkgLyAyO1xuICAgICAgfVxuICAgICAgY29uc3QgbWV0ZXJzUGVyVW5pdCA9IHVuaXRzXG4gICAgICAgID8gTUVURVJTX1BFUl9VTklUW3VuaXRzXVxuICAgICAgICA6IHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgaWYgKG1ldGVyc1BlclVuaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwb2ludFJlc29sdXRpb24gLz0gbWV0ZXJzUGVyVW5pdDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBvaW50UmVzb2x1dGlvbjtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb25zIHRoYXQgZG9uJ3QgYWx0ZXIgY29vcmRpbmF0ZXMuIFRob3NlIGFsbG93XG4gKiB0byB0cmFuc2Zvcm0gYmV0d2VlbiBwcm9qZWN0aW9ucyB3aXRoIGVxdWFsIG1lYW5pbmcuXG4gKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMgUHJvamVjdGlvbnMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMocHJvamVjdGlvbnMpIHtcbiAgYWRkUHJvamVjdGlvbnMocHJvamVjdGlvbnMpO1xuICBwcm9qZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICBwcm9qZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkZXN0aW5hdGlvbikge1xuICAgICAgaWYgKHNvdXJjZSAhPT0gZGVzdGluYXRpb24pIHtcbiAgICAgICAgYWRkVHJhbnNmb3JtRnVuYyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBjbG9uZVRyYW5zZm9ybSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMgdG8gY29udmVydCBjb29yZGluYXRlcyBpbiBhbnkgcHJvamVjdGlvblxuICogaW4gcHJvamVjdGlvbjEgdG8gYW55IHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjIuXG4gKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMxIFByb2plY3Rpb25zIHdpdGggZXF1YWxcbiAqICAgICBtZWFuaW5nLlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMyIFByb2plY3Rpb25zIHdpdGggZXF1YWxcbiAqICAgICBtZWFuaW5nLlxuICogQHBhcmFtIHtUcmFuc2Zvcm1GdW5jdGlvbn0gZm9yd2FyZFRyYW5zZm9ybSBUcmFuc2Zvcm1hdGlvbiBmcm9tIGFueVxuICogICBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24xIHRvIGFueSBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24yLlxuICogQHBhcmFtIHtUcmFuc2Zvcm1GdW5jdGlvbn0gaW52ZXJzZVRyYW5zZm9ybSBUcmFuc2Zvcm0gZnJvbSBhbnkgcHJvamVjdGlvblxuICogICBpbiBwcm9qZWN0aW9uMiB0byBhbnkgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMS4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFcXVpdmFsZW50VHJhbnNmb3JtcyhcbiAgcHJvamVjdGlvbnMxLFxuICBwcm9qZWN0aW9uczIsXG4gIGZvcndhcmRUcmFuc2Zvcm0sXG4gIGludmVyc2VUcmFuc2Zvcm1cbikge1xuICBwcm9qZWN0aW9uczEuZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdGlvbjEpIHtcbiAgICBwcm9qZWN0aW9uczIuZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdGlvbjIpIHtcbiAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjEsIHByb2plY3Rpb24yLCBmb3J3YXJkVHJhbnNmb3JtKTtcbiAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjIsIHByb2plY3Rpb24xLCBpbnZlcnNlVHJhbnNmb3JtKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ2xlYXIgYWxsIGNhY2hlZCBwcm9qZWN0aW9ucyBhbmQgdHJhbnNmb3Jtcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQWxsUHJvamVjdGlvbnMoKSB7XG4gIGNsZWFyUHJvaigpO1xuICBjbGVhclRyYW5zZm9ybUZ1bmNzKCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZWZhdWx0Q29kZSBEZWZhdWx0IGNvZGUuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufSBQcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdGlvbihwcm9qZWN0aW9uLCBkZWZhdWx0Q29kZSkge1xuICBpZiAoIXByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gZ2V0KGRlZmF1bHRDb2RlKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcHJvamVjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZ2V0KHByb2plY3Rpb24pO1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUge1Byb2plY3Rpb259ICovIChwcm9qZWN0aW9uKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qflRyYW5zZm9ybUZ1bmN0aW9ufSBmcm9tIGEgc2ltcGxlIDJEIGNvb3JkaW5hdGUgdHJhbnNmb3JtXG4gKiBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRUcmFuc2Zvcm0gQ29vcmRpbmF0ZVxuICogICAgIHRyYW5zZm9ybS5cbiAqIEByZXR1cm4ge1RyYW5zZm9ybUZ1bmN0aW9ufSBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFuc2Zvcm1Gcm9tQ29vcmRpbmF0ZVRyYW5zZm9ybShjb29yZFRyYW5zZm9ybSkge1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3V0cHV0XSBPdXRwdXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtkaW1lbnNpb25dIERpbWVuc2lvbi5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGlucHV0LCBvdXRwdXQsIGRpbWVuc2lvbikge1xuICAgICAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgICAgZGltZW5zaW9uID0gZGltZW5zaW9uICE9PSB1bmRlZmluZWQgPyBkaW1lbnNpb24gOiAyO1xuICAgICAgb3V0cHV0ID0gb3V0cHV0ICE9PSB1bmRlZmluZWQgPyBvdXRwdXQgOiBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgICAgICBjb25zdCBwb2ludCA9IGNvb3JkVHJhbnNmb3JtKGlucHV0LnNsaWNlKGksIGkgKyBkaW1lbnNpb24pKTtcbiAgICAgICAgY29uc3QgcG9pbnRMZW5ndGggPSBwb2ludC5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGogPSAwLCBqaiA9IGRpbWVuc2lvbjsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBvdXRwdXRbaSArIGpdID0gaiA+PSBwb2ludExlbmd0aCA/IGlucHV0W2kgKyBqXSA6IHBvaW50W2pdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgKTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgY29vcmRpbmF0ZSB0cmFuc2Zvcm0gZnVuY3Rpb25zIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgYmV0d2VlbiB0aGVcbiAqIHNvdXJjZSBwcm9qZWN0aW9uIGFuZCB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIFRoZSBmb3J3YXJkIGFuZCBpbnZlcnNlIGZ1bmN0aW9ucyBjb252ZXJ0IGNvb3JkaW5hdGUgcGFpcnM7IHRoaXMgZnVuY3Rpb25cbiAqIGNvbnZlcnRzIHRoZXNlIGludG8gdGhlIGZ1bmN0aW9ucyB1c2VkIGludGVybmFsbHkgd2hpY2ggYWxzbyBoYW5kbGVcbiAqIGV4dGVudHMgYW5kIGNvb3JkaW5hdGUgYXJyYXlzLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGZvcndhcmQgVGhlIGZvcndhcmQgdHJhbnNmb3JtXG4gKiAgICAgZnVuY3Rpb24gKHRoYXQgaXMsIGZyb20gdGhlIHNvdXJjZSBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvblxuICogICAgIHByb2plY3Rpb24pIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYXMgYXJndW1lbnQgYW5kIHJldHVybnNcbiAqICAgICB0aGUgdHJhbnNmb3JtZWQge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9LlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBpbnZlcnNlIFRoZSBpbnZlcnNlIHRyYW5zZm9ybVxuICogICAgIGZ1bmN0aW9uICh0aGF0IGlzLCBmcm9tIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uIHRvIHRoZSBzb3VyY2VcbiAqICAgICBwcm9qZWN0aW9uKSB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IGFzIGFyZ3VtZW50IGFuZCByZXR1cm5zXG4gKiAgICAgdGhlIHRyYW5zZm9ybWVkIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfS4gSWYgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbiBjYW4gb25seVxuICogICAgIHRyYW5zZm9ybSBsZXNzIGRpbWVuc2lvbnMgdGhhbiB0aGUgaW5wdXQgY29vcmRpbmF0ZSwgaXQgaXMgc3VwcG9zZWVkIHRvIHJldHVybiBhIGNvb3JkaW5hdGVcbiAqICAgICB3aXRoIG9ubHkgdGhlIGxlbmd0aCBpdCBjYW4gdHJhbnNmb3JtLiBUaGUgb3RoZXIgZGltZW5zaW9ucyB3aWxsIGJlIHRha2VuIHVuY2hhbmdlZCBmcm9tIHRoZVxuICogICAgIHNvdXJjZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENvb3JkaW5hdGVUcmFuc2Zvcm1zKHNvdXJjZSwgZGVzdGluYXRpb24sIGZvcndhcmQsIGludmVyc2UpIHtcbiAgY29uc3Qgc291cmNlUHJvaiA9IGdldChzb3VyY2UpO1xuICBjb25zdCBkZXN0UHJvaiA9IGdldChkZXN0aW5hdGlvbik7XG4gIGFkZFRyYW5zZm9ybUZ1bmMoXG4gICAgc291cmNlUHJvaixcbiAgICBkZXN0UHJvaixcbiAgICBjcmVhdGVUcmFuc2Zvcm1Gcm9tQ29vcmRpbmF0ZVRyYW5zZm9ybShmb3J3YXJkKVxuICApO1xuICBhZGRUcmFuc2Zvcm1GdW5jKFxuICAgIGRlc3RQcm9qLFxuICAgIHNvdXJjZVByb2osXG4gICAgY3JlYXRlVHJhbnNmb3JtRnJvbUNvb3JkaW5hdGVUcmFuc2Zvcm0oaW52ZXJzZSlcbiAgKTtcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSBmcm9tIGxvbmdpdHVkZS9sYXRpdHVkZSB0byBhIGRpZmZlcmVudCBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlIGFzIGxvbmdpdHVkZSBhbmQgbGF0aXR1ZGUsIGkuZS5cbiAqICAgICBhbiBhcnJheSB3aXRoIGxvbmdpdHVkZSBhcyAxc3QgYW5kIGxhdGl0dWRlIGFzIDJuZCBlbGVtZW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFRhcmdldCBwcm9qZWN0aW9uLiBUaGVcbiAqICAgICBkZWZhdWx0IGlzIFdlYiBNZXJjYXRvciwgaS5lLiAnRVBTRzozODU3Jy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlIHByb2plY3RlZCB0byB0aGUgdGFyZ2V0IHByb2plY3Rpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTG9uTGF0KGNvb3JkaW5hdGUsIHByb2plY3Rpb24pIHtcbiAgZGlzYWJsZUNvb3JkaW5hdGVXYXJuaW5nKCk7XG4gIHJldHVybiB0cmFuc2Zvcm0oXG4gICAgY29vcmRpbmF0ZSxcbiAgICAnRVBTRzo0MzI2JyxcbiAgICBwcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBwcm9qZWN0aW9uIDogJ0VQU0c6Mzg1NydcbiAgKTtcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSB0byBsb25naXR1ZGUvbGF0aXR1ZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFByb2plY3RlZCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24gb2YgdGhlIGNvb3JkaW5hdGUuXG4gKiAgICAgVGhlIGRlZmF1bHQgaXMgV2ViIE1lcmNhdG9yLCBpLmUuICdFUFNHOjM4NTcnLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUgYXMgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSwgaS5lLiBhbiBhcnJheVxuICogICAgIHdpdGggbG9uZ2l0dWRlIGFzIDFzdCBhbmQgbGF0aXR1ZGUgYXMgMm5kIGVsZW1lbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0xvbkxhdChjb29yZGluYXRlLCBwcm9qZWN0aW9uKSB7XG4gIGNvbnN0IGxvbkxhdCA9IHRyYW5zZm9ybShcbiAgICBjb29yZGluYXRlLFxuICAgIHByb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IHByb2plY3Rpb24gOiAnRVBTRzozODU3JyxcbiAgICAnRVBTRzo0MzI2J1xuICApO1xuICBjb25zdCBsb24gPSBsb25MYXRbMF07XG4gIGlmIChsb24gPCAtMTgwIHx8IGxvbiA+IDE4MCkge1xuICAgIGxvbkxhdFswXSA9IG1vZHVsbyhsb24gKyAxODAsIDM2MCkgLSAxODA7XG4gIH1cbiAgcmV0dXJuIGxvbkxhdDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdHdvIHByb2plY3Rpb25zIGFyZSB0aGUgc2FtZSwgdGhhdCBpcyBldmVyeSBjb29yZGluYXRlIGluIG9uZVxuICogcHJvamVjdGlvbiBkb2VzIHJlcHJlc2VudCB0aGUgc2FtZSBnZW9ncmFwaGljIHBvaW50IGFzIHRoZSBzYW1lIGNvb3JkaW5hdGUgaW5cbiAqIHRoZSBvdGhlciBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gcHJvamVjdGlvbjEgUHJvamVjdGlvbiAxLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBwcm9qZWN0aW9uMiBQcm9qZWN0aW9uIDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBFcXVpdmFsZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1aXZhbGVudChwcm9qZWN0aW9uMSwgcHJvamVjdGlvbjIpIHtcbiAgaWYgKHByb2plY3Rpb24xID09PSBwcm9qZWN0aW9uMikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IGVxdWFsVW5pdHMgPSBwcm9qZWN0aW9uMS5nZXRVbml0cygpID09PSBwcm9qZWN0aW9uMi5nZXRVbml0cygpO1xuICBpZiAocHJvamVjdGlvbjEuZ2V0Q29kZSgpID09PSBwcm9qZWN0aW9uMi5nZXRDb2RlKCkpIHtcbiAgICByZXR1cm4gZXF1YWxVbml0cztcbiAgfVxuICBjb25zdCB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHByb2plY3Rpb24xLCBwcm9qZWN0aW9uMik7XG4gIHJldHVybiB0cmFuc2Zvcm1GdW5jID09PSBjbG9uZVRyYW5zZm9ybSAmJiBlcXVhbFVuaXRzO1xufVxuXG4vKipcbiAqIFNlYXJjaGVzIGluIHRoZSBsaXN0IG9mIHRyYW5zZm9ybSBmdW5jdGlvbnMgZm9yIHRoZSBmdW5jdGlvbiBmb3IgY29udmVydGluZ1xuICogY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qZWN0aW9uIFNvdXJjZSBQcm9qZWN0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gZGVzdGluYXRpb25Qcm9qZWN0aW9uIERlc3RpbmF0aW9uIFByb2plY3Rpb25cbiAqICAgICBvYmplY3QuXG4gKiBAcmV0dXJuIHtUcmFuc2Zvcm1GdW5jdGlvbn0gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKFxuICBzb3VyY2VQcm9qZWN0aW9uLFxuICBkZXN0aW5hdGlvblByb2plY3Rpb25cbikge1xuICBjb25zdCBzb3VyY2VDb2RlID0gc291cmNlUHJvamVjdGlvbi5nZXRDb2RlKCk7XG4gIGNvbnN0IGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uUHJvamVjdGlvbi5nZXRDb2RlKCk7XG4gIGxldCB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnVuYyhzb3VyY2VDb2RlLCBkZXN0aW5hdGlvbkNvZGUpO1xuICBpZiAoIXRyYW5zZm9ybUZ1bmMpIHtcbiAgICB0cmFuc2Zvcm1GdW5jID0gaWRlbnRpdHlUcmFuc2Zvcm07XG4gIH1cbiAgcmV0dXJuIHRyYW5zZm9ybUZ1bmM7XG59XG5cbi8qKlxuICogR2l2ZW4gdGhlIHByb2plY3Rpb24tbGlrZSBvYmplY3RzLCBzZWFyY2hlcyBmb3IgYSB0cmFuc2Zvcm1hdGlvblxuICogZnVuY3Rpb24gdG8gY29udmVydCBhIGNvb3JkaW5hdGVzIGFycmF5IGZyb20gdGhlIHNvdXJjZSBwcm9qZWN0aW9uIHRvIHRoZVxuICogZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtUcmFuc2Zvcm1GdW5jdGlvbn0gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgY29uc3Qgc291cmNlUHJvamVjdGlvbiA9IGdldChzb3VyY2UpO1xuICBjb25zdCBkZXN0aW5hdGlvblByb2plY3Rpb24gPSBnZXQoZGVzdGluYXRpb24pO1xuICByZXR1cm4gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbik7XG59XG5cbi8qKlxuICogVHJhbnNmb3JtcyBhIGNvb3JkaW5hdGUgZnJvbSBzb3VyY2UgcHJvamVjdGlvbiB0byBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogVGhpcyByZXR1cm5zIGEgbmV3IGNvb3JkaW5hdGUgKGFuZCBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsKS5cbiAqXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9wcm9qLnRyYW5zZm9ybUV4dGVudH0gZm9yIGV4dGVudCB0cmFuc2Zvcm1hdGlvbi5cbiAqIFNlZSB0aGUgdHJhbnNmb3JtIG1ldGhvZCBvZiB7QGxpbmsgbW9kdWxlOm9sL2dlb20vR2VvbWV0cnl+R2VvbWV0cnl9IGFuZCBpdHNcbiAqIHN1YmNsYXNzZXMgZm9yIGdlb21ldHJ5IHRyYW5zZm9ybXMuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybShjb29yZGluYXRlLCBzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gIGNvbnN0IHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm0oc291cmNlLCBkZXN0aW5hdGlvbik7XG4gIHJldHVybiB0cmFuc2Zvcm1GdW5jKGNvb3JkaW5hdGUsIHVuZGVmaW5lZCwgY29vcmRpbmF0ZS5sZW5ndGgpO1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gZXh0ZW50IGZyb20gc291cmNlIHByb2plY3Rpb24gdG8gZGVzdGluYXRpb24gcHJvamVjdGlvbi4gIFRoaXNcbiAqIHJldHVybnMgYSBuZXcgZXh0ZW50IChhbmQgZG9lcyBub3QgbW9kaWZ5IHRoZSBvcmlnaW5hbCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50IHRvIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi1saWtlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi1saWtlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdG9wc10gTnVtYmVyIG9mIHN0b3BzIHBlciBzaWRlIHVzZWQgZm9yIHRoZSB0cmFuc2Zvcm0uXG4gKiBCeSBkZWZhdWx0IG9ubHkgdGhlIGNvcm5lcnMgYXJlIHVzZWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFRoZSB0cmFuc2Zvcm1lZCBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCBzb3VyY2UsIGRlc3RpbmF0aW9uLCBzdG9wcykge1xuICBjb25zdCB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oZXh0ZW50LCB0cmFuc2Zvcm1GdW5jLCB1bmRlZmluZWQsIHN0b3BzKTtcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSBnaXZlbiBwb2ludCB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gc291cmNlUHJvamVjdGlvbiBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gZGVzdGluYXRpb25Qcm9qZWN0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gUG9pbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1XaXRoUHJvamVjdGlvbnMoXG4gIHBvaW50LFxuICBzb3VyY2VQcm9qZWN0aW9uLFxuICBkZXN0aW5hdGlvblByb2plY3Rpb25cbikge1xuICBjb25zdCB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKFxuICAgIHNvdXJjZVByb2plY3Rpb24sXG4gICAgZGVzdGluYXRpb25Qcm9qZWN0aW9uXG4gICk7XG4gIHJldHVybiB0cmFuc2Zvcm1GdW5jKHBvaW50KTtcbn1cblxuLyoqXG4gKiBAdHlwZSB7UHJvamVjdGlvbnxudWxsfVxuICovXG5sZXQgdXNlclByb2plY3Rpb24gPSBudWxsO1xuXG4vKipcbiAqIFNldCB0aGUgcHJvamVjdGlvbiBmb3IgY29vcmRpbmF0ZXMgc3VwcGxpZWQgZnJvbSBhbmQgcmV0dXJuZWQgYnkgQVBJIG1ldGhvZHMuXG4gKiBUaGlzIGluY2x1ZGVzIGFsbCBBUEkgbWV0aG9kcyBleGNlcHQgZm9yIHRob3NlIGludGVyYWN0aW5nIHdpdGggdGlsZSBncmlkcy5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHVzZXIgcHJvamVjdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFVzZXJQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgdXNlclByb2plY3Rpb24gPSBnZXQocHJvamVjdGlvbik7XG59XG5cbi8qKlxuICogQ2xlYXIgdGhlIHVzZXIgcHJvamVjdGlvbiBpZiBzZXQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclVzZXJQcm9qZWN0aW9uKCkge1xuICB1c2VyUHJvamVjdGlvbiA9IG51bGw7XG59XG5cbi8qKlxuICogR2V0IHRoZSBwcm9qZWN0aW9uIGZvciBjb29yZGluYXRlcyBzdXBwbGllZCBmcm9tIGFuZCByZXR1cm5lZCBieSBBUEkgbWV0aG9kcy5cbiAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3QgeWV0IGEgcGFydCBvZiB0aGUgc3RhYmxlIEFQSS4gIFN1cHBvcnQgZm9yIHVzZXJcbiAqIHByb2plY3Rpb25zIGlzIG5vdCB5ZXQgY29tcGxldGUgYW5kIHNob3VsZCBiZSBjb25zaWRlcmVkIGV4cGVyaW1lbnRhbC5cbiAqIEByZXR1cm4ge1Byb2plY3Rpb258bnVsbH0gVGhlIHVzZXIgcHJvamVjdGlvbiAob3IgbnVsbCBpZiBub3Qgc2V0KS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJQcm9qZWN0aW9uKCkge1xuICByZXR1cm4gdXNlclByb2plY3Rpb247XG59XG5cbi8qKlxuICogVXNlIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMgKFdHUy04NCBkYXR1bSkgaW4gQVBJIG1ldGhvZHMuICBUaGlzIGluY2x1ZGVzIGFsbCBBUElcbiAqIG1ldGhvZHMgZXhjZXB0IGZvciB0aG9zZSBpbnRlcmFjdGluZyB3aXRoIHRpbGUgZ3JpZHMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VHZW9ncmFwaGljKCkge1xuICBzZXRVc2VyUHJvamVjdGlvbignRVBTRzo0MzI2Jyk7XG59XG5cbi8qKlxuICogUmV0dXJuIGEgY29vcmRpbmF0ZSB0cmFuc2Zvcm1lZCBpbnRvIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGNvb3JkaW5hdGUgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGUgSW5wdXQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZVByb2plY3Rpb24gVGhlIGlucHV0IGNvb3JkaW5hdGUgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRoZSBpbnB1dCBjb29yZGluYXRlIGluIHRoZSB1c2VyIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1VzZXJDb29yZGluYXRlKGNvb3JkaW5hdGUsIHNvdXJjZVByb2plY3Rpb24pIHtcbiAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgIHJldHVybiBjb29yZGluYXRlO1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgc291cmNlUHJvamVjdGlvbiwgdXNlclByb2plY3Rpb24pO1xufVxuXG4vKipcbiAqIFJldHVybiBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtZWQgZnJvbSB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBjb29yZGluYXRlIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlIElucHV0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0UHJvamVjdGlvbiBUaGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRoZSBpbnB1dCBjb29yZGluYXRlIHRyYW5zZm9ybWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbVVzZXJDb29yZGluYXRlKGNvb3JkaW5hdGUsIGRlc3RQcm9qZWN0aW9uKSB7XG4gIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICBpZiAoXG4gICAgICBzaG93Q29vcmRpbmF0ZVdhcm5pbmcgJiZcbiAgICAgICFlcXVhbHMoY29vcmRpbmF0ZSwgWzAsIDBdKSAmJlxuICAgICAgY29vcmRpbmF0ZVswXSA+PSAtMTgwICYmXG4gICAgICBjb29yZGluYXRlWzBdIDw9IDE4MCAmJlxuICAgICAgY29vcmRpbmF0ZVsxXSA+PSAtOTAgJiZcbiAgICAgIGNvb3JkaW5hdGVbMV0gPD0gOTBcbiAgICApIHtcbiAgICAgIHNob3dDb29yZGluYXRlV2FybmluZyA9IGZhbHNlO1xuICAgICAgd2FybihcbiAgICAgICAgJ0NhbGwgdXNlR2VvZ3JhcGhpYygpIGZyb20gb2wvcHJvaiBvbmNlIHRvIHdvcmsgd2l0aCBbbG9uZ2l0dWRlLCBsYXRpdHVkZV0gY29vcmRpbmF0ZXMuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG4gIH1cbiAgcmV0dXJuIHRyYW5zZm9ybShjb29yZGluYXRlLCB1c2VyUHJvamVjdGlvbiwgZGVzdFByb2plY3Rpb24pO1xufVxuXG4vKipcbiAqIFJldHVybiBhbiBleHRlbnQgdHJhbnNmb3JtZWQgaW50byB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBleHRlbnQgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IElucHV0IGV4dGVudC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZVByb2plY3Rpb24gVGhlIGlucHV0IGV4dGVudCBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgaW5wdXQgZXh0ZW50IGluIHRoZSB1c2VyIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1VzZXJFeHRlbnQoZXh0ZW50LCBzb3VyY2VQcm9qZWN0aW9uKSB7XG4gIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gZXh0ZW50O1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCBzb3VyY2VQcm9qZWN0aW9uLCB1c2VyUHJvamVjdGlvbik7XG59XG5cbi8qKlxuICogUmV0dXJuIGFuIGV4dGVudCB0cmFuc2Zvcm1lZCBmcm9tIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGV4dGVudCBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgSW5wdXQgZXh0ZW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdFByb2plY3Rpb24gVGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFRoZSBpbnB1dCBleHRlbnQgdHJhbnNmb3JtZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVXNlckV4dGVudChleHRlbnQsIGRlc3RQcm9qZWN0aW9uKSB7XG4gIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gZXh0ZW50O1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCB1c2VyUHJvamVjdGlvbiwgZGVzdFByb2plY3Rpb24pO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgcmVzb2x1dGlvbiBpbiB1c2VyIHByb2plY3Rpb24gdW5pdHMgcGVyIHBpeGVsLiBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgb3Igc291cmNlIG9yIHVzZXIgcHJvamVjdGlvbiBhcmUgbWlzc2luZyB1bml0cywgdGhlIG9yaWdpbmFsIHJlc29sdXRpb25cbiAqIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbiBpbiBpbnB1dCBwcm9qZWN0aW9uIHVuaXRzIHBlciBwaXhlbC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZVByb2plY3Rpb24gVGhlIGlucHV0IHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24gaW4gdXNlciBwcm9qZWN0aW9uIHVuaXRzIHBlciBwaXhlbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvVXNlclJlc29sdXRpb24ocmVzb2x1dGlvbiwgc291cmNlUHJvamVjdGlvbikge1xuICBpZiAoIXVzZXJQcm9qZWN0aW9uKSB7XG4gICAgcmV0dXJuIHJlc29sdXRpb247XG4gIH1cbiAgY29uc3Qgc291cmNlVW5pdHMgPSBnZXQoc291cmNlUHJvamVjdGlvbikuZ2V0VW5pdHMoKTtcbiAgY29uc3QgdXNlclVuaXRzID0gdXNlclByb2plY3Rpb24uZ2V0VW5pdHMoKTtcbiAgcmV0dXJuIHNvdXJjZVVuaXRzICYmIHVzZXJVbml0c1xuICAgID8gKHJlc29sdXRpb24gKiBNRVRFUlNfUEVSX1VOSVRbc291cmNlVW5pdHNdKSAvIE1FVEVSU19QRVJfVU5JVFt1c2VyVW5pdHNdXG4gICAgOiByZXNvbHV0aW9uO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgcmVzb2x1dGlvbiBpbiB1c2VyIHByb2plY3Rpb24gdW5pdHMgcGVyIHBpeGVsLiBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgb3Igc291cmNlIG9yIHVzZXIgcHJvamVjdGlvbiBhcmUgbWlzc2luZyB1bml0cywgdGhlIG9yaWdpbmFsIHJlc29sdXRpb25cbiAqIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbiBpbiB1c2VyIHByb2plY3Rpb24gdW5pdHMgcGVyIHBpeGVsLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdFByb2plY3Rpb24gVGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24gaW4gZGVzdGluYXRpb24gcHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVXNlclJlc29sdXRpb24ocmVzb2x1dGlvbiwgZGVzdFByb2plY3Rpb24pIHtcbiAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgIHJldHVybiByZXNvbHV0aW9uO1xuICB9XG4gIGNvbnN0IHNvdXJjZVVuaXRzID0gZ2V0KGRlc3RQcm9qZWN0aW9uKS5nZXRVbml0cygpO1xuICBjb25zdCB1c2VyVW5pdHMgPSB1c2VyUHJvamVjdGlvbi5nZXRVbml0cygpO1xuICByZXR1cm4gc291cmNlVW5pdHMgJiYgdXNlclVuaXRzXG4gICAgPyAocmVzb2x1dGlvbiAqIE1FVEVSU19QRVJfVU5JVFt1c2VyVW5pdHNdKSAvIE1FVEVSU19QRVJfVU5JVFtzb3VyY2VVbml0c11cbiAgICA6IHJlc29sdXRpb247XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHNhZmUgY29vcmRpbmF0ZSB0cmFuc2Zvcm0gZnVuY3Rpb24gZnJvbSBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICogXCJTYWZlXCIgbWVhbnMgdGhhdCBpdCBjYW4gaGFuZGxlIHdyYXBwaW5nIG9mIHgtY29vcmRpbmF0ZXMgZm9yIGdsb2JhbCBwcm9qZWN0aW9ucyxcbiAqIGFuZCB0aGF0IGNvb3JkaW5hdGVzIGV4Y2VlZGluZyB0aGUgc291cmNlIHByb2plY3Rpb24gdmFsaWRpdHkgZXh0ZW50J3MgcmFuZ2Ugd2lsbCBiZVxuICogY2xhbXBlZCB0byB0aGUgdmFsaWRpdHkgcmFuZ2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RQcm9qIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRyYW5zZm9ybSBUcmFuc2Zvcm0gZnVuY3Rpb24gKHNvdXJjZSB0byBkZXN0aWF0aW9uKS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFNhZmUgdHJhbnNmb3JtIGZ1bmN0aW9uIChzb3VyY2UgdG8gZGVzdGlhdGlvbikuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTYWZlQ29vcmRpbmF0ZVRyYW5zZm9ybShzb3VyY2VQcm9qLCBkZXN0UHJvaiwgdHJhbnNmb3JtKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoY29vcmQpIHtcbiAgICBsZXQgdHJhbnNmb3JtZWQsIHdvcmxkc0F3YXk7XG4gICAgaWYgKHNvdXJjZVByb2ouY2FuV3JhcFgoKSkge1xuICAgICAgY29uc3Qgc291cmNlRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICAgIGNvbnN0IHNvdXJjZUV4dGVudFdpZHRoID0gZ2V0V2lkdGgoc291cmNlRXh0ZW50KTtcbiAgICAgIGNvb3JkID0gY29vcmQuc2xpY2UoMCk7XG4gICAgICB3b3JsZHNBd2F5ID0gZ2V0V29ybGRzQXdheShjb29yZCwgc291cmNlUHJvaiwgc291cmNlRXh0ZW50V2lkdGgpO1xuICAgICAgaWYgKHdvcmxkc0F3YXkpIHtcbiAgICAgICAgLy8gTW92ZSB4IHRvIHRoZSByZWFsIHdvcmxkXG4gICAgICAgIGNvb3JkWzBdID0gY29vcmRbMF0gLSB3b3JsZHNBd2F5ICogc291cmNlRXh0ZW50V2lkdGg7XG4gICAgICB9XG4gICAgICBjb29yZFswXSA9IGNsYW1wKGNvb3JkWzBdLCBzb3VyY2VFeHRlbnRbMF0sIHNvdXJjZUV4dGVudFsyXSk7XG4gICAgICBjb29yZFsxXSA9IGNsYW1wKGNvb3JkWzFdLCBzb3VyY2VFeHRlbnRbMV0sIHNvdXJjZUV4dGVudFszXSk7XG4gICAgICB0cmFuc2Zvcm1lZCA9IHRyYW5zZm9ybShjb29yZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYW5zZm9ybWVkID0gdHJhbnNmb3JtKGNvb3JkKTtcbiAgICB9XG4gICAgaWYgKHdvcmxkc0F3YXkgJiYgZGVzdFByb2ouY2FuV3JhcFgoKSkge1xuICAgICAgLy8gTW92ZSB0cmFuc2Zvcm1lZCBjb29yZGluYXRlIGJhY2sgdG8gdGhlIG9mZnNldCB3b3JsZFxuICAgICAgdHJhbnNmb3JtZWRbMF0gKz0gd29ybGRzQXdheSAqIGdldFdpZHRoKGRlc3RQcm9qLmdldEV4dGVudCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xuICB9O1xufVxuXG4vKipcbiAqIEFkZCB0cmFuc2Zvcm1zIHRvIGFuZCBmcm9tIEVQU0c6NDMyNiBhbmQgRVBTRzozODU3LiAgVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWRcbiAqIGJ5IHdoZW4gdGhpcyBtb2R1bGUgaXMgZXhlY3V0ZWQgYW5kIHNob3VsZCBvbmx5IG5lZWQgdG8gYmUgY2FsbGVkIGFnYWluIGFmdGVyXG4gKiBgY2xlYXJBbGxQcm9qZWN0aW9ucygpYCBpcyBjYWxsZWQgKGUuZy4gaW4gdGVzdHMpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29tbW9uKCkge1xuICAvLyBBZGQgdHJhbnNmb3JtYXRpb25zIHRoYXQgZG9uJ3QgYWx0ZXIgY29vcmRpbmF0ZXMgdG8gY29udmVydCB3aXRoaW4gc2V0IG9mXG4gIC8vIHByb2plY3Rpb25zIHdpdGggZXF1YWwgbWVhbmluZy5cbiAgYWRkRXF1aXZhbGVudFByb2plY3Rpb25zKEVQU0czODU3X1BST0pFQ1RJT05TKTtcbiAgYWRkRXF1aXZhbGVudFByb2plY3Rpb25zKEVQU0c0MzI2X1BST0pFQ1RJT05TKTtcbiAgLy8gQWRkIHRyYW5zZm9ybWF0aW9ucyB0byBjb252ZXJ0IEVQU0c6NDMyNiBsaWtlIGNvb3JkaW5hdGVzIHRvIEVQU0c6Mzg1NyBsaWtlXG4gIC8vIGNvb3JkaW5hdGVzIGFuZCBiYWNrLlxuICBhZGRFcXVpdmFsZW50VHJhbnNmb3JtcyhcbiAgICBFUFNHNDMyNl9QUk9KRUNUSU9OUyxcbiAgICBFUFNHMzg1N19QUk9KRUNUSU9OUyxcbiAgICBmcm9tRVBTRzQzMjYsXG4gICAgdG9FUFNHNDMyNlxuICApO1xufVxuXG5hZGRDb21tb24oKTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvRXZlbnRcbiAqL1xuXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcblxuY2xhc3MgUmVuZGVyRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vRXZlbnRUeXBlLmpzXCIpLmRlZmF1bHR9IHR5cGUgVHlwZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBbaW52ZXJzZVBpeGVsVHJhbnNmb3JtXSBUcmFuc2Zvcm0gZm9yXG4gICAqICAgICBDU1MgcGl4ZWxzIHRvIHJlbmRlcmVkIHBpeGVscy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gW2ZyYW1lU3RhdGVdIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0gez8oQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfFdlYkdMUmVuZGVyaW5nQ29udGV4dCl9IFtjb250ZXh0XSBDb250ZXh0LlxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSwgaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCBmcmFtZVN0YXRlLCBjb250ZXh0KSB7XG4gICAgc3VwZXIodHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gZnJvbSBDU1MgcGl4ZWxzIChyZWxhdGl2ZSB0byB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBtYXAgdmlld3BvcnQpXG4gICAgICogdG8gcmVuZGVyZWQgcGl4ZWxzIG9uIHRoaXMgZXZlbnQncyBgY29udGV4dGAuIE9ubHkgYXZhaWxhYmxlIHdoZW4gYSBDYW52YXMgcmVuZGVyZXIgaXMgdXNlZCwgbnVsbCBvdGhlcndpc2UuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm18dW5kZWZpbmVkfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSA9IGludmVyc2VQaXhlbFRyYW5zZm9ybTtcblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcmVuZGVyIGZyYW1lIHN0YXRlLlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZXx1bmRlZmluZWR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuZnJhbWVTdGF0ZSA9IGZyYW1lU3RhdGU7XG5cbiAgICAvKipcbiAgICAgKiBDYW52YXMgY29udGV4dC4gTm90IGF2YWlsYWJsZSB3aGVuIHRoZSBldmVudCBpcyBkaXNwYXRjaGVkIGJ5IHRoZSBtYXAuIEZvciBDYW52YXMgMkQgbGF5ZXJzLFxuICAgICAqIHRoZSBjb250ZXh0IHdpbGwgYmUgdGhlIDJEIHJlbmRlcmluZyBjb250ZXh0LiAgRm9yIFdlYkdMIGxheWVycywgdGhlIGNvbnRleHQgd2lsbCBiZSB0aGUgV2ViR0xcbiAgICAgKiBjb250ZXh0LlxuICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8V2ViR0xSZW5kZXJpbmdDb250ZXh0fHVuZGVmaW5lZH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJFdmVudDtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvRXZlbnRUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgYmVmb3JlIGEgbGF5ZXIgaXMgcmVuZGVyZWQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3ByZXJlbmRlclxuICAgKiBAYXBpXG4gICAqL1xuICBQUkVSRU5ERVI6ICdwcmVyZW5kZXInLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgYSBsYXllciBpcyByZW5kZXJlZC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcG9zdHJlbmRlclxuICAgKiBAYXBpXG4gICAqL1xuICBQT1NUUkVOREVSOiAncG9zdHJlbmRlcicsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCBiZWZvcmUgbGF5ZXJzIGFyZSBjb21wb3NlZC4gIFdoZW4gZGlzcGF0Y2hlZCBieSB0aGUgbWFwLCB0aGUgZXZlbnQgb2JqZWN0IHdpbGwgbm90IGhhdmVcbiAgICogYSBgY29udGV4dGAgc2V0LiAgV2hlbiBkaXNwYXRjaGVkIGJ5IGEgbGF5ZXIsIHRoZSBldmVudCBvYmplY3Qgd2lsbCBoYXZlIGEgYGNvbnRleHRgIHNldC4gIE9ubHlcbiAgICogV2ViR0wgbGF5ZXJzIGN1cnJlbnRseSBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNwcmVjb21wb3NlXG4gICAqIEBhcGlcbiAgICovXG4gIFBSRUNPTVBPU0U6ICdwcmVjb21wb3NlJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIGFmdGVyIGxheWVycyBhcmUgY29tcG9zZWQuICBXaGVuIGRpc3BhdGNoZWQgYnkgdGhlIG1hcCwgdGhlIGV2ZW50IG9iamVjdCB3aWxsIG5vdCBoYXZlXG4gICAqIGEgYGNvbnRleHRgIHNldC4gIFdoZW4gZGlzcGF0Y2hlZCBieSBhIGxheWVyLCB0aGUgZXZlbnQgb2JqZWN0IHdpbGwgaGF2ZSBhIGBjb250ZXh0YCBzZXQuICBPbmx5XG4gICAqIFdlYkdMIGxheWVycyBjdXJyZW50bHkgZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcG9zdGNvbXBvc2VcbiAgICogQGFwaVxuICAgKi9cbiAgUE9TVENPTVBPU0U6ICdwb3N0Y29tcG9zZScsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIHJlbmRlcmluZyBpcyBjb21wbGV0ZSwgaS5lLiBhbGwgc291cmNlcyBhbmQgdGlsZXMgaGF2ZVxuICAgKiBmaW5pc2hlZCBsb2FkaW5nIGZvciB0aGUgY3VycmVudCB2aWV3cG9ydCwgYW5kIGFsbCB0aWxlcyBhcmUgZmFkZWQgaW4uXG4gICAqIFRoZSBldmVudCBvYmplY3Qgd2lsbCBub3QgaGF2ZSBhIGBjb250ZXh0YCBzZXQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3JlbmRlcmNvbXBsZXRlXG4gICAqIEBhcGlcbiAgICovXG4gIFJFTkRFUkNPTVBMRVRFOiAncmVuZGVyY29tcGxldGUnLFxufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7J3Bvc3RyZW5kZXInfCdwcmVjb21wb3NlJ3wncG9zdGNvbXBvc2UnfCdyZW5kZXJjb21wbGV0ZSd9IE1hcFJlbmRlckV2ZW50VHlwZXNcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHsncG9zdHJlbmRlcid8J3ByZXJlbmRlcid9IExheWVyUmVuZGVyRXZlbnRUeXBlc1xuICovXG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qXG4gKi9cbmltcG9ydCB7XG4gIGNvbnRhaW5zQ29vcmRpbmF0ZSxcbiAgY3JlYXRlRW1wdHksXG4gIGV4dGVuZCxcbiAgZm9yRWFjaENvcm5lcixcbiAgZ2V0Q2VudGVyLFxuICBnZXRIZWlnaHQsXG4gIGdldFRvcExlZnQsXG4gIGdldFdpZHRoLFxufSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRCwgcmVsZWFzZUNhbnZhc30gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHtnZXRQb2ludFJlc29sdXRpb24sIHRyYW5zZm9ybX0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7c29sdmVMaW5lYXJTeXN0ZW19IGZyb20gJy4vbWF0aC5qcyc7XG5cbmxldCBicm9rZW5EaWFnb25hbFJlbmRlcmluZ187XG5cbi8qKlxuICogQHR5cGUge0FycmF5PEhUTUxDYW52YXNFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGNvbnN0IGNhbnZhc1Bvb2wgPSBbXTtcblxuLyoqXG4gKiBUaGlzIGRyYXdzIGEgc21hbGwgdHJpYW5nbGUgaW50byBhIGNhbnZhcyBieSBzZXR0aW5nIHRoZSB0cmlhbmdsZSBhcyB0aGUgY2xpcCByZWdpb25cbiAqIGFuZCB0aGVuIGRyYXdpbmcgYSAodG9vIGxhcmdlKSByZWN0YW5nbGVcbiAqXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY3R4IFRoZSBjb250ZXh0IGluIHdoaWNoIHRvIGRyYXcgdGhlIHRyaWFuZ2xlXG4gKiBAcGFyYW0ge251bWJlcn0gdTEgVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgc2Vjb25kIHBvaW50LiBUaGUgZmlyc3QgcG9pbnQgaXMgMCwwLlxuICogQHBhcmFtIHtudW1iZXJ9IHYxIFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIHNlY29uZCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB1MiBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSB0aGlyZCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2MiBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSB0aGlyZCBwb2ludC5cbiAqL1xuZnVuY3Rpb24gZHJhd1Rlc3RUcmlhbmdsZShjdHgsIHUxLCB2MSwgdTIsIHYyKSB7XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4Lm1vdmVUbygwLCAwKTtcbiAgY3R4LmxpbmVUbyh1MSwgdjEpO1xuICBjdHgubGluZVRvKHUyLCB2Mik7XG4gIGN0eC5jbG9zZVBhdGgoKTtcbiAgY3R4LnNhdmUoKTtcbiAgY3R4LmNsaXAoKTtcbiAgY3R4LmZpbGxSZWN0KDAsIDAsIE1hdGgubWF4KHUxLCB1MikgKyAxLCBNYXRoLm1heCh2MSwgdjIpKTtcbiAgY3R4LnJlc3RvcmUoKTtcbn1cblxuLyoqXG4gKiBHaXZlbiB0aGUgZGF0YSBmcm9tIGdldEltYWdlRGF0YSwgc2VlIGlmIHRoZSByaWdodCB2YWx1ZXMgYXBwZWFyIGF0IHRoZSBwcm92aWRlZCBvZmZzZXQuXG4gKiBSZXR1cm5zIHRydWUgaWYgZWl0aGVyIHRoZSBjb2xvciBvciB0cmFuc3BhcmVuY3kgaXMgb2ZmXG4gKlxuICogQHBhcmFtIHtVaW50OENsYW1wZWRBcnJheX0gZGF0YSBUaGUgZGF0YSByZXR1cm5lZCBmcm9tIGdldEltYWdlRGF0YVxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBUaGUgcGl4ZWwgb2Zmc2V0IGZyb20gdGhlIHN0YXJ0IG9mIGRhdGEuXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBkaWFnb25hbCByZW5kZXJpbmcgaXMgYnJva2VuXG4gKi9cbmZ1bmN0aW9uIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIG9mZnNldCkge1xuICAvLyB0aGUgdmFsdWVzIG91Z2h0IHRvIGJlIGNsb3NlIHRvIHRoZSByZ2JhKDIxMCwgMCwgMCwgMC43NSlcbiAgcmV0dXJuIChcbiAgICBNYXRoLmFicyhkYXRhW29mZnNldCAqIDRdIC0gMjEwKSA+IDIgfHxcbiAgICBNYXRoLmFicyhkYXRhW29mZnNldCAqIDQgKyAzXSAtIDAuNzUgKiAyNTUpID4gMlxuICApO1xufVxuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGN1cnJlbnQgYnJvd3NlciBjb25maWd1cmF0aW9uIGNhbiByZW5kZXIgdHJpYW5ndWxhciBjbGlwIHJlZ2lvbnMgY29ycmVjdGx5LlxuICogVGhpcyB2YWx1ZSBpcyBjYWNoZWQgc28gdGhlIGZ1bmN0aW9uIGlzIG9ubHkgZXhwZW5zaXZlIHRoZSBmaXJzdCB0aW1lIGNhbGxlZC5cbiAqIEZpcmVmb3ggb24gV2luZG93cyAoYXMgb2Ygbm93KSBkb2VzIG5vdCBpZiBIV0EgaXMgZW5hYmxlZC4gU2VlIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE2MDY5NzZcbiAqIENocm9tZSB3b3JrcywgYW5kIGV2ZXJ5dGhpbmcgc2VlbXMgdG8gd29yayBvbiBPU1ggYW5kIEFuZHJvaWQuIFRoaXMgZnVuY3Rpb24gY2FjaGVzIHRoZVxuICogcmVzdWx0LiBJIHN1cHBvc2UgdGhhdCBpdCBpcyBjb25jZWl2YWJseSBwb3NzaWJsZSB0aGF0IGEgYnJvd3NlciBtaWdodCBmbGlwIG1vZGVzIHdoaWxlIHRoZSBhcHAgaXNcbiAqIHJ1bm5pbmcsIGJ1dCBsZXRzIGhvcGUgbm90LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlIERpYWdvbmFsIFJlbmRlcmluZyBpcyBicm9rZW4uXG4gKi9cbmZ1bmN0aW9uIGlzQnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoKSB7XG4gIGlmIChicm9rZW5EaWFnb25hbFJlbmRlcmluZ18gPT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGN0eCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCg2LCA2LCBjYW52YXNQb29sKTtcbiAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2xpZ2h0ZXInO1xuICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyMTAsIDAsIDAsIDAuNzUpJztcbiAgICBkcmF3VGVzdFRyaWFuZ2xlKGN0eCwgNCwgNSwgNCwgMCk7XG4gICAgZHJhd1Rlc3RUcmlhbmdsZShjdHgsIDQsIDUsIDAsIDUpO1xuICAgIGNvbnN0IGRhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDMsIDMpLmRhdGE7XG4gICAgYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfID1cbiAgICAgIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIDApIHx8XG4gICAgICB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCA0KSB8fFxuICAgICAgdmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoZGF0YSwgOCk7XG4gICAgcmVsZWFzZUNhbnZhcyhjdHgpO1xuICAgIGNhbnZhc1Bvb2wucHVzaChjdHguY2FudmFzKTtcbiAgfVxuXG4gIHJldHVybiBicm9rZW5EaWFnb25hbFJlbmRlcmluZ187XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyBpZGVhbCByZXNvbHV0aW9uIHRvIHVzZSBmcm9tIHRoZSBzb3VyY2UgaW4gb3JkZXIgdG8gYWNoaWV2ZVxuICogcGl4ZWwgbWFwcGluZyBhcyBjbG9zZSBhcyBwb3NzaWJsZSB0byAxOjEgZHVyaW5nIHJlcHJvamVjdGlvbi5cbiAqIFRoZSByZXNvbHV0aW9uIGlzIGNhbGN1bGF0ZWQgcmVnYXJkbGVzcyBvZiB3aGF0IHJlc29sdXRpb25zXG4gKiBhcmUgYWN0dWFsbHkgYXZhaWxhYmxlIGluIHRoZSBkYXRhc2V0IChUaWxlR3JpZCwgSW1hZ2UsIC4uLikuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSB0YXJnZXRQcm9qIFRhcmdldCBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gdGFyZ2V0Q2VudGVyIFRhcmdldCBjZW50ZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0UmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGJlc3QgcmVzb2x1dGlvbiB0byB1c2UuIENhbiBiZSArLUluZmluaXR5LCBOYU4gb3IgMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24oXG4gIHNvdXJjZVByb2osXG4gIHRhcmdldFByb2osXG4gIHRhcmdldENlbnRlcixcbiAgdGFyZ2V0UmVzb2x1dGlvblxuKSB7XG4gIGNvbnN0IHNvdXJjZUNlbnRlciA9IHRyYW5zZm9ybSh0YXJnZXRDZW50ZXIsIHRhcmdldFByb2osIHNvdXJjZVByb2opO1xuXG4gIC8vIGNhbGN1bGF0ZSB0aGUgaWRlYWwgcmVzb2x1dGlvbiBvZiB0aGUgc291cmNlIGRhdGFcbiAgbGV0IHNvdXJjZVJlc29sdXRpb24gPSBnZXRQb2ludFJlc29sdXRpb24oXG4gICAgdGFyZ2V0UHJvaixcbiAgICB0YXJnZXRSZXNvbHV0aW9uLFxuICAgIHRhcmdldENlbnRlclxuICApO1xuXG4gIGNvbnN0IHRhcmdldE1ldGVyc1BlclVuaXQgPSB0YXJnZXRQcm9qLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgaWYgKHRhcmdldE1ldGVyc1BlclVuaXQgIT09IHVuZGVmaW5lZCkge1xuICAgIHNvdXJjZVJlc29sdXRpb24gKj0gdGFyZ2V0TWV0ZXJzUGVyVW5pdDtcbiAgfVxuICBjb25zdCBzb3VyY2VNZXRlcnNQZXJVbml0ID0gc291cmNlUHJvai5nZXRNZXRlcnNQZXJVbml0KCk7XG4gIGlmIChzb3VyY2VNZXRlcnNQZXJVbml0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBzb3VyY2VSZXNvbHV0aW9uIC89IHNvdXJjZU1ldGVyc1BlclVuaXQ7XG4gIH1cblxuICAvLyBCYXNlZCBvbiB0aGUgcHJvamVjdGlvbiBwcm9wZXJ0aWVzLCB0aGUgcG9pbnQgcmVzb2x1dGlvbiBhdCB0aGUgc3BlY2lmaWVkXG4gIC8vIGNvb3JkaW5hdGVzIG1heSBiZSBzbGlnaHRseSBkaWZmZXJlbnQuIFdlIG5lZWQgdG8gcmV2ZXJzZS1jb21wZW5zYXRlIHRoaXNcbiAgLy8gaW4gb3JkZXIgdG8gYWNoaWV2ZSBvcHRpbWFsIHJlc3VsdHMuXG5cbiAgY29uc3Qgc291cmNlRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgaWYgKCFzb3VyY2VFeHRlbnQgfHwgY29udGFpbnNDb29yZGluYXRlKHNvdXJjZUV4dGVudCwgc291cmNlQ2VudGVyKSkge1xuICAgIGNvbnN0IGNvbXBlbnNhdGlvbkZhY3RvciA9XG4gICAgICBnZXRQb2ludFJlc29sdXRpb24oc291cmNlUHJvaiwgc291cmNlUmVzb2x1dGlvbiwgc291cmNlQ2VudGVyKSAvXG4gICAgICBzb3VyY2VSZXNvbHV0aW9uO1xuICAgIGlmIChpc0Zpbml0ZShjb21wZW5zYXRpb25GYWN0b3IpICYmIGNvbXBlbnNhdGlvbkZhY3RvciA+IDApIHtcbiAgICAgIHNvdXJjZVJlc29sdXRpb24gLz0gY29tcGVuc2F0aW9uRmFjdG9yO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzb3VyY2VSZXNvbHV0aW9uO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgaWRlYWwgcmVzb2x1dGlvbiB0byB1c2UgZnJvbSB0aGUgc291cmNlIGluIG9yZGVyIHRvIGFjaGlldmVcbiAqIHBpeGVsIG1hcHBpbmcgYXMgY2xvc2UgYXMgcG9zc2libGUgdG8gMToxIGR1cmluZyByZXByb2plY3Rpb24uXG4gKiBUaGUgcmVzb2x1dGlvbiBpcyBjYWxjdWxhdGVkIHJlZ2FyZGxlc3Mgb2Ygd2hhdCByZXNvbHV0aW9uc1xuICogYXJlIGFjdHVhbGx5IGF2YWlsYWJsZSBpbiB0aGUgZGF0YXNldCAoVGlsZUdyaWQsIEltYWdlLCAuLi4pLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSB0YXJnZXRFeHRlbnQgVGFyZ2V0IGV4dGVudFxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBiZXN0IHJlc29sdXRpb24gdG8gdXNlLiBDYW4gYmUgKy1JbmZpbml0eSwgTmFOIG9yIDAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVTb3VyY2VFeHRlbnRSZXNvbHV0aW9uKFxuICBzb3VyY2VQcm9qLFxuICB0YXJnZXRQcm9qLFxuICB0YXJnZXRFeHRlbnQsXG4gIHRhcmdldFJlc29sdXRpb25cbikge1xuICBjb25zdCB0YXJnZXRDZW50ZXIgPSBnZXRDZW50ZXIodGFyZ2V0RXh0ZW50KTtcbiAgbGV0IHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKFxuICAgIHNvdXJjZVByb2osXG4gICAgdGFyZ2V0UHJvaixcbiAgICB0YXJnZXRDZW50ZXIsXG4gICAgdGFyZ2V0UmVzb2x1dGlvblxuICApO1xuXG4gIGlmICghaXNGaW5pdGUoc291cmNlUmVzb2x1dGlvbikgfHwgc291cmNlUmVzb2x1dGlvbiA8PSAwKSB7XG4gICAgZm9yRWFjaENvcm5lcih0YXJnZXRFeHRlbnQsIGZ1bmN0aW9uIChjb3JuZXIpIHtcbiAgICAgIHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKFxuICAgICAgICBzb3VyY2VQcm9qLFxuICAgICAgICB0YXJnZXRQcm9qLFxuICAgICAgICBjb3JuZXIsXG4gICAgICAgIHRhcmdldFJlc29sdXRpb25cbiAgICAgICk7XG4gICAgICByZXR1cm4gaXNGaW5pdGUoc291cmNlUmVzb2x1dGlvbikgJiYgc291cmNlUmVzb2x1dGlvbiA+IDA7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gc291cmNlUmVzb2x1dGlvbjtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBJbWFnZUV4dGVudFxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcHJvcGVydHkge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gaW1hZ2UgSW1hZ2UuXG4gKi9cblxuLyoqXG4gKiBSZW5kZXJzIHRoZSBzb3VyY2UgZGF0YSBpbnRvIG5ldyBjYW52YXMgYmFzZWQgb24gdGhlIHRyaWFuZ3VsYXRpb24uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHRoZSBjYW52YXMuXG4gKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiB0aGUgY2FudmFzLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcGFyYW0ge251bWJlcn0gc291cmNlUmVzb2x1dGlvbiBTb3VyY2UgcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBzb3VyY2VFeHRlbnQgRXh0ZW50IG9mIHRoZSBkYXRhIHNvdXJjZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IHRhcmdldEV4dGVudCBUYXJnZXQgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3JlcHJvai9Ucmlhbmd1bGF0aW9uLmpzXCIpLmRlZmF1bHR9IHRyaWFuZ3VsYXRpb24gQ2FsY3VsYXRlZCB0cmlhbmd1bGF0aW9uLlxuICogQHBhcmFtIHtBcnJheTxJbWFnZUV4dGVudD59IHNvdXJjZXMgQXJyYXkgb2Ygc291cmNlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBndXR0ZXIgR3V0dGVyIG9mIHRoZSBzb3VyY2VzLlxuICogQHBhcmFtIHtib29sZWFufSBbcmVuZGVyRWRnZXNdIFJlbmRlciByZXByb2plY3Rpb24gZWRnZXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpbnRlcnBvbGF0ZV0gVXNlIGxpbmVhciBpbnRlcnBvbGF0aW9uIHdoZW4gcmVzYW1wbGluZy5cbiAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBDYW52YXMgd2l0aCByZXByb2plY3RlZCBkYXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyKFxuICB3aWR0aCxcbiAgaGVpZ2h0LFxuICBwaXhlbFJhdGlvLFxuICBzb3VyY2VSZXNvbHV0aW9uLFxuICBzb3VyY2VFeHRlbnQsXG4gIHRhcmdldFJlc29sdXRpb24sXG4gIHRhcmdldEV4dGVudCxcbiAgdHJpYW5ndWxhdGlvbixcbiAgc291cmNlcyxcbiAgZ3V0dGVyLFxuICByZW5kZXJFZGdlcyxcbiAgaW50ZXJwb2xhdGVcbikge1xuICBjb25zdCBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKFxuICAgIE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIHdpZHRoKSxcbiAgICBNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiBoZWlnaHQpLFxuICAgIGNhbnZhc1Bvb2xcbiAgKTtcblxuICBpZiAoIWludGVycG9sYXRlKSB7XG4gICAgY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBjb250ZXh0LmNhbnZhcztcbiAgfVxuXG4gIGNvbnRleHQuc2NhbGUocGl4ZWxSYXRpbywgcGl4ZWxSYXRpbyk7XG5cbiAgZnVuY3Rpb24gcGl4ZWxSb3VuZCh2YWx1ZSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogcGl4ZWxSYXRpbykgLyBwaXhlbFJhdGlvO1xuICB9XG5cbiAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnbGlnaHRlcic7XG5cbiAgY29uc3Qgc291cmNlRGF0YUV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc3JjLCBpLCBhcnIpIHtcbiAgICBleHRlbmQoc291cmNlRGF0YUV4dGVudCwgc3JjLmV4dGVudCk7XG4gIH0pO1xuXG4gIGNvbnN0IGNhbnZhc1dpZHRoSW5Vbml0cyA9IGdldFdpZHRoKHNvdXJjZURhdGFFeHRlbnQpO1xuICBjb25zdCBjYW52YXNIZWlnaHRJblVuaXRzID0gZ2V0SGVpZ2h0KHNvdXJjZURhdGFFeHRlbnQpO1xuICBjb25zdCBzdGl0Y2hDb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKFxuICAgIE1hdGgucm91bmQoKHBpeGVsUmF0aW8gKiBjYW52YXNXaWR0aEluVW5pdHMpIC8gc291cmNlUmVzb2x1dGlvbiksXG4gICAgTWF0aC5yb3VuZCgocGl4ZWxSYXRpbyAqIGNhbnZhc0hlaWdodEluVW5pdHMpIC8gc291cmNlUmVzb2x1dGlvbiksXG4gICAgY2FudmFzUG9vbFxuICApO1xuXG4gIGlmICghaW50ZXJwb2xhdGUpIHtcbiAgICBzdGl0Y2hDb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgY29uc3Qgc3RpdGNoU2NhbGUgPSBwaXhlbFJhdGlvIC8gc291cmNlUmVzb2x1dGlvbjtcblxuICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHNyYywgaSwgYXJyKSB7XG4gICAgY29uc3QgeFBvcyA9IHNyYy5leHRlbnRbMF0gLSBzb3VyY2VEYXRhRXh0ZW50WzBdO1xuICAgIGNvbnN0IHlQb3MgPSAtKHNyYy5leHRlbnRbM10gLSBzb3VyY2VEYXRhRXh0ZW50WzNdKTtcbiAgICBjb25zdCBzcmNXaWR0aCA9IGdldFdpZHRoKHNyYy5leHRlbnQpO1xuICAgIGNvbnN0IHNyY0hlaWdodCA9IGdldEhlaWdodChzcmMuZXh0ZW50KTtcblxuICAgIC8vIFRoaXMgdGVzdCBzaG91bGQgbmV2ZXIgZmFpbCAtLSBidXQgaXQgZG9lcy4gTmVlZCB0byBmaW5kIGEgZml4IHRoZSB1cHN0cmVhbSBjb25kaXRpb25cbiAgICBpZiAoc3JjLmltYWdlLndpZHRoID4gMCAmJiBzcmMuaW1hZ2UuaGVpZ2h0ID4gMCkge1xuICAgICAgc3RpdGNoQ29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgIHNyYy5pbWFnZSxcbiAgICAgICAgZ3V0dGVyLFxuICAgICAgICBndXR0ZXIsXG4gICAgICAgIHNyYy5pbWFnZS53aWR0aCAtIDIgKiBndXR0ZXIsXG4gICAgICAgIHNyYy5pbWFnZS5oZWlnaHQgLSAyICogZ3V0dGVyLFxuICAgICAgICB4UG9zICogc3RpdGNoU2NhbGUsXG4gICAgICAgIHlQb3MgKiBzdGl0Y2hTY2FsZSxcbiAgICAgICAgc3JjV2lkdGggKiBzdGl0Y2hTY2FsZSxcbiAgICAgICAgc3JjSGVpZ2h0ICogc3RpdGNoU2NhbGVcbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCB0YXJnZXRUb3BMZWZ0ID0gZ2V0VG9wTGVmdCh0YXJnZXRFeHRlbnQpO1xuXG4gIHRyaWFuZ3VsYXRpb24uZ2V0VHJpYW5nbGVzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgIC8qIENhbGN1bGF0ZSBhZmZpbmUgdHJhbnNmb3JtIChzcmMgLT4gZHN0KVxuICAgICAqIFJlc3VsdGluZyBtYXRyaXggY2FuIGJlIHVzZWQgdG8gdHJhbnNmb3JtIGNvb3JkaW5hdGVcbiAgICAgKiBmcm9tIGBzb3VyY2VQcm9qZWN0aW9uYCB0byBkZXN0aW5hdGlvbiBwaXhlbHMuXG4gICAgICpcbiAgICAgKiBUbyBvcHRpbWl6ZSBudW1iZXIgb2YgY29udGV4dCBjYWxscyBhbmQgaW5jcmVhc2UgbnVtZXJpY2FsIHN0YWJpbGl0eSxcbiAgICAgKiB3ZSBhbHNvIGRvIHRoZSBmb2xsb3dpbmcgb3BlcmF0aW9uczpcbiAgICAgKiB0cmFucygtdG9wTGVmdEV4dGVudENvcm5lciksIHNjYWxlKDEgLyB0YXJnZXRSZXNvbHV0aW9uKSwgc2NhbGUoMSwgLTEpXG4gICAgICogaGVyZSBiZWZvcmUgc29sdmluZyB0aGUgbGluZWFyIHN5c3RlbSBzbyBbdWksIHZpXSBhcmUgcGl4ZWwgY29vcmRpbmF0ZXMuXG4gICAgICpcbiAgICAgKiBTcmMgcG9pbnRzOiB4aSwgeWlcbiAgICAgKiBEc3QgcG9pbnRzOiB1aSwgdmlcbiAgICAgKiBBZmZpbmUgY29lZmZpY2llbnRzOiBhaWpcbiAgICAgKlxuICAgICAqIHwgeDAgeTAgMSAgMCAgMCAwIHwgICB8YTAwfCAgIHx1MHxcbiAgICAgKiB8IHgxIHkxIDEgIDAgIDAgMCB8ICAgfGEwMXwgICB8dTF8XG4gICAgICogfCB4MiB5MiAxICAwICAwIDAgfCB4IHxhMDJ8ID0gfHUyfFxuICAgICAqIHwgIDAgIDAgMCB4MCB5MCAxIHwgICB8YTEwfCAgIHx2MHxcbiAgICAgKiB8ICAwICAwIDAgeDEgeTEgMSB8ICAgfGExMXwgICB8djF8XG4gICAgICogfCAgMCAgMCAwIHgyIHkyIDEgfCAgIHxhMTJ8ICAgfHYyfFxuICAgICAqL1xuICAgIGNvbnN0IHNvdXJjZSA9IHRyaWFuZ2xlLnNvdXJjZTtcbiAgICBjb25zdCB0YXJnZXQgPSB0cmlhbmdsZS50YXJnZXQ7XG4gICAgbGV0IHgwID0gc291cmNlWzBdWzBdLFxuICAgICAgeTAgPSBzb3VyY2VbMF1bMV07XG4gICAgbGV0IHgxID0gc291cmNlWzFdWzBdLFxuICAgICAgeTEgPSBzb3VyY2VbMV1bMV07XG4gICAgbGV0IHgyID0gc291cmNlWzJdWzBdLFxuICAgICAgeTIgPSBzb3VyY2VbMl1bMV07XG4gICAgLy8gTWFrZSBzdXJlIHRoYXQgZXZlcnl0aGluZyBpcyBvbiBwaXhlbCBib3VuZGFyaWVzXG4gICAgY29uc3QgdTAgPSBwaXhlbFJvdW5kKCh0YXJnZXRbMF1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgIGNvbnN0IHYwID0gcGl4ZWxSb3VuZChcbiAgICAgIC0odGFyZ2V0WzBdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uXG4gICAgKTtcbiAgICBjb25zdCB1MSA9IHBpeGVsUm91bmQoKHRhcmdldFsxXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgY29uc3QgdjEgPSBwaXhlbFJvdW5kKFxuICAgICAgLSh0YXJnZXRbMV1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb25cbiAgICApO1xuICAgIGNvbnN0IHUyID0gcGl4ZWxSb3VuZCgodGFyZ2V0WzJdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICBjb25zdCB2MiA9IHBpeGVsUm91bmQoXG4gICAgICAtKHRhcmdldFsyXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvblxuICAgICk7XG5cbiAgICAvLyBTaGlmdCBhbGwgdGhlIHNvdXJjZSBwb2ludHMgdG8gaW1wcm92ZSBudW1lcmljYWwgc3RhYmlsaXR5XG4gICAgLy8gb2YgYWxsIHRoZSBzdWJzZXF1ZW50IGNhbGN1bGF0aW9ucy4gVGhlIFt4MCwgeTBdIGlzIHVzZWQgaGVyZS5cbiAgICAvLyBUaGlzIGlzIGFsc28gdXNlZCB0byBzaW1wbGlmeSB0aGUgbGluZWFyIHN5c3RlbS5cbiAgICBjb25zdCBzb3VyY2VOdW1lcmljYWxTaGlmdFggPSB4MDtcbiAgICBjb25zdCBzb3VyY2VOdW1lcmljYWxTaGlmdFkgPSB5MDtcbiAgICB4MCA9IDA7XG4gICAgeTAgPSAwO1xuICAgIHgxIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WDtcbiAgICB5MSAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFk7XG4gICAgeDIgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRYO1xuICAgIHkyIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WTtcblxuICAgIGNvbnN0IGF1Z21lbnRlZE1hdHJpeCA9IFtcbiAgICAgIFt4MSwgeTEsIDAsIDAsIHUxIC0gdTBdLFxuICAgICAgW3gyLCB5MiwgMCwgMCwgdTIgLSB1MF0sXG4gICAgICBbMCwgMCwgeDEsIHkxLCB2MSAtIHYwXSxcbiAgICAgIFswLCAwLCB4MiwgeTIsIHYyIC0gdjBdLFxuICAgIF07XG4gICAgY29uc3QgYWZmaW5lQ29lZnMgPSBzb2x2ZUxpbmVhclN5c3RlbShhdWdtZW50ZWRNYXRyaXgpO1xuICAgIGlmICghYWZmaW5lQ29lZnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb250ZXh0LnNhdmUoKTtcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuXG4gICAgaWYgKGlzQnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoKSB8fCAhaW50ZXJwb2xhdGUpIHtcbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IGFsbCBsaW5lcyBhcmUgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbFxuICAgICAgY29udGV4dC5tb3ZlVG8odTEsIHYxKTtcbiAgICAgIC8vIFRoaXMgaXMgdGhlIGRpYWdvbmFsIGxpbmUuIERvIGl0IGluIDQgc3RlcHNcbiAgICAgIGNvbnN0IHN0ZXBzID0gNDtcbiAgICAgIGNvbnN0IHVkID0gdTAgLSB1MTtcbiAgICAgIGNvbnN0IHZkID0gdjAgLSB2MTtcbiAgICAgIGZvciAobGV0IHN0ZXAgPSAwOyBzdGVwIDwgc3RlcHM7IHN0ZXArKykge1xuICAgICAgICAvLyBHbyBob3Jpem9udGFsbHlcbiAgICAgICAgY29udGV4dC5saW5lVG8oXG4gICAgICAgICAgdTEgKyBwaXhlbFJvdW5kKCgoc3RlcCArIDEpICogdWQpIC8gc3RlcHMpLFxuICAgICAgICAgIHYxICsgcGl4ZWxSb3VuZCgoc3RlcCAqIHZkKSAvIChzdGVwcyAtIDEpKVxuICAgICAgICApO1xuICAgICAgICAvLyBHbyB2ZXJ0aWNhbGx5XG4gICAgICAgIGlmIChzdGVwICE9IHN0ZXBzIC0gMSkge1xuICAgICAgICAgIGNvbnRleHQubGluZVRvKFxuICAgICAgICAgICAgdTEgKyBwaXhlbFJvdW5kKCgoc3RlcCArIDEpICogdWQpIC8gc3RlcHMpLFxuICAgICAgICAgICAgdjEgKyBwaXhlbFJvdW5kKCgoc3RlcCArIDEpICogdmQpIC8gKHN0ZXBzIC0gMSkpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gV2UgYXJlIGFsbW9zdCBhdCB1MHIsIHYwclxuICAgICAgY29udGV4dC5saW5lVG8odTIsIHYyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGV4dC5tb3ZlVG8odTEsIHYxKTtcbiAgICAgIGNvbnRleHQubGluZVRvKHUwLCB2MCk7XG4gICAgICBjb250ZXh0LmxpbmVUbyh1MiwgdjIpO1xuICAgIH1cblxuICAgIGNvbnRleHQuY2xpcCgpO1xuXG4gICAgY29udGV4dC50cmFuc2Zvcm0oXG4gICAgICBhZmZpbmVDb2Vmc1swXSxcbiAgICAgIGFmZmluZUNvZWZzWzJdLFxuICAgICAgYWZmaW5lQ29lZnNbMV0sXG4gICAgICBhZmZpbmVDb2Vmc1szXSxcbiAgICAgIHUwLFxuICAgICAgdjBcbiAgICApO1xuXG4gICAgY29udGV4dC50cmFuc2xhdGUoXG4gICAgICBzb3VyY2VEYXRhRXh0ZW50WzBdIC0gc291cmNlTnVtZXJpY2FsU2hpZnRYLFxuICAgICAgc291cmNlRGF0YUV4dGVudFszXSAtIHNvdXJjZU51bWVyaWNhbFNoaWZ0WVxuICAgICk7XG5cbiAgICBjb250ZXh0LnNjYWxlKFxuICAgICAgc291cmNlUmVzb2x1dGlvbiAvIHBpeGVsUmF0aW8sXG4gICAgICAtc291cmNlUmVzb2x1dGlvbiAvIHBpeGVsUmF0aW9cbiAgICApO1xuXG4gICAgY29udGV4dC5kcmF3SW1hZ2Uoc3RpdGNoQ29udGV4dC5jYW52YXMsIDAsIDApO1xuICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICB9KTtcblxuICByZWxlYXNlQ2FudmFzKHN0aXRjaENvbnRleHQpO1xuICBjYW52YXNQb29sLnB1c2goc3RpdGNoQ29udGV4dC5jYW52YXMpO1xuXG4gIGlmIChyZW5kZXJFZGdlcykge1xuICAgIGNvbnRleHQuc2F2ZSgpO1xuXG4gICAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgIGNvbnRleHQubGluZVdpZHRoID0gMTtcblxuICAgIHRyaWFuZ3VsYXRpb24uZ2V0VHJpYW5nbGVzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gdHJpYW5nbGUudGFyZ2V0O1xuICAgICAgY29uc3QgdTAgPSAodGFyZ2V0WzBdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgY29uc3QgdjAgPSAtKHRhcmdldFswXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgIGNvbnN0IHUxID0gKHRhcmdldFsxXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgIGNvbnN0IHYxID0gLSh0YXJnZXRbMV1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICBjb25zdCB1MiA9ICh0YXJnZXRbMl1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICBjb25zdCB2MiA9IC0odGFyZ2V0WzJdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuXG4gICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgY29udGV4dC5tb3ZlVG8odTEsIHYxKTtcbiAgICAgIGNvbnRleHQubGluZVRvKHUwLCB2MCk7XG4gICAgICBjb250ZXh0LmxpbmVUbyh1MiwgdjIpO1xuICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgfSk7XG5cbiAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgfVxuICByZXR1cm4gY29udGV4dC5jYW52YXM7XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qL1RpbGVcbiAqL1xuaW1wb3J0IHtFUlJPUl9USFJFU0hPTER9IGZyb20gJy4vY29tbW9uLmpzJztcblxuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBUaWxlIGZyb20gJy4uL1RpbGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IFRyaWFuZ3VsYXRpb24gZnJvbSAnLi9Ucmlhbmd1bGF0aW9uLmpzJztcbmltcG9ydCB7XG4gIGNhbGN1bGF0ZVNvdXJjZUV4dGVudFJlc29sdXRpb24sXG4gIGNhbnZhc1Bvb2wsXG4gIHJlbmRlciBhcyByZW5kZXJSZXByb2plY3RlZCxcbn0gZnJvbSAnLi4vcmVwcm9qLmpzJztcbmltcG9ydCB7Y2xhbXB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHtnZXRBcmVhLCBnZXRJbnRlcnNlY3Rpb259IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCB7cmVsZWFzZUNhbnZhc30gZnJvbSAnLi4vZG9tLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24obnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyKSA6IChpbXBvcnQoXCIuLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdCl9IEZ1bmN0aW9uVHlwZVxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2xhc3MgZW5jYXBzdWxhdGluZyBzaW5nbGUgcmVwcm9qZWN0ZWQgdGlsZS5cbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlSW1hZ2V+VGlsZUltYWdlfS5cbiAqXG4gKi9cbmNsYXNzIFJlcHJvalRpbGUgZXh0ZW5kcyBUaWxlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gc291cmNlVGlsZUdyaWQgU291cmNlIHRpbGUgZ3JpZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0YXJnZXRUaWxlR3JpZCBUYXJnZXQgdGlsZSBncmlkLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBDb29yZGluYXRlIG9mIHRoZSB0aWxlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHdyYXBwZWRUaWxlQ29vcmQgQ29vcmRpbmF0ZSBvZiB0aGUgdGlsZSB3cmFwcGVkIGluIFguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZ3V0dGVyIEd1dHRlciBvZiB0aGUgc291cmNlIHRpbGVzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9uVHlwZX0gZ2V0VGlsZUZ1bmN0aW9uXG4gICAqICAgICBGdW5jdGlvbiByZXR1cm5pbmcgc291cmNlIHRpbGVzICh6LCB4LCB5LCBwaXhlbFJhdGlvKS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtlcnJvclRocmVzaG9sZF0gQWNjZXB0YWJsZSByZXByb2plY3Rpb24gZXJyb3IgKGluIHB4KS5cbiAgICogQHBhcmFtIHtib29sZWFufSBbcmVuZGVyRWRnZXNdIFJlbmRlciByZXByb2plY3Rpb24gZWRnZXMuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ludGVycG9sYXRlXSBVc2UgbGluZWFyIGludGVycG9sYXRpb24gd2hlbiByZXNhbXBsaW5nLlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgc291cmNlUHJvaixcbiAgICBzb3VyY2VUaWxlR3JpZCxcbiAgICB0YXJnZXRQcm9qLFxuICAgIHRhcmdldFRpbGVHcmlkLFxuICAgIHRpbGVDb29yZCxcbiAgICB3cmFwcGVkVGlsZUNvb3JkLFxuICAgIHBpeGVsUmF0aW8sXG4gICAgZ3V0dGVyLFxuICAgIGdldFRpbGVGdW5jdGlvbixcbiAgICBlcnJvclRocmVzaG9sZCxcbiAgICByZW5kZXJFZGdlcyxcbiAgICBpbnRlcnBvbGF0ZVxuICApIHtcbiAgICBzdXBlcih0aWxlQ29vcmQsIFRpbGVTdGF0ZS5JRExFLCB7aW50ZXJwb2xhdGU6ICEhaW50ZXJwb2xhdGV9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJFZGdlc18gPSByZW5kZXJFZGdlcyAhPT0gdW5kZWZpbmVkID8gcmVuZGVyRWRnZXMgOiBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBpeGVsUmF0aW9fID0gcGl4ZWxSYXRpbztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmd1dHRlcl8gPSBndXR0ZXI7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmNhbnZhc18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnNvdXJjZVRpbGVHcmlkXyA9IHNvdXJjZVRpbGVHcmlkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnRhcmdldFRpbGVHcmlkXyA9IHRhcmdldFRpbGVHcmlkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH1cbiAgICAgKi9cbiAgICB0aGlzLndyYXBwZWRUaWxlQ29vcmRfID0gd3JhcHBlZFRpbGVDb29yZCA/IHdyYXBwZWRUaWxlQ29vcmQgOiB0aWxlQ29vcmQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqL1xuICAgIHRoaXMuc291cmNlVGlsZXNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/QXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5zb3VyY2VaXyA9IDA7XG5cbiAgICBjb25zdCB0YXJnZXRFeHRlbnQgPSB0YXJnZXRUaWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQoXG4gICAgICB0aGlzLndyYXBwZWRUaWxlQ29vcmRfXG4gICAgKTtcbiAgICBjb25zdCBtYXhUYXJnZXRFeHRlbnQgPSB0aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRFeHRlbnQoKTtcbiAgICBsZXQgbWF4U291cmNlRXh0ZW50ID0gdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0RXh0ZW50KCk7XG5cbiAgICBjb25zdCBsaW1pdGVkVGFyZ2V0RXh0ZW50ID0gbWF4VGFyZ2V0RXh0ZW50XG4gICAgICA/IGdldEludGVyc2VjdGlvbih0YXJnZXRFeHRlbnQsIG1heFRhcmdldEV4dGVudClcbiAgICAgIDogdGFyZ2V0RXh0ZW50O1xuXG4gICAgaWYgKGdldEFyZWEobGltaXRlZFRhcmdldEV4dGVudCkgPT09IDApIHtcbiAgICAgIC8vIFRpbGUgaXMgY29tcGxldGVseSBvdXRzaWRlIHJhbmdlIC0+IEVNUFRZXG4gICAgICAvLyBUT0RPOiBpcyBpdCBhY3R1YWxseSBjb3JyZWN0IHRoYXQgdGhlIHNvdXJjZSBldmVuIGNyZWF0ZXMgdGhlIHRpbGUgP1xuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzb3VyY2VQcm9qRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICBpZiAoc291cmNlUHJvakV4dGVudCkge1xuICAgICAgaWYgKCFtYXhTb3VyY2VFeHRlbnQpIHtcbiAgICAgICAgbWF4U291cmNlRXh0ZW50ID0gc291cmNlUHJvakV4dGVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1heFNvdXJjZUV4dGVudCA9IGdldEludGVyc2VjdGlvbihtYXhTb3VyY2VFeHRlbnQsIHNvdXJjZVByb2pFeHRlbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHRhcmdldFJlc29sdXRpb24gPSB0YXJnZXRUaWxlR3JpZC5nZXRSZXNvbHV0aW9uKFxuICAgICAgdGhpcy53cmFwcGVkVGlsZUNvb3JkX1swXVxuICAgICk7XG5cbiAgICBjb25zdCBzb3VyY2VSZXNvbHV0aW9uID0gY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbihcbiAgICAgIHNvdXJjZVByb2osXG4gICAgICB0YXJnZXRQcm9qLFxuICAgICAgbGltaXRlZFRhcmdldEV4dGVudCxcbiAgICAgIHRhcmdldFJlc29sdXRpb25cbiAgICApO1xuXG4gICAgaWYgKCFpc0Zpbml0ZShzb3VyY2VSZXNvbHV0aW9uKSB8fCBzb3VyY2VSZXNvbHV0aW9uIDw9IDApIHtcbiAgICAgIC8vIGludmFsaWQgc291cmNlUmVzb2x1dGlvbiAtPiBFTVBUWVxuICAgICAgLy8gcHJvYmFibHkgZWRnZXMgb2YgdGhlIHByb2plY3Rpb25zIHdoZW4gbm8gZXh0ZW50IGlzIGRlZmluZWRcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZXJyb3JUaHJlc2hvbGRJblBpeGVscyA9XG4gICAgICBlcnJvclRocmVzaG9sZCAhPT0gdW5kZWZpbmVkID8gZXJyb3JUaHJlc2hvbGQgOiBFUlJPUl9USFJFU0hPTEQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshaW1wb3J0KFwiLi9Ucmlhbmd1bGF0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy50cmlhbmd1bGF0aW9uXyA9IG5ldyBUcmlhbmd1bGF0aW9uKFxuICAgICAgc291cmNlUHJvaixcbiAgICAgIHRhcmdldFByb2osXG4gICAgICBsaW1pdGVkVGFyZ2V0RXh0ZW50LFxuICAgICAgbWF4U291cmNlRXh0ZW50LFxuICAgICAgc291cmNlUmVzb2x1dGlvbiAqIGVycm9yVGhyZXNob2xkSW5QaXhlbHMsXG4gICAgICB0YXJnZXRSZXNvbHV0aW9uXG4gICAgKTtcblxuICAgIGlmICh0aGlzLnRyaWFuZ3VsYXRpb25fLmdldFRyaWFuZ2xlcygpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gbm8gdmFsaWQgdHJpYW5nbGVzIC0+IEVNUFRZXG4gICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc291cmNlWl8gPSBzb3VyY2VUaWxlR3JpZC5nZXRaRm9yUmVzb2x1dGlvbihzb3VyY2VSZXNvbHV0aW9uKTtcbiAgICBsZXQgc291cmNlRXh0ZW50ID0gdGhpcy50cmlhbmd1bGF0aW9uXy5jYWxjdWxhdGVTb3VyY2VFeHRlbnQoKTtcblxuICAgIGlmIChtYXhTb3VyY2VFeHRlbnQpIHtcbiAgICAgIGlmIChzb3VyY2VQcm9qLmNhbldyYXBYKCkpIHtcbiAgICAgICAgc291cmNlRXh0ZW50WzFdID0gY2xhbXAoXG4gICAgICAgICAgc291cmNlRXh0ZW50WzFdLFxuICAgICAgICAgIG1heFNvdXJjZUV4dGVudFsxXSxcbiAgICAgICAgICBtYXhTb3VyY2VFeHRlbnRbM11cbiAgICAgICAgKTtcbiAgICAgICAgc291cmNlRXh0ZW50WzNdID0gY2xhbXAoXG4gICAgICAgICAgc291cmNlRXh0ZW50WzNdLFxuICAgICAgICAgIG1heFNvdXJjZUV4dGVudFsxXSxcbiAgICAgICAgICBtYXhTb3VyY2VFeHRlbnRbM11cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdXJjZUV4dGVudCA9IGdldEludGVyc2VjdGlvbihzb3VyY2VFeHRlbnQsIG1heFNvdXJjZUV4dGVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFnZXRBcmVhKHNvdXJjZUV4dGVudCkpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNvdXJjZVJhbmdlID0gc291cmNlVGlsZUdyaWQuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihcbiAgICAgICAgc291cmNlRXh0ZW50LFxuICAgICAgICB0aGlzLnNvdXJjZVpfXG4gICAgICApO1xuXG4gICAgICBmb3IgKGxldCBzcmNYID0gc291cmNlUmFuZ2UubWluWDsgc3JjWCA8PSBzb3VyY2VSYW5nZS5tYXhYOyBzcmNYKyspIHtcbiAgICAgICAgZm9yIChsZXQgc3JjWSA9IHNvdXJjZVJhbmdlLm1pblk7IHNyY1kgPD0gc291cmNlUmFuZ2UubWF4WTsgc3JjWSsrKSB7XG4gICAgICAgICAgY29uc3QgdGlsZSA9IGdldFRpbGVGdW5jdGlvbih0aGlzLnNvdXJjZVpfLCBzcmNYLCBzcmNZLCBwaXhlbFJhdGlvKTtcbiAgICAgICAgICBpZiAodGlsZSkge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VUaWxlc18ucHVzaCh0aWxlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc291cmNlVGlsZXNfLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIEhUTUwgQ2FudmFzIGVsZW1lbnQgZm9yIHRoaXMgdGlsZS5cbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IENhbnZhcy5cbiAgICovXG4gIGdldEltYWdlKCkge1xuICAgIHJldHVybiB0aGlzLmNhbnZhc187XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlcHJvamVjdF8oKSB7XG4gICAgY29uc3Qgc291cmNlcyA9IFtdO1xuICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goKHRpbGUpID0+IHtcbiAgICAgIGlmICh0aWxlICYmIHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgIHNvdXJjZXMucHVzaCh7XG4gICAgICAgICAgZXh0ZW50OiB0aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZS50aWxlQ29vcmQpLFxuICAgICAgICAgIGltYWdlOiB0aWxlLmdldEltYWdlKCksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuc291cmNlVGlsZXNfLmxlbmd0aCA9IDA7XG5cbiAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRVJST1I7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHogPSB0aGlzLndyYXBwZWRUaWxlQ29vcmRfWzBdO1xuICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMudGFyZ2V0VGlsZUdyaWRfLmdldFRpbGVTaXplKHopO1xuICAgICAgY29uc3Qgd2lkdGggPSB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogc2l6ZVswXTtcbiAgICAgIGNvbnN0IGhlaWdodCA9IHR5cGVvZiBzaXplID09PSAnbnVtYmVyJyA/IHNpemUgOiBzaXplWzFdO1xuICAgICAgY29uc3QgdGFyZ2V0UmVzb2x1dGlvbiA9IHRoaXMudGFyZ2V0VGlsZUdyaWRfLmdldFJlc29sdXRpb24oeik7XG4gICAgICBjb25zdCBzb3VyY2VSZXNvbHV0aW9uID0gdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0UmVzb2x1dGlvbihcbiAgICAgICAgdGhpcy5zb3VyY2VaX1xuICAgICAgKTtcblxuICAgICAgY29uc3QgdGFyZ2V0RXh0ZW50ID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0VGlsZUNvb3JkRXh0ZW50KFxuICAgICAgICB0aGlzLndyYXBwZWRUaWxlQ29vcmRfXG4gICAgICApO1xuXG4gICAgICB0aGlzLmNhbnZhc18gPSByZW5kZXJSZXByb2plY3RlZChcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodCxcbiAgICAgICAgdGhpcy5waXhlbFJhdGlvXyxcbiAgICAgICAgc291cmNlUmVzb2x1dGlvbixcbiAgICAgICAgdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0RXh0ZW50KCksXG4gICAgICAgIHRhcmdldFJlc29sdXRpb24sXG4gICAgICAgIHRhcmdldEV4dGVudCxcbiAgICAgICAgdGhpcy50cmlhbmd1bGF0aW9uXyxcbiAgICAgICAgc291cmNlcyxcbiAgICAgICAgdGhpcy5ndXR0ZXJfLFxuICAgICAgICB0aGlzLnJlbmRlckVkZ2VzXyxcbiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZVxuICAgICAgKTtcblxuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FERUQ7XG4gICAgfVxuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgKi9cbiAgbG9hZCgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FESU5HO1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG5cbiAgICAgIGxldCBsZWZ0VG9Mb2FkID0gMDtcblxuICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgICAgdGhpcy5zb3VyY2VUaWxlc18uZm9yRWFjaCgodGlsZSkgPT4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgaWYgKHN0YXRlID09IFRpbGVTdGF0ZS5JRExFIHx8IHN0YXRlID09IFRpbGVTdGF0ZS5MT0FESU5HKSB7XG4gICAgICAgICAgbGVmdFRvTG9hZCsrO1xuXG4gICAgICAgICAgY29uc3Qgc291cmNlTGlzdGVuS2V5ID0gbGlzdGVuKFxuICAgICAgICAgICAgdGlsZSxcbiAgICAgICAgICAgIEV2ZW50VHlwZS5DSEFOR0UsXG4gICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHN0YXRlID09IFRpbGVTdGF0ZS5MT0FERUQgfHxcbiAgICAgICAgICAgICAgICBzdGF0ZSA9PSBUaWxlU3RhdGUuRVJST1IgfHxcbiAgICAgICAgICAgICAgICBzdGF0ZSA9PSBUaWxlU3RhdGUuRU1QVFlcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdW5saXN0ZW5CeUtleShzb3VyY2VMaXN0ZW5LZXkpO1xuICAgICAgICAgICAgICAgIGxlZnRUb0xvYWQtLTtcbiAgICAgICAgICAgICAgICBpZiAobGVmdFRvTG9hZCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgdGhpcy51bmxpc3RlblNvdXJjZXNfKCk7XG4gICAgICAgICAgICAgICAgICB0aGlzLnJlcHJvamVjdF8oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfLnB1c2goc291cmNlTGlzdGVuS2V5KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChsZWZ0VG9Mb2FkID09PSAwKSB7XG4gICAgICAgIHNldFRpbWVvdXQodGhpcy5yZXByb2plY3RfLmJpbmQodGhpcyksIDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zb3VyY2VUaWxlc18uZm9yRWFjaChmdW5jdGlvbiAodGlsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgaWYgKHN0YXRlID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICB0aWxlLmxvYWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdW5saXN0ZW5Tb3VyY2VzXygpIHtcbiAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGZyb20gdGhlIGNhY2hlIGR1ZSB0byBleHBpcnlcbiAgICovXG4gIHJlbGVhc2UoKSB7XG4gICAgaWYgKHRoaXMuY2FudmFzXykge1xuICAgICAgcmVsZWFzZUNhbnZhcyh0aGlzLmNhbnZhc18uZ2V0Q29udGV4dCgnMmQnKSk7XG4gICAgICBjYW52YXNQb29sLnB1c2godGhpcy5jYW52YXNfKTtcbiAgICAgIHRoaXMuY2FudmFzXyA9IG51bGw7XG4gICAgfVxuICAgIHN1cGVyLnJlbGVhc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZXByb2pUaWxlO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlcHJvai9jb21tb25cbiAqL1xuXG4vKipcbiAqIERlZmF1bHQgbWF4aW11bSBhbGxvd2VkIHRocmVzaG9sZCAgKGluIHBpeGVscykgZm9yIHJlcHJvamVjdGlvblxuICogdHJpYW5ndWxhdGlvbi5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBFUlJPUl9USFJFU0hPTEQgPSAwLjU7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qL1RyaWFuZ3VsYXRpb25cbiAqL1xuaW1wb3J0IHtcbiAgYm91bmRpbmdFeHRlbnQsXG4gIGNyZWF0ZUVtcHR5LFxuICBleHRlbmRDb29yZGluYXRlLFxuICBnZXRBcmVhLFxuICBnZXRCb3R0b21MZWZ0LFxuICBnZXRCb3R0b21SaWdodCxcbiAgZ2V0VG9wTGVmdCxcbiAgZ2V0VG9wUmlnaHQsXG4gIGdldFdpZHRoLFxuICBpbnRlcnNlY3RzLFxufSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtnZXRUcmFuc2Zvcm19IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHttb2R1bG99IGZyb20gJy4uL21hdGguanMnO1xuXG4vKipcbiAqIFNpbmdsZSB0cmlhbmdsZTsgY29uc2lzdHMgb2YgMyBzb3VyY2UgcG9pbnRzIGFuZCAzIHRhcmdldCBwb2ludHMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUcmlhbmdsZVxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBzb3VyY2UgU291cmNlLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSB0YXJnZXQgVGFyZ2V0LlxuICovXG5cbi8qKlxuICogTWF4aW11bSBudW1iZXIgb2Ygc3ViZGl2aXNpb24gc3RlcHMgZHVyaW5nIHJhc3RlciByZXByb2plY3Rpb24gdHJpYW5ndWxhdGlvbi5cbiAqIFByZXZlbnRzIGhpZ2ggbWVtb3J5IHVzYWdlIGFuZCBsYXJnZSBudW1iZXIgb2YgcHJvajQgY2FsbHMgKGZvciBjZXJ0YWluXG4gKiB0cmFuc2Zvcm1hdGlvbnMgYW5kIGFyZWFzKS4gQXQgbW9zdCBgMiooMl50aGlzKWAgdHJpYW5nbGVzIGFyZSBjcmVhdGVkIGZvclxuICogZWFjaCB0cmlhbmd1bGF0ZWQgZXh0ZW50ICh0aWxlL2ltYWdlKS5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmNvbnN0IE1BWF9TVUJESVZJU0lPTiA9IDEwO1xuXG4vKipcbiAqIE1heGltdW0gYWxsb3dlZCBzaXplIG9mIHRyaWFuZ2xlIHJlbGF0aXZlIHRvIHdvcmxkIHdpZHRoLiBXaGVuIHRyYW5zZm9ybWluZ1xuICogY29ybmVycyBvZiB3b3JsZCBleHRlbnQgYmV0d2VlbiBjZXJ0YWluIHByb2plY3Rpb25zLCB0aGUgcmVzdWx0aW5nXG4gKiB0cmlhbmd1bGF0aW9uIHNlZW1zIHRvIGhhdmUgemVybyBlcnJvciBhbmQgbm8gc3ViZGl2aXNpb24gaXMgcGVyZm9ybWVkLiBJZlxuICogdGhlIHRyaWFuZ2xlIHdpZHRoIGlzIG1vcmUgdGhhbiB0aGlzIChyZWxhdGl2ZSB0byB3b3JsZCB3aWR0aDsgMC0xKSxcbiAqIHN1YmRpdmlzb24gaXMgZm9yY2VkICh1cCB0byBgTUFYX1NVQkRJVklTSU9OYCkuIERlZmF1bHQgaXMgYDAuMjVgLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuY29uc3QgTUFYX1RSSUFOR0xFX1dJRFRIID0gMC4yNTtcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBjb250YWluaW5nIHRyaWFuZ3VsYXRpb24gb2YgdGhlIGdpdmVuIHRhcmdldCBleHRlbnQuXG4gKiBVc2VkIGZvciBkZXRlcm1pbmluZyBzb3VyY2UgZGF0YSBhbmQgdGhlIHJlcHJvamVjdGlvbiBpdHNlbGYuXG4gKi9cbmNsYXNzIFRyaWFuZ3VsYXRpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSB0YXJnZXRFeHRlbnQgVGFyZ2V0IGV4dGVudCB0byB0cmlhbmd1bGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBtYXhTb3VyY2VFeHRlbnQgTWF4aW1hbCBzb3VyY2UgZXh0ZW50IHRoYXQgY2FuIGJlIHVzZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvclRocmVzaG9sZCBBY2NlcHRhYmxlIGVycm9yIChpbiBzb3VyY2UgdW5pdHMpLlxuICAgKiBAcGFyYW0gez9udW1iZXJ9IGRlc3RpbmF0aW9uUmVzb2x1dGlvbiBUaGUgKG9wdGlvbmFsKSByZXNvbHV0aW9uIG9mIHRoZSBkZXN0aW5hdGlvbi5cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHNvdXJjZVByb2osXG4gICAgdGFyZ2V0UHJvaixcbiAgICB0YXJnZXRFeHRlbnQsXG4gICAgbWF4U291cmNlRXh0ZW50LFxuICAgIGVycm9yVGhyZXNob2xkLFxuICAgIGRlc3RpbmF0aW9uUmVzb2x1dGlvblxuICApIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnNvdXJjZVByb2pfID0gc291cmNlUHJvajtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0UHJval8gPSB0YXJnZXRQcm9qO1xuXG4gICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gKi9cbiAgICBsZXQgdHJhbnNmb3JtSW52Q2FjaGUgPSB7fTtcbiAgICBjb25zdCB0cmFuc2Zvcm1JbnYgPSBnZXRUcmFuc2Zvcm0odGhpcy50YXJnZXRQcm9qXywgdGhpcy5zb3VyY2VQcm9qXyk7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBBIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50cmFuc2Zvcm1JbnZfID0gZnVuY3Rpb24gKGMpIHtcbiAgICAgIGNvbnN0IGtleSA9IGNbMF0gKyAnLycgKyBjWzFdO1xuICAgICAgaWYgKCF0cmFuc2Zvcm1JbnZDYWNoZVtrZXldKSB7XG4gICAgICAgIHRyYW5zZm9ybUludkNhY2hlW2tleV0gPSB0cmFuc2Zvcm1JbnYoYyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJhbnNmb3JtSW52Q2FjaGVba2V5XTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1heFNvdXJjZUV4dGVudF8gPSBtYXhTb3VyY2VFeHRlbnQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5lcnJvclRocmVzaG9sZFNxdWFyZWRfID0gZXJyb3JUaHJlc2hvbGQgKiBlcnJvclRocmVzaG9sZDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxUcmlhbmdsZT59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnRyaWFuZ2xlc18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSB0cmlhbmd1bGF0aW9uIGNyb3NzZXMgZWRnZSBvZiB0aGUgc291cmNlIHByb2plY3Rpb24uXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLndyYXBzWEluU291cmNlXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNhbldyYXBYSW5Tb3VyY2VfID1cbiAgICAgIHRoaXMuc291cmNlUHJval8uY2FuV3JhcFgoKSAmJlxuICAgICAgISFtYXhTb3VyY2VFeHRlbnQgJiZcbiAgICAgICEhdGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSAmJlxuICAgICAgZ2V0V2lkdGgobWF4U291cmNlRXh0ZW50KSA9PSBnZXRXaWR0aCh0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyA9IHRoaXMuc291cmNlUHJval8uZ2V0RXh0ZW50KClcbiAgICAgID8gZ2V0V2lkdGgodGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSlcbiAgICAgIDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50YXJnZXRXb3JsZFdpZHRoXyA9IHRoaXMudGFyZ2V0UHJval8uZ2V0RXh0ZW50KClcbiAgICAgID8gZ2V0V2lkdGgodGhpcy50YXJnZXRQcm9qXy5nZXRFeHRlbnQoKSlcbiAgICAgIDogbnVsbDtcblxuICAgIGNvbnN0IGRlc3RpbmF0aW9uVG9wTGVmdCA9IGdldFRvcExlZnQodGFyZ2V0RXh0ZW50KTtcbiAgICBjb25zdCBkZXN0aW5hdGlvblRvcFJpZ2h0ID0gZ2V0VG9wUmlnaHQodGFyZ2V0RXh0ZW50KTtcbiAgICBjb25zdCBkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0ID0gZ2V0Qm90dG9tUmlnaHQodGFyZ2V0RXh0ZW50KTtcbiAgICBjb25zdCBkZXN0aW5hdGlvbkJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KHRhcmdldEV4dGVudCk7XG4gICAgY29uc3Qgc291cmNlVG9wTGVmdCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvblRvcExlZnQpO1xuICAgIGNvbnN0IHNvdXJjZVRvcFJpZ2h0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uVG9wUmlnaHQpO1xuICAgIGNvbnN0IHNvdXJjZUJvdHRvbVJpZ2h0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uQm90dG9tUmlnaHQpO1xuICAgIGNvbnN0IHNvdXJjZUJvdHRvbUxlZnQgPSB0aGlzLnRyYW5zZm9ybUludl8oZGVzdGluYXRpb25Cb3R0b21MZWZ0KTtcblxuICAgIC8qXG4gICAgICogVGhlIG1heFN1YmRpdmlzaW9uIGNvbnRyb2xzIGhvdyBtYW55IHNwbGl0dGluZ3Mgb2YgdGhlIHRhcmdldCBhcmVhIGNhblxuICAgICAqIGJlIGRvbmUuIFRoZSBpZGVhIGhlcmUgaXMgdG8gZG8gYSBsaW5lYXIgbWFwcGluZyBvZiB0aGUgdGFyZ2V0IGFyZWFzXG4gICAgICogYnV0IHRoZSBhY3R1YWwgb3ZlcmFsIHJlcHJvamVjdGlvbiAoY2FuIGJlKSBleHRyZW1lbHkgbm9uLWxpbmVhci4gVGhlXG4gICAgICogZGVmYXVsdCB2YWx1ZSBvZiBNQVhfU1VCRElWSVNJT04gd2FzIGNob3NlbiBiYXNlZCBvbiBtYXBwaW5nIGEgMjU2eDI1NlxuICAgICAqIHRpbGUgc2l6ZS4gSG93ZXZlciB0aGlzIGZ1bmN0aW9uIGlzIGFsc28gY2FsbGVkIHRvIHJlbWFwIGNhbnZhcyByZW5kZXJlZFxuICAgICAqIGxheWVycyB3aGljaCBjYW4gYmUgbXVjaCBsYXJnZXIuIFRoaXMgY2FsY3VsYXRpb24gaW5jcmVhc2VzIHRoZSBtYXhTdWJkaXZpc2lvblxuICAgICAqIHZhbHVlIGJ5IHRoZSByaWdodCBmYWN0b3Igc28gdGhhdCBlYWNoIDI1NngyNTYgcGl4ZWwgYXJlYSBoYXNcbiAgICAgKiBNQVhfU1VCRElWSVNJT04gZGl2aXNpb25zLlxuICAgICAqL1xuICAgIGNvbnN0IG1heFN1YmRpdmlzaW9uID1cbiAgICAgIE1BWF9TVUJESVZJU0lPTiArXG4gICAgICAoZGVzdGluYXRpb25SZXNvbHV0aW9uXG4gICAgICAgID8gTWF0aC5tYXgoXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgTWF0aC5jZWlsKFxuICAgICAgICAgICAgICBNYXRoLmxvZzIoXG4gICAgICAgICAgICAgICAgZ2V0QXJlYSh0YXJnZXRFeHRlbnQpIC9cbiAgICAgICAgICAgICAgICAgIChkZXN0aW5hdGlvblJlc29sdXRpb24gKiBkZXN0aW5hdGlvblJlc29sdXRpb24gKiAyNTYgKiAyNTYpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIDogMCk7XG5cbiAgICB0aGlzLmFkZFF1YWRfKFxuICAgICAgZGVzdGluYXRpb25Ub3BMZWZ0LFxuICAgICAgZGVzdGluYXRpb25Ub3BSaWdodCxcbiAgICAgIGRlc3RpbmF0aW9uQm90dG9tUmlnaHQsXG4gICAgICBkZXN0aW5hdGlvbkJvdHRvbUxlZnQsXG4gICAgICBzb3VyY2VUb3BMZWZ0LFxuICAgICAgc291cmNlVG9wUmlnaHQsXG4gICAgICBzb3VyY2VCb3R0b21SaWdodCxcbiAgICAgIHNvdXJjZUJvdHRvbUxlZnQsXG4gICAgICBtYXhTdWJkaXZpc2lvblxuICAgICk7XG5cbiAgICBpZiAodGhpcy53cmFwc1hJblNvdXJjZV8pIHtcbiAgICAgIGxldCBsZWZ0Qm91bmQgPSBJbmZpbml0eTtcbiAgICAgIHRoaXMudHJpYW5nbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0cmlhbmdsZSwgaSwgYXJyKSB7XG4gICAgICAgIGxlZnRCb3VuZCA9IE1hdGgubWluKFxuICAgICAgICAgIGxlZnRCb3VuZCxcbiAgICAgICAgICB0cmlhbmdsZS5zb3VyY2VbMF1bMF0sXG4gICAgICAgICAgdHJpYW5nbGUuc291cmNlWzFdWzBdLFxuICAgICAgICAgIHRyaWFuZ2xlLnNvdXJjZVsyXVswXVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNoaWZ0IHRyaWFuZ2xlcyB0byBiZSBhcyBjbG9zZSB0byBgbGVmdEJvdW5kYCBhcyBwb3NzaWJsZVxuICAgICAgLy8gKGlmIHRoZSBkaXN0YW5jZSBpcyBtb3JlIHRoYW4gYHdvcmxkV2lkdGggLyAyYCBpdCBjYW4gYmUgY2xvc2VyLlxuICAgICAgdGhpcy50cmlhbmdsZXNfLmZvckVhY2goKHRyaWFuZ2xlKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBNYXRoLm1heChcbiAgICAgICAgICAgIHRyaWFuZ2xlLnNvdXJjZVswXVswXSxcbiAgICAgICAgICAgIHRyaWFuZ2xlLnNvdXJjZVsxXVswXSxcbiAgICAgICAgICAgIHRyaWFuZ2xlLnNvdXJjZVsyXVswXVxuICAgICAgICAgICkgLVxuICAgICAgICAgICAgbGVmdEJvdW5kID5cbiAgICAgICAgICB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMlxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBuZXdUcmlhbmdsZSA9IFtcbiAgICAgICAgICAgIFt0cmlhbmdsZS5zb3VyY2VbMF1bMF0sIHRyaWFuZ2xlLnNvdXJjZVswXVsxXV0sXG4gICAgICAgICAgICBbdHJpYW5nbGUuc291cmNlWzFdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMV1bMV1dLFxuICAgICAgICAgICAgW3RyaWFuZ2xlLnNvdXJjZVsyXVswXSwgdHJpYW5nbGUuc291cmNlWzJdWzFdXSxcbiAgICAgICAgICBdO1xuICAgICAgICAgIGlmIChuZXdUcmlhbmdsZVswXVswXSAtIGxlZnRCb3VuZCA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICBuZXdUcmlhbmdsZVswXVswXSAtPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobmV3VHJpYW5nbGVbMV1bMF0gLSBsZWZ0Qm91bmQgPiB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgICAgbmV3VHJpYW5nbGVbMV1bMF0gLT0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG5ld1RyaWFuZ2xlWzJdWzBdIC0gbGVmdEJvdW5kID4gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzJdWzBdIC09IHRoaXMuc291cmNlV29ybGRXaWR0aF87XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUmFyZWx5IChpZiB0aGUgZXh0ZW50IGNvbnRhaW5zIGJvdGggdGhlIGRhdGVsaW5lIGFuZCBwcmltZSBtZXJpZGlhbilcbiAgICAgICAgICAvLyB0aGUgc2hpZnQgY2FuIGluIHR1cm4gYnJlYWsgc29tZSB0cmlhbmdsZXMuXG4gICAgICAgICAgLy8gRGV0ZWN0IHRoaXMgaGVyZSBhbmQgZG9uJ3Qgc2hpZnQgaW4gc3VjaCBjYXNlcy5cbiAgICAgICAgICBjb25zdCBtaW5YID0gTWF0aC5taW4oXG4gICAgICAgICAgICBuZXdUcmlhbmdsZVswXVswXSxcbiAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzFdWzBdLFxuICAgICAgICAgICAgbmV3VHJpYW5nbGVbMl1bMF1cbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IG1heFggPSBNYXRoLm1heChcbiAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzBdWzBdLFxuICAgICAgICAgICAgbmV3VHJpYW5nbGVbMV1bMF0sXG4gICAgICAgICAgICBuZXdUcmlhbmdsZVsyXVswXVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKG1heFggLSBtaW5YIDwgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgIHRyaWFuZ2xlLnNvdXJjZSA9IG5ld1RyaWFuZ2xlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdHJhbnNmb3JtSW52Q2FjaGUgPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRyaWFuZ2xlIHRvIHRoZSB0cmlhbmd1bGF0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYSBUaGUgdGFyZ2V0IGEgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGIgVGhlIHRhcmdldCBiIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjIFRoZSB0YXJnZXQgYyBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYVNyYyBUaGUgc291cmNlIGEgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGJTcmMgVGhlIHNvdXJjZSBiIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjU3JjIFRoZSBzb3VyY2UgYyBjb29yZGluYXRlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWRkVHJpYW5nbGVfKGEsIGIsIGMsIGFTcmMsIGJTcmMsIGNTcmMpIHtcbiAgICB0aGlzLnRyaWFuZ2xlc18ucHVzaCh7XG4gICAgICBzb3VyY2U6IFthU3JjLCBiU3JjLCBjU3JjXSxcbiAgICAgIHRhcmdldDogW2EsIGIsIGNdLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgcXVhZCAocG9pbnRzIGluIGNsb2NrLXdpc2Ugb3JkZXIpIHRvIHRoZSB0cmlhbmd1bGF0aW9uXG4gICAqIChhbmQgcmVwcm9qZWN0cyB0aGUgdmVydGljZXMpIGlmIHZhbGlkLlxuICAgKiBQZXJmb3JtcyBxdWFkIHN1YmRpdmlzaW9uIGlmIG5lZWRlZCB0byBpbmNyZWFzZSBwcmVjaXNpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhIFRoZSB0YXJnZXQgYSBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYiBUaGUgdGFyZ2V0IGIgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMgVGhlIHRhcmdldCBjIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkIFRoZSB0YXJnZXQgZCBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYVNyYyBUaGUgc291cmNlIGEgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGJTcmMgVGhlIHNvdXJjZSBiIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjU3JjIFRoZSBzb3VyY2UgYyBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZFNyYyBUaGUgc291cmNlIGQgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFN1YmRpdmlzaW9uIE1heGltYWwgYWxsb3dlZCBzdWJkaXZpc2lvbiBvZiB0aGUgcXVhZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFkZFF1YWRfKGEsIGIsIGMsIGQsIGFTcmMsIGJTcmMsIGNTcmMsIGRTcmMsIG1heFN1YmRpdmlzaW9uKSB7XG4gICAgY29uc3Qgc291cmNlUXVhZEV4dGVudCA9IGJvdW5kaW5nRXh0ZW50KFthU3JjLCBiU3JjLCBjU3JjLCBkU3JjXSk7XG4gICAgY29uc3Qgc291cmNlQ292ZXJhZ2VYID0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoX1xuICAgICAgPyBnZXRXaWR0aChzb3VyY2VRdWFkRXh0ZW50KSAvIHRoaXMuc291cmNlV29ybGRXaWR0aF9cbiAgICAgIDogbnVsbDtcbiAgICBjb25zdCBzb3VyY2VXb3JsZFdpZHRoID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLnNvdXJjZVdvcmxkV2lkdGhfKTtcblxuICAgIC8vIHdoZW4gdGhlIHF1YWQgaXMgd3JhcHBlZCBpbiB0aGUgc291cmNlIHByb2plY3Rpb25cbiAgICAvLyBpdCBjb3ZlcnMgbW9zdCBvZiB0aGUgcHJvamVjdGlvbiBleHRlbnQsIGJ1dCBub3QgZnVsbHlcbiAgICBjb25zdCB3cmFwc1ggPVxuICAgICAgdGhpcy5zb3VyY2VQcm9qXy5jYW5XcmFwWCgpICYmXG4gICAgICBzb3VyY2VDb3ZlcmFnZVggPiAwLjUgJiZcbiAgICAgIHNvdXJjZUNvdmVyYWdlWCA8IDE7XG5cbiAgICBsZXQgbmVlZHNTdWJkaXZpc2lvbiA9IGZhbHNlO1xuXG4gICAgaWYgKG1heFN1YmRpdmlzaW9uID4gMCkge1xuICAgICAgaWYgKHRoaXMudGFyZ2V0UHJval8uaXNHbG9iYWwoKSAmJiB0aGlzLnRhcmdldFdvcmxkV2lkdGhfKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldFF1YWRFeHRlbnQgPSBib3VuZGluZ0V4dGVudChbYSwgYiwgYywgZF0pO1xuICAgICAgICBjb25zdCB0YXJnZXRDb3ZlcmFnZVggPVxuICAgICAgICAgIGdldFdpZHRoKHRhcmdldFF1YWRFeHRlbnQpIC8gdGhpcy50YXJnZXRXb3JsZFdpZHRoXztcbiAgICAgICAgbmVlZHNTdWJkaXZpc2lvbiA9XG4gICAgICAgICAgdGFyZ2V0Q292ZXJhZ2VYID4gTUFYX1RSSUFOR0xFX1dJRFRIIHx8IG5lZWRzU3ViZGl2aXNpb247XG4gICAgICB9XG4gICAgICBpZiAoIXdyYXBzWCAmJiB0aGlzLnNvdXJjZVByb2pfLmlzR2xvYmFsKCkgJiYgc291cmNlQ292ZXJhZ2VYKSB7XG4gICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPVxuICAgICAgICAgIHNvdXJjZUNvdmVyYWdlWCA+IE1BWF9UUklBTkdMRV9XSURUSCB8fCBuZWVkc1N1YmRpdmlzaW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghbmVlZHNTdWJkaXZpc2lvbiAmJiB0aGlzLm1heFNvdXJjZUV4dGVudF8pIHtcbiAgICAgIGlmIChcbiAgICAgICAgaXNGaW5pdGUoc291cmNlUXVhZEV4dGVudFswXSkgJiZcbiAgICAgICAgaXNGaW5pdGUoc291cmNlUXVhZEV4dGVudFsxXSkgJiZcbiAgICAgICAgaXNGaW5pdGUoc291cmNlUXVhZEV4dGVudFsyXSkgJiZcbiAgICAgICAgaXNGaW5pdGUoc291cmNlUXVhZEV4dGVudFszXSlcbiAgICAgICkge1xuICAgICAgICBpZiAoIWludGVyc2VjdHMoc291cmNlUXVhZEV4dGVudCwgdGhpcy5tYXhTb3VyY2VFeHRlbnRfKSkge1xuICAgICAgICAgIC8vIHdob2xlIHF1YWQgb3V0c2lkZSBzb3VyY2UgcHJvamVjdGlvbiBleHRlbnQgLT4gaWdub3JlXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGlzTm90RmluaXRlID0gMDtcblxuICAgIGlmICghbmVlZHNTdWJkaXZpc2lvbikge1xuICAgICAgaWYgKFxuICAgICAgICAhaXNGaW5pdGUoYVNyY1swXSkgfHxcbiAgICAgICAgIWlzRmluaXRlKGFTcmNbMV0pIHx8XG4gICAgICAgICFpc0Zpbml0ZShiU3JjWzBdKSB8fFxuICAgICAgICAhaXNGaW5pdGUoYlNyY1sxXSkgfHxcbiAgICAgICAgIWlzRmluaXRlKGNTcmNbMF0pIHx8XG4gICAgICAgICFpc0Zpbml0ZShjU3JjWzFdKSB8fFxuICAgICAgICAhaXNGaW5pdGUoZFNyY1swXSkgfHxcbiAgICAgICAgIWlzRmluaXRlKGRTcmNbMV0pXG4gICAgICApIHtcbiAgICAgICAgaWYgKG1heFN1YmRpdmlzaW9uID4gMCkge1xuICAgICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEl0IG1pZ2h0IGJlIHRoZSBjYXNlIHRoYXQgb25seSAxIG9mIHRoZSBwb2ludHMgaXMgaW5maW5pdGUuIEluIHRoaXMgY2FzZVxuICAgICAgICAgIC8vIHdlIGNhbiBkcmF3IGEgc2luZ2xlIHRyaWFuZ2xlIHdpdGggdGhlIG90aGVyIHRocmVlIHBvaW50c1xuICAgICAgICAgIGlzTm90RmluaXRlID1cbiAgICAgICAgICAgICghaXNGaW5pdGUoYVNyY1swXSkgfHwgIWlzRmluaXRlKGFTcmNbMV0pID8gOCA6IDApICtcbiAgICAgICAgICAgICghaXNGaW5pdGUoYlNyY1swXSkgfHwgIWlzRmluaXRlKGJTcmNbMV0pID8gNCA6IDApICtcbiAgICAgICAgICAgICghaXNGaW5pdGUoY1NyY1swXSkgfHwgIWlzRmluaXRlKGNTcmNbMV0pID8gMiA6IDApICtcbiAgICAgICAgICAgICghaXNGaW5pdGUoZFNyY1swXSkgfHwgIWlzRmluaXRlKGRTcmNbMV0pID8gMSA6IDApO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDEgJiZcbiAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDIgJiZcbiAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDQgJiZcbiAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDhcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgY29uc3QgY2VudGVyID0gWyhhWzBdICsgY1swXSkgLyAyLCAoYVsxXSArIGNbMV0pIC8gMl07XG4gICAgICAgIGNvbnN0IGNlbnRlclNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhjZW50ZXIpO1xuXG4gICAgICAgIGxldCBkeDtcbiAgICAgICAgaWYgKHdyYXBzWCkge1xuICAgICAgICAgIGNvbnN0IGNlbnRlclNyY0VzdGltWCA9XG4gICAgICAgICAgICAobW9kdWxvKGFTcmNbMF0sIHNvdXJjZVdvcmxkV2lkdGgpICtcbiAgICAgICAgICAgICAgbW9kdWxvKGNTcmNbMF0sIHNvdXJjZVdvcmxkV2lkdGgpKSAvXG4gICAgICAgICAgICAyO1xuICAgICAgICAgIGR4ID0gY2VudGVyU3JjRXN0aW1YIC0gbW9kdWxvKGNlbnRlclNyY1swXSwgc291cmNlV29ybGRXaWR0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZHggPSAoYVNyY1swXSArIGNTcmNbMF0pIC8gMiAtIGNlbnRlclNyY1swXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkeSA9IChhU3JjWzFdICsgY1NyY1sxXSkgLyAyIC0gY2VudGVyU3JjWzFdO1xuICAgICAgICBjb25zdCBjZW50ZXJTcmNFcnJvclNxdWFyZWQgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgICAgbmVlZHNTdWJkaXZpc2lvbiA9IGNlbnRlclNyY0Vycm9yU3F1YXJlZCA+IHRoaXMuZXJyb3JUaHJlc2hvbGRTcXVhcmVkXztcbiAgICAgIH1cbiAgICAgIGlmIChuZWVkc1N1YmRpdmlzaW9uKSB7XG4gICAgICAgIGlmIChNYXRoLmFicyhhWzBdIC0gY1swXSkgPD0gTWF0aC5hYnMoYVsxXSAtIGNbMV0pKSB7XG4gICAgICAgICAgLy8gc3BsaXQgaG9yaXpvbnRhbGx5ICh0b3AgJiBib3R0b20pXG4gICAgICAgICAgY29uc3QgYmMgPSBbKGJbMF0gKyBjWzBdKSAvIDIsIChiWzFdICsgY1sxXSkgLyAyXTtcbiAgICAgICAgICBjb25zdCBiY1NyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhiYyk7XG4gICAgICAgICAgY29uc3QgZGEgPSBbKGRbMF0gKyBhWzBdKSAvIDIsIChkWzFdICsgYVsxXSkgLyAyXTtcbiAgICAgICAgICBjb25zdCBkYVNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhkYSk7XG5cbiAgICAgICAgICB0aGlzLmFkZFF1YWRfKFxuICAgICAgICAgICAgYSxcbiAgICAgICAgICAgIGIsXG4gICAgICAgICAgICBiYyxcbiAgICAgICAgICAgIGRhLFxuICAgICAgICAgICAgYVNyYyxcbiAgICAgICAgICAgIGJTcmMsXG4gICAgICAgICAgICBiY1NyYyxcbiAgICAgICAgICAgIGRhU3JjLFxuICAgICAgICAgICAgbWF4U3ViZGl2aXNpb24gLSAxXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLmFkZFF1YWRfKFxuICAgICAgICAgICAgZGEsXG4gICAgICAgICAgICBiYyxcbiAgICAgICAgICAgIGMsXG4gICAgICAgICAgICBkLFxuICAgICAgICAgICAgZGFTcmMsXG4gICAgICAgICAgICBiY1NyYyxcbiAgICAgICAgICAgIGNTcmMsXG4gICAgICAgICAgICBkU3JjLFxuICAgICAgICAgICAgbWF4U3ViZGl2aXNpb24gLSAxXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBzcGxpdCB2ZXJ0aWNhbGx5IChsZWZ0ICYgcmlnaHQpXG4gICAgICAgICAgY29uc3QgYWIgPSBbKGFbMF0gKyBiWzBdKSAvIDIsIChhWzFdICsgYlsxXSkgLyAyXTtcbiAgICAgICAgICBjb25zdCBhYlNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhhYik7XG4gICAgICAgICAgY29uc3QgY2QgPSBbKGNbMF0gKyBkWzBdKSAvIDIsIChjWzFdICsgZFsxXSkgLyAyXTtcbiAgICAgICAgICBjb25zdCBjZFNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhjZCk7XG5cbiAgICAgICAgICB0aGlzLmFkZFF1YWRfKFxuICAgICAgICAgICAgYSxcbiAgICAgICAgICAgIGFiLFxuICAgICAgICAgICAgY2QsXG4gICAgICAgICAgICBkLFxuICAgICAgICAgICAgYVNyYyxcbiAgICAgICAgICAgIGFiU3JjLFxuICAgICAgICAgICAgY2RTcmMsXG4gICAgICAgICAgICBkU3JjLFxuICAgICAgICAgICAgbWF4U3ViZGl2aXNpb24gLSAxXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLmFkZFF1YWRfKFxuICAgICAgICAgICAgYWIsXG4gICAgICAgICAgICBiLFxuICAgICAgICAgICAgYyxcbiAgICAgICAgICAgIGNkLFxuICAgICAgICAgICAgYWJTcmMsXG4gICAgICAgICAgICBiU3JjLFxuICAgICAgICAgICAgY1NyYyxcbiAgICAgICAgICAgIGNkU3JjLFxuICAgICAgICAgICAgbWF4U3ViZGl2aXNpb24gLSAxXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHdyYXBzWCkge1xuICAgICAgaWYgKCF0aGlzLmNhbldyYXBYSW5Tb3VyY2VfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMud3JhcHNYSW5Tb3VyY2VfID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBFeGFjdGx5IHplcm8gb3Igb25lIG9mICpTcmMgaXMgbm90IGZpbml0ZVxuICAgIC8vIFRoZSB0cmlhbmdsZXMgbXVzdCBoYXZlIHRoZSBkaWFnb25hbCBsaW5lIGFzIHRoZSBmaXJzdCBzaWRlXG4gICAgLy8gVGhpcyBpcyB0byBhbGxvdyBlYXN5IGNvZGUgaW4gcmVwcm9qLnMgdG8gbWFrZSBpdCBzdHJhaWdodCBmb3IgYnJva2VuXG4gICAgLy8gYnJvd3NlcnMgdGhhdCBjYW4ndCBoYW5kbGUgZGlhZ29uYWwgY2xpcHBpbmdcbiAgICBpZiAoKGlzTm90RmluaXRlICYgMHhiKSA9PSAwKSB7XG4gICAgICB0aGlzLmFkZFRyaWFuZ2xlXyhhLCBjLCBkLCBhU3JjLCBjU3JjLCBkU3JjKTtcbiAgICB9XG4gICAgaWYgKChpc05vdEZpbml0ZSAmIDB4ZSkgPT0gMCkge1xuICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYSwgYywgYiwgYVNyYywgY1NyYywgYlNyYyk7XG4gICAgfVxuICAgIGlmIChpc05vdEZpbml0ZSkge1xuICAgICAgLy8gVHJ5IHRoZSBvdGhlciB0d28gdHJpYW5nbGVzXG4gICAgICBpZiAoKGlzTm90RmluaXRlICYgMHhkKSA9PSAwKSB7XG4gICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGIsIGQsIGEsIGJTcmMsIGRTcmMsIGFTcmMpO1xuICAgICAgfVxuICAgICAgaWYgKChpc05vdEZpbml0ZSAmIDB4NykgPT0gMCkge1xuICAgICAgICB0aGlzLmFkZFRyaWFuZ2xlXyhiLCBkLCBjLCBiU3JjLCBkU3JjLCBjU3JjKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyBleHRlbnQgb2YgdGhlIGBzb3VyY2VgIGNvb3JkaW5hdGVzIGZyb20gYWxsIHRoZSB0cmlhbmdsZXMuXG4gICAqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IENhbGN1bGF0ZWQgZXh0ZW50LlxuICAgKi9cbiAgY2FsY3VsYXRlU291cmNlRXh0ZW50KCkge1xuICAgIGNvbnN0IGV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG5cbiAgICB0aGlzLnRyaWFuZ2xlc18uZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgY29uc3Qgc3JjID0gdHJpYW5nbGUuc291cmNlO1xuICAgICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIHNyY1swXSk7XG4gICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgc3JjWzFdKTtcbiAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBzcmNbMl0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGV4dGVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxUcmlhbmdsZT59IEFycmF5IG9mIHRoZSBjYWxjdWxhdGVkIHRyaWFuZ2xlcy5cbiAgICovXG4gIGdldFRyaWFuZ2xlcygpIHtcbiAgICByZXR1cm4gdGhpcy50cmlhbmdsZXNfO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRyaWFuZ3VsYXRpb247XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcm90YXRpb25jb25zdHJhaW50XG4gKi9cbmltcG9ydCB7dG9SYWRpYW5zfSBmcm9tICcuL21hdGguanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigobnVtYmVyfHVuZGVmaW5lZCksIGJvb2xlYW49KTogKG51bWJlcnx1bmRlZmluZWQpfSBUeXBlXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlKHJvdGF0aW9uKSB7XG4gIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub25lKHJvdGF0aW9uKSB7XG4gIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHJvdGF0aW9uO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG4gTi5cbiAqIEByZXR1cm4ge1R5cGV9IFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9OKG4pIHtcbiAgY29uc3QgdGhldGEgPSAoMiAqIE1hdGguUEkpIC8gbjtcbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocm90YXRpb24sIGlzTW92aW5nKSB7XG4gICAgICBpZiAoaXNNb3ZpbmcpIHtcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgfVxuXG4gICAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByb3RhdGlvbiA9IE1hdGguZmxvb3Iocm90YXRpb24gLyB0aGV0YSArIDAuNSkgKiB0aGV0YTtcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IFt0b2xlcmFuY2VdIFRvbGVyYW5jZS5cbiAqIEByZXR1cm4ge1R5cGV9IFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9aZXJvKHRvbGVyYW5jZSkge1xuICB0b2xlcmFuY2UgPSB0b2xlcmFuY2UgfHwgdG9SYWRpYW5zKDUpO1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNNb3ZpbmddIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyb3RhdGlvbiwgaXNNb3ZpbmcpIHtcbiAgICAgIGlmIChpc01vdmluZykge1xuICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgICB9XG5cbiAgICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChNYXRoLmFicyhyb3RhdGlvbikgPD0gdG9sZXJhbmNlKSB7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICk7XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvc2l6ZVxuICovXG5cbi8qKlxuICogQW4gYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgYSBzaXplOiBgW3dpZHRoLCBoZWlnaHRdYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBTaXplXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBSZXR1cm5zIGEgYnVmZmVyZWQgc2l6ZS5cbiAqIEBwYXJhbSB7U2l6ZX0gc2l6ZSBTaXplLlxuICogQHBhcmFtIHtudW1iZXJ9IG51bSBUaGUgYW1vdW50IGJ5IHdoaWNoIHRvIGJ1ZmZlci5cbiAqIEBwYXJhbSB7U2l6ZX0gW2Rlc3RdIE9wdGlvbmFsIHJldXNhYmxlIHNpemUgYXJyYXkuXG4gKiBAcmV0dXJuIHtTaXplfSBUaGUgYnVmZmVyZWQgc2l6ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlcihzaXplLCBudW0sIGRlc3QpIHtcbiAgaWYgKGRlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgIGRlc3QgPSBbMCwgMF07XG4gIH1cbiAgZGVzdFswXSA9IHNpemVbMF0gKyAyICogbnVtO1xuICBkZXN0WzFdID0gc2l6ZVsxXSArIDIgKiBudW07XG4gIHJldHVybiBkZXN0O1xufVxuXG4vKipcbiAqIERldGVybWluZXMgaWYgYSBzaXplIGhhcyBhIHBvc2l0aXZlIGFyZWEuXG4gKiBAcGFyYW0ge1NpemV9IHNpemUgVGhlIHNpemUgdG8gdGVzdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBzaXplIGhhcyBhIHBvc2l0aXZlIGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNBcmVhKHNpemUpIHtcbiAgcmV0dXJuIHNpemVbMF0gPiAwICYmIHNpemVbMV0gPiAwO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzaXplIHNjYWxlZCBieSBhIHJhdGlvLiBUaGUgcmVzdWx0IHdpbGwgYmUgYW4gYXJyYXkgb2YgaW50ZWdlcnMuXG4gKiBAcGFyYW0ge1NpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYXRpbyBSYXRpby5cbiAqIEBwYXJhbSB7U2l6ZX0gW2Rlc3RdIE9wdGlvbmFsIHJldXNhYmxlIHNpemUgYXJyYXkuXG4gKiBAcmV0dXJuIHtTaXplfSBUaGUgc2NhbGVkIHNpemUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShzaXplLCByYXRpbywgZGVzdCkge1xuICBpZiAoZGVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZGVzdCA9IFswLCAwXTtcbiAgfVxuICBkZXN0WzBdID0gKHNpemVbMF0gKiByYXRpbyArIDAuNSkgfCAwO1xuICBkZXN0WzFdID0gKHNpemVbMV0gKiByYXRpbyArIDAuNSkgfCAwO1xuICByZXR1cm4gZGVzdDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGBTaXplYCBhcnJheSBmb3IgdGhlIHBhc3NlZCBpbiBudW1iZXIgKG1lYW5pbmc6IHNxdWFyZSkgb3JcbiAqIGBTaXplYCBhcnJheS5cbiAqIChtZWFuaW5nOiBub24tc3F1YXJlKSxcbiAqIEBwYXJhbSB7bnVtYmVyfFNpemV9IHNpemUgV2lkdGggYW5kIGhlaWdodC5cbiAqIEBwYXJhbSB7U2l6ZX0gW2Rlc3RdIE9wdGlvbmFsIHJldXNhYmxlIHNpemUgYXJyYXkuXG4gKiBAcmV0dXJuIHtTaXplfSBTaXplLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TaXplKHNpemUsIGRlc3QpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoc2l6ZSkpIHtcbiAgICByZXR1cm4gc2l6ZTtcbiAgfVxuICBpZiAoZGVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZGVzdCA9IFtzaXplLCBzaXplXTtcbiAgfSBlbHNlIHtcbiAgICBkZXN0WzBdID0gc2l6ZTtcbiAgICBkZXN0WzFdID0gc2l6ZTtcbiAgfVxuICByZXR1cm4gZGVzdDtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvWFlaXG4gKi9cblxuaW1wb3J0IFRpbGVJbWFnZSBmcm9tICcuL1RpbGVJbWFnZS5qcyc7XG5pbXBvcnQge2NyZWF0ZVhZWiwgZXh0ZW50RnJvbVByb2plY3Rpb259IGZyb20gJy4uL3RpbGVncmlkLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXSBJbml0aWFsIHRpbGUgY2FjaGUgc2l6ZS4gV2lsbCBhdXRvLWdyb3cgdG8gaG9sZCBhdCBsZWFzdCB0aGUgbnVtYmVyIG9mIHRpbGVzIGluIHRoZSB2aWV3cG9ydC5cbiAqIEBwcm9wZXJ0eSB7bnVsbHxzdHJpbmd9IFtjcm9zc09yaWdpbl0gVGhlIGBjcm9zc09yaWdpbmAgYXR0cmlidXRlIGZvciBsb2FkZWQgaW1hZ2VzLiAgTm90ZSB0aGF0XG4gKiB5b3UgbXVzdCBwcm92aWRlIGEgYGNyb3NzT3JpZ2luYCB2YWx1ZSBpZiB5b3Ugd2FudCB0byBhY2Nlc3MgcGl4ZWwgZGF0YSB3aXRoIHRoZSBDYW52YXMgcmVuZGVyZXIuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9DT1JTX2VuYWJsZWRfaW1hZ2UgZm9yIG1vcmUgZGV0YWlsLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW50ZXJwb2xhdGU9dHJ1ZV0gVXNlIGludGVycG9sYXRlZCB2YWx1ZXMgd2hlbiByZXNhbXBsaW5nLiAgQnkgZGVmYXVsdCxcbiAqIGxpbmVhciBpbnRlcnBvbGF0aW9uIGlzIHVzZWQgd2hlbiByZXNhbXBsaW5nLiAgU2V0IHRvIGZhbHNlIHRvIHVzZSB0aGUgbmVhcmVzdCBuZWlnaGJvciBpbnN0ZWFkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXSBQcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZD0wLjVdIE1heGltdW0gYWxsb3dlZCByZXByb2plY3Rpb24gZXJyb3IgKGluIHBpeGVscykuXG4gKiBIaWdoZXIgdmFsdWVzIGNhbiBpbmNyZWFzZSByZXByb2plY3Rpb24gcGVyZm9ybWFuY2UsIGJ1dCBkZWNyZWFzZSBwcmVjaXNpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209NDJdIE9wdGlvbmFsIG1heCB6b29tIGxldmVsLiBOb3QgdXNlZCBpZiBgdGlsZUdyaWRgIGlzIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE9wdGlvbmFsIG1pbiB6b29tIGxldmVsLiBOb3QgdXNlZCBpZiBgdGlsZUdyaWRgIGlzIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBPcHRpb25hbCB0aWxlIGdyaWQgcmVzb2x1dGlvbiBhdCBsZXZlbCB6ZXJvLiBOb3QgdXNlZCBpZiBgdGlsZUdyaWRgIGlzIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGUgZ3JpZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IFt0aWxlTG9hZEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBsb2FkIGEgdGlsZSBnaXZlbiBhIFVSTC4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbihpbWFnZVRpbGUsIHNyYykge1xuICogICBpbWFnZVRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9O1xuICogYGBgXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvPTFdIFRoZSBwaXhlbCByYXRpbyB1c2VkIGJ5IHRoZSB0aWxlIHNlcnZpY2UuXG4gKiBGb3IgZXhhbXBsZSwgaWYgdGhlIHRpbGUgc2VydmljZSBhZHZlcnRpemVzIDI1NnB4IGJ5IDI1NnB4IHRpbGVzIGJ1dCBhY3R1YWxseSBzZW5kcyA1MTJweFxuICogYnkgNTEycHggaW1hZ2VzIChmb3IgcmV0aW5hL2hpZHBpIGRldmljZXMpIHRoZW4gYHRpbGVQaXhlbFJhdGlvYFxuICogc2hvdWxkIGJlIHNldCB0byBgMmAuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFt0aWxlU2l6ZT1bMjU2LCAyNTZdXSBUaGUgdGlsZSBzaXplIHVzZWQgYnkgdGhlIHRpbGUgc2VydmljZS5cbiAqIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2d1dHRlcj0wXSBUaGUgc2l6ZSBpbiBwaXhlbHMgb2YgdGhlIGd1dHRlciBhcm91bmQgaW1hZ2UgdGlsZXMgdG8gaWdub3JlLlxuICogVGhpcyBhbGxvd3MgYXJ0aWZhY3RzIG9mIHJlbmRlcmluZyBhdCB0aWxlIGVkZ2VzIHRvIGJlIGlnbm9yZWQuXG4gKiBTdXBwb3J0ZWQgaW1hZ2VzIHNob3VsZCBiZSB3aWRlciBhbmQgdGFsbGVyIHRoYW4gdGhlIHRpbGUgc2l6ZSBieSBhIHZhbHVlIG9mIGAyIHggZ3V0dGVyYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gZ2V0XG4gKiB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBSZXF1aXJlZCBpZiBgdXJsYCBvciBgdXJsc2AgYXJlIG5vdCBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVUkwgdGVtcGxhdGUuIE11c3QgaW5jbHVkZSBge3h9YCwgYHt5fWAgb3IgYHsteX1gLFxuICogYW5kIGB7en1gIHBsYWNlaG9sZGVycy4gQSBgez8tP31gIHRlbXBsYXRlIHBhdHRlcm4sIGZvciBleGFtcGxlIGBzdWJkb21haW57YS1mfS5kb21haW4uY29tYCxcbiAqIG1heSBiZSB1c2VkIGluc3RlYWQgb2YgZGVmaW5pbmcgZWFjaCBvbmUgc2VwYXJhdGVseSBpbiB0aGUgYHVybHNgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIEFuIGFycmF5IG9mIFVSTCB0ZW1wbGF0ZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXaGV0aGVyIHRvIHdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbj0yNTBdIER1cmF0aW9uIG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24gZm9yIHJlbmRlcmluZy5cbiAqIFRvIGRpc2FibGUgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiwgcGFzcyBgdHJhbnNpdGlvbjogMGAuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdXG4gKiBDaG9vc2Ugd2hldGhlciB0byB1c2UgdGlsZXMgd2l0aCBhIGhpZ2hlciBvciBsb3dlciB6b29tIGxldmVsIHdoZW4gYmV0d2VlbiBpbnRlZ2VyXG4gKiB6b29tIGxldmVscy4gU2VlIHtAbGluayBtb2R1bGU6b2wvdGlsZWdyaWQvVGlsZUdyaWR+VGlsZUdyaWQjZ2V0WkZvclJlc29sdXRpb259LlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogTGF5ZXIgc291cmNlIGZvciB0aWxlIGRhdGEgd2l0aCBVUkxzIGluIGEgc2V0IFhZWiBmb3JtYXQgdGhhdCBhcmVcbiAqIGRlZmluZWQgaW4gYSBVUkwgdGVtcGxhdGUuIEJ5IGRlZmF1bHQsIHRoaXMgZm9sbG93cyB0aGUgd2lkZWx5LXVzZWRcbiAqIEdvb2dsZSBncmlkIHdoZXJlIGB4YCAwIGFuZCBgeWAgMCBhcmUgaW4gdGhlIHRvcCBsZWZ0LiBHcmlkcyBsaWtlXG4gKiBUTVMgd2hlcmUgYHhgIDAgYW5kIGB5YCAwIGFyZSBpbiB0aGUgYm90dG9tIGxlZnQgY2FuIGJlIHVzZWQgYnlcbiAqIHVzaW5nIHRoZSBgey15fWAgcGxhY2Vob2xkZXIgaW4gdGhlIFVSTCB0ZW1wbGF0ZSwgc28gbG9uZyBhcyB0aGVcbiAqIHNvdXJjZSBkb2VzIG5vdCBoYXZlIGEgY3VzdG9tIHRpbGUgZ3JpZC4gSW4gdGhpcyBjYXNlXG4gKiBhIGB0aWxlVXJsRnVuY3Rpb25gIGNhbiBiZSB1c2VkLCBzdWNoIGFzOlxuICogYGBganNcbiAqICB0aWxlVXJsRnVuY3Rpb246IGZ1bmN0aW9uKGNvb3JkaW5hdGUpIHtcbiAqICAgIHJldHVybiAnaHR0cDovL21hcHNlcnZlci5jb20vJyArIGNvb3JkaW5hdGVbMF0gKyAnLycgK1xuICogICAgICBjb29yZGluYXRlWzFdICsgJy8nICsgKC1jb29yZGluYXRlWzJdIC0gMSkgKyAnLnBuZyc7XG4gKiAgfVxuICogYGBgXG4gKiBAYXBpXG4gKi9cbmNsYXNzIFhZWiBleHRlbmRzIFRpbGVJbWFnZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSBYWVogb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIGNvbnN0IHByb2plY3Rpb24gPVxuICAgICAgb3B0aW9ucy5wcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnByb2plY3Rpb24gOiAnRVBTRzozODU3JztcblxuICAgIGNvbnN0IHRpbGVHcmlkID1cbiAgICAgIG9wdGlvbnMudGlsZUdyaWQgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMudGlsZUdyaWRcbiAgICAgICAgOiBjcmVhdGVYWVooe1xuICAgICAgICAgICAgZXh0ZW50OiBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKSxcbiAgICAgICAgICAgIG1heFJlc29sdXRpb246IG9wdGlvbnMubWF4UmVzb2x1dGlvbixcbiAgICAgICAgICAgIG1heFpvb206IG9wdGlvbnMubWF4Wm9vbSxcbiAgICAgICAgICAgIG1pblpvb206IG9wdGlvbnMubWluWm9vbSxcbiAgICAgICAgICAgIHRpbGVTaXplOiBvcHRpb25zLnRpbGVTaXplLFxuICAgICAgICAgIH0pO1xuXG4gICAgc3VwZXIoe1xuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXG4gICAgICBjcm9zc09yaWdpbjogb3B0aW9ucy5jcm9zc09yaWdpbixcbiAgICAgIGludGVycG9sYXRlOiBvcHRpb25zLmludGVycG9sYXRlLFxuICAgICAgb3BhcXVlOiBvcHRpb25zLm9wYXF1ZSxcbiAgICAgIHByb2plY3Rpb246IHByb2plY3Rpb24sXG4gICAgICByZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDogb3B0aW9ucy5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZCxcbiAgICAgIHRpbGVHcmlkOiB0aWxlR3JpZCxcbiAgICAgIHRpbGVMb2FkRnVuY3Rpb246IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvbixcbiAgICAgIHRpbGVQaXhlbFJhdGlvOiBvcHRpb25zLnRpbGVQaXhlbFJhdGlvLFxuICAgICAgdGlsZVVybEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbixcbiAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICB1cmxzOiBvcHRpb25zLnVybHMsXG4gICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53cmFwWCA6IHRydWUsXG4gICAgICB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sXG4gICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmd1dHRlcl8gPSBvcHRpb25zLmd1dHRlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5ndXR0ZXIgOiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgKi9cbiAgZ2V0R3V0dGVyKCkge1xuICAgIHJldHVybiB0aGlzLmd1dHRlcl87XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgWFlaO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlRGVidWdcbiAqL1xuXG5pbXBvcnQgWFlaIGZyb20gJy4vWFlaLmpzJztcbmltcG9ydCB7Y3JlYXRlQ2FudmFzQ29udGV4dDJEfSBmcm9tICcuLi9kb20uanMnO1xuaW1wb3J0IHt0b1NpemV9IGZyb20gJy4uL3NpemUuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb249J0VQU0c6Mzg1NyddIE9wdGlvbmFsIHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZSBncmlkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9dHJ1ZV0gV2hldGhlciB0byB3cmFwIHRoZSB3b3JsZCBob3Jpem9udGFsbHkuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdXG4gKiBTZXQgdG8gYDFgIHdoZW4gZGVidWdnaW5nIGBWZWN0b3JUaWxlYCBzb3VyY2VzIHdpdGggYSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24uXG4gKiBDaG9vc2Ugd2hldGhlciB0byB1c2UgdGlsZXMgd2l0aCBhIGhpZ2hlciBvciBsb3dlciB6b29tIGxldmVsIHdoZW4gYmV0d2VlbiBpbnRlZ2VyXG4gKiB6b29tIGxldmVscy4gU2VlIHtAbGluayBtb2R1bGU6b2wvdGlsZWdyaWQvVGlsZUdyaWR+VGlsZUdyaWQjZ2V0WkZvclJlc29sdXRpb259LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0ZW1wbGF0ZT0nejp7en0geDp7eH0geTp7eX0nXSBUZW1wbGF0ZSBmb3IgbGFiZWxpbmcgdGhlIHRpbGVzLlxuICogU2hvdWxkIGluY2x1ZGUgYHt4fWAsIGB7eX1gIG9yIGB7LXl9YCwgYW5kIGB7en1gIHBsYWNlaG9sZGVycy5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgcHNldWRvIHRpbGUgc291cmNlLCB3aGljaCBkb2VzIG5vdCBmZXRjaCB0aWxlcyBmcm9tIGEgc2VydmVyLCBidXQgcmVuZGVyc1xuICogYSBncmlkIG91dGxpbmUgZm9yIHRoZSB0aWxlIGdyaWQvcHJvamVjdGlvbiBhbG9uZyB3aXRoIHRoZSBjb29yZGluYXRlcyBmb3JcbiAqIGVhY2ggdGlsZS4gU2VlIGV4YW1wbGVzL2NhbnZhcy10aWxlcyBmb3IgYW4gZXhhbXBsZS5cbiAqIEBhcGlcbiAqL1xuY2xhc3MgVGlsZURlYnVnIGV4dGVuZHMgWFlaIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIERlYnVnIHRpbGUgb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T3B0aW9uc31cbiAgICAgKi9cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIHN1cGVyKHtcbiAgICAgIG9wYXF1ZTogZmFsc2UsXG4gICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICB0aWxlR3JpZDogb3B0aW9ucy50aWxlR3JpZCxcbiAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLndyYXBYIDogdHJ1ZSxcbiAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICAgIHVybDogb3B0aW9ucy50ZW1wbGF0ZSB8fCAnejp7en0geDp7eH0geTp7eX0nLFxuICAgICAgdGlsZUxvYWRGdW5jdGlvbjogKHRpbGUsIHRleHQpID0+IHtcbiAgICAgICAgY29uc3QgeiA9IHRpbGUuZ2V0VGlsZUNvb3JkKClbMF07XG4gICAgICAgIGNvbnN0IHRpbGVTaXplID0gdG9TaXplKHRoaXMudGlsZUdyaWQuZ2V0VGlsZVNpemUoeikpO1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKHRpbGVTaXplWzBdLCB0aWxlU2l6ZVsxXSk7XG5cbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9ICdncmV5JztcbiAgICAgICAgY29udGV4dC5zdHJva2VSZWN0KDAuNSwgMC41LCB0aWxlU2l6ZVswXSArIDAuNSwgdGlsZVNpemVbMV0gKyAwLjUpO1xuXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJ2dyZXknO1xuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcbiAgICAgICAgY29udGV4dC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICAgICAgY29udGV4dC5mb250ID0gJzI0cHggc2Fucy1zZXJpZic7XG4gICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gNDtcbiAgICAgICAgY29udGV4dC5zdHJva2VUZXh0KHRleHQsIHRpbGVTaXplWzBdIC8gMiwgdGlsZVNpemVbMV0gLyAyLCB0aWxlU2l6ZVswXSk7XG4gICAgICAgIGNvbnRleHQuZmlsbFRleHQodGV4dCwgdGlsZVNpemVbMF0gLyAyLCB0aWxlU2l6ZVsxXSAvIDIsIHRpbGVTaXplWzBdKTtcblxuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZSkuc2V0SW1hZ2UoXG4gICAgICAgICAgY29udGV4dC5jYW52YXNcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGlsZURlYnVnO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0cnVjdHMvTFJVQ2FjaGVcbiAqL1xuXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRW50cnlcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBrZXlfIEtleS5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBuZXdlciBOZXdlci5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBvbGRlciBPbGRlci5cbiAqIEBwcm9wZXJ0eSB7Kn0gdmFsdWVfIFZhbHVlLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogSW1wbGVtZW50cyBhIExlYXN0LVJlY2VudGx5LVVzZWQgY2FjaGUgd2hlcmUgdGhlIGtleXMgZG8gbm90IGNvbmZsaWN0IHdpdGhcbiAqIE9iamVjdCdzIHByb3BlcnRpZXMgKGUuZy4gJ2hhc093blByb3BlcnR5JyBpcyBub3QgYWxsb3dlZCBhcyBhIGtleSkuIEV4cGlyaW5nXG4gKiBpdGVtcyBmcm9tIHRoZSBjYWNoZSBpcyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgdGhlIHVzZXIuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0XG4gKiBAdGVtcGxhdGUgVFxuICovXG5jbGFzcyBMUlVDYWNoZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2hpZ2hXYXRlck1hcmtdIEhpZ2ggd2F0ZXIgbWFyay5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGhpZ2hXYXRlck1hcmspIHtcbiAgICAvKipcbiAgICAgKiBEZXNpcmVkIG1heCBjYWNoZSBzaXplIGFmdGVyIGV4cGlyZUNhY2hlKCkuIElmIHNldCB0byAwLCBubyBjYWNoZSBlbnRyaWVzXG4gICAgICogd2lsbCBiZSBwcnVuZWQgYXQgYWxsLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gaGlnaFdhdGVyTWFyayAhPT0gdW5kZWZpbmVkID8gaGlnaFdhdGVyTWFyayA6IDIwNDg7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5jb3VudF8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIEVudHJ5Pn1cbiAgICAgKi9cbiAgICB0aGlzLmVudHJpZXNfID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/RW50cnl9XG4gICAgICovXG4gICAgdGhpcy5vbGRlc3RfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9FbnRyeX1cbiAgICAgKi9cbiAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbiBleHBpcmUgY2FjaGUuXG4gICAqL1xuICBjYW5FeHBpcmVDYWNoZSgpIHtcbiAgICByZXR1cm4gdGhpcy5oaWdoV2F0ZXJNYXJrID4gMCAmJiB0aGlzLmdldENvdW50KCkgPiB0aGlzLmhpZ2hXYXRlck1hcms7XG4gIH1cblxuICAvKipcbiAgICogRXhwaXJlIHRoZSBjYWNoZS5cbiAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59IFtrZWVwXSBLZXlzIHRvIGtlZXAuIFRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNsYXNzZXMuXG4gICAqL1xuICBleHBpcmVDYWNoZShrZWVwKSB7XG4gICAgd2hpbGUgKHRoaXMuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgdGhpcy5wb3AoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLmNvdW50XyA9IDA7XG4gICAgdGhpcy5lbnRyaWVzXyA9IHt9O1xuICAgIHRoaXMub2xkZXN0XyA9IG51bGw7XG4gICAgdGhpcy5uZXdlc3RfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMga2V5LlxuICAgKi9cbiAgY29udGFpbnNLZXkoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc18uaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQsIHN0cmluZywgTFJVQ2FjaGU8VD4pOiA/fSBmIFRoZSBmdW5jdGlvblxuICAgKiAgICAgdG8gY2FsbCBmb3IgZXZlcnkgZW50cnkgZnJvbSB0aGUgb2xkZXN0IHRvIHRoZSBuZXdlci4gVGhpcyBmdW5jdGlvbiB0YWtlc1xuICAgKiAgICAgMyBhcmd1bWVudHMgKHRoZSBlbnRyeSB2YWx1ZSwgdGhlIGVudHJ5IGtleSBhbmQgdGhlIExSVUNhY2hlIG9iamVjdCkuXG4gICAqICAgICBUaGUgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWQuXG4gICAqL1xuICBmb3JFYWNoKGYpIHtcbiAgICBsZXQgZW50cnkgPSB0aGlzLm9sZGVzdF87XG4gICAgd2hpbGUgKGVudHJ5KSB7XG4gICAgICBmKGVudHJ5LnZhbHVlXywgZW50cnkua2V5XywgdGhpcyk7XG4gICAgICBlbnRyeSA9IGVudHJ5Lm5ld2VyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3B0aW9ucyAocmVzZXJ2ZWQgZm9yIHN1YmNsYXNzZXMpLlxuICAgKiBAcmV0dXJuIHtUfSBWYWx1ZS5cbiAgICovXG4gIGdldChrZXksIG9wdGlvbnMpIHtcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuZW50cmllc19ba2V5XTtcbiAgICBhc3NlcnQoZW50cnkgIT09IHVuZGVmaW5lZCwgMTUpOyAvLyBUcmllZCB0byBnZXQgYSB2YWx1ZSBmb3IgYSBrZXkgdGhhdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgY2FjaGVcbiAgICBpZiAoZW50cnkgPT09IHRoaXMubmV3ZXN0Xykge1xuICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgICB9IGVsc2UgaWYgKGVudHJ5ID09PSB0aGlzLm9sZGVzdF8pIHtcbiAgICAgIHRoaXMub2xkZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovICh0aGlzLm9sZGVzdF8ubmV3ZXIpO1xuICAgICAgdGhpcy5vbGRlc3RfLm9sZGVyID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjtcbiAgICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7XG4gICAgfVxuICAgIGVudHJ5Lm5ld2VyID0gbnVsbDtcbiAgICBlbnRyeS5vbGRlciA9IHRoaXMubmV3ZXN0XztcbiAgICB0aGlzLm5ld2VzdF8ubmV3ZXIgPSBlbnRyeTtcbiAgICB0aGlzLm5ld2VzdF8gPSBlbnRyeTtcbiAgICByZXR1cm4gZW50cnkudmFsdWVfO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBlbnRyeSBmcm9tIHRoZSBjYWNoZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgZW50cnkga2V5LlxuICAgKiBAcmV0dXJuIHtUfSBUaGUgcmVtb3ZlZCBlbnRyeS5cbiAgICovXG4gIHJlbW92ZShrZXkpIHtcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuZW50cmllc19ba2V5XTtcbiAgICBhc3NlcnQoZW50cnkgIT09IHVuZGVmaW5lZCwgMTUpOyAvLyBUcmllZCB0byBnZXQgYSB2YWx1ZSBmb3IgYSBrZXkgdGhhdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgY2FjaGVcbiAgICBpZiAoZW50cnkgPT09IHRoaXMubmV3ZXN0Xykge1xuICAgICAgdGhpcy5uZXdlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKGVudHJ5Lm9sZGVyKTtcbiAgICAgIGlmICh0aGlzLm5ld2VzdF8pIHtcbiAgICAgICAgdGhpcy5uZXdlc3RfLm5ld2VyID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGVudHJ5ID09PSB0aGlzLm9sZGVzdF8pIHtcbiAgICAgIHRoaXMub2xkZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovIChlbnRyeS5uZXdlcik7XG4gICAgICBpZiAodGhpcy5vbGRlc3RfKSB7XG4gICAgICAgIHRoaXMub2xkZXN0Xy5vbGRlciA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7XG4gICAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyO1xuICAgIH1cbiAgICBkZWxldGUgdGhpcy5lbnRyaWVzX1trZXldO1xuICAgIC0tdGhpcy5jb3VudF87XG4gICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IENvdW50LlxuICAgKi9cbiAgZ2V0Q291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY291bnRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IEtleXMuXG4gICAqL1xuICBnZXRLZXlzKCkge1xuICAgIGNvbnN0IGtleXMgPSBuZXcgQXJyYXkodGhpcy5jb3VudF8pO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgZW50cnk7XG4gICAgZm9yIChlbnRyeSA9IHRoaXMubmV3ZXN0XzsgZW50cnk7IGVudHJ5ID0gZW50cnkub2xkZXIpIHtcbiAgICAgIGtleXNbaSsrXSA9IGVudHJ5LmtleV87XG4gICAgfVxuICAgIHJldHVybiBrZXlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PFQ+fSBWYWx1ZXMuXG4gICAqL1xuICBnZXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgdmFsdWVzID0gbmV3IEFycmF5KHRoaXMuY291bnRfKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGVudHJ5O1xuICAgIGZvciAoZW50cnkgPSB0aGlzLm5ld2VzdF87IGVudHJ5OyBlbnRyeSA9IGVudHJ5Lm9sZGVyKSB7XG4gICAgICB2YWx1ZXNbaSsrXSA9IGVudHJ5LnZhbHVlXztcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtUfSBMYXN0IHZhbHVlLlxuICAgKi9cbiAgcGVla0xhc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMub2xkZXN0Xy52YWx1ZV87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfSBMYXN0IGtleS5cbiAgICovXG4gIHBlZWtMYXN0S2V5KCkge1xuICAgIHJldHVybiB0aGlzLm9sZGVzdF8ua2V5XztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGtleSBvZiB0aGUgbmV3ZXN0IGl0ZW0gaW4gdGhlIGNhY2hlLiAgVGhyb3dzIGlmIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgbmV3ZXN0IGtleS5cbiAgICovXG4gIHBlZWtGaXJzdEtleSgpIHtcbiAgICByZXR1cm4gdGhpcy5uZXdlc3RfLmtleV87XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGVudHJ5IHdpdGhvdXQgdXBkYXRpbmcgbGVhc3QgcmVjZW50bHkgdXNlZCB0aW1lLlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICogQHJldHVybiB7VH0gVmFsdWUuXG4gICAqL1xuICBwZWVrKGtleSkge1xuICAgIGlmICghdGhpcy5jb250YWluc0tleShrZXkpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzX1trZXldLnZhbHVlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtUfSB2YWx1ZSBWYWx1ZS5cbiAgICovXG4gIHBvcCgpIHtcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMub2xkZXN0XztcbiAgICBkZWxldGUgdGhpcy5lbnRyaWVzX1tlbnRyeS5rZXlfXTtcbiAgICBpZiAoZW50cnkubmV3ZXIpIHtcbiAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5vbGRlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKGVudHJ5Lm5ld2VyKTtcbiAgICBpZiAoIXRoaXMub2xkZXN0Xykge1xuICAgICAgdGhpcy5uZXdlc3RfID0gbnVsbDtcbiAgICB9XG4gICAgLS10aGlzLmNvdW50XztcbiAgICByZXR1cm4gZW50cnkudmFsdWVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgKiBAcGFyYW0ge1R9IHZhbHVlIFZhbHVlLlxuICAgKi9cbiAgcmVwbGFjZShrZXksIHZhbHVlKSB7XG4gICAgdGhpcy5nZXQoa2V5KTsgLy8gdXBkYXRlIGBuZXdlc3RfYFxuICAgIHRoaXMuZW50cmllc19ba2V5XS52YWx1ZV8gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICogQHBhcmFtIHtUfSB2YWx1ZSBWYWx1ZS5cbiAgICovXG4gIHNldChrZXksIHZhbHVlKSB7XG4gICAgYXNzZXJ0KCEoa2V5IGluIHRoaXMuZW50cmllc18pLCAxNik7IC8vIFRyaWVkIHRvIHNldCBhIHZhbHVlIGZvciBhIGtleSB0aGF0IGlzIHVzZWQgYWxyZWFkeVxuICAgIGNvbnN0IGVudHJ5ID0ge1xuICAgICAga2V5Xzoga2V5LFxuICAgICAgbmV3ZXI6IG51bGwsXG4gICAgICBvbGRlcjogdGhpcy5uZXdlc3RfLFxuICAgICAgdmFsdWVfOiB2YWx1ZSxcbiAgICB9O1xuICAgIGlmICghdGhpcy5uZXdlc3RfKSB7XG4gICAgICB0aGlzLm9sZGVzdF8gPSBlbnRyeTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5uZXdlc3RfLm5ld2VyID0gZW50cnk7XG4gICAgfVxuICAgIHRoaXMubmV3ZXN0XyA9IGVudHJ5O1xuICAgIHRoaXMuZW50cmllc19ba2V5XSA9IGVudHJ5O1xuICAgICsrdGhpcy5jb3VudF87XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgbWF4aW11bSBudW1iZXIgb2YgZW50cmllcyBmb3IgdGhlIGNhY2hlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBDYWNoZSBzaXplLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRTaXplKHNpemUpIHtcbiAgICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBzaXplO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExSVUNhY2hlO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVDYWNoZVxuICovXG5pbXBvcnQgTFJVQ2FjaGUgZnJvbSAnLi9zdHJ1Y3RzL0xSVUNhY2hlLmpzJztcbmltcG9ydCB7ZnJvbUtleSwgZ2V0S2V5fSBmcm9tICcuL3RpbGVjb29yZC5qcyc7XG5cbmNsYXNzIFRpbGVDYWNoZSBleHRlbmRzIExSVUNhY2hlIHtcbiAgY2xlYXIoKSB7XG4gICAgd2hpbGUgKHRoaXMuZ2V0Q291bnQoKSA+IDApIHtcbiAgICAgIHRoaXMucG9wKCkucmVsZWFzZSgpO1xuICAgIH1cbiAgICBzdXBlci5jbGVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICovXG4gIGV4cGlyZUNhY2hlKHVzZWRUaWxlcykge1xuICAgIHdoaWxlICh0aGlzLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgIGNvbnN0IHRpbGUgPSB0aGlzLnBlZWtMYXN0KCk7XG4gICAgICBpZiAodGlsZS5nZXRLZXkoKSBpbiB1c2VkVGlsZXMpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBvcCgpLnJlbGVhc2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJ1bmUgYWxsIHRpbGVzIGZyb20gdGhlIGNhY2hlIHRoYXQgZG9uJ3QgaGF2ZSB0aGUgc2FtZSB6IGFzIHRoZSBuZXdlc3QgdGlsZS5cbiAgICovXG4gIHBydW5lRXhjZXB0TmV3ZXN0WigpIHtcbiAgICBpZiAodGhpcy5nZXRDb3VudCgpID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IHRoaXMucGVla0ZpcnN0S2V5KCk7XG4gICAgY29uc3QgdGlsZUNvb3JkID0gZnJvbUtleShrZXkpO1xuICAgIGNvbnN0IHogPSB0aWxlQ29vcmRbMF07XG4gICAgdGhpcy5mb3JFYWNoKCh0aWxlKSA9PiB7XG4gICAgICBpZiAodGlsZS50aWxlQ29vcmRbMF0gIT09IHopIHtcbiAgICAgICAgdGhpcy5yZW1vdmUoZ2V0S2V5KHRpbGUudGlsZUNvb3JkKSk7XG4gICAgICAgIHRpbGUucmVsZWFzZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpbGVDYWNoZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvU291cmNlXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQge2dldCBhcyBnZXRQcm9qZWN0aW9ufSBmcm9tICcuLi9wcm9qLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7J3VuZGVmaW5lZCcgfCAnbG9hZGluZycgfCAncmVhZHknIHwgJ2Vycm9yJ30gU3RhdGVcbiAqIFN0YXRlIG9mIHRoZSBzb3VyY2UsIG9uZSBvZiAndW5kZWZpbmVkJywgJ2xvYWRpbmcnLCAncmVhZHknIG9yICdlcnJvcicuXG4gKi9cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgaW1wb3J0KFwiLi4vVmlldy5qc1wiKS5WaWV3U3RhdGVBbmRFeHRlbnR9IGFuZCByZXR1cm5zIGEgc3RyaW5nIG9yXG4gKiBhbiBhcnJheSBvZiBzdHJpbmdzIHJlcHJlc2VudGluZyBzb3VyY2UgYXR0cmlidXRpb25zLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLlZpZXdTdGF0ZUFuZEV4dGVudCk6IChzdHJpbmd8QXJyYXk8c3RyaW5nPil9IEF0dHJpYnV0aW9uXG4gKi9cblxuLyoqXG4gKiBBIHR5cGUgdGhhdCBjYW4gYmUgdXNlZCB0byBwcm92aWRlIGF0dHJpYnV0aW9uIGluZm9ybWF0aW9uIGZvciBkYXRhIHNvdXJjZXMuXG4gKlxuICogSXQgcmVwcmVzZW50cyBlaXRoZXJcbiAqICogYSBzaW1wbGUgc3RyaW5nIChlLmcuIGAnwqkgQWNtZSBJbmMuJ2ApXG4gKiAqIGFuIGFycmF5IG9mIHNpbXBsZSBzdHJpbmdzIChlLmcuIGBbJ8KpIEFjbWUgSW5jLicsICfCqSBCYWNtZSBJbmMuJ11gKVxuICogKiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN0cmluZyBvciBhcnJheSBvZiBzdHJpbmdzICh7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9Tb3VyY2V+QXR0cmlidXRpb259KVxuICpcbiAqIEB0eXBlZGVmIHtzdHJpbmd8QXJyYXk8c3RyaW5nPnxBdHRyaWJ1dGlvbn0gQXR0cmlidXRpb25MaWtlXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge0F0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uIERlZmF1bHQgaXMgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuU3RhdGV9IFtzdGF0ZT0ncmVhZHknXSBTdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPWZhbHNlXSBXcmFwWC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ludGVycG9sYXRlPWZhbHNlXSBVc2UgaW50ZXJwb2xhdGVkIHZhbHVlcyB3aGVuIHJlc2FtcGxpbmcuICBCeSBkZWZhdWx0LFxuICogdGhlIG5lYXJlc3QgbmVpZ2hib3IgaXMgdXNlZCB3aGVuIHJlc2FtcGxpbmcuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBCYXNlIGNsYXNzIGZvciB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfkxheWVyfSBzb3VyY2VzLlxuICpcbiAqIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyB0cmlnZ2VyZWQgd2hlbiB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZSBjaGFuZ2VzLlxuICogQGFic3RyYWN0XG4gKiBAYXBpXG4gKi9cbmNsYXNzIFNvdXJjZSBleHRlbmRzIEJhc2VPYmplY3Qge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFNvdXJjZSBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fG51bGx9XG4gICAgICovXG4gICAgdGhpcy5wcm9qZWN0aW9uID0gZ2V0UHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P0F0dHJpYnV0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuYXR0cmlidXRpb25zXyA9IGFkYXB0QXR0cmlidXRpb25zKG9wdGlvbnMuYXR0cmlidXRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZV8gPVxuICAgICAgb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZVxuICAgICAgICA6IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIHNvdXJjZSBpcyBjdXJyZW50bHkgbG9hZGluZyBkYXRhLiBTb3VyY2VzIHRoYXQgZGVmZXIgbG9hZGluZyB0byB0aGVcbiAgICAgKiBtYXAncyB0aWxlIHF1ZXVlIG5ldmVyIHNldCB0aGlzIHRvIGB0cnVlYC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLlN0YXRlfVxuICAgICAqL1xuICAgIHRoaXMuc3RhdGVfID0gb3B0aW9ucy5zdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zdGF0ZSA6ICdyZWFkeSc7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMud3JhcFhfID0gb3B0aW9ucy53cmFwWCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53cmFwWCA6IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmludGVycG9sYXRlXyA9ICEhb3B0aW9ucy5pbnRlcnBvbGF0ZTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vVmlldy5qc1wiKS5WaWV3T3B0aW9ucyk6dm9pZH1cbiAgICAgKi9cbiAgICB0aGlzLnZpZXdSZXNvbHZlciA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKEVycm9yKTp2b2lkfVxuICAgICAqL1xuICAgIHRoaXMudmlld1JlamVjdG9yID0gbnVsbDtcblxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1Byb21pc2U8aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5WaWV3T3B0aW9ucz59XG4gICAgICovXG4gICAgdGhpcy52aWV3UHJvbWlzZV8gPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBzZWxmLnZpZXdSZXNvbHZlciA9IHJlc29sdmU7XG4gICAgICBzZWxmLnZpZXdSZWplY3RvciA9IHJlamVjdDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGF0dHJpYnV0aW9uIGZ1bmN0aW9uIGZvciB0aGUgc291cmNlLlxuICAgKiBAcmV0dXJuIHs/QXR0cmlidXRpb259IEF0dHJpYnV0aW9uIGZ1bmN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRBdHRyaWJ1dGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXR0cmlidXRpb25zXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRBdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZV87XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBwcm9qZWN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fG51bGx9IFByb2plY3Rpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFByb2plY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvamVjdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvblwiKS5kZWZhdWx0fSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnxudWxsfSBSZXNvbHV0aW9ucy5cbiAgICovXG4gIGdldFJlc29sdXRpb25zKHByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPGltcG9ydChcIi4uL1ZpZXcuanNcIikuVmlld09wdGlvbnM+fSBBIHByb21pc2UgZm9yIHZpZXctcmVsYXRlZCBwcm9wZXJ0aWVzLlxuICAgKi9cbiAgZ2V0VmlldygpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3UHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlLCBzZWUge0BsaW5rIGltcG9ydChcIi4vU291cmNlLmpzXCIpLlN0YXRlfSBmb3IgcG9zc2libGUgc3RhdGVzLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5TdGF0ZX0gU3RhdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH0gV3JhcCBYLlxuICAgKi9cbiAgZ2V0V3JhcFgoKSB7XG4gICAgcmV0dXJuIHRoaXMud3JhcFhfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFVzZSBsaW5lYXIgaW50ZXJwb2xhdGlvbiB3aGVuIHJlc2FtcGxpbmcuXG4gICAqL1xuICBnZXRJbnRlcnBvbGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnBvbGF0ZV87XG4gIH1cblxuICAvKipcbiAgICogUmVmcmVzaGVzIHRoZSBzb3VyY2UuIFRoZSBzb3VyY2Ugd2lsbCBiZSBjbGVhcmVkLCBhbmQgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBiZSByZWxvYWRlZC5cbiAgICogQGFwaVxuICAgKi9cbiAgcmVmcmVzaCgpIHtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGF0dHJpYnV0aW9ucyBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0ge0F0dHJpYnV0aW9uTGlrZXx1bmRlZmluZWR9IGF0dHJpYnV0aW9ucyBBdHRyaWJ1dGlvbnMuXG4gICAqICAgICBDYW4gYmUgcGFzc2VkIGFzIGBzdHJpbmdgLCBgQXJyYXk8c3RyaW5nPmAsIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1NvdXJjZX5BdHRyaWJ1dGlvbn0sXG4gICAqICAgICBvciBgdW5kZWZpbmVkYC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0QXR0cmlidXRpb25zKGF0dHJpYnV0aW9ucykge1xuICAgIHRoaXMuYXR0cmlidXRpb25zXyA9IGFkYXB0QXR0cmlidXRpb25zKGF0dHJpYnV0aW9ucyk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLlN0YXRlfSBzdGF0ZSBTdGF0ZS5cbiAgICovXG4gIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgdGhpcy5zdGF0ZV8gPSBzdGF0ZTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxufVxuXG4vKipcbiAqIFR1cm5zIHRoZSBhdHRyaWJ1dGlvbnMgb3B0aW9uIGludG8gYW4gYXR0cmlidXRpb25zIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtBdHRyaWJ1dGlvbkxpa2V8dW5kZWZpbmVkfSBhdHRyaWJ1dGlvbkxpa2UgVGhlIGF0dHJpYnV0aW9uIG9wdGlvbi5cbiAqIEByZXR1cm4ge0F0dHJpYnV0aW9ufG51bGx9IEFuIGF0dHJpYnV0aW9uIGZ1bmN0aW9uIChvciBudWxsKS5cbiAqL1xuZnVuY3Rpb24gYWRhcHRBdHRyaWJ1dGlvbnMoYXR0cmlidXRpb25MaWtlKSB7XG4gIGlmICghYXR0cmlidXRpb25MaWtlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoYXR0cmlidXRpb25MaWtlKSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgcmV0dXJuIGF0dHJpYnV0aW9uTGlrZTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGlvbkxpa2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gYXR0cmlidXRpb25MaWtlO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgcmV0dXJuIFthdHRyaWJ1dGlvbkxpa2VdO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBTb3VyY2U7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1RpbGVcbiAqL1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgU291cmNlIGZyb20gJy4vU291cmNlLmpzJztcbmltcG9ydCBUaWxlQ2FjaGUgZnJvbSAnLi4vVGlsZUNhY2hlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtlcXVpdmFsZW50fSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7Z2V0S2V5WlhZLCB3aXRoaW5FeHRlbnRBbmRafSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHtcbiAgZ2V0Rm9yUHJvamVjdGlvbiBhcyBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24sXG4gIHdyYXBYLFxufSBmcm9tICcuLi90aWxlZ3JpZC5qcyc7XG5pbXBvcnQge3NjYWxlIGFzIHNjYWxlU2l6ZSwgdG9TaXplfSBmcm9tICcuLi9zaXplLmpzJztcblxuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vVGlsZUV2ZW50VHlwZVwiKS5UaWxlU291cmNlRXZlbnRUeXBlcywgVGlsZVNvdXJjZUV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgaW1wb3J0KFwiLi9UaWxlRXZlbnRUeXBlXCIpLlRpbGVTb3VyY2VFdmVudFR5cGVzLCBSZXR1cm4+fSBUaWxlU291cmNlT25TaWduYXR1cmVcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdIENhY2hlU2l6ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29wYXF1ZT1mYWxzZV0gV2hldGhlciB0aGUgbGF5ZXIgaXMgb3BhcXVlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpb10gVGlsZVBpeGVsUmF0aW8uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5TdGF0ZX0gW3N0YXRlXSBTdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXSBUaWxlR3JpZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPWZhbHNlXSBXcmFwWC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl0gVHJhbnNpdGlvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5XSBLZXkuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdIFpEaXJlY3Rpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbnRlcnBvbGF0ZT1mYWxzZV0gVXNlIGludGVycG9sYXRlZCB2YWx1ZXMgd2hlbiByZXNhbXBsaW5nLiAgQnkgZGVmYXVsdCxcbiAqIHRoZSBuZWFyZXN0IG5laWdoYm9yIGlzIHVzZWQgd2hlbiByZXNhbXBsaW5nLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgaW1hZ2VzIGRpdmlkZWQgaW50byBhIHRpbGUgZ3JpZC5cbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG5jbGFzcyBUaWxlU291cmNlIGV4dGVuZHMgU291cmNlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBTb3VyY2VUaWxlIHNvdXJjZSBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKHtcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICBpbnRlcnBvbGF0ZTogb3B0aW9ucy5pbnRlcnBvbGF0ZSxcbiAgICB9KTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7VGlsZVNvdXJjZU9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub247XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge1RpbGVTb3VyY2VPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uY2U7XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge1RpbGVTb3VyY2VPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgKi9cbiAgICB0aGlzLnVuO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLm9wYXF1ZV8gPSBvcHRpb25zLm9wYXF1ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcGFxdWUgOiBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVQaXhlbFJhdGlvXyA9XG4gICAgICBvcHRpb25zLnRpbGVQaXhlbFJhdGlvICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVQaXhlbFJhdGlvIDogMTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fG51bGx9XG4gICAgICovXG4gICAgdGhpcy50aWxlR3JpZCA9IG9wdGlvbnMudGlsZUdyaWQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGlsZUdyaWQgOiBudWxsO1xuXG4gICAgY29uc3QgdGlsZVNpemUgPSBbMjU2LCAyNTZdO1xuICAgIGlmICh0aGlzLnRpbGVHcmlkKSB7XG4gICAgICB0b1NpemUodGhpcy50aWxlR3JpZC5nZXRUaWxlU2l6ZSh0aGlzLnRpbGVHcmlkLmdldE1pblpvb20oKSksIHRpbGVTaXplKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMudGlsZUNhY2hlID0gbmV3IFRpbGVDYWNoZShvcHRpb25zLmNhY2hlU2l6ZSB8fCAwKTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAqL1xuICAgIHRoaXMudG1wU2l6ZSA9IFswLCAwXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLmtleV8gPSBvcHRpb25zLmtleSB8fCAnJztcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5PcHRpb25zfVxuICAgICAqL1xuICAgIHRoaXMudGlsZU9wdGlvbnMgPSB7XG4gICAgICB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sXG4gICAgICBpbnRlcnBvbGF0ZTogb3B0aW9ucy5pbnRlcnBvbGF0ZSxcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogekRpcmVjdGlvbiBoaW50LCByZWFkIGJ5IHRoZSByZW5kZXJlci4gSW5kaWNhdGVzIHdoaWNoIHJlc29sdXRpb24gc2hvdWxkIGJlIHVzZWRcbiAgICAgKiBieSBhIHJlbmRlcmVyIGlmIHRoZSB2aWV3cyByZXNvbHV0aW9uIGRvZXMgbm90IG1hdGNoIGFueSByZXNvbHV0aW9uIG9mIHRoZSB0aWxlIHNvdXJjZS5cbiAgICAgKiBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC4gSWYgMSwgdGhlIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvblxuICAgICAqIHdpbGwgYmUgdXNlZC4gSWYgLTEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfGltcG9ydChcIi4uL2FycmF5LmpzXCIpLk5lYXJlc3REaXJlY3Rpb25GdW5jdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLnpEaXJlY3Rpb24gPSBvcHRpb25zLnpEaXJlY3Rpb24gPyBvcHRpb25zLnpEaXJlY3Rpb24gOiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbiBleHBpcmUgY2FjaGUuXG4gICAqL1xuICBjYW5FeHBpcmVDYWNoZSgpIHtcbiAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGUuY2FuRXhwaXJlQ2FjaGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICovXG4gIGV4cGlyZUNhY2hlKHByb2plY3Rpb24sIHVzZWRUaWxlcykge1xuICAgIGNvbnN0IHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICBpZiAodGlsZUNhY2hlKSB7XG4gICAgICB0aWxlQ2FjaGUuZXhwaXJlQ2FjaGUodXNlZFRpbGVzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0geiBab29tIGxldmVsLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQpOihib29sZWFufHZvaWQpfSBjYWxsYmFjayBDYWxsZWQgd2l0aCBlYWNoXG4gICAqICAgICBsb2FkZWQgdGlsZS4gIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGBmYWxzZWAsIHRoZSB0aWxlIHdpbGwgbm90IGJlXG4gICAqICAgICBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHRpbGUgcmFuZ2UgaXMgZnVsbHkgY292ZXJlZCB3aXRoIGxvYWRlZCB0aWxlcy5cbiAgICovXG4gIGZvckVhY2hMb2FkZWRUaWxlKHByb2plY3Rpb24sIHosIHRpbGVSYW5nZSwgY2FsbGJhY2spIHtcbiAgICBjb25zdCB0aWxlQ2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgaWYgKCF0aWxlQ2FjaGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgY292ZXJlZCA9IHRydWU7XG4gICAgbGV0IHRpbGUsIHRpbGVDb29yZEtleSwgbG9hZGVkO1xuICAgIGZvciAobGV0IHggPSB0aWxlUmFuZ2UubWluWDsgeCA8PSB0aWxlUmFuZ2UubWF4WDsgKyt4KSB7XG4gICAgICBmb3IgKGxldCB5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICB0aWxlQ29vcmRLZXkgPSBnZXRLZXlaWFkoeiwgeCwgeSk7XG4gICAgICAgIGxvYWRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGlsZUNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgICAgICB0aWxlID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoXG4gICAgICAgICAgICB0aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSlcbiAgICAgICAgICApO1xuICAgICAgICAgIGxvYWRlZCA9IHRpbGUuZ2V0U3RhdGUoKSA9PT0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICAgICAgICBpZiAobG9hZGVkKSB7XG4gICAgICAgICAgICBsb2FkZWQgPSBjYWxsYmFjayh0aWxlKSAhPT0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbG9hZGVkKSB7XG4gICAgICAgICAgY292ZXJlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb3ZlcmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7bnVtYmVyfSBHdXR0ZXIuXG4gICAqL1xuICBnZXRHdXR0ZXJGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGtleSB0byBiZSB1c2VkIGZvciBhbGwgdGlsZXMgaW4gdGhlIHNvdXJjZS5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUga2V5IGZvciBhbGwgdGlsZXMuXG4gICAqL1xuICBnZXRLZXkoKSB7XG4gICAgcmV0dXJuIHRoaXMua2V5XztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIHRvIGJlIHVzZWQgYXMgdGhlIGtleSBmb3IgYWxsIHRpbGVzIGluIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBmb3IgdGlsZXMuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHNldEtleShrZXkpIHtcbiAgICBpZiAodGhpcy5rZXlfICE9PSBrZXkpIHtcbiAgICAgIHRoaXMua2V5XyA9IGtleTtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IE9wYXF1ZS5cbiAgICovXG4gIGdldE9wYXF1ZShwcm9qZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMub3BhcXVlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvblwiKS5kZWZhdWx0fSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnxudWxsfSBSZXNvbHV0aW9ucy5cbiAgICovXG4gIGdldFJlc29sdXRpb25zKHByb2plY3Rpb24pIHtcbiAgICBjb25zdCB0aWxlR3JpZCA9IHByb2plY3Rpb25cbiAgICAgID8gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbilcbiAgICAgIDogdGhpcy50aWxlR3JpZDtcbiAgICBpZiAoIXRpbGVHcmlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRpbGVHcmlkLmdldFJlc29sdXRpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAqL1xuICBnZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHRpbGUgZ3JpZCBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR8bnVsbH0gVGlsZSBncmlkLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRUaWxlR3JpZCgpIHtcbiAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBUaWxlIGdyaWQuXG4gICAqL1xuICBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIGlmICghdGhpcy50aWxlR3JpZCkge1xuICAgICAgcmV0dXJuIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudGlsZUdyaWQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlQ2FjaGUuanNcIikuZGVmYXVsdH0gVGlsZSBjYWNoZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgY29uc3Qgc291cmNlUHJvamVjdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgIGFzc2VydChcbiAgICAgIHNvdXJjZVByb2plY3Rpb24gPT09IG51bGwgfHwgZXF1aXZhbGVudChzb3VyY2VQcm9qZWN0aW9uLCBwcm9qZWN0aW9uKSxcbiAgICAgIDY4IC8vIEEgVmVjdG9yVGlsZSBzb3VyY2UgY2FuIG9ubHkgYmUgcmVuZGVyZWQgaWYgaXQgaGFzIGEgcHJvamVjdGlvbiBjb21wYXRpYmxlIHdpdGggdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAgICApO1xuICAgIHJldHVybiB0aGlzLnRpbGVDYWNoZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRpbGUgcGl4ZWwgcmF0aW8gZm9yIHRoaXMgc291cmNlLiBTdWJjbGFzc2VzIG1heSBvdmVycmlkZSB0aGlzXG4gICAqIG1ldGhvZCwgd2hpY2ggaXMgbWVhbnQgdG8gcmV0dXJuIGEgc3VwcG9ydGVkIHBpeGVsIHJhdGlvIHRoYXQgbWF0Y2hlcyB0aGVcbiAgICogcHJvdmlkZWQgYHBpeGVsUmF0aW9gIGFzIGNsb3NlIGFzIHBvc3NpYmxlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHBpeGVsIHJhdGlvLlxuICAgKi9cbiAgZ2V0VGlsZVBpeGVsUmF0aW8ocGl4ZWxSYXRpbykge1xuICAgIHJldHVybiB0aGlzLnRpbGVQaXhlbFJhdGlvXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFRpbGUgc2l6ZS5cbiAgICovXG4gIGdldFRpbGVQaXhlbFNpemUoeiwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgIGNvbnN0IHRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgY29uc3QgdGlsZVBpeGVsUmF0aW8gPSB0aGlzLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pO1xuICAgIGNvbnN0IHRpbGVTaXplID0gdG9TaXplKHRpbGVHcmlkLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemUpO1xuICAgIGlmICh0aWxlUGl4ZWxSYXRpbyA9PSAxKSB7XG4gICAgICByZXR1cm4gdGlsZVNpemU7XG4gICAgfVxuICAgIHJldHVybiBzY2FsZVNpemUodGlsZVNpemUsIHRpbGVQaXhlbFJhdGlvLCB0aGlzLnRtcFNpemUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB0aWxlIGNvb3JkaW5hdGUgd3JhcHBlZCBhcm91bmQgdGhlIHgtYXhpcy4gV2hlbiB0aGUgdGlsZSBjb29yZGluYXRlXG4gICAqIGlzIG91dHNpZGUgdGhlIHJlc29sdXRpb24gYW5kIGV4dGVudCByYW5nZSBvZiB0aGUgdGlsZSBncmlkLCBgbnVsbGAgd2lsbCBiZVxuICAgKiByZXR1cm5lZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlIHRvIGJlIHBhc3NlZCB0byB0aGUgdGlsZVVybEZ1bmN0aW9uIG9yXG4gICAqICAgICBudWxsIGlmIG5vIHRpbGUgVVJMIHNob3VsZCBiZSBjcmVhdGVkIGZvciB0aGUgcGFzc2VkIGB0aWxlQ29vcmRgLlxuICAgKi9cbiAgZ2V0VGlsZUNvb3JkRm9yVGlsZVVybEZ1bmN0aW9uKHRpbGVDb29yZCwgcHJvamVjdGlvbikge1xuICAgIHByb2plY3Rpb24gPSBwcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBwcm9qZWN0aW9uIDogdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgY29uc3QgdGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICBpZiAodGhpcy5nZXRXcmFwWCgpICYmIHByb2plY3Rpb24uaXNHbG9iYWwoKSkge1xuICAgICAgdGlsZUNvb3JkID0gd3JhcFgodGlsZUdyaWQsIHRpbGVDb29yZCwgcHJvamVjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB3aXRoaW5FeHRlbnRBbmRaKHRpbGVDb29yZCwgdGlsZUdyaWQpID8gdGlsZUNvb3JkIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGNhY2hlZCB0aWxlcyBmcm9tIHRoZSBzb3VyY2UuIFRoZSBuZXh0IHJlbmRlciBjeWNsZSB3aWxsIGZldGNoIG5ldyB0aWxlcy5cbiAgICogQGFwaVxuICAgKi9cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy50aWxlQ2FjaGUuY2xlYXIoKTtcbiAgfVxuXG4gIHJlZnJlc2goKSB7XG4gICAgdGhpcy5jbGVhcigpO1xuICAgIHN1cGVyLnJlZnJlc2goKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmNyZWFzZXMgdGhlIGNhY2hlIHNpemUgaWYgbmVlZGVkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aWxlQ291bnQgTWluaW11bSBudW1iZXIgb2YgdGlsZXMgbmVlZGVkLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqL1xuICB1cGRhdGVDYWNoZVNpemUodGlsZUNvdW50LCBwcm9qZWN0aW9uKSB7XG4gICAgY29uc3QgdGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIGlmICh0aWxlQ291bnQgPiB0aWxlQ2FjaGUuaGlnaFdhdGVyTWFyaykge1xuICAgICAgdGlsZUNhY2hlLmhpZ2hXYXRlck1hcmsgPSB0aWxlQ291bnQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1hcmtzIGEgdGlsZSBjb29yZCBhcyBiZWluZyB1c2VkLCB3aXRob3V0IHRyaWdnZXJpbmcgYSBsb2FkLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKi9cbiAgdXNlVGlsZSh6LCB4LCB5LCBwcm9qZWN0aW9uKSB7fVxufVxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvc291cmNlL1RpbGV+VGlsZVNvdXJjZX0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpc1xuICogdHlwZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFRpbGVTb3VyY2VFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRoZSB0aWxlLlxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSwgdGlsZSkge1xuICAgIHN1cGVyKHR5cGUpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRpbGUgcmVsYXRlZCB0byB0aGUgZXZlbnQuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy50aWxlID0gdGlsZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaWxlU291cmNlO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGV1cmxmdW5jdGlvblxuICovXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7bW9kdWxvfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHtoYXNoIGFzIHRpbGVDb29yZEhhc2h9IGZyb20gJy4vdGlsZWNvb3JkLmpzJztcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgVGVtcGxhdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlIFVSTCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgdGlsZUdyaWQpIHtcbiAgY29uc3QgelJlZ0V4ID0gL1xce3pcXH0vZztcbiAgY29uc3QgeFJlZ0V4ID0gL1xce3hcXH0vZztcbiAgY29uc3QgeVJlZ0V4ID0gL1xce3lcXH0vZztcbiAgY29uc3QgZGFzaFlSZWdFeCA9IC9cXHsteVxcfS9nO1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uICh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgIGlmICghdGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGVtcGxhdGVcbiAgICAgICAgLnJlcGxhY2UoelJlZ0V4LCB0aWxlQ29vcmRbMF0udG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoeFJlZ0V4LCB0aWxlQ29vcmRbMV0udG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoeVJlZ0V4LCB0aWxlQ29vcmRbMl0udG9TdHJpbmcoKSlcbiAgICAgICAgLnJlcGxhY2UoZGFzaFlSZWdFeCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnN0IHogPSB0aWxlQ29vcmRbMF07XG4gICAgICAgICAgY29uc3QgcmFuZ2UgPSB0aWxlR3JpZC5nZXRGdWxsVGlsZVJhbmdlKHopO1xuICAgICAgICAgIGFzc2VydChyYW5nZSwgNTUpOyAvLyBUaGUgey15fSBwbGFjZWhvbGRlciByZXF1aXJlcyBhIHRpbGUgZ3JpZCB3aXRoIGV4dGVudFxuICAgICAgICAgIGNvbnN0IHkgPSByYW5nZS5nZXRIZWlnaHQoKSAtIHRpbGVDb29yZFsyXSAtIDE7XG4gICAgICAgICAgcmV0dXJuIHkudG9TdHJpbmcoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICApO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gdGVtcGxhdGVzIFRlbXBsYXRlcy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGUgVVJMIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJvbVRlbXBsYXRlcyh0ZW1wbGF0ZXMsIHRpbGVHcmlkKSB7XG4gIGNvbnN0IGxlbiA9IHRlbXBsYXRlcy5sZW5ndGg7XG4gIGNvbnN0IHRpbGVVcmxGdW5jdGlvbnMgPSBuZXcgQXJyYXkobGVuKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIHRpbGVVcmxGdW5jdGlvbnNbaV0gPSBjcmVhdGVGcm9tVGVtcGxhdGUodGVtcGxhdGVzW2ldLCB0aWxlR3JpZCk7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUZyb21UaWxlVXJsRnVuY3Rpb25zKHRpbGVVcmxGdW5jdGlvbnMpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9uPn0gdGlsZVVybEZ1bmN0aW9ucyBUaWxlIFVSTCBGdW5jdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGUgVVJMIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJvbVRpbGVVcmxGdW5jdGlvbnModGlsZVVybEZ1bmN0aW9ucykge1xuICBpZiAodGlsZVVybEZ1bmN0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gdGlsZVVybEZ1bmN0aW9uc1swXTtcbiAgfVxuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uICh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgIGlmICghdGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBjb25zdCBoID0gdGlsZUNvb3JkSGFzaCh0aWxlQ29vcmQpO1xuICAgICAgY29uc3QgaW5kZXggPSBtb2R1bG8oaCwgdGlsZVVybEZ1bmN0aW9ucy5sZW5ndGgpO1xuICAgICAgcmV0dXJuIHRpbGVVcmxGdW5jdGlvbnNbaW5kZXhdKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgfVxuICApO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbnVsbFRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFVSTC5cbiAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IEFycmF5IG9mIHVybHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHBhbmRVcmwodXJsKSB7XG4gIGNvbnN0IHVybHMgPSBbXTtcbiAgbGV0IG1hdGNoID0gL1xceyhbYS16XSktKFthLXpdKVxcfS8uZXhlYyh1cmwpO1xuICBpZiAobWF0Y2gpIHtcbiAgICAvLyBjaGFyIHJhbmdlXG4gICAgY29uc3Qgc3RhcnRDaGFyQ29kZSA9IG1hdGNoWzFdLmNoYXJDb2RlQXQoMCk7XG4gICAgY29uc3Qgc3RvcENoYXJDb2RlID0gbWF0Y2hbMl0uY2hhckNvZGVBdCgwKTtcbiAgICBsZXQgY2hhckNvZGU7XG4gICAgZm9yIChjaGFyQ29kZSA9IHN0YXJ0Q2hhckNvZGU7IGNoYXJDb2RlIDw9IHN0b3BDaGFyQ29kZTsgKytjaGFyQ29kZSkge1xuICAgICAgdXJscy5wdXNoKHVybC5yZXBsYWNlKG1hdGNoWzBdLCBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKSkpO1xuICAgIH1cbiAgICByZXR1cm4gdXJscztcbiAgfVxuICBtYXRjaCA9IC9cXHsoXFxkKyktKFxcZCspXFx9Ly5leGVjKHVybCk7XG4gIGlmIChtYXRjaCkge1xuICAgIC8vIG51bWJlciByYW5nZVxuICAgIGNvbnN0IHN0b3AgPSBwYXJzZUludChtYXRjaFsyXSwgMTApO1xuICAgIGZvciAobGV0IGkgPSBwYXJzZUludChtYXRjaFsxXSwgMTApOyBpIDw9IHN0b3A7IGkrKykge1xuICAgICAgdXJscy5wdXNoKHVybC5yZXBsYWNlKG1hdGNoWzBdLCBpLnRvU3RyaW5nKCkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHVybHM7XG4gIH1cbiAgdXJscy5wdXNoKHVybCk7XG4gIHJldHVybiB1cmxzO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9VcmxUaWxlXG4gKi9cbmltcG9ydCBUaWxlRXZlbnRUeXBlIGZyb20gJy4vVGlsZUV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZVNvdXJjZSwge1RpbGVTb3VyY2VFdmVudH0gZnJvbSAnLi9UaWxlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7Y3JlYXRlRnJvbVRlbXBsYXRlcywgZXhwYW5kVXJsfSBmcm9tICcuLi90aWxldXJsZnVuY3Rpb24uanMnO1xuaW1wb3J0IHtnZXRLZXlaWFl9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gQ2FjaGUgc2l6ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29wYXF1ZT1mYWxzZV0gV2hldGhlciB0aGUgbGF5ZXIgaXMgb3BhcXVlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuU3RhdGV9IFtzdGF0ZV0gU3RhdGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZUdyaWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSB0aWxlTG9hZEZ1bmN0aW9uIFRpbGVMb2FkRnVuY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvXSBUaWxlUGl4ZWxSYXRpby5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gVGlsZVVybEZ1bmN0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1cmxdIFVybC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIFVybHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXcmFwWC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl0gVHJhbnNpdGlvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5XSBLZXkuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdIFpEaXJlY3Rpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbnRlcnBvbGF0ZT1mYWxzZV0gVXNlIGludGVycG9sYXRlZCB2YWx1ZXMgd2hlbiByZXNhbXBsaW5nLiAgQnkgZGVmYXVsdCxcbiAqIHRoZSBuZWFyZXN0IG5laWdoYm9yIGlzIHVzZWQgd2hlbiByZXNhbXBsaW5nLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgdGlsZXMgZGl2aWRlZCBpbnRvIGEgdGlsZSBncmlkIG92ZXIgaHR0cC5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9UaWxlLmpzXCIpLlRpbGVTb3VyY2VFdmVudFxuICovXG5jbGFzcyBVcmxUaWxlIGV4dGVuZHMgVGlsZVNvdXJjZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgSW1hZ2UgdGlsZSBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKHtcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICBjYWNoZVNpemU6IG9wdGlvbnMuY2FjaGVTaXplLFxuICAgICAgb3BhcXVlOiBvcHRpb25zLm9wYXF1ZSxcbiAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgdGlsZUdyaWQ6IG9wdGlvbnMudGlsZUdyaWQsXG4gICAgICB0aWxlUGl4ZWxSYXRpbzogb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyxcbiAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYLFxuICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAgaW50ZXJwb2xhdGU6IG9wdGlvbnMuaW50ZXJwb2xhdGUsXG4gICAgICBrZXk6IG9wdGlvbnMua2V5LFxuICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICB6RGlyZWN0aW9uOiBvcHRpb25zLnpEaXJlY3Rpb24sXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuZ2VuZXJhdGVUaWxlVXJsRnVuY3Rpb25fID1cbiAgICAgIHRoaXMudGlsZVVybEZ1bmN0aW9uID09PSBVcmxUaWxlLnByb3RvdHlwZS50aWxlVXJsRnVuY3Rpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufVxuICAgICAqL1xuICAgIHRoaXMudGlsZUxvYWRGdW5jdGlvbiA9IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvbjtcblxuICAgIGlmIChvcHRpb25zLnRpbGVVcmxGdW5jdGlvbikge1xuICAgICAgdGhpcy50aWxlVXJsRnVuY3Rpb24gPSBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUgeyFBcnJheTxzdHJpbmc+fG51bGx9XG4gICAgICovXG4gICAgdGhpcy51cmxzID0gbnVsbDtcblxuICAgIGlmIChvcHRpb25zLnVybHMpIHtcbiAgICAgIHRoaXMuc2V0VXJscyhvcHRpb25zLnVybHMpO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy51cmwpIHtcbiAgICAgIHRoaXMuc2V0VXJsKG9wdGlvbnMudXJsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICovXG4gICAgdGhpcy50aWxlTG9hZGluZ0tleXNfID0ge307XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSB0aWxlIGxvYWQgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IFRpbGVMb2FkRnVuY3Rpb25cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0VGlsZUxvYWRGdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50aWxlTG9hZEZ1bmN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgdGlsZSBVUkwgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZVVybEZ1bmN0aW9uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFRpbGVVcmxGdW5jdGlvbigpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLnRpbGVVcmxGdW5jdGlvbiA9PT0gdGhpcy50aWxlVXJsRnVuY3Rpb25cbiAgICAgID8gdGhpcy50aWxlVXJsRnVuY3Rpb24uYmluZCh0aGlzKVxuICAgICAgOiB0aGlzLnRpbGVVcmxGdW5jdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIFVSTHMgdXNlZCBmb3IgdGhpcyBzb3VyY2UuXG4gICAqIFdoZW4gYSB0aWxlVXJsRnVuY3Rpb24gaXMgdXNlZCBpbnN0ZWFkIG9mIHVybCBvciB1cmxzLFxuICAgKiBudWxsIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqIEByZXR1cm4geyFBcnJheTxzdHJpbmc+fG51bGx9IFVSTHMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFVybHMoKSB7XG4gICAgcmV0dXJuIHRoaXMudXJscztcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdGlsZSBjaGFuZ2UgZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgaGFuZGxlVGlsZUNoYW5nZShldmVudCkge1xuICAgIGNvbnN0IHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LnRhcmdldCk7XG4gICAgY29uc3QgdWlkID0gZ2V0VWlkKHRpbGUpO1xuICAgIGNvbnN0IHRpbGVTdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICBsZXQgdHlwZTtcbiAgICBpZiAodGlsZVN0YXRlID09IFRpbGVTdGF0ZS5MT0FESU5HKSB7XG4gICAgICB0aGlzLnRpbGVMb2FkaW5nS2V5c19bdWlkXSA9IHRydWU7XG4gICAgICB0eXBlID0gVGlsZUV2ZW50VHlwZS5USUxFTE9BRFNUQVJUO1xuICAgIH0gZWxzZSBpZiAodWlkIGluIHRoaXMudGlsZUxvYWRpbmdLZXlzXykge1xuICAgICAgZGVsZXRlIHRoaXMudGlsZUxvYWRpbmdLZXlzX1t1aWRdO1xuICAgICAgdHlwZSA9XG4gICAgICAgIHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuRVJST1JcbiAgICAgICAgICA/IFRpbGVFdmVudFR5cGUuVElMRUxPQURFUlJPUlxuICAgICAgICAgIDogdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5MT0FERURcbiAgICAgICAgICA/IFRpbGVFdmVudFR5cGUuVElMRUxPQURFTkRcbiAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHR5cGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFRpbGVTb3VyY2VFdmVudCh0eXBlLCB0aWxlKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdGlsZSBsb2FkIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IHRpbGVMb2FkRnVuY3Rpb24gVGlsZSBsb2FkIGZ1bmN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRUaWxlTG9hZEZ1bmN0aW9uKHRpbGVMb2FkRnVuY3Rpb24pIHtcbiAgICB0aGlzLnRpbGVDYWNoZS5jbGVhcigpO1xuICAgIHRoaXMudGlsZUxvYWRGdW5jdGlvbiA9IHRpbGVMb2FkRnVuY3Rpb247XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSB0aWxlIFVSTCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IHRpbGVVcmxGdW5jdGlvbiBUaWxlIFVSTCBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtrZXldIE9wdGlvbmFsIG5ldyB0aWxlIGtleSBmb3IgdGhlIHNvdXJjZS5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0VGlsZVVybEZ1bmN0aW9uKHRpbGVVcmxGdW5jdGlvbiwga2V5KSB7XG4gICAgdGhpcy50aWxlVXJsRnVuY3Rpb24gPSB0aWxlVXJsRnVuY3Rpb247XG4gICAgdGhpcy50aWxlQ2FjaGUucHJ1bmVFeGNlcHROZXdlc3RaKCk7XG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLnNldEtleShrZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBVUkwgdG8gdXNlIGZvciByZXF1ZXN0cy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBVUkwuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFVybCh1cmwpIHtcbiAgICBjb25zdCB1cmxzID0gZXhwYW5kVXJsKHVybCk7XG4gICAgdGhpcy51cmxzID0gdXJscztcbiAgICB0aGlzLnNldFVybHModXJscyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBVUkxzIHRvIHVzZSBmb3IgcmVxdWVzdHMuXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gdXJscyBVUkxzLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRVcmxzKHVybHMpIHtcbiAgICB0aGlzLnVybHMgPSB1cmxzO1xuICAgIGNvbnN0IGtleSA9IHVybHMuam9pbignXFxuJyk7XG4gICAgaWYgKHRoaXMuZ2VuZXJhdGVUaWxlVXJsRnVuY3Rpb25fKSB7XG4gICAgICB0aGlzLnNldFRpbGVVcmxGdW5jdGlvbihjcmVhdGVGcm9tVGVtcGxhdGVzKHVybHMsIHRoaXMudGlsZUdyaWQpLCBrZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldEtleShrZXkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICAgKi9cbiAgdGlsZVVybEZ1bmN0aW9uKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogTWFya3MgYSB0aWxlIGNvb3JkIGFzIGJlaW5nIHVzZWQsIHdpdGhvdXQgdHJpZ2dlcmluZyBhIGxvYWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAqL1xuICB1c2VUaWxlKHosIHgsIHkpIHtcbiAgICBjb25zdCB0aWxlQ29vcmRLZXkgPSBnZXRLZXlaWFkoeiwgeCwgeSk7XG4gICAgaWYgKHRoaXMudGlsZUNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgIHRoaXMudGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVcmxUaWxlO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlRXZlbnRUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHRpbGUgc3RhcnRzIGxvYWRpbmcuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvc291cmNlL1RpbGUuVGlsZVNvdXJjZUV2ZW50I3RpbGVsb2Fkc3RhcnRcbiAgICogQGFwaVxuICAgKi9cbiAgVElMRUxPQURTVEFSVDogJ3RpbGVsb2Fkc3RhcnQnLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHRpbGUgZmluaXNoZXMgbG9hZGluZywgZWl0aGVyIHdoZW4gaXRzIGRhdGEgaXMgbG9hZGVkLFxuICAgKiBvciB3aGVuIGxvYWRpbmcgd2FzIGFib3J0ZWQgYmVjYXVzZSB0aGUgdGlsZSBpcyBubyBsb25nZXIgbmVlZGVkLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9UaWxlLlRpbGVTb3VyY2VFdmVudCN0aWxlbG9hZGVuZFxuICAgKiBAYXBpXG4gICAqL1xuICBUSUxFTE9BREVORDogJ3RpbGVsb2FkZW5kJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIGlmIHRpbGUgbG9hZGluZyByZXN1bHRzIGluIGFuIGVycm9yLiBOb3RlIHRoYXQgdGhpcyBpcyBub3QgdGhlXG4gICAqIHJpZ2h0IHBsYWNlIHRvIHJlLWZldGNoIHRpbGVzLiBTZWUge0BsaW5rIG1vZHVsZTpvbC9JbWFnZVRpbGV+SW1hZ2VUaWxlI2xvYWR9XG4gICAqIGZvciBkZXRhaWxzLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9UaWxlLlRpbGVTb3VyY2VFdmVudCN0aWxlbG9hZGVycm9yXG4gICAqIEBhcGlcbiAgICovXG4gIFRJTEVMT0FERVJST1I6ICd0aWxlbG9hZGVycm9yJyxcbn07XG5cbi8qKlxuICogQHR5cGVkZWYgeyd0aWxlbG9hZHN0YXJ0J3wndGlsZWxvYWRlbmQnfCd0aWxlbG9hZGVycm9yJ30gVGlsZVNvdXJjZUV2ZW50VHlwZXNcbiAqL1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlSW1hZ2VcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbWFnZVRpbGUgZnJvbSAnLi4vSW1hZ2VUaWxlLmpzJztcbmltcG9ydCBSZXByb2pUaWxlIGZyb20gJy4uL3JlcHJvai9UaWxlLmpzJztcbmltcG9ydCBUaWxlQ2FjaGUgZnJvbSAnLi4vVGlsZUNhY2hlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCBVcmxUaWxlIGZyb20gJy4vVXJsVGlsZS5qcyc7XG5pbXBvcnQge2VxdWl2YWxlbnQsIGdldCBhcyBnZXRQcm9qZWN0aW9ufSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7Z2V0S2V5LCBnZXRLZXlaWFl9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQge2dldEZvclByb2plY3Rpb24gYXMgZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9ufSBmcm9tICcuLi90aWxlZ3JpZC5qcyc7XG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gSW5pdGlhbCB0aWxlIGNhY2hlIHNpemUuIFdpbGwgYXV0by1ncm93IHRvIGhvbGQgYXQgbGVhc3QgdGhlIG51bWJlciBvZiB0aWxlcyBpbiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gIE5vdGUgdGhhdFxuICogeW91IG11c3QgcHJvdmlkZSBhIGBjcm9zc09yaWdpbmAgdmFsdWUgaWYgeW91IHdhbnQgdG8gYWNjZXNzIHBpeGVsIGRhdGEgd2l0aCB0aGUgQ2FudmFzIHJlbmRlcmVyLlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlIGZvciBtb3JlIGRldGFpbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ludGVycG9sYXRlPXRydWVdIFVzZSBpbnRlcnBvbGF0ZWQgdmFsdWVzIHdoZW4gcmVzYW1wbGluZy4gIEJ5IGRlZmF1bHQsXG4gKiBsaW5lYXIgaW50ZXJwb2xhdGlvbiBpcyB1c2VkIHdoZW4gcmVzYW1wbGluZy4gIFNldCB0byBmYWxzZSB0byB1c2UgdGhlIG5lYXJlc3QgbmVpZ2hib3IgaW5zdGVhZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29wYXF1ZT1mYWxzZV0gV2hldGhlciB0aGUgbGF5ZXIgaXMgb3BhcXVlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi4gRGVmYXVsdCBpcyB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZD0wLjVdIE1heGltdW0gYWxsb3dlZCByZXByb2plY3Rpb24gZXJyb3IgKGluIHBpeGVscykuXG4gKiBIaWdoZXIgdmFsdWVzIGNhbiBpbmNyZWFzZSByZXByb2plY3Rpb24gcGVyZm9ybWFuY2UsIGJ1dCBkZWNyZWFzZSBwcmVjaXNpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLlN0YXRlfSBbc3RhdGVdIFNvdXJjZSBzdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7dHlwZW9mIGltcG9ydChcIi4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSBbdGlsZUNsYXNzXSBDbGFzcyB1c2VkIHRvIGluc3RhbnRpYXRlIGltYWdlIHRpbGVzLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL0ltYWdlVGlsZX5JbWFnZVRpbGV9LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGUgZ3JpZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IFt0aWxlTG9hZEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBsb2FkIGEgdGlsZSBnaXZlbiBhIFVSTC4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbihpbWFnZVRpbGUsIHNyYykge1xuICogICBpbWFnZVRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9O1xuICogYGBgXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvPTFdIFRoZSBwaXhlbCByYXRpbyB1c2VkIGJ5IHRoZSB0aWxlIHNlcnZpY2UuIEZvciBleGFtcGxlLCBpZiB0aGUgdGlsZVxuICogc2VydmljZSBhZHZlcnRpemVzIDI1NnB4IGJ5IDI1NnB4IHRpbGVzIGJ1dCBhY3R1YWxseSBzZW5kcyA1MTJweFxuICogYnkgNTEycHggaW1hZ2VzIChmb3IgcmV0aW5hL2hpZHBpIGRldmljZXMpIHRoZW4gYHRpbGVQaXhlbFJhdGlvYFxuICogc2hvdWxkIGJlIHNldCB0byBgMmAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFt0aWxlVXJsRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGdldCB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VybF0gVVJMIHRlbXBsYXRlLiBNdXN0IGluY2x1ZGUgYHt4fWAsIGB7eX1gIG9yIGB7LXl9YCwgYW5kIGB7en1gIHBsYWNlaG9sZGVycy5cbiAqIEEgYHs/LT99YCB0ZW1wbGF0ZSBwYXR0ZXJuLCBmb3IgZXhhbXBsZSBgc3ViZG9tYWlue2EtZn0uZG9tYWluLmNvbWAsIG1heSBiZVxuICogdXNlZCBpbnN0ZWFkIG9mIGRlZmluaW5nIGVhY2ggb25lIHNlcGFyYXRlbHkgaW4gdGhlIGB1cmxzYCBvcHRpb24uXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IFt1cmxzXSBBbiBhcnJheSBvZiBVUkwgdGVtcGxhdGVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFhdIFdoZXRoZXIgdG8gd3JhcCB0aGUgd29ybGQgaG9yaXpvbnRhbGx5LiBUaGUgZGVmYXVsdCwgaXMgdG9cbiAqIHJlcXVlc3Qgb3V0LW9mLWJvdW5kcyB0aWxlcyBmcm9tIHRoZSBzZXJ2ZXIuIFdoZW4gc2V0IHRvIGBmYWxzZWAsIG9ubHkgb25lXG4gKiB3b3JsZCB3aWxsIGJlIHJlbmRlcmVkLiBXaGVuIHNldCB0byBgdHJ1ZWAsIHRpbGVzIHdpbGwgYmUgcmVxdWVzdGVkIGZvciBvbmVcbiAqIHdvcmxkIG9ubHksIGJ1dCB0aGV5IHdpbGwgYmUgd3JhcHBlZCBob3Jpem9udGFsbHkgdG8gcmVuZGVyIG11bHRpcGxlIHdvcmxkcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl0gRHVyYXRpb24gb2YgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiBmb3IgcmVuZGVyaW5nLlxuICogVG8gZGlzYWJsZSB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLCBwYXNzIGB0cmFuc2l0aW9uOiAwYC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5XSBPcHRpb25hbCB0aWxlIGtleSBmb3IgcHJvcGVyIGNhY2hlIGZldGNoaW5nXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdXG4gKiBDaG9vc2Ugd2hldGhlciB0byB1c2UgdGlsZXMgd2l0aCBhIGhpZ2hlciBvciBsb3dlciB6b29tIGxldmVsIHdoZW4gYmV0d2VlbiBpbnRlZ2VyXG4gKiB6b29tIGxldmVscy4gU2VlIHtAbGluayBtb2R1bGU6b2wvdGlsZWdyaWQvVGlsZUdyaWR+VGlsZUdyaWQjZ2V0WkZvclJlc29sdXRpb259LlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgaW1hZ2VzIGRpdmlkZWQgaW50byBhIHRpbGUgZ3JpZC5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9UaWxlLmpzXCIpLlRpbGVTb3VyY2VFdmVudFxuICogQGFwaVxuICovXG5jbGFzcyBUaWxlSW1hZ2UgZXh0ZW5kcyBVcmxUaWxlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9wdGlvbnN9IG9wdGlvbnMgSW1hZ2UgdGlsZSBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKHtcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICBjYWNoZVNpemU6IG9wdGlvbnMuY2FjaGVTaXplLFxuICAgICAgb3BhcXVlOiBvcHRpb25zLm9wYXF1ZSxcbiAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgdGlsZUdyaWQ6IG9wdGlvbnMudGlsZUdyaWQsXG4gICAgICB0aWxlTG9hZEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb25cbiAgICAgICAgPyBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb25cbiAgICAgICAgOiBkZWZhdWx0VGlsZUxvYWRGdW5jdGlvbixcbiAgICAgIHRpbGVQaXhlbFJhdGlvOiBvcHRpb25zLnRpbGVQaXhlbFJhdGlvLFxuICAgICAgdGlsZVVybEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbixcbiAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICB1cmxzOiBvcHRpb25zLnVybHMsXG4gICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCxcbiAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgIGludGVycG9sYXRlOlxuICAgICAgICBvcHRpb25zLmludGVycG9sYXRlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmludGVycG9sYXRlIDogdHJ1ZSxcbiAgICAgIGtleTogb3B0aW9ucy5rZXksXG4gICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLmNyb3NzT3JpZ2luID1cbiAgICAgIG9wdGlvbnMuY3Jvc3NPcmlnaW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY3Jvc3NPcmlnaW4gOiBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHt0eXBlb2YgSW1hZ2VUaWxlfVxuICAgICAqL1xuICAgIHRoaXMudGlsZUNsYXNzID1cbiAgICAgIG9wdGlvbnMudGlsZUNsYXNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVDbGFzcyA6IEltYWdlVGlsZTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIFRpbGVDYWNoZT59XG4gICAgICovXG4gICAgdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbiA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkXyA9IG9wdGlvbnMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQ2FuIGV4cGlyZSBjYWNoZS5cbiAgICovXG4gIGNhbkV4cGlyZUNhY2hlKCkge1xuICAgIGlmICh0aGlzLnRpbGVDYWNoZS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSB7XG4gICAgICBpZiAodGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2tleV0uY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAqL1xuICBleHBpcmVDYWNoZShwcm9qZWN0aW9uLCB1c2VkVGlsZXMpIHtcbiAgICBjb25zdCB1c2VkVGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuXG4gICAgdGhpcy50aWxlQ2FjaGUuZXhwaXJlQ2FjaGUoXG4gICAgICB0aGlzLnRpbGVDYWNoZSA9PSB1c2VkVGlsZUNhY2hlID8gdXNlZFRpbGVzIDoge31cbiAgICApO1xuICAgIGZvciAoY29uc3QgaWQgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSB7XG4gICAgICBjb25zdCB0aWxlQ2FjaGUgPSB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25baWRdO1xuICAgICAgdGlsZUNhY2hlLmV4cGlyZUNhY2hlKHRpbGVDYWNoZSA9PSB1c2VkVGlsZUNhY2hlID8gdXNlZFRpbGVzIDoge30pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgKi9cbiAgZ2V0R3V0dGVyRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5nZXRQcm9qZWN0aW9uKCkgJiZcbiAgICAgIHByb2plY3Rpb24gJiZcbiAgICAgICFlcXVpdmFsZW50KHRoaXMuZ2V0UHJvamVjdGlvbigpLCBwcm9qZWN0aW9uKVxuICAgICkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldEd1dHRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgKi9cbiAgZ2V0R3V0dGVyKCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUga2V5IHRvIGJlIHVzZWQgZm9yIGFsbCB0aWxlcyBpbiB0aGUgc291cmNlLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBrZXkgZm9yIGFsbCB0aWxlcy5cbiAgICovXG4gIGdldEtleSgpIHtcbiAgICBsZXQga2V5ID0gc3VwZXIuZ2V0S2V5KCk7XG4gICAgaWYgKCF0aGlzLmdldEludGVycG9sYXRlKCkpIHtcbiAgICAgIGtleSArPSAnOmRpc2FibGUtaW50ZXJwb2xhdGlvbic7XG4gICAgfVxuICAgIHJldHVybiBrZXk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBPcGFxdWUuXG4gICAqL1xuICBnZXRPcGFxdWUocHJvamVjdGlvbikge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZ2V0UHJvamVjdGlvbigpICYmXG4gICAgICBwcm9qZWN0aW9uICYmXG4gICAgICAhZXF1aXZhbGVudCh0aGlzLmdldFByb2plY3Rpb24oKSwgcHJvamVjdGlvbilcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLmdldE9wYXF1ZShwcm9qZWN0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBUaWxlIGdyaWQuXG4gICAqL1xuICBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIGNvbnN0IHRoaXNQcm9qID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgaWYgKHRoaXMudGlsZUdyaWQgJiYgKCF0aGlzUHJvaiB8fCBlcXVpdmFsZW50KHRoaXNQcm9qLCBwcm9qZWN0aW9uKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkO1xuICAgIH1cbiAgICBjb25zdCBwcm9qS2V5ID0gZ2V0VWlkKHByb2plY3Rpb24pO1xuICAgIGlmICghKHByb2pLZXkgaW4gdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb24pKSB7XG4gICAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9XG4gICAgICAgIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uW3Byb2pLZXldO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZUNhY2hlLmpzXCIpLmRlZmF1bHR9IFRpbGUgY2FjaGUuXG4gICAqL1xuICBnZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICBjb25zdCB0aGlzUHJvaiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgIGlmICghdGhpc1Byb2ogfHwgZXF1aXZhbGVudCh0aGlzUHJvaiwgcHJvamVjdGlvbikpIHtcbiAgICAgIHJldHVybiB0aGlzLnRpbGVDYWNoZTtcbiAgICB9XG4gICAgY29uc3QgcHJvaktleSA9IGdldFVpZChwcm9qZWN0aW9uKTtcbiAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikpIHtcbiAgICAgIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9IG5ldyBUaWxlQ2FjaGUoXG4gICAgICAgIHRoaXMudGlsZUNhY2hlLmhpZ2hXYXRlck1hcmtcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25bcHJvaktleV07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IHNldCBvbiB0aGUgdGlsZS5cbiAgICogQHJldHVybiB7IUltYWdlVGlsZX0gVGlsZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNyZWF0ZVRpbGVfKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGtleSkge1xuICAgIGNvbnN0IHRpbGVDb29yZCA9IFt6LCB4LCB5XTtcbiAgICBjb25zdCB1cmxUaWxlQ29vcmQgPSB0aGlzLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbihcbiAgICAgIHRpbGVDb29yZCxcbiAgICAgIHByb2plY3Rpb25cbiAgICApO1xuICAgIGNvbnN0IHRpbGVVcmwgPSB1cmxUaWxlQ29vcmRcbiAgICAgID8gdGhpcy50aWxlVXJsRnVuY3Rpb24odXJsVGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKVxuICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgdGlsZSA9IG5ldyB0aGlzLnRpbGVDbGFzcyhcbiAgICAgIHRpbGVDb29yZCxcbiAgICAgIHRpbGVVcmwgIT09IHVuZGVmaW5lZCA/IFRpbGVTdGF0ZS5JRExFIDogVGlsZVN0YXRlLkVNUFRZLFxuICAgICAgdGlsZVVybCAhPT0gdW5kZWZpbmVkID8gdGlsZVVybCA6ICcnLFxuICAgICAgdGhpcy5jcm9zc09yaWdpbixcbiAgICAgIHRoaXMudGlsZUxvYWRGdW5jdGlvbixcbiAgICAgIHRoaXMudGlsZU9wdGlvbnNcbiAgICApO1xuICAgIHRpbGUua2V5ID0ga2V5O1xuICAgIHRpbGUuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZVRpbGVDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgcmV0dXJuIHRpbGU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7IShJbWFnZVRpbGV8UmVwcm9qVGlsZSl9IFRpbGUuXG4gICAqL1xuICBnZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICBjb25zdCBzb3VyY2VQcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgaWYgKFxuICAgICAgIXNvdXJjZVByb2plY3Rpb24gfHxcbiAgICAgICFwcm9qZWN0aW9uIHx8XG4gICAgICBlcXVpdmFsZW50KHNvdXJjZVByb2plY3Rpb24sIHByb2plY3Rpb24pXG4gICAgKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRUaWxlSW50ZXJuYWwoXG4gICAgICAgIHosXG4gICAgICAgIHgsXG4gICAgICAgIHksXG4gICAgICAgIHBpeGVsUmF0aW8sXG4gICAgICAgIHNvdXJjZVByb2plY3Rpb24gfHwgcHJvamVjdGlvblxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgY2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgY29uc3QgdGlsZUNvb3JkID0gW3osIHgsIHldO1xuICAgIGxldCB0aWxlO1xuICAgIGNvbnN0IHRpbGVDb29yZEtleSA9IGdldEtleSh0aWxlQ29vcmQpO1xuICAgIGlmIChjYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICB0aWxlID0gY2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0S2V5KCk7XG4gICAgaWYgKHRpbGUgJiYgdGlsZS5rZXkgPT0ga2V5KSB7XG4gICAgICByZXR1cm4gdGlsZTtcbiAgICB9XG4gICAgY29uc3Qgc291cmNlVGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihzb3VyY2VQcm9qZWN0aW9uKTtcbiAgICBjb25zdCB0YXJnZXRUaWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIGNvbnN0IHdyYXBwZWRUaWxlQ29vcmQgPSB0aGlzLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbihcbiAgICAgIHRpbGVDb29yZCxcbiAgICAgIHByb2plY3Rpb25cbiAgICApO1xuICAgIGNvbnN0IG5ld1RpbGUgPSBuZXcgUmVwcm9qVGlsZShcbiAgICAgIHNvdXJjZVByb2plY3Rpb24sXG4gICAgICBzb3VyY2VUaWxlR3JpZCxcbiAgICAgIHByb2plY3Rpb24sXG4gICAgICB0YXJnZXRUaWxlR3JpZCxcbiAgICAgIHRpbGVDb29yZCxcbiAgICAgIHdyYXBwZWRUaWxlQ29vcmQsXG4gICAgICB0aGlzLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pLFxuICAgICAgdGhpcy5nZXRHdXR0ZXIoKSxcbiAgICAgICh6LCB4LCB5LCBwaXhlbFJhdGlvKSA9PlxuICAgICAgICB0aGlzLmdldFRpbGVJbnRlcm5hbCh6LCB4LCB5LCBwaXhlbFJhdGlvLCBzb3VyY2VQcm9qZWN0aW9uKSxcbiAgICAgIHRoaXMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfLFxuICAgICAgdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18sXG4gICAgICB0aGlzLmdldEludGVycG9sYXRlKClcbiAgICApO1xuICAgIG5ld1RpbGUua2V5ID0ga2V5O1xuXG4gICAgaWYgKHRpbGUpIHtcbiAgICAgIG5ld1RpbGUuaW50ZXJpbVRpbGUgPSB0aWxlO1xuICAgICAgbmV3VGlsZS5yZWZyZXNoSW50ZXJpbUNoYWluKCk7XG4gICAgICBjYWNoZS5yZXBsYWNlKHRpbGVDb29yZEtleSwgbmV3VGlsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhY2hlLnNldCh0aWxlQ29vcmRLZXksIG5ld1RpbGUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3VGlsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHBhcmFtIHshaW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7IUltYWdlVGlsZX0gVGlsZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZ2V0VGlsZUludGVybmFsKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICBsZXQgdGlsZSA9IG51bGw7XG4gICAgY29uc3QgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0S2V5KCk7XG4gICAgaWYgKCF0aGlzLnRpbGVDYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICB0aWxlID0gdGhpcy5jcmVhdGVUaWxlXyh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBrZXkpO1xuICAgICAgdGhpcy50aWxlQ2FjaGUuc2V0KHRpbGVDb29yZEtleSwgdGlsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbGUgPSB0aGlzLnRpbGVDYWNoZS5nZXQodGlsZUNvb3JkS2V5KTtcbiAgICAgIGlmICh0aWxlLmtleSAhPSBrZXkpIHtcbiAgICAgICAgLy8gVGhlIHNvdXJjZSdzIHBhcmFtcyBjaGFuZ2VkLiBJZiB0aGUgdGlsZSBoYXMgYW4gaW50ZXJpbSB0aWxlIGFuZCBpZiB3ZVxuICAgICAgICAvLyBjYW4gdXNlIGl0IHRoZW4gd2UgdXNlIGl0LiBPdGhlcndpc2Ugd2UgY3JlYXRlIGEgbmV3IHRpbGUuICBJbiBib3RoXG4gICAgICAgIC8vIGNhc2VzIHdlIGF0dGVtcHQgdG8gYXNzaWduIGFuIGludGVyaW0gdGlsZSB0byB0aGUgbmV3IHRpbGUuXG4gICAgICAgIGNvbnN0IGludGVyaW1UaWxlID0gdGlsZTtcbiAgICAgICAgdGlsZSA9IHRoaXMuY3JlYXRlVGlsZV8oeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KTtcblxuICAgICAgICAvL21ha2UgdGhlIG5ldyB0aWxlIHRoZSBoZWFkIG9mIHRoZSBsaXN0LFxuICAgICAgICBpZiAoaW50ZXJpbVRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgIC8vdGhlIG9sZCB0aWxlIGhhc24ndCBiZWd1biBsb2FkaW5nIHlldCwgYW5kIGlzIG5vdyBvdXRkYXRlZCwgc28gd2UgY2FuIHNpbXBseSBkaXNjYXJkIGl0XG4gICAgICAgICAgdGlsZS5pbnRlcmltVGlsZSA9IGludGVyaW1UaWxlLmludGVyaW1UaWxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBpbnRlcmltVGlsZTtcbiAgICAgICAgfVxuICAgICAgICB0aWxlLnJlZnJlc2hJbnRlcmltQ2hhaW4oKTtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUucmVwbGFjZSh0aWxlQ29vcmRLZXksIHRpbGUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGlsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHdoZXRoZXIgdG8gcmVuZGVyIHJlcHJvamVjdGlvbiBlZGdlcyBvciBub3QgKHVzdWFsbHkgZm9yIGRlYnVnZ2luZykuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVuZGVyIFJlbmRlciB0aGUgZWRnZXMuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFJlbmRlclJlcHJvamVjdGlvbkVkZ2VzKHJlbmRlcikge1xuICAgIGlmICh0aGlzLnJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyA9PSByZW5kZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18gPSByZW5kZXI7XG4gICAgZm9yIChjb25zdCBpZCBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltpZF0uY2xlYXIoKTtcbiAgICB9XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdGlsZSBncmlkIHRvIHVzZSB3aGVuIHJlcHJvamVjdGluZyB0aGUgdGlsZXMgdG8gdGhlIGdpdmVuXG4gICAqIHByb2plY3Rpb24gaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCB0aWxlIGdyaWQgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICAgKlxuICAgKiBUaGlzIGNhbiBiZSB1c2VmdWwgd2hlbiB0aGUgZGVmYXVsdCB0aWxlIGdyaWQgY2Fubm90IGJlIGNyZWF0ZWRcbiAgICogKGUuZy4gcHJvamVjdGlvbiBoYXMgbm8gZXh0ZW50IGRlZmluZWQpIG9yXG4gICAqIGZvciBvcHRpbWl6YXRpb24gcmVhc29ucyAoY3VzdG9tIHRpbGUgc2l6ZSwgcmVzb2x1dGlvbnMsIC4uLikuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVncmlkIFRpbGUgZ3JpZCB0byB1c2UgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbiwgdGlsZWdyaWQpIHtcbiAgICBjb25zdCBwcm9qID0gZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICBpZiAocHJvaikge1xuICAgICAgY29uc3QgcHJvaktleSA9IGdldFVpZChwcm9qKTtcbiAgICAgIGlmICghKHByb2pLZXkgaW4gdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb24pKSB7XG4gICAgICAgIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uW3Byb2pLZXldID0gdGlsZWdyaWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgc3VwZXIuY2xlYXIoKTtcbiAgICBmb3IgKGNvbnN0IGlkIGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikge1xuICAgICAgdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2lkXS5jbGVhcigpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7SW1hZ2VUaWxlfSBpbWFnZVRpbGUgSW1hZ2UgdGlsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU291cmNlLlxuICovXG5mdW5jdGlvbiBkZWZhdWx0VGlsZUxvYWRGdW5jdGlvbihpbWFnZVRpbGUsIHNyYykge1xuICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gKi8gKGltYWdlVGlsZS5nZXRJbWFnZSgpKS5zcmMgPVxuICAgIHNyYztcbn1cblxuZXhwb3J0IGRlZmF1bHQgVGlsZUltYWdlO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGVjb29yZFxuICovXG5cbi8qKlxuICogQW4gYXJyYXkgb2YgdGhyZWUgbnVtYmVycyByZXByZXNlbnRpbmcgdGhlIGxvY2F0aW9uIG9mIGEgdGlsZSBpbiBhIHRpbGVcbiAqIGdyaWQuIFRoZSBvcmRlciBpcyBgemAgKHpvb20gbGV2ZWwpLCBgeGAgKGNvbHVtbiksIGFuZCBgeWAgKHJvdykuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gVGlsZUNvb3JkXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gW3RpbGVDb29yZF0gVGlsZSBjb29yZGluYXRlLlxuICogQHJldHVybiB7VGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZSh6LCB4LCB5LCB0aWxlQ29vcmQpIHtcbiAgaWYgKHRpbGVDb29yZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGlsZUNvb3JkWzBdID0gejtcbiAgICB0aWxlQ29vcmRbMV0gPSB4O1xuICAgIHRpbGVDb29yZFsyXSA9IHk7XG4gICAgcmV0dXJuIHRpbGVDb29yZDtcbiAgfVxuICByZXR1cm4gW3osIHgsIHldO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5WlhZKHosIHgsIHkpIHtcbiAgcmV0dXJuIHogKyAnLycgKyB4ICsgJy8nICsgeTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGtleSBmb3IgYSB0aWxlIGNvb3JkLlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaGUgdGlsZSBjb29yZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5KHRpbGVDb29yZCkge1xuICByZXR1cm4gZ2V0S2V5WlhZKHRpbGVDb29yZFswXSwgdGlsZUNvb3JkWzFdLCB0aWxlQ29vcmRbMl0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgdGlsZSBjYWNoZSBrZXkgZm9yIGEgdGlsZSBrZXkgb2J0YWluZWQgdGhyb3VnaCBgdGlsZS5nZXRLZXkoKWAuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGlsZUtleSBUaGUgdGlsZSBrZXkuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjYWNoZSBrZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYWNoZUtleUZvclRpbGVLZXkodGlsZUtleSkge1xuICBjb25zdCBbeiwgeCwgeV0gPSB0aWxlS2V5XG4gICAgLnN1YnN0cmluZyh0aWxlS2V5Lmxhc3RJbmRleE9mKCcvJykgKyAxLCB0aWxlS2V5Lmxlbmd0aClcbiAgICAuc3BsaXQoJywnKVxuICAgIC5tYXAoTnVtYmVyKTtcbiAgcmV0dXJuIGdldEtleVpYWSh6LCB4LCB5KTtcbn1cblxuLyoqXG4gKiBHZXQgYSB0aWxlIGNvb3JkIGdpdmVuIGEga2V5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgdGlsZSBjb29yZCBrZXkuXG4gKiBAcmV0dXJuIHtUaWxlQ29vcmR9IFRoZSB0aWxlIGNvb3JkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUtleShrZXkpIHtcbiAgcmV0dXJuIGtleS5zcGxpdCgnLycpLm1hcChOdW1iZXIpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7VGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZC5cbiAqIEByZXR1cm4ge251bWJlcn0gSGFzaC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc2godGlsZUNvb3JkKSB7XG4gIHJldHVybiAodGlsZUNvb3JkWzFdIDw8IHRpbGVDb29yZFswXSkgKyB0aWxlQ29vcmRbMl07XG59XG5cbi8qKlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0geyFpbXBvcnQoXCIuL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRpbGUgY29vcmRpbmF0ZSBpcyB3aXRoaW4gZXh0ZW50IGFuZCB6b29tIGxldmVsIHJhbmdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aGluRXh0ZW50QW5kWih0aWxlQ29vcmQsIHRpbGVHcmlkKSB7XG4gIGNvbnN0IHogPSB0aWxlQ29vcmRbMF07XG4gIGNvbnN0IHggPSB0aWxlQ29vcmRbMV07XG4gIGNvbnN0IHkgPSB0aWxlQ29vcmRbMl07XG5cbiAgaWYgKHRpbGVHcmlkLmdldE1pblpvb20oKSA+IHogfHwgeiA+IHRpbGVHcmlkLmdldE1heFpvb20oKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRGdWxsVGlsZVJhbmdlKHopO1xuICBpZiAoIXRpbGVSYW5nZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiB0aWxlUmFuZ2UuY29udGFpbnNYWSh4LCB5KTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZFxuICovXG5pbXBvcnQgVGlsZUdyaWQgZnJvbSAnLi90aWxlZ3JpZC9UaWxlR3JpZC5qcyc7XG5pbXBvcnQge0RFRkFVTFRfTUFYX1pPT00sIERFRkFVTFRfVElMRV9TSVpFfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQge01FVEVSU19QRVJfVU5JVCwgZ2V0IGFzIGdldFByb2plY3Rpb259IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQge1xuICBjb250YWluc0Nvb3JkaW5hdGUsXG4gIGNyZWF0ZU9yVXBkYXRlLFxuICBnZXRDb3JuZXIsXG4gIGdldEhlaWdodCxcbiAgZ2V0V2lkdGgsXG59IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7dG9TaXplfSBmcm9tICcuL3NpemUuanMnO1xuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBEZWZhdWx0IHRpbGUgZ3JpZCBmb3IgdGhlXG4gKiBwYXNzZWQgcHJvamVjdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZvclByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICBsZXQgdGlsZUdyaWQgPSBwcm9qZWN0aW9uLmdldERlZmF1bHRUaWxlR3JpZCgpO1xuICBpZiAoIXRpbGVHcmlkKSB7XG4gICAgdGlsZUdyaWQgPSBjcmVhdGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIHByb2plY3Rpb24uc2V0RGVmYXVsdFRpbGVHcmlkKHRpbGVHcmlkKTtcbiAgfVxuICByZXR1cm4gdGlsZUdyaWQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtUaWxlR3JpZH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcFgodGlsZUdyaWQsIHRpbGVDb29yZCwgcHJvamVjdGlvbikge1xuICBjb25zdCB6ID0gdGlsZUNvb3JkWzBdO1xuICBjb25zdCBjZW50ZXIgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRDZW50ZXIodGlsZUNvb3JkKTtcbiAgY29uc3QgcHJvamVjdGlvbkV4dGVudCA9IGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICBpZiAoIWNvbnRhaW5zQ29vcmRpbmF0ZShwcm9qZWN0aW9uRXh0ZW50LCBjZW50ZXIpKSB7XG4gICAgY29uc3Qgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgIGNvbnN0IHdvcmxkc0F3YXkgPSBNYXRoLmNlaWwoXG4gICAgICAocHJvamVjdGlvbkV4dGVudFswXSAtIGNlbnRlclswXSkgLyB3b3JsZFdpZHRoXG4gICAgKTtcbiAgICBjZW50ZXJbMF0gKz0gd29ybGRXaWR0aCAqIHdvcmxkc0F3YXk7XG4gICAgcmV0dXJuIHRpbGVHcmlkLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWihjZW50ZXIsIHopO1xuICB9XG4gIHJldHVybiB0aWxlQ29vcmQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gW21heFpvb21dIE1heGltdW0gem9vbSBsZXZlbCAoZGVmYXVsdCBpc1xuICogICAgIERFRkFVTFRfTUFYX1pPT00pLlxuICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFt0aWxlU2l6ZV0gVGlsZSBzaXplIChkZWZhdWx0IHVzZXNcbiAqICAgICBERUZBVUxUX1RJTEVfU0laRSkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkNvcm5lcn0gW2Nvcm5lcl0gRXh0ZW50IGNvcm5lciAoZGVmYXVsdCBpcyBgJ3RvcC1sZWZ0J2ApLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBUaWxlR3JpZCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvckV4dGVudChleHRlbnQsIG1heFpvb20sIHRpbGVTaXplLCBjb3JuZXIpIHtcbiAgY29ybmVyID0gY29ybmVyICE9PSB1bmRlZmluZWQgPyBjb3JuZXIgOiAndG9wLWxlZnQnO1xuXG4gIGNvbnN0IHJlc29sdXRpb25zID0gcmVzb2x1dGlvbnNGcm9tRXh0ZW50KGV4dGVudCwgbWF4Wm9vbSwgdGlsZVNpemUpO1xuXG4gIHJldHVybiBuZXcgVGlsZUdyaWQoe1xuICAgIGV4dGVudDogZXh0ZW50LFxuICAgIG9yaWdpbjogZ2V0Q29ybmVyKGV4dGVudCwgY29ybmVyKSxcbiAgICByZXNvbHV0aW9uczogcmVzb2x1dGlvbnMsXG4gICAgdGlsZVNpemU6IHRpbGVTaXplLFxuICB9KTtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBYWVpPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50IGZvciB0aGUgdGlsZSBncmlkLiBUaGUgb3JpZ2luIGZvciBhbiBYWVogdGlsZSBncmlkIGlzIHRoZVxuICogdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBleHRlbnQuIElmIGBtYXhSZXNvbHV0aW9uYCBpcyBub3QgcHJvdmlkZWQgdGhlIHplcm8gbGV2ZWwgb2YgdGhlIGdyaWQgaXMgZGVmaW5lZCBieSB0aGUgcmVzb2x1dGlvblxuICogYXQgd2hpY2ggb25lIHRpbGUgZml0cyBpbiB0aGUgcHJvdmlkZWQgZXh0ZW50LiBJZiBub3QgcHJvdmlkZWQsIHRoZSBleHRlbnQgb2YgdGhlIEVQU0c6Mzg1NyBwcm9qZWN0aW9uIGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFJlc29sdXRpb24gYXQgbGV2ZWwgemVyby5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tLiBUaGUgZGVmYXVsdCBpcyBgNDJgLiBUaGlzIGRldGVybWluZXMgdGhlIG51bWJlciBvZiBsZXZlbHNcbiAqIGluIHRoZSBncmlkIHNldC4gRm9yIGV4YW1wbGUsIGEgYG1heFpvb21gIG9mIDIxIG1lYW5zIHRoZXJlIGFyZSAyMiBsZXZlbHMgaW4gdGhlIGdyaWQgc2V0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE1pbmltdW0gem9vbS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemU9WzI1NiwgMjU2XV0gVGlsZSBzaXplIGluIHBpeGVscy5cbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSB0aWxlIGdyaWQgd2l0aCBhIHN0YW5kYXJkIFhZWiB0aWxpbmcgc2NoZW1lLlxuICogQHBhcmFtIHtYWVpPcHRpb25zfSBbb3B0aW9uc10gVGlsZSBncmlkIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHshVGlsZUdyaWR9IFRpbGUgZ3JpZCBpbnN0YW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVhZWihvcHRpb25zKSB7XG4gIGNvbnN0IHh5ek9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIGNvbnN0IGV4dGVudCA9IHh5ek9wdGlvbnMuZXh0ZW50IHx8IGdldFByb2plY3Rpb24oJ0VQU0c6Mzg1NycpLmdldEV4dGVudCgpO1xuXG4gIGNvbnN0IGdyaWRPcHRpb25zID0ge1xuICAgIGV4dGVudDogZXh0ZW50LFxuICAgIG1pblpvb206IHh5ek9wdGlvbnMubWluWm9vbSxcbiAgICB0aWxlU2l6ZTogeHl6T3B0aW9ucy50aWxlU2l6ZSxcbiAgICByZXNvbHV0aW9uczogcmVzb2x1dGlvbnNGcm9tRXh0ZW50KFxuICAgICAgZXh0ZW50LFxuICAgICAgeHl6T3B0aW9ucy5tYXhab29tLFxuICAgICAgeHl6T3B0aW9ucy50aWxlU2l6ZSxcbiAgICAgIHh5ek9wdGlvbnMubWF4UmVzb2x1dGlvblxuICAgICksXG4gIH07XG4gIHJldHVybiBuZXcgVGlsZUdyaWQoZ3JpZE9wdGlvbnMpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHJlc29sdXRpb25zIGFycmF5IGZyb20gYW4gZXh0ZW50LiAgQSB6b29tIGZhY3RvciBvZiAyIGlzIGFzc3VtZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIChkZWZhdWx0IGlzXG4gKiAgICAgREVGQVVMVF9NQVhfWk9PTSkuXG4gKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplXSBUaWxlIHNpemUgKGRlZmF1bHQgdXNlc1xuICogICAgIERFRkFVTFRfVElMRV9TSVpFKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gUmVzb2x1dGlvbiBhdCBsZXZlbCB6ZXJvLlxuICogQHJldHVybiB7IUFycmF5PG51bWJlcj59IFJlc29sdXRpb25zIGFycmF5LlxuICovXG5mdW5jdGlvbiByZXNvbHV0aW9uc0Zyb21FeHRlbnQoZXh0ZW50LCBtYXhab29tLCB0aWxlU2l6ZSwgbWF4UmVzb2x1dGlvbikge1xuICBtYXhab29tID0gbWF4Wm9vbSAhPT0gdW5kZWZpbmVkID8gbWF4Wm9vbSA6IERFRkFVTFRfTUFYX1pPT007XG4gIHRpbGVTaXplID0gdG9TaXplKHRpbGVTaXplICE9PSB1bmRlZmluZWQgPyB0aWxlU2l6ZSA6IERFRkFVTFRfVElMRV9TSVpFKTtcblxuICBjb25zdCBoZWlnaHQgPSBnZXRIZWlnaHQoZXh0ZW50KTtcbiAgY29uc3Qgd2lkdGggPSBnZXRXaWR0aChleHRlbnQpO1xuXG4gIG1heFJlc29sdXRpb24gPVxuICAgIG1heFJlc29sdXRpb24gPiAwXG4gICAgICA/IG1heFJlc29sdXRpb25cbiAgICAgIDogTWF0aC5tYXgod2lkdGggLyB0aWxlU2l6ZVswXSwgaGVpZ2h0IC8gdGlsZVNpemVbMV0pO1xuXG4gIGNvbnN0IGxlbmd0aCA9IG1heFpvb20gKyAxO1xuICBjb25zdCByZXNvbHV0aW9ucyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICBmb3IgKGxldCB6ID0gMDsgeiA8IGxlbmd0aDsgKyt6KSB7XG4gICAgcmVzb2x1dGlvbnNbel0gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coMiwgeik7XG4gIH1cbiAgcmV0dXJuIHJlc29sdXRpb25zO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW21heFpvb21dIE1heGltdW0gem9vbSBsZXZlbCAoZGVmYXVsdCBpc1xuICogICAgIERFRkFVTFRfTUFYX1pPT00pLlxuICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFt0aWxlU2l6ZV0gVGlsZSBzaXplIChkZWZhdWx0IHVzZXNcbiAqICAgICBERUZBVUxUX1RJTEVfU0laRSkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkNvcm5lcn0gW2Nvcm5lcl0gRXh0ZW50IGNvcm5lciAoZGVmYXVsdCBpcyBgJ3RvcC1sZWZ0J2ApLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBUaWxlR3JpZCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvclByb2plY3Rpb24ocHJvamVjdGlvbiwgbWF4Wm9vbSwgdGlsZVNpemUsIGNvcm5lcikge1xuICBjb25zdCBleHRlbnQgPSBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgcmV0dXJuIGNyZWF0ZUZvckV4dGVudChleHRlbnQsIG1heFpvb20sIHRpbGVTaXplLCBjb3JuZXIpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgdGlsZSBncmlkIGV4dGVudCBmcm9tIGEgcHJvamVjdGlvbi4gIElmIHRoZSBwcm9qZWN0aW9uIGhhcyBhblxuICogZXh0ZW50LCBpdCBpcyB1c2VkLiAgSWYgbm90LCBhIGdsb2JhbCBleHRlbnQgaXMgYXNzdW1lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgcHJvamVjdGlvbiA9IGdldFByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gIGxldCBleHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICBpZiAoIWV4dGVudCkge1xuICAgIGNvbnN0IGhhbGYgPVxuICAgICAgKDE4MCAqIE1FVEVSU19QRVJfVU5JVC5kZWdyZWVzKSAvIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgIGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlKC1oYWxmLCAtaGFsZiwgaGFsZiwgaGFsZik7XG4gIH1cbiAgcmV0dXJuIGV4dGVudDtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZC9UaWxlR3JpZFxuICovXG5pbXBvcnQgVGlsZVJhbmdlLCB7XG4gIGNyZWF0ZU9yVXBkYXRlIGFzIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlLFxufSBmcm9tICcuLi9UaWxlUmFuZ2UuanMnO1xuaW1wb3J0IHtERUZBVUxUX1RJTEVfU0laRX0gZnJvbSAnLi9jb21tb24uanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtjZWlsLCBjbGFtcCwgZmxvb3J9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHtjcmVhdGVPclVwZGF0ZSwgZ2V0VG9wTGVmdH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7Y3JlYXRlT3JVcGRhdGUgYXMgY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmR9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQge2ludGVyc2VjdHNMaW5lYXJSaW5nfSBmcm9tICcuLi9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyc7XG5pbXBvcnQge2lzU29ydGVkLCBsaW5lYXJGaW5kTmVhcmVzdH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHt0b1NpemV9IGZyb20gJy4uL3NpemUuanMnO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH1cbiAqL1xuY29uc3QgdG1wVGlsZUNvb3JkID0gWzAsIDAsIDBdO1xuXG4vKipcbiAqIE51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cyB0byBjb25zaWRlciBpbiBpbnRlZ2VyIHZhbHVlcyB3aGVuIHJvdW5kaW5nLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuY29uc3QgREVDSU1BTFMgPSA1O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50IGZvciB0aGUgdGlsZSBncmlkLiBObyB0aWxlcyBvdXRzaWRlIHRoaXNcbiAqIGV4dGVudCB3aWxsIGJlIHJlcXVlc3RlZCBieSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlflRpbGVTb3VyY2V9IHNvdXJjZXMuIFdoZW4gbm8gYG9yaWdpbmAgb3JcbiAqIGBvcmlnaW5zYCBhcmUgY29uZmlndXJlZCwgdGhlIGBvcmlnaW5gIHdpbGwgYmUgc2V0IHRvIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbT0wXSBNaW5pbXVtIHpvb20uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29yaWdpbl0gVGhlIHRpbGUgZ3JpZCBvcmlnaW4sIGkuZS4gd2hlcmUgdGhlIGB4YFxuICogYW5kIGB5YCBheGVzIG1lZXQgKGBbeiwgMCwgMF1gKS4gVGlsZSBjb29yZGluYXRlcyBpbmNyZWFzZSBsZWZ0IHRvIHJpZ2h0IGFuZCBkb3dud2FyZHMuIElmIG5vdFxuICogc3BlY2lmaWVkLCBgZXh0ZW50YCBvciBgb3JpZ2luc2AgbXVzdCBiZSBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gW29yaWdpbnNdIFRpbGUgZ3JpZCBvcmlnaW5zLCBpLmUuIHdoZXJlXG4gKiB0aGUgYHhgIGFuZCBgeWAgYXhlcyBtZWV0IChgW3osIDAsIDBdYCksIGZvciBlYWNoIHpvb20gbGV2ZWwuIElmIGdpdmVuLCB0aGUgYXJyYXkgbGVuZ3RoXG4gKiBzaG91bGQgbWF0Y2ggdGhlIGxlbmd0aCBvZiB0aGUgYHJlc29sdXRpb25zYCBhcnJheSwgaS5lLiBlYWNoIHJlc29sdXRpb24gY2FuIGhhdmUgYSBkaWZmZXJlbnRcbiAqIG9yaWdpbi4gVGlsZSBjb29yZGluYXRlcyBpbmNyZWFzZSBsZWZ0IHRvIHJpZ2h0IGFuZCBkb3dud2FyZHMuIElmIG5vdCBzcGVjaWZpZWQsIGBleHRlbnRgIG9yXG4gKiBgb3JpZ2luYCBtdXN0IGJlIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHshQXJyYXk8bnVtYmVyPn0gcmVzb2x1dGlvbnMgUmVzb2x1dGlvbnMuIFRoZSBhcnJheSBpbmRleCBvZiBlYWNoIHJlc29sdXRpb24gbmVlZHNcbiAqIHRvIG1hdGNoIHRoZSB6b29tIGxldmVsLiBUaGlzIG1lYW5zIHRoYXQgZXZlbiBpZiBhIGBtaW5ab29tYCBpcyBjb25maWd1cmVkLCB0aGUgcmVzb2x1dGlvbnNcbiAqIGFycmF5IHdpbGwgaGF2ZSBhIGxlbmd0aCBvZiBgbWF4Wm9vbSArIDFgLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fSBbc2l6ZXNdIE51bWJlciBvZiB0aWxlIHJvd3MgYW5kIGNvbHVtbnNcbiAqIG9mIHRoZSBncmlkIGZvciBlYWNoIHpvb20gbGV2ZWwuIElmIHNwZWNpZmllZCB0aGUgdmFsdWVzXG4gKiBkZWZpbmUgZWFjaCB6b29tIGxldmVsJ3MgZXh0ZW50IHRvZ2V0aGVyIHdpdGggdGhlIGBvcmlnaW5gIG9yIGBvcmlnaW5zYC5cbiAqIEEgZ3JpZCBgZXh0ZW50YCBjYW4gYmUgY29uZmlndXJlZCBpbiBhZGRpdGlvbiwgYW5kIHdpbGwgZnVydGhlciBsaW1pdCB0aGUgZXh0ZW50XG4gKiBmb3Igd2hpY2ggdGlsZSByZXF1ZXN0cyBhcmUgbWFkZSBieSBzb3VyY2VzLiBJZiB0aGUgYm90dG9tLWxlZnQgY29ybmVyIG9mXG4gKiBhbiBleHRlbnQgaXMgdXNlZCBhcyBgb3JpZ2luYCBvciBgb3JpZ2luc2AsIHRoZW4gdGhlIGB5YCB2YWx1ZSBtdXN0IGJlXG4gKiBuZWdhdGl2ZSBiZWNhdXNlIE9wZW5MYXllcnMgdGlsZSBjb29yZGluYXRlcyB1c2UgdGhlIHRvcCBsZWZ0IGFzIHRoZSBvcmlnaW4uXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFt0aWxlU2l6ZV0gVGlsZSBzaXplLlxuICogRGVmYXVsdCBpcyBgWzI1NiwgMjU2XWAuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fSBbdGlsZVNpemVzXSBUaWxlIHNpemVzLiBJZiBnaXZlbiwgdGhlIGFycmF5IGxlbmd0aFxuICogc2hvdWxkIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIGByZXNvbHV0aW9uc2AgYXJyYXksIGkuZS4gZWFjaCByZXNvbHV0aW9uIGNhbiBoYXZlIGEgZGlmZmVyZW50XG4gKiB0aWxlIHNpemUuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZvciBzZXR0aW5nIHRoZSBncmlkIHBhdHRlcm4gZm9yIHNvdXJjZXMgYWNjZXNzaW5nIHRpbGVkLWltYWdlXG4gKiBzZXJ2ZXJzLlxuICogQGFwaVxuICovXG5jbGFzcyBUaWxlR3JpZCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgVGlsZSBncmlkIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5taW5ab29tID0gb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IUFycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5yZXNvbHV0aW9uc18gPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgIGFzc2VydChcbiAgICAgIGlzU29ydGVkKFxuICAgICAgICB0aGlzLnJlc29sdXRpb25zXyxcbiAgICAgICAgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICByZXR1cm4gYiAtIGE7XG4gICAgICAgIH0sXG4gICAgICAgIHRydWVcbiAgICAgICksXG4gICAgICAxN1xuICAgICk7IC8vIGByZXNvbHV0aW9uc2AgbXVzdCBiZSBzb3J0ZWQgaW4gZGVzY2VuZGluZyBvcmRlclxuXG4gICAgLy8gY2hlY2sgaWYgd2UndmUgZ290IGEgY29uc2lzdGVudCB6b29tIGZhY3RvciBhbmQgb3JpZ2luXG4gICAgbGV0IHpvb21GYWN0b3I7XG4gICAgaWYgKCFvcHRpb25zLm9yaWdpbnMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmICghem9vbUZhY3Rvcikge1xuICAgICAgICAgIHpvb21GYWN0b3IgPSB0aGlzLnJlc29sdXRpb25zX1tpXSAvIHRoaXMucmVzb2x1dGlvbnNfW2kgKyAxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc19baV0gLyB0aGlzLnJlc29sdXRpb25zX1tpICsgMV0gIT09IHpvb21GYWN0b3IpIHtcbiAgICAgICAgICAgIHpvb21GYWN0b3IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuem9vbUZhY3Rvcl8gPSB6b29tRmFjdG9yO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5tYXhab29tID0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXxudWxsfVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luXyA9IG9wdGlvbnMub3JpZ2luICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9yaWdpbiA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luc18gPSBudWxsO1xuICAgIGlmIChvcHRpb25zLm9yaWdpbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcmlnaW5zXyA9IG9wdGlvbnMub3JpZ2lucztcbiAgICAgIGFzc2VydCh0aGlzLm9yaWdpbnNfLmxlbmd0aCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGgsIDIwKTsgLy8gTnVtYmVyIG9mIGBvcmlnaW5zYCBhbmQgYHJlc29sdXRpb25zYCBtdXN0IGJlIGVxdWFsXG4gICAgfVxuXG4gICAgY29uc3QgZXh0ZW50ID0gb3B0aW9ucy5leHRlbnQ7XG5cbiAgICBpZiAoZXh0ZW50ICE9PSB1bmRlZmluZWQgJiYgIXRoaXMub3JpZ2luXyAmJiAhdGhpcy5vcmlnaW5zXykge1xuICAgICAgdGhpcy5vcmlnaW5fID0gZ2V0VG9wTGVmdChleHRlbnQpO1xuICAgIH1cblxuICAgIGFzc2VydChcbiAgICAgICghdGhpcy5vcmlnaW5fICYmIHRoaXMub3JpZ2luc18pIHx8ICh0aGlzLm9yaWdpbl8gJiYgIXRoaXMub3JpZ2luc18pLFxuICAgICAgMThcbiAgICApOyAvLyBFaXRoZXIgYG9yaWdpbmAgb3IgYG9yaWdpbnNgIG11c3QgYmUgY29uZmlndXJlZCwgbmV2ZXIgYm90aFxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZT59XG4gICAgICovXG4gICAgdGhpcy50aWxlU2l6ZXNfID0gbnVsbDtcbiAgICBpZiAob3B0aW9ucy50aWxlU2l6ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy50aWxlU2l6ZXNfID0gb3B0aW9ucy50aWxlU2l6ZXM7XG4gICAgICBhc3NlcnQodGhpcy50aWxlU2l6ZXNfLmxlbmd0aCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGgsIDE5KTsgLy8gTnVtYmVyIG9mIGB0aWxlU2l6ZXNgIGFuZCBgcmVzb2x1dGlvbnNgIG11c3QgYmUgZXF1YWxcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAqL1xuICAgIHRoaXMudGlsZVNpemVfID1cbiAgICAgIG9wdGlvbnMudGlsZVNpemUgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMudGlsZVNpemVcbiAgICAgICAgOiAhdGhpcy50aWxlU2l6ZXNfXG4gICAgICAgID8gREVGQVVMVF9USUxFX1NJWkVcbiAgICAgICAgOiBudWxsO1xuICAgIGFzc2VydChcbiAgICAgICghdGhpcy50aWxlU2l6ZV8gJiYgdGhpcy50aWxlU2l6ZXNfKSB8fFxuICAgICAgICAodGhpcy50aWxlU2l6ZV8gJiYgIXRoaXMudGlsZVNpemVzXyksXG4gICAgICAyMlxuICAgICk7IC8vIEVpdGhlciBgdGlsZVNpemVgIG9yIGB0aWxlU2l6ZXNgIG11c3QgYmUgY29uZmlndXJlZCwgbmV2ZXIgYm90aFxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLmV4dGVudF8gPSBleHRlbnQgIT09IHVuZGVmaW5lZCA/IGV4dGVudCA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdGhpcy5mdWxsVGlsZVJhbmdlc18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAqL1xuICAgIHRoaXMudG1wU2l6ZV8gPSBbMCwgMF07XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAqL1xuICAgIHRoaXMudG1wRXh0ZW50XyA9IFswLCAwLCAwLCAwXTtcblxuICAgIGlmIChvcHRpb25zLnNpemVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gb3B0aW9ucy5zaXplcy5tYXAoZnVuY3Rpb24gKHNpemUsIHopIHtcbiAgICAgICAgY29uc3QgdGlsZVJhbmdlID0gbmV3IFRpbGVSYW5nZShcbiAgICAgICAgICBNYXRoLm1pbigwLCBzaXplWzBdKSxcbiAgICAgICAgICBNYXRoLm1heChzaXplWzBdIC0gMSwgLTEpLFxuICAgICAgICAgIE1hdGgubWluKDAsIHNpemVbMV0pLFxuICAgICAgICAgIE1hdGgubWF4KHNpemVbMV0gLSAxLCAtMSlcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGV4dGVudCkge1xuICAgICAgICAgIGNvbnN0IHJlc3RyaWN0ZWRUaWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICAgICAgICB0aWxlUmFuZ2UubWluWCA9IE1hdGgubWF4KHJlc3RyaWN0ZWRUaWxlUmFuZ2UubWluWCwgdGlsZVJhbmdlLm1pblgpO1xuICAgICAgICAgIHRpbGVSYW5nZS5tYXhYID0gTWF0aC5taW4ocmVzdHJpY3RlZFRpbGVSYW5nZS5tYXhYLCB0aWxlUmFuZ2UubWF4WCk7XG4gICAgICAgICAgdGlsZVJhbmdlLm1pblkgPSBNYXRoLm1heChyZXN0cmljdGVkVGlsZVJhbmdlLm1pblksIHRpbGVSYW5nZS5taW5ZKTtcbiAgICAgICAgICB0aWxlUmFuZ2UubWF4WSA9IE1hdGgubWluKHJlc3RyaWN0ZWRUaWxlUmFuZ2UubWF4WSwgdGlsZVJhbmdlLm1heFkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aWxlUmFuZ2U7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9IGVsc2UgaWYgKGV4dGVudCkge1xuICAgICAgdGhpcy5jYWxjdWxhdGVUaWxlUmFuZ2VzXyhleHRlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsIGEgZnVuY3Rpb24gd2l0aCBlYWNoIHRpbGUgY29vcmRpbmF0ZSBmb3IgYSBnaXZlbiBleHRlbnQgYW5kIHpvb20gbGV2ZWwuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gSW50ZWdlciB6b29tIGxldmVsLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQpOiB2b2lkfSBjYWxsYmFjayBGdW5jdGlvbiBjYWxsZWQgd2l0aCBlYWNoIHRpbGUgY29vcmRpbmF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgZm9yRWFjaFRpbGVDb29yZChleHRlbnQsIHpvb20sIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgdGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgem9vbSk7XG4gICAgZm9yIChsZXQgaSA9IHRpbGVSYW5nZS5taW5YLCBpaSA9IHRpbGVSYW5nZS5tYXhYOyBpIDw9IGlpOyArK2kpIHtcbiAgICAgIGZvciAobGV0IGogPSB0aWxlUmFuZ2UubWluWSwgamogPSB0aWxlUmFuZ2UubWF4WTsgaiA8PSBqajsgKytqKSB7XG4gICAgICAgIGNhbGxiYWNrKFt6b29tLCBpLCBqXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFt0ZW1wVGlsZVJhbmdlXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFt0ZW1wRXh0ZW50XSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudCBvYmplY3QuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbGxiYWNrIHN1Y2NlZWRlZC5cbiAgICovXG4gIGZvckVhY2hUaWxlQ29vcmRQYXJlbnRUaWxlUmFuZ2UoXG4gICAgdGlsZUNvb3JkLFxuICAgIGNhbGxiYWNrLFxuICAgIHRlbXBUaWxlUmFuZ2UsXG4gICAgdGVtcEV4dGVudFxuICApIHtcbiAgICBsZXQgdGlsZVJhbmdlLCB4LCB5O1xuICAgIGxldCB0aWxlQ29vcmRFeHRlbnQgPSBudWxsO1xuICAgIGxldCB6ID0gdGlsZUNvb3JkWzBdIC0gMTtcbiAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgeCA9IHRpbGVDb29yZFsxXTtcbiAgICAgIHkgPSB0aWxlQ29vcmRbMl07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgdGVtcEV4dGVudCk7XG4gICAgfVxuICAgIHdoaWxlICh6ID49IHRoaXMubWluWm9vbSkge1xuICAgICAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICAgICAgeCA9IE1hdGguZmxvb3IoeCAvIDIpO1xuICAgICAgICB5ID0gTWF0aC5mbG9vcih5IC8gMik7XG4gICAgICAgIHRpbGVSYW5nZSA9IGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKHgsIHgsIHksIHksIHRlbXBUaWxlUmFuZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKFxuICAgICAgICAgIHRpbGVDb29yZEV4dGVudCxcbiAgICAgICAgICB6LFxuICAgICAgICAgIHRlbXBUaWxlUmFuZ2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChjYWxsYmFjayh6LCB0aWxlUmFuZ2UpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgLS16O1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBleHRlbnQgZm9yIHRoaXMgdGlsZSBncmlkLCBpZiBpdCB3YXMgY29uZmlndXJlZC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRFeHRlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZW50XztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTWF4IHpvb20uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE1heFpvb20oKSB7XG4gICAgcmV0dXJuIHRoaXMubWF4Wm9vbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTWluIHpvb20uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE1pblpvb20oKSB7XG4gICAgcmV0dXJuIHRoaXMubWluWm9vbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG9yaWdpbiBmb3IgdGhlIGdyaWQgYXQgdGhlIGdpdmVuIHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBPcmlnaW4uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE9yaWdpbih6KSB7XG4gICAgaWYgKHRoaXMub3JpZ2luXykge1xuICAgICAgcmV0dXJuIHRoaXMub3JpZ2luXztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub3JpZ2luc19bel07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciB0aGUgZ2l2ZW4gem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFJlc29sdXRpb24oeikge1xuICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zX1t6XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxpc3Qgb2YgcmVzb2x1dGlvbnMgZm9yIHRoZSB0aWxlIGdyaWQuXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFJlc29sdXRpb25zLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRSZXNvbHV0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHV0aW9uc187XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBbdGVtcFRpbGVSYW5nZV0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0IG9iamVjdC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbdGVtcEV4dGVudF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdHxudWxsfSBUaWxlIHJhbmdlLlxuICAgKi9cbiAgZ2V0VGlsZUNvb3JkQ2hpbGRUaWxlUmFuZ2UodGlsZUNvb3JkLCB0ZW1wVGlsZVJhbmdlLCB0ZW1wRXh0ZW50KSB7XG4gICAgaWYgKHRpbGVDb29yZFswXSA8IHRoaXMubWF4Wm9vbSkge1xuICAgICAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICAgICAgY29uc3QgbWluWCA9IHRpbGVDb29yZFsxXSAqIDI7XG4gICAgICAgIGNvbnN0IG1pblkgPSB0aWxlQ29vcmRbMl0gKiAyO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UoXG4gICAgICAgICAgbWluWCxcbiAgICAgICAgICBtaW5YICsgMSxcbiAgICAgICAgICBtaW5ZLFxuICAgICAgICAgIG1pblkgKyAxLFxuICAgICAgICAgIHRlbXBUaWxlUmFuZ2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KFxuICAgICAgICB0aWxlQ29vcmQsXG4gICAgICAgIHRlbXBFeHRlbnQgfHwgdGhpcy50bXBFeHRlbnRfXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihcbiAgICAgICAgdGlsZUNvb3JkRXh0ZW50LFxuICAgICAgICB0aWxlQ29vcmRbMF0gKyAxLFxuICAgICAgICB0ZW1wVGlsZVJhbmdlXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gW3RlbXBUaWxlUmFuZ2VdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCBvYmplY3QuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fG51bGx9IFRpbGUgcmFuZ2UuXG4gICAqL1xuICBnZXRUaWxlUmFuZ2VGb3JUaWxlQ29vcmRBbmRaKHRpbGVDb29yZCwgeiwgdGVtcFRpbGVSYW5nZSkge1xuICAgIGlmICh6ID4gdGhpcy5tYXhab29tIHx8IHogPCB0aGlzLm1pblpvb20pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHRpbGVDb29yZFogPSB0aWxlQ29vcmRbMF07XG4gICAgY29uc3QgdGlsZUNvb3JkWCA9IHRpbGVDb29yZFsxXTtcbiAgICBjb25zdCB0aWxlQ29vcmRZID0gdGlsZUNvb3JkWzJdO1xuXG4gICAgaWYgKHogPT09IHRpbGVDb29yZFopIHtcbiAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShcbiAgICAgICAgdGlsZUNvb3JkWCxcbiAgICAgICAgdGlsZUNvb3JkWSxcbiAgICAgICAgdGlsZUNvb3JkWCxcbiAgICAgICAgdGlsZUNvb3JkWSxcbiAgICAgICAgdGVtcFRpbGVSYW5nZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy56b29tRmFjdG9yXykge1xuICAgICAgY29uc3QgZmFjdG9yID0gTWF0aC5wb3codGhpcy56b29tRmFjdG9yXywgeiAtIHRpbGVDb29yZFopO1xuICAgICAgY29uc3QgbWluWCA9IE1hdGguZmxvb3IodGlsZUNvb3JkWCAqIGZhY3Rvcik7XG4gICAgICBjb25zdCBtaW5ZID0gTWF0aC5mbG9vcih0aWxlQ29vcmRZICogZmFjdG9yKTtcbiAgICAgIGlmICh6IDwgdGlsZUNvb3JkWikge1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UobWluWCwgbWluWCwgbWluWSwgbWluWSwgdGVtcFRpbGVSYW5nZSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1heFggPSBNYXRoLmZsb29yKGZhY3RvciAqICh0aWxlQ29vcmRYICsgMSkpIC0gMTtcbiAgICAgIGNvbnN0IG1heFkgPSBNYXRoLmZsb29yKGZhY3RvciAqICh0aWxlQ29vcmRZICsgMSkpIC0gMTtcbiAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZLCB0ZW1wVGlsZVJhbmdlKTtcbiAgICB9XG5cbiAgICBjb25zdCB0aWxlQ29vcmRFeHRlbnQgPSB0aGlzLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQsIHRoaXMudG1wRXh0ZW50Xyk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWih0aWxlQ29vcmRFeHRlbnQsIHosIHRlbXBUaWxlUmFuZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZXh0ZW50IGZvciBhIHRpbGUgcmFuZ2UuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW3RlbXBFeHRlbnRdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50IG9iamVjdC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgKi9cbiAgZ2V0VGlsZVJhbmdlRXh0ZW50KHosIHRpbGVSYW5nZSwgdGVtcEV4dGVudCkge1xuICAgIGNvbnN0IG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHopO1xuICAgIGNvbnN0IHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gICAgY29uc3QgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplXyk7XG4gICAgY29uc3QgbWluWCA9IG9yaWdpblswXSArIHRpbGVSYW5nZS5taW5YICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgIGNvbnN0IG1heFggPSBvcmlnaW5bMF0gKyAodGlsZVJhbmdlLm1heFggKyAxKSAqIHRpbGVTaXplWzBdICogcmVzb2x1dGlvbjtcbiAgICBjb25zdCBtaW5ZID0gb3JpZ2luWzFdICsgdGlsZVJhbmdlLm1pblkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgY29uc3QgbWF4WSA9IG9yaWdpblsxXSArICh0aWxlUmFuZ2UubWF4WSArIDEpICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCB0ZW1wRXh0ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSB0aWxlIHJhbmdlIGZvciB0aGUgZ2l2ZW4gZXh0ZW50IGFuZCBpbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBbdGVtcFRpbGVSYW5nZV0gVGVtcG9yYXJ5IHRpbGUgcmFuZ2Ugb2JqZWN0LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gVGlsZSByYW5nZS5cbiAgICovXG4gIGdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6LCB0ZW1wVGlsZVJhbmdlKSB7XG4gICAgdGhpcy5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfKGV4dGVudFswXSwgZXh0ZW50WzNdLCB6LCBmYWxzZSwgdG1wVGlsZUNvb3JkKTtcbiAgICBjb25zdCBtaW5YID0gdG1wVGlsZUNvb3JkWzFdO1xuICAgIGNvbnN0IG1pblkgPSB0bXBUaWxlQ29vcmRbMl07XG4gICAgdGhpcy5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfKGV4dGVudFsyXSwgZXh0ZW50WzFdLCB6LCB0cnVlLCB0bXBUaWxlQ29vcmQpO1xuICAgIGNvbnN0IG1heFggPSB0bXBUaWxlQ29vcmRbMV07XG4gICAgY29uc3QgbWF4WSA9IHRtcFRpbGVDb29yZFsyXTtcbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UobWluWCwgbWF4WCwgbWluWSwgbWF4WSwgdGVtcFRpbGVSYW5nZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRpbGUgY2VudGVyLlxuICAgKi9cbiAgZ2V0VGlsZUNvb3JkQ2VudGVyKHRpbGVDb29yZCkge1xuICAgIGNvbnN0IG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHRpbGVDb29yZFswXSk7XG4gICAgY29uc3QgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih0aWxlQ29vcmRbMF0pO1xuICAgIGNvbnN0IHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUodGlsZUNvb3JkWzBdKSwgdGhpcy50bXBTaXplXyk7XG4gICAgcmV0dXJuIFtcbiAgICAgIG9yaWdpblswXSArICh0aWxlQ29vcmRbMV0gKyAwLjUpICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uLFxuICAgICAgb3JpZ2luWzFdIC0gKHRpbGVDb29yZFsyXSArIDAuNSkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb24sXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGV4dGVudCBvZiBhIHRpbGUgY29vcmRpbmF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFt0ZW1wRXh0ZW50XSBUZW1wb3JhcnkgZXh0ZW50IG9iamVjdC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkLCB0ZW1wRXh0ZW50KSB7XG4gICAgY29uc3Qgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4odGlsZUNvb3JkWzBdKTtcbiAgICBjb25zdCByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgY29uc3QgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh0aWxlQ29vcmRbMF0pLCB0aGlzLnRtcFNpemVfKTtcbiAgICBjb25zdCBtaW5YID0gb3JpZ2luWzBdICsgdGlsZUNvb3JkWzFdICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgIGNvbnN0IG1pblkgPSBvcmlnaW5bMV0gLSAodGlsZUNvb3JkWzJdICsgMSkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgY29uc3QgbWF4WCA9IG1pblggKyB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgY29uc3QgbWF4WSA9IG1pblkgKyB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1pblksIG1heFgsIG1heFksIHRlbXBFeHRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdGlsZSBjb29yZGluYXRlIGZvciB0aGUgZ2l2ZW4gbWFwIGNvb3JkaW5hdGUgYW5kIHJlc29sdXRpb24uICBUaGlzXG4gICAqIG1ldGhvZCBjb25zaWRlcnMgdGhhdCBjb29yZGluYXRlcyB0aGF0IGludGVyc2VjdCB0aWxlIGJvdW5kYXJpZXMgc2hvdWxkIGJlXG4gICAqIGFzc2lnbmVkIHRoZSBoaWdoZXIgdGlsZSBjb29yZGluYXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFtvcHRfdGlsZUNvb3JkXSBEZXN0aW5hdGlvbiBpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkIG9iamVjdC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRUaWxlQ29vcmRGb3JDb29yZEFuZFJlc29sdXRpb24oY29vcmRpbmF0ZSwgcmVzb2x1dGlvbiwgb3B0X3RpbGVDb29yZCkge1xuICAgIHJldHVybiB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8oXG4gICAgICBjb29yZGluYXRlWzBdLFxuICAgICAgY29vcmRpbmF0ZVsxXSxcbiAgICAgIHJlc29sdXRpb24sXG4gICAgICBmYWxzZSxcbiAgICAgIG9wdF90aWxlQ29vcmRcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBzaG91bGQgbm90IGJlIGNhbGxlZCBmb3IgcmVzb2x1dGlvbnMgdGhhdCBjb3JyZXNwb25kXG4gICAqIHRvIGFuIGludGVnZXIgem9vbSBsZXZlbC4gIEluc3RlYWQgY2FsbCB0aGUgYGdldFRpbGVDb29yZEZvclhZQW5kWl9gIG1ldGhvZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbiAoZm9yIGEgbm9uLWludGVnZXIgem9vbSBsZXZlbCkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSBJbnN0ZWFkIG9mIGxldHRpbmcgZWRnZVxuICAgKiAgICAgaW50ZXJzZWN0aW9ucyBnbyB0byB0aGUgaGlnaGVyIHRpbGUgY29vcmRpbmF0ZSwgbGV0IGVkZ2UgaW50ZXJzZWN0aW9uc1xuICAgKiAgICAgZ28gdG8gdGhlIGxvd2VyIHRpbGUgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fKFxuICAgIHgsXG4gICAgeSxcbiAgICByZXNvbHV0aW9uLFxuICAgIHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3ksXG4gICAgb3B0X3RpbGVDb29yZFxuICApIHtcbiAgICBjb25zdCB6ID0gdGhpcy5nZXRaRm9yUmVzb2x1dGlvbihyZXNvbHV0aW9uKTtcbiAgICBjb25zdCBzY2FsZSA9IHJlc29sdXRpb24gLyB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gICAgY29uc3Qgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4oeik7XG4gICAgY29uc3QgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplXyk7XG5cbiAgICBsZXQgdGlsZUNvb3JkWCA9IChzY2FsZSAqICh4IC0gb3JpZ2luWzBdKSkgLyByZXNvbHV0aW9uIC8gdGlsZVNpemVbMF07XG4gICAgbGV0IHRpbGVDb29yZFkgPSAoc2NhbGUgKiAob3JpZ2luWzFdIC0geSkpIC8gcmVzb2x1dGlvbiAvIHRpbGVTaXplWzFdO1xuXG4gICAgaWYgKHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kpIHtcbiAgICAgIHRpbGVDb29yZFggPSBjZWlsKHRpbGVDb29yZFgsIERFQ0lNQUxTKSAtIDE7XG4gICAgICB0aWxlQ29vcmRZID0gY2VpbCh0aWxlQ29vcmRZLCBERUNJTUFMUykgLSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aWxlQ29vcmRYID0gZmxvb3IodGlsZUNvb3JkWCwgREVDSU1BTFMpO1xuICAgICAgdGlsZUNvb3JkWSA9IGZsb29yKHRpbGVDb29yZFksIERFQ0lNQUxTKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmQoeiwgdGlsZUNvb3JkWCwgdGlsZUNvb3JkWSwgb3B0X3RpbGVDb29yZCk7XG4gIH1cblxuICAvKipcbiAgICogQWx0aG91Z2ggdGhlcmUgaXMgcmVwZXRpdGlvbiBiZXR3ZWVuIHRoaXMgbWV0aG9kIGFuZCBgZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uX2AsXG4gICAqIHRoZXkgc2hvdWxkIGhhdmUgc2VwYXJhdGUgaW1wbGVtZW50YXRpb25zLiAgVGhpcyBtZXRob2QgaXMgZm9yIGludGVnZXIgem9vbVxuICAgKiBsZXZlbHMuICBUaGUgb3RoZXIgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmb3IgcmVzb2x1dGlvbnMgY29ycmVzcG9uZGluZ1xuICAgKiB0byBub24taW50ZWdlciB6b29tIGxldmVscy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggTWFwIHggY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgTWFwIHkgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgSW5zdGVhZCBvZiBsZXR0aW5nIGVkZ2VcbiAgICogICAgIGludGVyc2VjdGlvbnMgZ28gdG8gdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUsIGxldCBlZGdlIGludGVyc2VjdGlvbnNcbiAgICogICAgIGdvIHRvIHRoZSBsb3dlciB0aWxlIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gW29wdF90aWxlQ29vcmRdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkIG9iamVjdC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyh4LCB5LCB6LCByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5LCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgY29uc3Qgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4oeik7XG4gICAgY29uc3QgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICBjb25zdCB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemVfKTtcblxuICAgIGxldCB0aWxlQ29vcmRYID0gKHggLSBvcmlnaW5bMF0pIC8gcmVzb2x1dGlvbiAvIHRpbGVTaXplWzBdO1xuICAgIGxldCB0aWxlQ29vcmRZID0gKG9yaWdpblsxXSAtIHkpIC8gcmVzb2x1dGlvbiAvIHRpbGVTaXplWzFdO1xuXG4gICAgaWYgKHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kpIHtcbiAgICAgIHRpbGVDb29yZFggPSBjZWlsKHRpbGVDb29yZFgsIERFQ0lNQUxTKSAtIDE7XG4gICAgICB0aWxlQ29vcmRZID0gY2VpbCh0aWxlQ29vcmRZLCBERUNJTUFMUykgLSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aWxlQ29vcmRYID0gZmxvb3IodGlsZUNvb3JkWCwgREVDSU1BTFMpO1xuICAgICAgdGlsZUNvb3JkWSA9IGZsb29yKHRpbGVDb29yZFksIERFQ0lNQUxTKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmQoeiwgdGlsZUNvb3JkWCwgdGlsZUNvb3JkWSwgb3B0X3RpbGVDb29yZCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgdGlsZSBjb29yZGluYXRlIGdpdmVuIGEgbWFwIGNvb3JkaW5hdGUgYW5kIHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gW29wdF90aWxlQ29vcmRdIERlc3RpbmF0aW9uIGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFRpbGVDb29yZEZvckNvb3JkQW5kWihjb29yZGluYXRlLCB6LCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyhcbiAgICAgIGNvb3JkaW5hdGVbMF0sXG4gICAgICBjb29yZGluYXRlWzFdLFxuICAgICAgeixcbiAgICAgIGZhbHNlLFxuICAgICAgb3B0X3RpbGVDb29yZFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcmVzb2x1dGlvbi5cbiAgICovXG4gIGdldFRpbGVDb29yZFJlc29sdXRpb24odGlsZUNvb3JkKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfW3RpbGVDb29yZFswXV07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB0aWxlIHNpemUgZm9yIGEgem9vbSBsZXZlbC4gVGhlIHR5cGUgb2YgdGhlIHJldHVybiB2YWx1ZSBtYXRjaGVzIHRoZVxuICAgKiBgdGlsZVNpemVgIG9yIGB0aWxlU2l6ZXNgIHRoYXQgdGhlIHRpbGUgZ3JpZCB3YXMgY29uZmlndXJlZCB3aXRoLiBUbyBhbHdheXNcbiAgICogZ2V0IGFuIHtAbGluayBpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9LCBydW4gdGhlIHJlc3VsdCB0aHJvdWdoIHtAbGluayBtb2R1bGU6b2wvc2l6ZS50b1NpemV9LlxuICAgKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBUaWxlIHNpemUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFRpbGVTaXplKHopIHtcbiAgICBpZiAodGhpcy50aWxlU2l6ZV8pIHtcbiAgICAgIHJldHVybiB0aGlzLnRpbGVTaXplXztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudGlsZVNpemVzX1t6XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0geiBab29tIGxldmVsLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gRXh0ZW50IHRpbGUgcmFuZ2UgZm9yIHRoZSBzcGVjaWZpZWQgem9vbSBsZXZlbC5cbiAgICovXG4gIGdldEZ1bGxUaWxlUmFuZ2Uoeikge1xuICAgIGlmICghdGhpcy5mdWxsVGlsZVJhbmdlc18pIHtcbiAgICAgIHJldHVybiB0aGlzLmV4dGVudF9cbiAgICAgICAgPyB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoodGhpcy5leHRlbnRfLCB6KVxuICAgICAgICA6IG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZ1bGxUaWxlUmFuZ2VzX1t6XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFtvcHRfZGlyZWN0aW9uXVxuICAgKiAgICAgSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAqICAgICBJZiAxLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiAobG93ZXIgWikgd2lsbCBiZSB1c2VkLiBJZiAtMSwgdGhlXG4gICAqICAgICBuZWFyZXN0IGxvd2VyIHJlc29sdXRpb24gKGhpZ2hlciBaKSB3aWxsIGJlIHVzZWQuIERlZmF1bHQgaXMgMC5cbiAgICogICAgIFVzZSBhIHtAbGluayBtb2R1bGU6b2wvYXJyYXl+TmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBmb3IgbW9yZSBwcmVjaXNlIGNvbnRyb2wuXG4gICAqXG4gICAqIEZvciBleGFtcGxlIHRvIGNoYW5nZSB0aWxlIFogYXQgdGhlIG1pZHBvaW50IG9mIHpvb20gbGV2ZWxzXG4gICAqIGBgYGpzXG4gICAqIGZ1bmN0aW9uKHZhbHVlLCBoaWdoLCBsb3cpIHtcbiAgICogICByZXR1cm4gdmFsdWUgLSBsb3cgKiBNYXRoLnNxcnQoaGlnaCAvIGxvdyk7XG4gICAqIH1cbiAgICogYGBgXG4gICAqIEByZXR1cm4ge251bWJlcn0gWi5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0WkZvclJlc29sdXRpb24ocmVzb2x1dGlvbiwgb3B0X2RpcmVjdGlvbikge1xuICAgIGNvbnN0IHogPSBsaW5lYXJGaW5kTmVhcmVzdChcbiAgICAgIHRoaXMucmVzb2x1dGlvbnNfLFxuICAgICAgcmVzb2x1dGlvbixcbiAgICAgIG9wdF9kaXJlY3Rpb24gfHwgMFxuICAgICk7XG4gICAgcmV0dXJuIGNsYW1wKHosIHRoaXMubWluWm9vbSwgdGhpcy5tYXhab29tKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdGlsZSB3aXRoIHRoZSBwcm92aWRlZCB0aWxlIGNvb3JkaW5hdGUgaW50ZXJzZWN0cyB0aGUgZ2l2ZW4gdmlld3BvcnQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KCcuLi90aWxlY29vcmQuanMnKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gdmlld3BvcnQgVmlld3BvcnQgYXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOm9sL2V4dGVudC5nZXRSb3RhdGVkVmlld3BvcnR9LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSB3aXRoIHRoZSBwcm92aWRlZCB0aWxlIGNvb3JkaW5hdGUgaW50ZXJzZWN0cyB0aGUgZ2l2ZW4gdmlld3BvcnQuXG4gICAqL1xuICB0aWxlQ29vcmRJbnRlcnNlY3RzVmlld3BvcnQodGlsZUNvb3JkLCB2aWV3cG9ydCkge1xuICAgIHJldHVybiBpbnRlcnNlY3RzTGluZWFyUmluZyhcbiAgICAgIHZpZXdwb3J0LFxuICAgICAgMCxcbiAgICAgIHZpZXdwb3J0Lmxlbmd0aCxcbiAgICAgIDIsXG4gICAgICB0aGlzLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50IGZvciB0aGlzIHRpbGUgZ3JpZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhbGN1bGF0ZVRpbGVSYW5nZXNfKGV4dGVudCkge1xuICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aDtcbiAgICBjb25zdCBmdWxsVGlsZVJhbmdlcyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgIGZvciAobGV0IHogPSB0aGlzLm1pblpvb207IHogPCBsZW5ndGg7ICsreikge1xuICAgICAgZnVsbFRpbGVSYW5nZXNbel0gPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICB9XG4gICAgdGhpcy5mdWxsVGlsZVJhbmdlc18gPSBmdWxsVGlsZVJhbmdlcztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaWxlR3JpZDtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZC9jb21tb25cbiAqL1xuXG4vKipcbiAqIERlZmF1bHQgbWF4aW11bSB6b29tIGZvciBkZWZhdWx0IHRpbGUgZ3JpZHMuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9NQVhfWk9PTSA9IDQyO1xuXG4vKipcbiAqIERlZmF1bHQgdGlsZSBzaXplLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfVElMRV9TSVpFID0gMjU2O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RyYW5zZm9ybVxuICovXG5pbXBvcnQge1dPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcblxuLyoqXG4gKiBBbiBhcnJheSByZXByZXNlbnRpbmcgYW4gYWZmaW5lIDJkIHRyYW5zZm9ybWF0aW9uIGZvciB1c2Ugd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC90cmFuc2Zvcm19IGZ1bmN0aW9ucy4gVGhlIGFycmF5IGhhcyA2IGVsZW1lbnRzLlxuICogQHR5cGVkZWYgeyFBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1cbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIENvbGxlY3Rpb24gb2YgYWZmaW5lIDJkIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucy4gVGhlIGZ1bmN0aW9ucyB3b3JrIG9uIGFuXG4gKiBhcnJheSBvZiA2IGVsZW1lbnRzLiBUaGUgZWxlbWVudCBvcmRlciBpcyBjb21wYXRpYmxlIHdpdGggdGhlIFtTVkdNYXRyaXhcbiAqIGludGVyZmFjZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NWR01hdHJpeCkgYW5kIGlzXG4gKiBhIHN1YnNldCAoZWxlbWVudHMgYSB0byBmKSBvZiBhIDPDlzMgbWF0cml4OlxuICogYGBgXG4gKiBbIGEgYyBlIF1cbiAqIFsgYiBkIGYgXVxuICogWyAwIDAgMSBdXG4gKiBgYGBcbiAqL1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAdHlwZSB7VHJhbnNmb3JtfVxuICovXG5jb25zdCB0bXBfID0gbmV3IEFycmF5KDYpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpZGVudGl0eSB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBJZGVudGl0eSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHJldHVybiBbMSwgMCwgMCwgMSwgMCwgMF07XG59XG5cbi8qKlxuICogUmVzZXRzIHRoZSBnaXZlbiB0cmFuc2Zvcm0gdG8gYW4gaWRlbnRpdHkgdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXQodHJhbnNmb3JtKSB7XG4gIHJldHVybiBzZXQodHJhbnNmb3JtLCAxLCAwLCAwLCAxLCAwLCAwKTtcbn1cblxuLyoqXG4gKiBNdWx0aXBseSB0aGUgdW5kZXJseWluZyBtYXRyaWNlcyBvZiB0d28gdHJhbnNmb3JtcyBhbmQgcmV0dXJuIHRoZSByZXN1bHQgaW5cbiAqIHRoZSBmaXJzdCB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDEuXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTIgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDIuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0xIG11bHRpcGxpZWQgd2l0aCB0cmFuc2Zvcm0yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkodHJhbnNmb3JtMSwgdHJhbnNmb3JtMikge1xuICBjb25zdCBhMSA9IHRyYW5zZm9ybTFbMF07XG4gIGNvbnN0IGIxID0gdHJhbnNmb3JtMVsxXTtcbiAgY29uc3QgYzEgPSB0cmFuc2Zvcm0xWzJdO1xuICBjb25zdCBkMSA9IHRyYW5zZm9ybTFbM107XG4gIGNvbnN0IGUxID0gdHJhbnNmb3JtMVs0XTtcbiAgY29uc3QgZjEgPSB0cmFuc2Zvcm0xWzVdO1xuICBjb25zdCBhMiA9IHRyYW5zZm9ybTJbMF07XG4gIGNvbnN0IGIyID0gdHJhbnNmb3JtMlsxXTtcbiAgY29uc3QgYzIgPSB0cmFuc2Zvcm0yWzJdO1xuICBjb25zdCBkMiA9IHRyYW5zZm9ybTJbM107XG4gIGNvbnN0IGUyID0gdHJhbnNmb3JtMls0XTtcbiAgY29uc3QgZjIgPSB0cmFuc2Zvcm0yWzVdO1xuXG4gIHRyYW5zZm9ybTFbMF0gPSBhMSAqIGEyICsgYzEgKiBiMjtcbiAgdHJhbnNmb3JtMVsxXSA9IGIxICogYTIgKyBkMSAqIGIyO1xuICB0cmFuc2Zvcm0xWzJdID0gYTEgKiBjMiArIGMxICogZDI7XG4gIHRyYW5zZm9ybTFbM10gPSBiMSAqIGMyICsgZDEgKiBkMjtcbiAgdHJhbnNmb3JtMVs0XSA9IGExICogZTIgKyBjMSAqIGYyICsgZTE7XG4gIHRyYW5zZm9ybTFbNV0gPSBiMSAqIGUyICsgZDEgKiBmMiArIGYxO1xuXG4gIHJldHVybiB0cmFuc2Zvcm0xO1xufVxuXG4vKipcbiAqIFNldCB0aGUgdHJhbnNmb3JtIGNvbXBvbmVudHMgYS1mIG9uIGEgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGEgVGhlIGEgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYiBUaGUgYiBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBjIFRoZSBjIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGQgVGhlIGQgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZSBUaGUgZSBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmIFRoZSBmIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gTWF0cml4IHdpdGggdHJhbnNmb3JtIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXQodHJhbnNmb3JtLCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIHRyYW5zZm9ybVswXSA9IGE7XG4gIHRyYW5zZm9ybVsxXSA9IGI7XG4gIHRyYW5zZm9ybVsyXSA9IGM7XG4gIHRyYW5zZm9ybVszXSA9IGQ7XG4gIHRyYW5zZm9ybVs0XSA9IGU7XG4gIHRyYW5zZm9ybVs1XSA9IGY7XG4gIHJldHVybiB0cmFuc2Zvcm07XG59XG5cbi8qKlxuICogU2V0IHRyYW5zZm9ybSBvbiBvbmUgbWF0cml4IGZyb20gYW5vdGhlciBtYXRyaXguXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgTWF0cml4IHRvIHNldCB0cmFuc2Zvcm0gdG8uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTIgTWF0cml4IHRvIHNldCB0cmFuc2Zvcm0gZnJvbS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgd2l0aCB0cmFuc2Zvcm0gZnJvbSB0cmFuc2Zvcm0yIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRGcm9tQXJyYXkodHJhbnNmb3JtMSwgdHJhbnNmb3JtMikge1xuICB0cmFuc2Zvcm0xWzBdID0gdHJhbnNmb3JtMlswXTtcbiAgdHJhbnNmb3JtMVsxXSA9IHRyYW5zZm9ybTJbMV07XG4gIHRyYW5zZm9ybTFbMl0gPSB0cmFuc2Zvcm0yWzJdO1xuICB0cmFuc2Zvcm0xWzNdID0gdHJhbnNmb3JtMlszXTtcbiAgdHJhbnNmb3JtMVs0XSA9IHRyYW5zZm9ybTJbNF07XG4gIHRyYW5zZm9ybTFbNV0gPSB0cmFuc2Zvcm0yWzVdO1xuICByZXR1cm4gdHJhbnNmb3JtMTtcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSBnaXZlbiBjb29yZGluYXRlIHdpdGggdGhlIGdpdmVuIHRyYW5zZm9ybSByZXR1cm5pbmcgdGhlXG4gKiByZXN1bHRpbmcsIHRyYW5zZm9ybWVkIGNvb3JkaW5hdGUuIFRoZSBjb29yZGluYXRlIHdpbGwgYmUgbW9kaWZpZWQgaW4tcGxhY2UuXG4gKlxuICogQHBhcmFtIHtUcmFuc2Zvcm19IHRyYW5zZm9ybSBUaGUgdHJhbnNmb3JtYXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfGltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IGNvb3JkaW5hdGUgVGhlIGNvb3JkaW5hdGUgdG8gdHJhbnNmb3JtLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcmV0dXJuIGNvb3JkaW5hdGUgc28gdGhhdCBvcGVyYXRpb25zIGNhbiBiZVxuICogICAgIGNoYWluZWQgdG9nZXRoZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseSh0cmFuc2Zvcm0sIGNvb3JkaW5hdGUpIHtcbiAgY29uc3QgeCA9IGNvb3JkaW5hdGVbMF07XG4gIGNvbnN0IHkgPSBjb29yZGluYXRlWzFdO1xuICBjb29yZGluYXRlWzBdID0gdHJhbnNmb3JtWzBdICogeCArIHRyYW5zZm9ybVsyXSAqIHkgKyB0cmFuc2Zvcm1bNF07XG4gIGNvb3JkaW5hdGVbMV0gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG5cbi8qKlxuICogQXBwbGllcyByb3RhdGlvbiB0byB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIEFuZ2xlIGluIHJhZGlhbnMuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgcm90YXRlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUodHJhbnNmb3JtLCBhbmdsZSkge1xuICBjb25zdCBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gIGNvbnN0IHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgcmV0dXJuIG11bHRpcGx5KHRyYW5zZm9ybSwgc2V0KHRtcF8sIGNvcywgc2luLCAtc2luLCBjb3MsIDAsIDApKTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIHNjYWxlIHRvIGEgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IHggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0geSBTY2FsZSBmYWN0b3IgeS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBzY2FsZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUodHJhbnNmb3JtLCB4LCB5KSB7XG4gIHJldHVybiBtdWx0aXBseSh0cmFuc2Zvcm0sIHNldCh0bXBfLCB4LCAwLCAwLCB5LCAwLCAwKSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHNjYWxlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdGFyZ2V0IFRyYW5zZm9ybSB0byBvdmVyd3JpdGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBTY2FsZSBmYWN0b3IgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFNjYWxlIGZhY3RvciB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHNjYWxlIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTY2FsZSh0YXJnZXQsIHgsIHkpIHtcbiAgcmV0dXJuIHNldCh0YXJnZXQsIHgsIDAsIDAsIHksIDAsIDApO1xufVxuXG4vKipcbiAqIEFwcGxpZXMgdHJhbnNsYXRpb24gdG8gdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeCBUcmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5IFRyYW5zbGF0aW9uIHkuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgdHJhbnNsYXRlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUodHJhbnNmb3JtLCBkeCwgZHkpIHtcbiAgcmV0dXJuIG11bHRpcGx5KHRyYW5zZm9ybSwgc2V0KHRtcF8sIDEsIDAsIDAsIDEsIGR4LCBkeSkpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjb21wb3NpdGUgdHJhbnNmb3JtIGdpdmVuIGFuIGluaXRpYWwgdHJhbnNsYXRpb24sIHNjYWxlLCByb3RhdGlvbiwgYW5kXG4gKiBmaW5hbCB0cmFuc2xhdGlvbiAoaW4gdGhhdCBvcmRlciBvbmx5LCBub3QgY29tbXV0YXRpdmUpLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVGhlIHRyYW5zZm9ybSAod2lsbCBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgxIEluaXRpYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTEgSW5pdGlhbCB0cmFuc2xhdGlvbiB5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciB5LlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIChpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDIgRmluYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTIgRmluYWwgdHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBjb21wb3NpdGUgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZSh0cmFuc2Zvcm0sIGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5Mikge1xuICBjb25zdCBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gIGNvbnN0IGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgdHJhbnNmb3JtWzBdID0gc3ggKiBjb3M7XG4gIHRyYW5zZm9ybVsxXSA9IHN5ICogc2luO1xuICB0cmFuc2Zvcm1bMl0gPSAtc3ggKiBzaW47XG4gIHRyYW5zZm9ybVszXSA9IHN5ICogY29zO1xuICB0cmFuc2Zvcm1bNF0gPSBkeDIgKiBzeCAqIGNvcyAtIGR5MiAqIHN4ICogc2luICsgZHgxO1xuICB0cmFuc2Zvcm1bNV0gPSBkeDIgKiBzeSAqIHNpbiArIGR5MiAqIHN5ICogY29zICsgZHkxO1xuICByZXR1cm4gdHJhbnNmb3JtO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjb21wb3NpdGUgdHJhbnNmb3JtIGdpdmVuIGFuIGluaXRpYWwgdHJhbnNsYXRpb24sIHNjYWxlLCByb3RhdGlvbiwgYW5kXG4gKiBmaW5hbCB0cmFuc2xhdGlvbiAoaW4gdGhhdCBvcmRlciBvbmx5LCBub3QgY29tbXV0YXRpdmUpLiBUaGUgcmVzdWx0aW5nIHRyYW5zZm9ybVxuICogc3RyaW5nIGNhbiBiZSBhcHBsaWVkIGFzIGB0cmFuc2Zvcm1gIHByb3BlcnR5IG9mIGFuIEhUTUxFbGVtZW50J3Mgc3R5bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgxIEluaXRpYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTEgSW5pdGlhbCB0cmFuc2xhdGlvbiB5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciB5LlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIChpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDIgRmluYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTIgRmluYWwgdHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbXBvc2l0ZSBjc3MgdHJhbnNmb3JtLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZUNzc1RyYW5zZm9ybShkeDEsIGR5MSwgc3gsIHN5LCBhbmdsZSwgZHgyLCBkeTIpIHtcbiAgcmV0dXJuIHRvU3RyaW5nKGNvbXBvc2UoY3JlYXRlKCksIGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5MikpO1xufVxuXG4vKipcbiAqIEludmVydCB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBzb3VyY2UgVGhlIHNvdXJjZSB0cmFuc2Zvcm0gdG8gaW52ZXJ0LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIGludmVydGVkIChzb3VyY2UpIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmVydChzb3VyY2UpIHtcbiAgcmV0dXJuIG1ha2VJbnZlcnNlKHNvdXJjZSwgc291cmNlKTtcbn1cblxuLyoqXG4gKiBJbnZlcnQgdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdGFyZ2V0IFRyYW5zZm9ybSB0byBiZSBzZXQgYXMgdGhlIGludmVyc2Ugb2ZcbiAqICAgICB0aGUgc291cmNlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gc291cmNlIFRoZSBzb3VyY2UgdHJhbnNmb3JtIHRvIGludmVydC5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBpbnZlcnRlZCAodGFyZ2V0KSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlSW52ZXJzZSh0YXJnZXQsIHNvdXJjZSkge1xuICBjb25zdCBkZXQgPSBkZXRlcm1pbmFudChzb3VyY2UpO1xuICBhc3NlcnQoZGV0ICE9PSAwLCAzMik7IC8vIFRyYW5zZm9ybWF0aW9uIG1hdHJpeCBjYW5ub3QgYmUgaW52ZXJ0ZWRcblxuICBjb25zdCBhID0gc291cmNlWzBdO1xuICBjb25zdCBiID0gc291cmNlWzFdO1xuICBjb25zdCBjID0gc291cmNlWzJdO1xuICBjb25zdCBkID0gc291cmNlWzNdO1xuICBjb25zdCBlID0gc291cmNlWzRdO1xuICBjb25zdCBmID0gc291cmNlWzVdO1xuXG4gIHRhcmdldFswXSA9IGQgLyBkZXQ7XG4gIHRhcmdldFsxXSA9IC1iIC8gZGV0O1xuICB0YXJnZXRbMl0gPSAtYyAvIGRldDtcbiAgdGFyZ2V0WzNdID0gYSAvIGRldDtcbiAgdGFyZ2V0WzRdID0gKGMgKiBmIC0gZCAqIGUpIC8gZGV0O1xuICB0YXJnZXRbNV0gPSAtKGEgKiBmIC0gYiAqIGUpIC8gZGV0O1xuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZGV0ZXJtaW5hbnQgb2YgdGhlIGdpdmVuIG1hdHJpeC5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gbWF0IE1hdHJpeC5cbiAqIEByZXR1cm4ge251bWJlcn0gRGV0ZXJtaW5hbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmFudChtYXQpIHtcbiAgcmV0dXJuIG1hdFswXSAqIG1hdFszXSAtIG1hdFsxXSAqIG1hdFsyXTtcbn1cblxuLyoqXG4gKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gKiBAcHJpdmF0ZVxuICovXG5sZXQgdHJhbnNmb3JtU3RyaW5nRGl2O1xuXG4vKipcbiAqIEEgcm91bmRlZCBzdHJpbmcgdmVyc2lvbiBvZiB0aGUgdHJhbnNmb3JtLiAgVGhpcyBjYW4gYmUgdXNlZFxuICogZm9yIENTUyB0cmFuc2Zvcm1zLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBtYXQgTWF0cml4LlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgdHJhbnNmb3JtIGFzIGEgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmcobWF0KSB7XG4gIGNvbnN0IHRyYW5zZm9ybVN0cmluZyA9ICdtYXRyaXgoJyArIG1hdC5qb2luKCcsICcpICsgJyknO1xuICBpZiAoV09SS0VSX09GRlNDUkVFTl9DQU5WQVMpIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtU3RyaW5nO1xuICB9XG4gIGNvbnN0IG5vZGUgPVxuICAgIHRyYW5zZm9ybVN0cmluZ0RpdiB8fCAodHJhbnNmb3JtU3RyaW5nRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xuICBub2RlLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVN0cmluZztcbiAgcmV0dXJuIG5vZGUuc3R5bGUudHJhbnNmb3JtO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3V0aWxcbiAqL1xuXG4vKipcbiAqIEByZXR1cm4ge25ldmVyfSBBbnkgcmV0dXJuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWJzdHJhY3QoKSB7XG4gIHRocm93IG5ldyBFcnJvcignVW5pbXBsZW1lbnRlZCBhYnN0cmFjdCBtZXRob2QuJyk7XG59XG5cbi8qKlxuICogQ291bnRlciBmb3IgZ2V0VWlkLlxuICogQHR5cGUge251bWJlcn1cbiAqIEBwcml2YXRlXG4gKi9cbmxldCB1aWRDb3VudGVyXyA9IDA7XG5cbi8qKlxuICogR2V0cyBhIHVuaXF1ZSBJRCBmb3IgYW4gb2JqZWN0LiBUaGlzIG11dGF0ZXMgdGhlIG9iamVjdCBzbyB0aGF0IGZ1cnRoZXIgY2FsbHNcbiAqIHdpdGggdGhlIHNhbWUgb2JqZWN0IGFzIGEgcGFyYW1ldGVyIHJldHVybnMgdGhlIHNhbWUgdmFsdWUuIFVuaXF1ZSBJRHMgYXJlIGdlbmVyYXRlZFxuICogYXMgYSBzdHJpY3RseSBpbmNyZWFzaW5nIHNlcXVlbmNlLiBBZGFwdGVkIGZyb20gZ29vZy5nZXRVaWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGdldCB0aGUgdW5pcXVlIElEIGZvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHVuaXF1ZSBJRCBmb3IgdGhlIG9iamVjdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVpZChvYmopIHtcbiAgcmV0dXJuIG9iai5vbF91aWQgfHwgKG9iai5vbF91aWQgPSBTdHJpbmcoKyt1aWRDb3VudGVyXykpO1xufVxuXG4vKipcbiAqIE9wZW5MYXllcnMgdmVyc2lvbi5cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBWRVJTSU9OID0gJzcuMy4wJztcbiJdLCJuYW1lcyI6WyJwcm94eU1hcmtlciIsIlN5bWJvbCIsImNyZWF0ZUVuZHBvaW50IiwicmVsZWFzZVByb3h5IiwiZmluYWxpemVyIiwidGhyb3dNYXJrZXIiLCJpc09iamVjdCIsInZhbCIsInRyYW5zZmVySGFuZGxlcnMiLCJNYXAiLCJjYW5IYW5kbGUiLCJzZXJpYWxpemUiLCJvYmoiLCJwb3J0MSIsInBvcnQyIiwiTWVzc2FnZUNoYW5uZWwiLCJleHBvc2UiLCJkZXNlcmlhbGl6ZSIsInBvcnQiLCJzdGFydCIsIndyYXAiLCJ2YWx1ZSIsInNlcmlhbGl6ZWQiLCJFcnJvciIsImlzRXJyb3IiLCJtZXNzYWdlIiwibmFtZSIsInN0YWNrIiwiT2JqZWN0IiwiYXNzaWduIiwiZXAiLCJnbG9iYWxUaGlzIiwiYWxsb3dlZE9yaWdpbnMiLCJhZGRFdmVudExpc3RlbmVyIiwiY2FsbGJhY2siLCJldiIsImRhdGEiLCJvcmlnaW4iLCJhbGxvd2VkT3JpZ2luIiwiUmVnRXhwIiwidGVzdCIsImlzQWxsb3dlZE9yaWdpbiIsImNvbnNvbGUiLCJ3YXJuIiwiaWQiLCJ0eXBlIiwicGF0aCIsImFyZ3VtZW50TGlzdCIsIm1hcCIsImZyb21XaXJlVmFsdWUiLCJyZXR1cm5WYWx1ZSIsInBhcmVudCIsInNsaWNlIiwicmVkdWNlIiwicHJvcCIsInJhd1ZhbHVlIiwiYXBwbHkiLCJwcm94eSIsInRyYW5zZmVycyIsInRyYW5zZmVyQ2FjaGUiLCJzZXQiLCJ0cmFuc2ZlciIsInVuZGVmaW5lZCIsIlByb21pc2UiLCJyZXNvbHZlIiwiY2F0Y2giLCJ0aGVuIiwid2lyZVZhbHVlIiwidHJhbnNmZXJhYmxlcyIsInRvV2lyZVZhbHVlIiwicG9zdE1lc3NhZ2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VFbmRQb2ludCIsImVycm9yIiwiVHlwZUVycm9yIiwiZW5kcG9pbnQiLCJjb25zdHJ1Y3RvciIsImlzTWVzc2FnZVBvcnQiLCJjbG9zZSIsInRhcmdldCIsImNyZWF0ZVByb3h5IiwidGhyb3dJZlByb3h5UmVsZWFzZWQiLCJpc1JlbGVhc2VkIiwicmVsZWFzZUVuZHBvaW50IiwicmVxdWVzdFJlc3BvbnNlTWVzc2FnZSIsInByb3h5Q291bnRlciIsIldlYWtNYXAiLCJwcm94eUZpbmFsaXplcnMiLCJGaW5hbGl6YXRpb25SZWdpc3RyeSIsIm5ld0NvdW50IiwiZ2V0IiwiaXNQcm94eVJlbGVhc2VkIiwiUHJveHkiLCJfdGFyZ2V0IiwidW5yZWdpc3RlciIsInVucmVnaXN0ZXJQcm94eSIsImxlbmd0aCIsInIiLCJwIiwidG9TdHJpbmciLCJiaW5kIiwiX3RoaXNBcmciLCJyYXdBcmd1bWVudExpc3QiLCJsYXN0IiwicHJvY2Vzc0FyZ3VtZW50cyIsImNvbnN0cnVjdCIsInJlZ2lzdGVyIiwicmVnaXN0ZXJQcm94eSIsInByb2Nlc3NlZCIsInYiLCJhcnIiLCJBcnJheSIsInByb3RvdHlwZSIsImNvbmNhdCIsImhhbmRsZXIiLCJzZXJpYWxpemVkVmFsdWUiLCJtc2ciLCJmaWxsIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiTnVtYmVyIiwiTUFYX1NBRkVfSU5URUdFUiIsImpvaW4iLCJsIiwibWVzc2FnZXMiLCJBc3NlcnRpb25FcnJvciIsImNvZGUiLCJzdXBlciIsInRoaXMiLCJkaXNwb3NlZCIsImRpc3Bvc2UiLCJkaXNwb3NlSW50ZXJuYWwiLCJJbWFnZVRpbGUiLCJUaWxlIiwidGlsZUNvb3JkIiwic3RhdGUiLCJzcmMiLCJjcm9zc09yaWdpbiIsInRpbGVMb2FkRnVuY3Rpb24iLCJvcHRpb25zIiwiY3Jvc3NPcmlnaW5fIiwic3JjXyIsImtleSIsImltYWdlXyIsIkltYWdlIiwidW5saXN0ZW5fIiwidGlsZUxvYWRGdW5jdGlvbl8iLCJnZXRJbWFnZSIsInNldEltYWdlIiwiZWxlbWVudCIsIlRpbGVTdGF0ZSIsInVubGlzdGVuSW1hZ2VfIiwiY2hhbmdlZCIsImhhbmRsZUltYWdlRXJyb3JfIiwiY3R4IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJjYW52YXMiLCJnZXRCbGFua0ltYWdlIiwiaGFuZGxlSW1hZ2VMb2FkXyIsImltYWdlIiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsImxvYWQiLCJsb2FkSGFuZGxlciIsImVycm9ySGFuZGxlciIsImltZyIsImxpc3RlbmluZyIsImRlY29kaW5nIiwibG9hZGVkIiwibGlzdGVuZXJLZXlzIiwiRXZlbnRUeXBlIiwiZGVjb2RlIiwicHVzaCIsImZvckVhY2giLCJsaXN0ZW5JbWFnZSIsIlByb3BlcnR5IiwiQ29sbGVjdGlvbkV2ZW50IiwiRXZlbnQiLCJpbmRleCIsIkNvbGxlY3Rpb24iLCJhcnJheSIsIm9uIiwib25jZSIsInVuIiwidW5pcXVlXyIsInVuaXF1ZSIsImFycmF5XyIsImkiLCJpaSIsImFzc2VydFVuaXF1ZV8iLCJ1cGRhdGVMZW5ndGhfIiwiY2xlYXIiLCJnZXRMZW5ndGgiLCJwb3AiLCJleHRlbmQiLCJmIiwiZ2V0QXJyYXkiLCJpdGVtIiwiaW5zZXJ0QXQiLCJlbGVtIiwic3BsaWNlIiwiZGlzcGF0Y2hFdmVudCIsIkNvbGxlY3Rpb25FdmVudFR5cGUiLCJyZW1vdmVBdCIsIm4iLCJyZW1vdmUiLCJwcmV2Iiwic2V0QXQiLCJleGNlcHQiLCJnZXRLZXkiLCJjb2xvciIsInNoYXJlZCIsImNhY2hlXyIsImNhY2hlU2l6ZV8iLCJtYXhDYWNoZVNpemVfIiwiY2FuRXhwaXJlQ2FjaGUiLCJleHBpcmUiLCJpY29uSW1hZ2UiLCJoYXNMaXN0ZW5lciIsInNldFNpemUiLCJtYXhDYWNoZVNpemUiLCJNYXBSZW5kZXJlciIsIkRpc3Bvc2FibGUiLCJtYXBfIiwiZGlzcGF0Y2hSZW5kZXJFdmVudCIsImZyYW1lU3RhdGUiLCJjYWxjdWxhdGVNYXRyaWNlczJEIiwidmlld1N0YXRlIiwiY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0iLCJwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSIsInNpemUiLCJyZXNvbHV0aW9uIiwicm90YXRpb24iLCJjZW50ZXIiLCJmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSIsImNvb3JkaW5hdGUiLCJoaXRUb2xlcmFuY2UiLCJjaGVja1dyYXBwZWQiLCJ0aGlzQXJnIiwibGF5ZXJGaWx0ZXIiLCJ0aGlzQXJnMiIsInJlc3VsdCIsIm1hbmFnZWQiLCJmZWF0dXJlIiwibGF5ZXIiLCJnZW9tZXRyeSIsImNhbGwiLCJwcm9qZWN0aW9uIiwidHJhbnNsYXRlZENvb3JkaW5hdGUiLCJvZmZzZXRzIiwiY2FuV3JhcFgiLCJwcm9qZWN0aW9uRXh0ZW50IiwiZ2V0RXh0ZW50Iiwid29ybGRXaWR0aCIsImxheWVyU3RhdGVzIiwibGF5ZXJTdGF0ZXNBcnJheSIsIm51bUxheWVycyIsIm1hdGNoZXMiLCJ0bXBDb29yZCIsImoiLCJsYXllclN0YXRlIiwiaGFzUmVuZGVyZXIiLCJsYXllclJlbmRlcmVyIiwiZ2V0UmVuZGVyZXIiLCJzb3VyY2UiLCJnZXRTb3VyY2UiLCJjb29yZGluYXRlcyIsImdldFdyYXBYIiwib3JkZXIiLCJtIiwiZGlzdGFuY2VTcSIsInNvcnQiLCJhIiwiYiIsInNvbWUiLCJoYXNGZWF0dXJlQXRDb29yZGluYXRlIiwiZ2V0TWFwIiwicmVuZGVyRnJhbWUiLCJzY2hlZHVsZUV4cGlyZUljb25DYWNoZSIsInBvc3RSZW5kZXJGdW5jdGlvbnMiLCJleHBpcmVJY29uQ2FjaGUiLCJDTEFTU19ISURERU4iLCJDTEFTU19VTlNFTEVDVEFCTEUiLCJDTEFTU19DT05UUk9MIiwiQ0xBU1NfQ09MTEFQU0VEIiwiY2hlY2tlZEZvbnRzIiwicmVmZXJlbmNlRm9udHMiLCJmb250Q2hhbmdlTGlzdGVuZXJLZXlfIiwiT2JqZWN0RXZlbnRUeXBlIiwicmVkcmF3VGV4dCIsImVsZW1lbnRfIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiekluZGV4IiwiY2xhc3NOYW1lIiwiY29udGFpbmVyIiwiZ2V0Vmlld3BvcnQiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwiY2hpbGRyZW5fIiwicmVuZGVyZWRWaXNpYmxlXyIsImV2ZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiZGlzcGxheSIsImRlY2x1dHRlckxheWVycyIsInByZXZpb3VzRWxlbWVudCIsImxheWVySW5kZXgiLCJzb3VyY2VTdGF0ZSIsImdldFNvdXJjZVN0YXRlIiwidW5yZW5kZXIiLCJyZW5kZXIiLCJyZW5kZXJEZWNsdXR0ZXIiLCJHcm91cEV2ZW50IiwiTGF5ZXJHcm91cCIsIkJhc2UiLCJiYXNlT3B0aW9ucyIsImxheWVycyIsImxheWVyc0xpc3RlbmVyS2V5c18iLCJsaXN0ZW5lcktleXNfIiwiYWRkQ2hhbmdlTGlzdGVuZXIiLCJoYW5kbGVMYXllcnNDaGFuZ2VkXyIsImlzQXJyYXkiLCJzZXRMYXllcnMiLCJoYW5kbGVMYXllckNoYW5nZV8iLCJnZXRMYXllcnMiLCJoYW5kbGVMYXllcnNBZGRfIiwiaGFuZGxlTGF5ZXJzUmVtb3ZlXyIsImxheWVyc0FycmF5IiwicmVnaXN0ZXJMYXllckxpc3RlbmVyc18iLCJoYW5kbGVMYXllckdyb3VwQWRkXyIsImhhbmRsZUxheWVyR3JvdXBSZW1vdmVfIiwiY29sbGVjdGlvbkV2ZW50IiwiY29sbGVjdGlvbiIsImN1cnJlbnRMYXllcnMiLCJnZXRMYXllcnNBcnJheSIsImdldExheWVyU3RhdGVzQXJyYXkiLCJkZXN0Iiwic3RhdGVzIiwicG9zIiwib3duTGF5ZXJTdGF0ZSIsImdldExheWVyU3RhdGUiLCJkZWZhdWx0WkluZGV4Iiwib3BhY2l0eSIsInZpc2libGUiLCJtYXhSZXNvbHV0aW9uIiwibWluIiwibWluUmVzb2x1dGlvbiIsIm1heCIsIm1pblpvb20iLCJtYXhab29tIiwiZXh0ZW50IiwiTWFwRXZlbnQiLCJvcmlnaW5hbEV2ZW50IiwiZHJhZ2dpbmciLCJhY3RpdmVQb2ludGVycyIsInBpeGVsXyIsImNvb3JkaW5hdGVfIiwicGl4ZWwiLCJnZXRFdmVudFBpeGVsIiwiZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiU0lOR0xFQ0xJQ0siLCJDTElDSyIsIkRCTENMSUNLIiwiUE9JTlRFUkRSQUciLCJQT0lOVEVSTU9WRSIsIlBPSU5URVJET1dOIiwiUE9JTlRFUlVQIiwiUE9JTlRFUk9WRVIiLCJQT0lOVEVST1VUIiwiUE9JTlRFUkVOVEVSIiwiUE9JTlRFUkxFQVZFIiwiUE9JTlRFUkNBTkNFTCIsIk1hcEJyb3dzZXJFdmVudEhhbmRsZXIiLCJUYXJnZXQiLCJtb3ZlVG9sZXJhbmNlIiwiY2xpY2tUaW1lb3V0SWRfIiwiZW11bGF0ZUNsaWNrc18iLCJkcmFnZ2luZ18iLCJkcmFnTGlzdGVuZXJLZXlzXyIsIm1vdmVUb2xlcmFuY2VfIiwiZG93bl8iLCJhY3RpdmVQb2ludGVyc18iLCJ0cmFja2VkVG91Y2hlc18iLCJwb2ludGVyZG93bkxpc3RlbmVyS2V5XyIsImhhbmRsZVBvaW50ZXJEb3duXyIsIm9yaWdpbmFsUG9pbnRlck1vdmVFdmVudF8iLCJyZWxheWVkTGlzdGVuZXJLZXlfIiwicmVsYXlNb3ZlRXZlbnRfIiwiYm91bmRIYW5kbGVUb3VjaE1vdmVfIiwiaGFuZGxlVG91Y2hNb3ZlXyIsInBhc3NpdmUiLCJlbXVsYXRlQ2xpY2tfIiwicG9pbnRlckV2ZW50IiwibmV3RXZlbnQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidXBkYXRlQWN0aXZlUG9pbnRlcnNfIiwicG9pbnRlcklkIiwidmFsdWVzIiwiaGFuZGxlUG9pbnRlclVwXyIsImRlZmF1bHRQcmV2ZW50ZWQiLCJpc01vdXNlQWN0aW9uQnV0dG9uXyIsImJ1dHRvbiIsIlBvaW50ZXJFdmVudCIsImRlZmluZVByb3BlcnR5Iiwid3JpdGFibGUiLCJkb2MiLCJnZXRPd25lckRvY3VtZW50IiwiaGFuZGxlUG9pbnRlck1vdmVfIiwiZ2V0Um9vdE5vZGUiLCJpc01vdmluZ18iLCJjYW5jZWxhYmxlIiwiYWJzIiwiY2xpZW50WCIsImNsaWVudFkiLCJEUk9QIiwiSW5maW5pdHkiLCJwcmlvcml0eUZ1bmN0aW9uIiwia2V5RnVuY3Rpb24iLCJwcmlvcml0eUZ1bmN0aW9uXyIsImtleUZ1bmN0aW9uXyIsImVsZW1lbnRzXyIsInByaW9yaXRpZXNfIiwicXVldWVkRWxlbWVudHNfIiwiZGVxdWV1ZSIsImVsZW1lbnRzIiwicHJpb3JpdGllcyIsInNpZnRVcF8iLCJlbGVtZW50S2V5IiwiZW5xdWV1ZSIsInByaW9yaXR5Iiwic2lmdERvd25fIiwiZ2V0Q291bnQiLCJnZXRMZWZ0Q2hpbGRJbmRleF8iLCJnZXRSaWdodENoaWxkSW5kZXhfIiwiZ2V0UGFyZW50SW5kZXhfIiwiaGVhcGlmeV8iLCJpc0VtcHR5IiwiaXNLZXlRdWV1ZWQiLCJpc1F1ZXVlZCIsImNvdW50Iiwic3RhcnRJbmRleCIsImxJbmRleCIsInJJbmRleCIsInNtYWxsZXJDaGlsZEluZGV4IiwicGFyZW50SW5kZXgiLCJyZXByaW9yaXRpemUiLCJ0aWxlUHJpb3JpdHlGdW5jdGlvbiIsInRpbGVDaGFuZ2VDYWxsYmFjayIsImJvdW5kSGFuZGxlVGlsZUNoYW5nZV8iLCJoYW5kbGVUaWxlQ2hhbmdlIiwidGlsZUNoYW5nZUNhbGxiYWNrXyIsInRpbGVzTG9hZGluZ18iLCJ0aWxlc0xvYWRpbmdLZXlzXyIsImFkZGVkIiwiZ2V0VGlsZXNMb2FkaW5nIiwidGlsZSIsImdldFN0YXRlIiwidGlsZUtleSIsImxvYWRNb3JlVGlsZXMiLCJtYXhUb3RhbExvYWRpbmciLCJtYXhOZXdMb2FkcyIsIm5ld0xvYWRzIiwiQ29udHJvbCIsInBvaW50ZXJFdmVudHMiLCJ0YXJnZXRfIiwic2V0VGFyZ2V0Iiwic2V0TWFwIiwiZ2V0T3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudCIsImFwcGVuZENoaWxkIiwiTWFwRXZlbnRUeXBlIiwibWFwRXZlbnQiLCJnZXRFbGVtZW50QnlJZCIsInVsRWxlbWVudF8iLCJjb2xsYXBzZWRfIiwiY29sbGFwc2VkIiwidXNlckNvbGxhcHNlZF8iLCJvdmVycmlkZUNvbGxhcHNpYmxlXyIsImNvbGxhcHNpYmxlIiwiY29sbGFwc2libGVfIiwidGlwTGFiZWwiLCJleHBhbmRDbGFzc05hbWUiLCJjb2xsYXBzZUxhYmVsIiwiY29sbGFwc2VDbGFzc05hbWUiLCJjb2xsYXBzZUxhYmVsXyIsInRleHRDb250ZW50IiwibGFiZWwiLCJsYWJlbF8iLCJhY3RpdmVMYWJlbCIsInRvZ2dsZUJ1dHRvbl8iLCJzZXRBdHRyaWJ1dGUiLCJTdHJpbmciLCJ0aXRsZSIsImhhbmRsZUNsaWNrXyIsImNzc0NsYXNzZXMiLCJyZW5kZXJlZEF0dHJpYnV0aW9uc18iLCJjb2xsZWN0U291cmNlQXR0cmlidXRpb25zXyIsInZpc2libGVBdHRyaWJ1dGlvbnMiLCJmcm9tIiwiU2V0IiwiZ2V0QWxsTGF5ZXJzIiwiZmxhdE1hcCIsImdldEF0dHJpYnV0aW9ucyIsImdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlIiwic2V0Q29sbGFwc2libGUiLCJ1cGRhdGVFbGVtZW50XyIsImF0dHJpYnV0aW9ucyIsImlubmVySFRNTCIsImhhbmRsZVRvZ2dsZV8iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJnZXRDb2xsYXBzaWJsZSIsInNldENvbGxhcHNlZCIsImdldENvbGxhcHNlZCIsImNvbXBhc3NDbGFzc05hbWUiLCJhZGQiLCJjYWxsUmVzZXROb3J0aF8iLCJyZXNldE5vcnRoIiwiZHVyYXRpb25fIiwiZHVyYXRpb24iLCJhdXRvSGlkZV8iLCJhdXRvSGlkZSIsInJvdGF0aW9uXyIsInJlc2V0Tm9ydGhfIiwidmlldyIsImdldFZpZXciLCJnZXRSb3RhdGlvbiIsIlBJIiwiYW5pbWF0ZSIsImVhc2luZyIsInNldFJvdGF0aW9uIiwidHJhbnNmb3JtIiwiY29udGFpbnMiLCJkZWx0YSIsInpvb21JbkNsYXNzTmFtZSIsInpvb21PdXRDbGFzc05hbWUiLCJ6b29tSW5MYWJlbCIsInpvb21PdXRMYWJlbCIsInpvb21JblRpcExhYmVsIiwiem9vbU91dFRpcExhYmVsIiwiaW5FbGVtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJvdXRFbGVtZW50Iiwiem9vbUJ5RGVsdGFfIiwiY3VycmVudFpvb20iLCJnZXRab29tIiwibmV3Wm9vbSIsImdldENvbnN0cmFpbmVkWm9vbSIsImdldEFuaW1hdGluZyIsImNhbmNlbEFuaW1hdGlvbnMiLCJ6b29tIiwic2V0Wm9vbSIsIkludGVyYWN0aW9uIiwiaGFuZGxlRXZlbnQiLCJzZXRBY3RpdmUiLCJnZXRBY3RpdmUiLCJtYXBCcm93c2VyRXZlbnQiLCJhY3RpdmUiLCJ6b29tQnlEZWx0YSIsImFuY2hvciIsIm5ld1Jlc29sdXRpb24iLCJnZXRSZXNvbHV0aW9uRm9yWm9vbSIsImRlbHRhXyIsInN0b3BFdmVudCIsImJyb3dzZXJFdmVudCIsInNoaWZ0S2V5IiwiaGFuZGxlRG93bkV2ZW50IiwiaGFuZGxlRHJhZ0V2ZW50IiwiaGFuZGxlTW92ZUV2ZW50IiwiaGFuZGxlVXBFdmVudCIsInN0b3BEb3duIiwiaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSIsInRhcmdldFBvaW50ZXJzIiwiZ2V0UG9pbnRlckNvdW50IiwidXBkYXRlVHJhY2tlZFBvaW50ZXJzXyIsImhhbmRsZWRVcCIsImhhbmRsZWQiLCJ2YXJfYXJncyIsImNvbmRpdGlvbnMiLCJhcmd1bWVudHMiLCJwYXNzIiwiYWx0U2hpZnRLZXlzT25seSIsImFsdEtleSIsIm1ldGFLZXkiLCJjdHJsS2V5IiwiZm9jdXNXaXRoVGFiaW5kZXgiLCJnZXRUYXJnZXRFbGVtZW50IiwiaGFzQXR0cmlidXRlIiwidGFyZ2V0RWxlbWVudCIsImFjdGl2ZUVsZW1lbnQiLCJhbHdheXMiLCJtb3VzZUFjdGlvbkJ1dHRvbiIsIm5vTW9kaWZpZXJLZXlzIiwic2hpZnRLZXlPbmx5IiwidGFyZ2V0Tm90RWRpdGFibGUiLCJ0YWdOYW1lIiwiaXNDb250ZW50RWRpdGFibGUiLCJtb3VzZU9ubHkiLCJwb2ludGVyVHlwZSIsInByaW1hcnlBY3Rpb24iLCJpc1ByaW1hcnkiLCJQb2ludGVyIiwia2luZXRpY18iLCJraW5ldGljIiwibGFzdENlbnRyb2lkIiwibGFzdFBvaW50ZXJzQ291bnRfIiwicGFubmluZ18iLCJjb25kaXRpb24iLCJjb25kaXRpb25fIiwib25Gb2N1c09ubHkiLCJub0tpbmV0aWNfIiwiYmVnaW5JbnRlcmFjdGlvbiIsImNlbnRyb2lkIiwidXBkYXRlIiwiZ2V0UmVzb2x1dGlvbiIsImFkanVzdENlbnRlckludGVybmFsIiwiYmVnaW4iLCJlbmQiLCJkaXN0YW5jZSIsImdldERpc3RhbmNlIiwiYW5nbGUiLCJnZXRBbmdsZSIsImdldENlbnRlckludGVybmFsIiwiY2VudGVycHgiLCJnZXRQaXhlbEZyb21Db29yZGluYXRlSW50ZXJuYWwiLCJnZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwiLCJjb3MiLCJzaW4iLCJhbmltYXRlSW50ZXJuYWwiLCJnZXRDb25zdHJhaW5lZENlbnRlciIsImVuZEludGVyYWN0aW9uIiwibGFzdEFuZ2xlXyIsImdldENvbnN0cmFpbnRzIiwiZ2V0U2l6ZSIsIm9mZnNldCIsInRoZXRhIiwiYXRhbjIiLCJhZGp1c3RSb3RhdGlvbkludGVybmFsIiwiUmVuZGVyQm94IiwiZ2VvbWV0cnlfIiwic3RhcnRQaXhlbF8iLCJlbmRQaXhlbF8iLCJyZW5kZXJfIiwic3RhcnRQaXhlbCIsImVuZFBpeGVsIiwicHgiLCJsZWZ0IiwidG9wIiwiZ2V0T3ZlcmxheUNvbnRhaW5lciIsInNldFBpeGVscyIsImNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkiLCJzZXRDb29yZGluYXRlcyIsIlBvbHlnb24iLCJnZXRHZW9tZXRyeSIsIkRyYWdCb3hFdmVudCIsImJveF8iLCJtaW5BcmVhXyIsIm1pbkFyZWEiLCJvbkJveEVuZCIsImJveEVuZENvbmRpdGlvbl8iLCJib3hFbmRDb25kaXRpb24iLCJkZWZhdWx0Qm94RW5kQ29uZGl0aW9uIiwiY29tcGxldGVCb3giLCJvdXRfIiwib3V0Iiwicm90YXRlZEV4dGVudCIsInJvdGF0ZWRFeHRlbnRGb3JHZW9tZXRyeSIsImdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbCIsImZhY3RvciIsImNsb25lIiwic2NhbGUiLCJmaXRJbnRlcm5hbCIsImRlZmF1bHRDb25kaXRpb25fIiwicGl4ZWxEZWx0YV8iLCJwaXhlbERlbHRhIiwia2V5RXZlbnQiLCJrZXlDb2RlIiwibWFwVW5pdHNEZWx0YSIsImRlbHRhWCIsImRlbHRhWSIsImN1cnJlbnRDZW50ZXIiLCJwYW4iLCJ0b3RhbERlbHRhXyIsImxhc3REZWx0YV8iLCJtYXhEZWx0YV8iLCJtYXhEZWx0YSIsInRpbWVvdXRfIiwidGltZW91dCIsInVzZUFuY2hvcl8iLCJ1c2VBbmNob3IiLCJjb25zdHJhaW5SZXNvbHV0aW9uXyIsImNvbnN0cmFpblJlc29sdXRpb24iLCJsYXN0QW5jaG9yXyIsInN0YXJ0VGltZV8iLCJ0aW1lb3V0SWRfIiwibW9kZV8iLCJ0cmFja3BhZEV2ZW50R2FwXyIsInRyYWNrcGFkVGltZW91dElkXyIsImRlbHRhUGVyWm9vbV8iLCJlbmRJbnRlcmFjdGlvbl8iLCJ3aGVlbEV2ZW50IiwiZGVsdGFNb2RlIiwiV2hlZWxFdmVudCIsIkRPTV9ERUxUQV9QSVhFTCIsIkRPTV9ERUxUQV9MSU5FIiwibm93IiwiRGF0ZSIsImdldENvbnN0cmFpblJlc29sdXRpb24iLCJhZGp1c3Rab29tIiwidGltZUxlZnQiLCJoYW5kbGVXaGVlbFpvb21fIiwic2V0TW91c2VBbmNob3IiLCJwb2ludGVyT3B0aW9ucyIsImFuY2hvcl8iLCJyb3RhdGluZ18iLCJyb3RhdGlvbkRlbHRhXyIsInRocmVzaG9sZF8iLCJ0aHJlc2hvbGQiLCJyb3RhdGlvbkRlbHRhIiwidG91Y2gwIiwidG91Y2gxIiwibGFzdERpc3RhbmNlXyIsImxhc3RTY2FsZURlbHRhXyIsInNjYWxlRGVsdGEiLCJkeCIsImR5Iiwic3FydCIsImFkanVzdFJlc29sdXRpb25JbnRlcm5hbCIsImRpcmVjdGlvbiIsInJlbW92ZUxheWVyTWFwUHJvcGVydHkiLCJMYXllciIsInNldE1hcEludGVybmFsIiwic2V0TGF5ZXJNYXBQcm9wZXJ0eSIsIm9wdGlvbnNJbnRlcm5hbCIsImtleWJvYXJkRXZlbnRUYXJnZXQiLCJsYXllckdyb3VwIiwiY29udHJvbHMiLCJpbnRlcmFjdGlvbnMiLCJvdmVybGF5cyIsIk1hcFByb3BlcnR5IiwiVmlldyIsImNyZWF0ZU9wdGlvbnNJbnRlcm5hbCIsInJlbmRlckNvbXBsZXRlXyIsImxvYWRlZF8iLCJib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8iLCJoYW5kbGVCcm93c2VyRXZlbnQiLCJtYXhUaWxlc0xvYWRpbmdfIiwibWF4VGlsZXNMb2FkaW5nIiwicGl4ZWxSYXRpb18iLCJwaXhlbFJhdGlvIiwicG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfIiwiYW5pbWF0aW9uRGVsYXlLZXlfIiwiYW5pbWF0aW9uRGVsYXlfIiwiY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fIiwicGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fIiwiZnJhbWVJbmRleF8iLCJmcmFtZVN0YXRlXyIsInByZXZpb3VzRXh0ZW50XyIsInZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyIsInZpZXdDaGFuZ2VMaXN0ZW5lcktleV8iLCJsYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfIiwidmlld3BvcnRfIiwid2luZG93Iiwib3ZlcmZsb3ciLCJvdmVybGF5Q29udGFpbmVyXyIsIm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfIiwibWFwQnJvd3NlckV2ZW50SGFuZGxlcl8iLCJrZXlib2FyZEV2ZW50VGFyZ2V0XyIsInRhcmdldENoYW5nZUhhbmRsZXJLZXlzXyIsInRhcmdldEVsZW1lbnRfIiwicmVzaXplT2JzZXJ2ZXJfIiwiUmVzaXplT2JzZXJ2ZXIiLCJ1cGRhdGVTaXplIiwiem9vbU9wdGlvbnMiLCJyb3RhdGUiLCJyb3RhdGVPcHRpb25zIiwiYXR0cmlidXRpb24iLCJhdHRyaWJ1dGlvbk9wdGlvbnMiLCJkZWNheSIsIm1pblZlbG9jaXR5IiwiZGVsYXkiLCJkZWNheV8iLCJtaW5WZWxvY2l0eV8iLCJkZWxheV8iLCJwb2ludHNfIiwiYW5nbGVfIiwiaW5pdGlhbFZlbG9jaXR5XyIsIngiLCJ5IiwibGFzdEluZGV4IiwiZmlyc3RJbmRleCIsImFsdFNoaWZ0RHJhZ1JvdGF0ZSIsImRvdWJsZUNsaWNrWm9vbSIsInpvb21EZWx0YSIsInpvb21EdXJhdGlvbiIsImRyYWdQYW4iLCJwaW5jaFJvdGF0ZSIsInBpbmNoWm9vbSIsImtleWJvYXJkIiwibW91c2VXaGVlbFpvb20iLCJzaGlmdERyYWdab29tIiwib3ZlcmxheXNfIiwib3ZlcmxheUlkSW5kZXhfIiwicmVuZGVyZXJfIiwicG9zdFJlbmRlckZ1bmN0aW9uc18iLCJ0aWxlUXVldWVfIiwiZ2V0VGlsZVByaW9yaXR5IiwiaGFuZGxlVGlsZUNoYW5nZV8iLCJoYW5kbGVMYXllckdyb3VwQ2hhbmdlZF8iLCJoYW5kbGVWaWV3Q2hhbmdlZF8iLCJoYW5kbGVTaXplQ2hhbmdlZF8iLCJoYW5kbGVUYXJnZXRDaGFuZ2VkXyIsInNldFByb3BlcnRpZXMiLCJ2aWV3T3B0aW9ucyIsInNldFZpZXciLCJhZGRPdmVybGF5SW50ZXJuYWxfIiwiZ2V0SWQiLCJjb250cm9sIiwiaW50ZXJhY3Rpb24iLCJhZGRDb250cm9sIiwiZ2V0Q29udHJvbHMiLCJhZGRJbnRlcmFjdGlvbiIsImdldEludGVyYWN0aW9ucyIsImFkZExheWVyIiwiZ2V0TGF5ZXJHcm91cCIsImhhbmRsZUxheWVyQWRkXyIsImFkZE92ZXJsYXkiLCJvdmVybGF5IiwiZ2V0T3ZlcmxheXMiLCJkaXNjb25uZWN0IiwiZm9yRWFjaEZlYXR1cmVBdFBpeGVsIiwiZ2V0RmVhdHVyZXNBdFBpeGVsIiwiZmVhdHVyZXMiLCJhZGRMYXllcnNGcm9tIiwiaGFzRmVhdHVyZUF0UGl4ZWwiLCJnZXRFdmVudENvb3JkaW5hdGUiLCJnZXRFdmVudENvb3JkaW5hdGVJbnRlcm5hbCIsInZpZXdwb3J0UG9zaXRpb24iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ2aWV3cG9ydFNpemUiLCJzY2FsZVgiLCJzY2FsZVkiLCJldmVudFBvc2l0aW9uIiwiY2hhbmdlZFRvdWNoZXMiLCJnZXRUYXJnZXQiLCJnZXRQcm9qZWN0aW9uIiwiZ2V0T3ZlcmxheUJ5SWQiLCJncm91cCIsImdldExvYWRpbmdPck5vdFJlYWR5IiwicmVuZGVyZXIiLCJyZWFkeSIsImxvYWRpbmciLCJnZXRQaXhlbEZyb21Db29yZGluYXRlIiwidmlld0Nvb3JkaW5hdGUiLCJvd25lckRvY3VtZW50IiwidGlsZVNvdXJjZUtleSIsInRpbGVDZW50ZXIiLCJ0aWxlUmVzb2x1dGlvbiIsIndhbnRlZFRpbGVzIiwibG9nIiwiaGFuZGxlTWFwQnJvd3NlckV2ZW50IiwiZXZlbnRUeXBlIiwicm9vdE5vZGUiLCJkb2N1bWVudEVsZW1lbnQiLCJpbnRlcmFjdGlvbnNBcnJheSIsInByb3BhZ2F0aW9uU3RvcHBlZCIsImhhbmRsZVBvc3RSZW5kZXIiLCJ0aWxlUXVldWUiLCJoaW50cyIsInZpZXdIaW50cyIsIlZpZXdIaW50IiwibG93T25GcmFtZUJ1ZGdldCIsInRpbWUiLCJyZXNvbHZlQ29uc3RyYWludHMiLCJ1bm9ic2VydmUiLCJTaGFkb3dSb290IiwiaG9zdCIsIkNvbXBvc2l0ZSIsIm9ic2VydmUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfIiwidXBkYXRlVmlld3BvcnRTaXplXyIsImhhbmRsZUxheWVyUmVtb3ZlXyIsImlzUmVuZGVyZWQiLCJyZW5kZXJGcmFtZV8iLCJyZW5kZXJTeW5jIiwiaGFuZGxlRm9udHNDaGFuZ2VkIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVtb3ZlQ29udHJvbCIsInJlbW92ZUludGVyYWN0aW9uIiwicmVtb3ZlTGF5ZXIiLCJyZW1vdmVPdmVybGF5IiwicHJldmlvdXNGcmFtZVN0YXRlIiwiaXNEZWYiLCJnZXRIaW50cyIsImRlY2x1dHRlclRyZWUiLCJ1c2VkVGlsZXMiLCJtYXBJZCIsInJlbmRlclRhcmdldHMiLCJuZXh0Q2VudGVyIiwibmV4dFJlc29sdXRpb24iLCJpc05hTiIsIm5leHRSb3RhdGlvbiIsIm5leHRFeHRlbnQiLCJzZXRMYXllckdyb3VwIiwib2xkTGF5ZXJHcm91cCIsImNvbXB1dGVkU3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwib2Zmc2V0V2lkdGgiLCJwYXJzZUZsb2F0Iiwib2Zmc2V0SGVpZ2h0IiwiZ2V0Q2xpZW50UmVjdHMiLCJvbGRTaXplIiwicGFyc2VJbnQiLCJzZXRWaWV3cG9ydFNpemUiLCJPYmplY3RFdmVudCIsIm9sZFZhbHVlIiwiQmFzZU9iamVjdCIsInZhbHVlc18iLCJoYXNPd25Qcm9wZXJ0eSIsImdldEtleXMiLCJrZXlzIiwiZ2V0UHJvcGVydGllcyIsImhhc1Byb3BlcnRpZXMiLCJub3RpZnkiLCJsaXN0ZW5lciIsInJlbW92ZUNoYW5nZUxpc3RlbmVyIiwic2lsZW50IiwiYXBwbHlQcm9wZXJ0aWVzIiwidW5zZXQiLCJQUk9QRVJUWUNIQU5HRSIsIk9ic2VydmFibGUiLCJyZXZpc2lvbl8iLCJnZXRSZXZpc2lvbiIsIm9uSW50ZXJuYWwiLCJsZW4iLCJvbmNlSW50ZXJuYWwiLCJvbF9rZXkiLCJ1bkludGVybmFsIiwidW5CeUtleSIsImludGVyaW1UaWxlIiwidHJhbnNpdGlvbl8iLCJ0cmFuc2l0aW9uIiwidHJhbnNpdGlvblN0YXJ0c18iLCJpbnRlcnBvbGF0ZSIsInJlbGVhc2UiLCJzZXRTdGF0ZSIsImdldEludGVyaW1UaWxlIiwicmVmcmVzaEludGVyaW1DaGFpbiIsImdldFRpbGVDb29yZCIsImdldEFscGhhIiwiaW5UcmFuc2l0aW9uIiwiZW5kVHJhbnNpdGlvbiIsIlRpbGVSYW5nZSIsIm1pblgiLCJtYXhYIiwibWluWSIsIm1heFkiLCJjb250YWluc1hZIiwiY29udGFpbnNUaWxlUmFuZ2UiLCJ0aWxlUmFuZ2UiLCJlcXVhbHMiLCJnZXRIZWlnaHQiLCJnZXRXaWR0aCIsImludGVyc2VjdHMiLCJjcmVhdGVPclVwZGF0ZSIsIklETEUiLCJMT0FESU5HIiwiTE9BREVEIiwiRVJST1IiLCJFTVBUWSIsIkNFTlRFUiIsIlJFU09MVVRJT04iLCJST1RBVElPTiIsImNyZWF0ZUV4dGVudCIsIm9ubHlDZW50ZXIiLCJzbW9vdGgiLCJpc01vdmluZyIsImNlbnRlclNoaWZ0Iiwidmlld1dpZHRoIiwidmlld0hlaWdodCIsInNoaWZ0WCIsInNoaWZ0WSIsInJhdGlvIiwibm9uZSIsImdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24iLCJtYXhFeHRlbnQiLCJzaG93RnVsbEV4dGVudCIsInhSZXNvbHV0aW9uIiwieVJlc29sdXRpb24iLCJnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbiIsImNyZWF0ZU1pbk1heFJlc29sdXRpb24iLCJjYXBwZWRNYXhSZXMiLCJoaW50c18iLCJhbmltYXRpb25zXyIsInVwZGF0ZUFuaW1hdGlvbktleV8iLCJwcm9qZWN0aW9uXyIsInZpZXdwb3J0U2l6ZV8iLCJ0YXJnZXRDZW50ZXJfIiwidGFyZ2V0UmVzb2x1dGlvbl8iLCJ0YXJnZXRSb3RhdGlvbl8iLCJuZXh0Q2VudGVyXyIsIm5leHRSZXNvbHV0aW9uXyIsIm5leHRSb3RhdGlvbl8iLCJjYW5jZWxBbmNob3JfIiwiYXBwbHlPcHRpb25zXyIsInByb3BlcnRpZXMiLCJWaWV3UHJvcGVydHkiLCJyZXNvbHV0aW9uQ29uc3RyYWludEluZm8iLCJyZXNvbHV0aW9uQ29uc3RyYWludCIsInpvb21GYWN0b3IiLCJtdWx0aVdvcmxkIiwic21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnQiLCJwcm9qRXh0ZW50IiwiY29uc3RyYWluT25seUNlbnRlciIsImlzR2xvYmFsIiwicmVzb2x1dGlvbnMiLCJjYXBwZWQiLCJ6IiwiY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMiLCJkZWZhdWx0TWF4UmVzb2x1dGlvbiIsImdldE1ldGVyc1BlclVuaXQiLCJwb3ciLCJkZWZhdWx0TWluUmVzb2x1dGlvbiIsImRlZmF1bHRNYXhab29tIiwicG93ZXIiLCJ0b2xlcmFuY2UiLCJtaW5ab29tTGV2ZWwiLCJjZWlsIiwiY2FwcGVkWm9vbUxldmVsIiwiem9vbUxldmVsIiwiY3JlYXRlU25hcFRvUG93ZXIiLCJjb25zdHJhaW50IiwiY3JlYXRlUmVzb2x1dGlvbkNvbnN0cmFpbnQiLCJtYXhSZXNvbHV0aW9uXyIsIm1pblJlc29sdXRpb25fIiwiem9vbUZhY3Rvcl8iLCJyZXNvbHV0aW9uc18iLCJwYWRkaW5nXyIsInBhZGRpbmciLCJtaW5ab29tXyIsImNlbnRlckNvbnN0cmFpbnQiLCJzbW9vdGhFeHRlbnRDb25zdHJhaW50IiwiY3JlYXRlQ2VudGVyQ29uc3RyYWludCIsInJvdGF0aW9uQ29uc3RyYWludCIsImVuYWJsZVJvdGF0aW9uIiwiY29uc3RyYWluUm90YXRpb24iLCJjcmVhdGVSb3RhdGlvbkNvbnN0cmFpbnQiLCJjb25zdHJhaW50c18iLCJzZXRDZW50ZXJJbnRlcm5hbCIsInNldFJlc29sdXRpb24iLCJvbGRQYWRkaW5nIiwibmV3UGFkZGluZyIsIm9mZnNldFgiLCJvZmZzZXRZIiwiZ2V0VXBkYXRlZE9wdGlvbnNfIiwibmV3T3B0aW9ucyIsImFyZ3MiLCJhbmltYXRpb25Db3VudCIsImFuaW1hdGlvbkNhbGxiYWNrIiwic2VyaWVzIiwiYW5pbWF0aW9uIiwiY29tcGxldGUiLCJzb3VyY2VDZW50ZXIiLCJ0YXJnZXRDZW50ZXIiLCJzb3VyY2VSZXNvbHV0aW9uIiwidGFyZ2V0UmVzb2x1dGlvbiIsInNvdXJjZVJvdGF0aW9uIiwidGFyZ2V0Um90YXRpb24iLCJpc05vb3BBbmltYXRpb24iLCJzZXRIaW50IiwidXBkYXRlQW5pbWF0aW9uc18iLCJnZXRJbnRlcmFjdGluZyIsImpqIiwiTmFOIiwibW9yZSIsInNlcmllc0NvbXBsZXRlIiwiZWxhcHNlZCIsImZyYWN0aW9uIiwicHJvZ3Jlc3MiLCJ4MCIsInkwIiwieDEiLCJ5MSIsImdldFZpZXdwb3J0U2l6ZV8iLCJjb25zdHJhaW5lZFJlc29sdXRpb24iLCJjYWxjdWxhdGVDZW50ZXJab29tIiwiYXBwbHlUYXJnZXRTdGF0ZV8iLCJjb25zdHJhaW5lZFJvdGF0aW9uIiwiY2FsY3VsYXRlQ2VudGVyUm90YXRlIiwiZmlsdGVyIiwiQm9vbGVhbiIsImN1cnJlbnRSZXNvbHV0aW9uIiwidyIsImgiLCJnZXRDZW50ZXIiLCJjYWxjdWxhdGVFeHRlbnQiLCJjYWxjdWxhdGVFeHRlbnRJbnRlcm5hbCIsImdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18iLCJnZXRNYXhSZXNvbHV0aW9uIiwiZ2V0TWluUmVzb2x1dGlvbiIsImdldE1heFpvb20iLCJnZXRab29tRm9yUmVzb2x1dGlvbiIsInNldE1heFpvb20iLCJnZXRNaW5ab29tIiwic2V0TWluWm9vbSIsInNldENvbnN0cmFpblJlc29sdXRpb24iLCJlbmFibGVkIiwiZ2V0UmVzb2x1dGlvbnMiLCJnZXRSZXNvbHV0aW9uRm9yRXh0ZW50IiwiZ2V0UmVzb2x1dGlvbkZvclZhbHVlRnVuY3Rpb24iLCJnZXRDb25zdHJhaW5lZFJlc29sdXRpb24iLCJnZXRWYWx1ZUZvclJlc29sdXRpb25GdW5jdGlvbiIsImxvZ1Bvd2VyIiwicmVkdWNlZFNpemUiLCJjYWxjdWxhdGVDZW50ZXJPbiIsImdldFZpZXdTdGF0ZUFuZEV4dGVudCIsIm5lYXJlc3QiLCJiYXNlTGV2ZWwiLCJmaXQiLCJnZW9tZXRyeU9yRXh0ZW50IiwiZ2V0VHlwZSIsInVzZXJQcm9qZWN0aW9uIiwiY29zQW5nbGUiLCJzaW5BbmdsZSIsImNvb3JkcyIsImdldEZsYXRDb29yZGluYXRlcyIsInN0cmlkZSIsImdldFN0cmlkZSIsIm1pblJvdFgiLCJtaW5Sb3RZIiwibWF4Um90WCIsIm1heFJvdFkiLCJyb3RYIiwicm90WSIsImNlbnRlclJvdCIsImNlbnRlclgiLCJjZW50ZXJZIiwiY2VudGVyT24iLCJjZW50ZXJPbkludGVybmFsIiwiY2FsY3VsYXRlQ2VudGVyU2hpZnQiLCJzaGlmdGVkQ2VudGVyIiwiYWRqdXN0Q2VudGVyIiwiZGVsdGFDb29yZGluYXRlcyIsInNldENlbnRlciIsImFkanVzdFJlc29sdXRpb24iLCJhZGp1c3RSb3RhdGlvbiIsIm5ld1JvdGF0aW9uIiwiaGludCIsImRvTm90Q2FuY2VsQW5pbXMiLCJmb3JjZU1vdmluZyIsIm5ld0NlbnRlciIsInJlc29sdXRpb25EaXJlY3Rpb24iLCJlbmRJbnRlcmFjdGlvbkludGVybmFsIiwidGFyZ2V0Wm9vbSIsInRhcmdldFJlcyIsIkFOSU1BVElORyIsIklOVEVSQUNUSU5HIiwiYXNjZW5kaW5nIiwibGluZWFyRmluZE5lYXJlc3QiLCJleHRlbnNpb24iLCJhcnIxIiwiYXJyMiIsImxlbjEiLCJpc1NvcnRlZCIsImZ1bmMiLCJzdHJpY3QiLCJjb21wYXJlIiwiZXZlcnkiLCJjdXJyZW50VmFsIiwicmVzIiwiYXNzZXJ0IiwiYXNzZXJ0aW9uIiwiZXJyb3JDb2RlIiwiSEVYX0NPTE9SX1JFXyIsIk5BTUVEX0NPTE9SX1JFXyIsImFzU3RyaW5nIiwiZyIsInJvdW5kIiwiZnJvbVN0cmluZyIsImNhY2hlIiwiY2FjaGVTaXplIiwicyIsImV4ZWMiLCJlbCIsImJvZHkiLCJyZ2IiLCJmcm9tTmFtZWQiLCJkIiwiaGFzQWxwaGEiLCJzdWJzdHIiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJub3JtYWxpemUiLCJmcm9tU3RyaW5nSW50ZXJuYWxfIiwiYXNBcnJheSIsImxldmVscyIsImluZm8iLCJsZXZlbCIsImNvb3JkaW5hdGUxIiwiY29vcmRpbmF0ZTIiLCJ3cmFwWCIsIndvcmxkc0F3YXkiLCJzb3VyY2VFeHRlbnRXaWR0aCIsImdldFdvcmxkc0F3YXkiLCJjcmVhdGVDYW52YXNDb250ZXh0MkQiLCJjYW52YXNQb29sIiwic2V0dGluZ3MiLCJzaGlmdCIsIk9mZnNjcmVlbkNhbnZhcyIsImdldENvbnRleHQiLCJyZWxlYXNlQ2FudmFzIiwiY29udGV4dCIsImNsZWFyUmVjdCIsInJlcGxhY2VOb2RlIiwibmV3Tm9kZSIsIm9sZE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJyZW1vdmVOb2RlIiwibm9kZSIsInJlbW92ZUNoaWxkcmVuIiwibGFzdENoaWxkIiwicmVwbGFjZUNoaWxkcmVuIiwiY2hpbGRyZW4iLCJvbGRDaGlsZHJlbiIsImNoaWxkTm9kZXMiLCJvbGRDaGlsZCIsIm5ld0NoaWxkIiwiZWFzZUluIiwidCIsImVhc2VPdXQiLCJpbkFuZE91dCIsImxpbmVhciIsImxpc3RlbiIsIm9yaWdpbmFsTGlzdGVuZXIiLCJldmVudHNLZXkiLCJsaXN0ZW5PbmNlIiwidW5saXN0ZW5CeUtleSIsIkNIQU5HRSIsIkJMVVIiLCJDTEVBUiIsIkNPTlRFWFRNRU5VIiwiRFJBR0VOVEVSIiwiRFJBR09WRVIiLCJGT0NVUyIsIktFWURPV04iLCJLRVlQUkVTUyIsIkxPQUQiLCJSRVNJWkUiLCJUT1VDSE1PVkUiLCJXSEVFTCIsImV2ZW50VGFyZ2V0XyIsInBlbmRpbmdSZW1vdmFsc18iLCJkaXNwYXRjaGluZ18iLCJsaXN0ZW5lcnNfIiwibGlzdGVuZXJzIiwibGlzdGVuZXJzRm9yVHlwZSIsImluY2x1ZGVzIiwiaXNTdHJpbmciLCJldnQiLCJkaXNwYXRjaGluZyIsInBlbmRpbmdSZW1vdmFscyIsInByb3BhZ2F0ZSIsInByIiwiZ2V0TGlzdGVuZXJzIiwiaW5kZXhPZiIsIlVOS05PV04iLCJJTlRFUlNFQ1RJTkciLCJBQk9WRSIsIlJJR0hUIiwiQkVMT1ciLCJMRUZUIiwiYm91bmRpbmdFeHRlbnQiLCJleHRlbmRDb29yZGluYXRlIiwiY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZIiwiY29udGFpbnNDb29yZGluYXRlIiwiY29udGFpbnNFeHRlbnQiLCJleHRlbnQxIiwiZXh0ZW50MiIsImNvb3JkaW5hdGVSZWxhdGlvbnNoaXAiLCJyZWxhdGlvbnNoaXAiLCJSZWxhdGlvbnNoaXAiLCJjcmVhdGVFbXB0eSIsImNyZWF0ZU9yVXBkYXRlRW1wdHkiLCJjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlIiwiY3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzIiwiZmxhdENvb3JkaW5hdGVzIiwiZXh0ZW5kRmxhdENvb3JkaW5hdGVzIiwiZXh0ZW5kWFkiLCJmb3JFYWNoQ29ybmVyIiwiZ2V0Qm90dG9tTGVmdCIsImdldEJvdHRvbVJpZ2h0IiwiZ2V0VG9wUmlnaHQiLCJnZXRUb3BMZWZ0IiwiZ2V0QXJlYSIsImFyZWEiLCJnZXRDb3JuZXIiLCJjb3JuZXIiLCJnZXRGb3JWaWV3QW5kU2l6ZSIsIngyIiwieTIiLCJ4MyIsInkzIiwiZ2V0Um90YXRlZFZpZXdwb3J0IiwiY29zUm90YXRpb24iLCJzaW5Sb3RhdGlvbiIsInhDb3MiLCJ4U2luIiwieUNvcyIsInlTaW4iLCJnZXRJbnRlcnNlY3Rpb24iLCJpbnRlcnNlY3Rpb24iLCJyZXR1cm5PclVwZGF0ZSIsImludGVyc2VjdHNTZWdtZW50Iiwic3RhcnRSZWwiLCJlbmRSZWwiLCJzdGFydFgiLCJzdGFydFkiLCJlbmRYIiwiZW5kWSIsInNsb3BlIiwiYXBwbHlUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm1GbiIsInN0b3BzIiwieHMiLCJ5cyIsIl9ib3VuZGluZ0V4dGVudFhZcyIsIlRSVUUiLCJGQUxTRSIsIlZPSUQiLCJtZW1vaXplT25lIiwiZm4iLCJsYXN0UmVzdWx0IiwibGFzdEFyZ3MiLCJsYXN0VGhpcyIsImNhbGxlZCIsIm5leHRBcmdzIiwidG1wVHJhbnNmb3JtIiwiR2VvbWV0cnkiLCJleHRlbnRfIiwiZXh0ZW50UmV2aXNpb25fIiwic2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSIsInNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uIiwic2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsIiwicmV2aXNpb24iLCJzcXVhcmVkVG9sZXJhbmNlIiwiZ2V0U2ltcGxpZmllZEdlb21ldHJ5Iiwic2ltcGxpZnlUcmFuc2Zvcm1lZCIsImNsb3Nlc3RQb2ludFhZIiwiY2xvc2VzdFBvaW50IiwibWluU3F1YXJlZERpc3RhbmNlIiwiY29vcmQiLCJnZXRDbG9zZXN0UG9pbnQiLCJwb2ludCIsImludGVyc2VjdHNDb29yZGluYXRlIiwiY29tcHV0ZUV4dGVudCIsInN4Iiwic3kiLCJzaW1wbGlmeSIsImludGVyc2VjdHNFeHRlbnQiLCJ0cmFuc2xhdGUiLCJkZXN0aW5hdGlvbiIsInNvdXJjZVByb2oiLCJnZXRVbml0cyIsImluQ29vcmRpbmF0ZXMiLCJvdXRDb29yZGluYXRlcyIsInBpeGVsRXh0ZW50IiwicHJvamVjdGVkRXh0ZW50IiwiZ2V0V29ybGRFeHRlbnQiLCJnZXRTdHJpZGVGb3JMYXlvdXQiLCJsYXlvdXQiLCJnZXRDb29yZGluYXRlcyIsImdldEZpcnN0Q29vcmRpbmF0ZSIsImdldExhc3RDb29yZGluYXRlIiwiZ2V0TGF5b3V0Iiwic2ltcGxpZmllZEdlb21ldHJ5IiwiZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwiLCJzZXRGbGF0Q29vcmRpbmF0ZXMiLCJzZXRMYXlvdXQiLCJuZXN0aW5nIiwiZ2V0TGF5b3V0Rm9yU3RyaWRlIiwiYW5jaG9yWCIsImFuY2hvclkiLCJrIiwiYXNzaWduQ2xvc2VzdCIsIm9mZnNldDEiLCJvZmZzZXQyIiwibWF4U3F1YXJlZERlbHRhIiwic3F1YXJlZERlbHRhIiwiYXNzaWduQ2xvc2VzdFBvaW50IiwiaXNSaW5nIiwidG1wUG9pbnQiLCJzcXVhcmVkRGlzdGFuY2UiLCJkZWZsYXRlQ29vcmRpbmF0ZXMiLCJzbmFwIiwicXVhbnRpemUiLCJzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIiwic2ltcGxpZmllZE9mZnNldCIsImR4MSIsImR5MSIsImR4MiIsImR5MiIsImluZmxhdGVDb29yZGluYXRlcyIsImxpbmVhclJpbmciLCJ0d2ljZUFyZWEiLCJMaW5lYXJSaW5nIiwibWF4RGVsdGFSZXZpc2lvbl8iLCJtYXJrZXJzIiwiZmlyc3QiLCJtYXhTcXVhcmVkRGlzdGFuY2UiLCJkb3VnbGFzUGV1Y2tlciIsIlBvaW50IiwiZGVmbGF0ZUNvb3JkaW5hdGUiLCJ0bXAiLCJsaW5lYXJSaW5nSXNDbG9ja3dpc2UiLCJlZGdlIiwib3JpZW50TGluZWFyUmluZ3MiLCJlbmRzIiwicmlnaHQiLCJpc0Nsb2Nrd2lzZSIsImVuZHNfIiwiZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8iLCJmbGF0SW50ZXJpb3JQb2ludF8iLCJvcmllbnRlZFJldmlzaW9uXyIsIm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyIsImFwcGVuZExpbmVhclJpbmciLCJwb2x5Z29uIiwiYXJyYXlNYXhTcXVhcmVkRGVsdGEiLCJhc3NpZ25DbG9zZXN0QXJyYXlQb2ludCIsImdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzIiwibGluZWFyUmluZ3MiLCJjb29yZGluYXRlc3MiLCJpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheSIsImdldEVuZHMiLCJnZXRGbGF0SW50ZXJpb3JQb2ludCIsImZsYXRDZW50ZXIiLCJmbGF0Q2VudGVycyIsImZsYXRDZW50ZXJzT2Zmc2V0IiwiaW50ZXJzZWN0aW9ucyIsInJyIiwicG9pbnRYIiwibWF4U2VnbWVudExlbmd0aCIsInNlZ21lbnRMZW5ndGgiLCJnZXRJbnRlcmlvclBvaW50T2ZBcnJheSIsImdldEludGVyaW9yUG9pbnQiLCJnZXRMaW5lYXJSaW5nQ291bnQiLCJnZXRMaW5lYXJSaW5nIiwiZ2V0TGluZWFyUmluZ3MiLCJsaW5lYXJSaW5nc0FyZU9yaWVudGVkIiwic2ltcGxpZmllZEVuZHMiLCJxdWFudGl6ZUFycmF5IiwiZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkiLCJmcm9tRXh0ZW50IiwibGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50IiwibGluZWFyUmluZ0NvbnRhaW5zWFkiLCJ3biIsImxpbmVhclJpbmdzQ29udGFpbnNYWSIsImludGVyc2VjdHNMaW5lU3RyaW5nIiwiY29vcmRpbmF0ZXNFeHRlbnQiLCJyZXQiLCJwb2ludDEiLCJwb2ludDIiLCJpbnRlcnNlY3RzTGluZWFyUmluZyIsImludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkiLCJ1YSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiRklSRUZPWCIsIldFQktJVCIsIk1BQyIsIkRFVklDRV9QSVhFTF9SQVRJTyIsImRldmljZVBpeGVsUmF0aW8iLCJXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyIsIldvcmtlckdsb2JhbFNjb3BlIiwic2VsZiIsIklNQUdFX0RFQ09ERSIsIlBBU1NJVkVfRVZFTlRfTElTVEVORVJTIiwiQmFzZUxheWVyIiwiYmFja2dyb3VuZF8iLCJiYWNrZ3JvdW5kIiwiY2xhc3NOYW1lXyIsInN0YXRlXyIsImdldEJhY2tncm91bmQiLCJnZXRDbGFzc05hbWUiLCJnZXRaSW5kZXgiLCJnZXRPcGFjaXR5IiwiZ2V0VmlzaWJsZSIsInNldEJhY2tncm91bmQiLCJzZXRFeHRlbnQiLCJzZXRNYXhSZXNvbHV0aW9uIiwic2V0TWluUmVzb2x1dGlvbiIsInNldE9wYWNpdHkiLCJzZXRWaXNpYmxlIiwic2V0WkluZGV4IiwiemluZGV4IiwibWFwUHJlY29tcG9zZUtleV8iLCJtYXBSZW5kZXJLZXlfIiwic291cmNlQ2hhbmdlS2V5XyIsInNvdXJjZVJlYWR5XyIsInJlbmRlcmVkIiwiaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfIiwic2V0U291cmNlIiwiZ2V0UmVuZGVyU291cmNlIiwiaGFuZGxlU291cmNlQ2hhbmdlXyIsImdldEZlYXR1cmVzIiwiZ2V0RGF0YSIsImlzVmlzaWJsZSIsImxheWVyRXh0ZW50IiwiaW5WaWV3IiwicHJlcGFyZUZyYW1lIiwiZ2V0TWFwSW50ZXJuYWwiLCJhcnJheUxheWVyU3RhdGUiLCJjcmVhdGVSZW5kZXJlciIsIk9QQUNJVFkiLCJWSVNJQkxFIiwiRVhURU5UIiwiWl9JTkRFWCIsIk1BWF9SRVNPTFVUSU9OIiwiTUlOX1JFU09MVVRJT04iLCJNQVhfWk9PTSIsIk1JTl9aT09NIiwiU09VUkNFIiwiTUFQIiwiQmFzZVRpbGVMYXllciIsInByZWxvYWQiLCJ1c2VJbnRlcmltVGlsZXNPbkVycm9yIiwic2V0UHJlbG9hZCIsInNldFVzZUludGVyaW1UaWxlc09uRXJyb3IiLCJnZXRQcmVsb2FkIiwiVGlsZVByb3BlcnR5IiwiZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciIsIkxheWVyUmVuZGVyZXIiLCJib3VuZEhhbmRsZUltYWdlQ2hhbmdlXyIsImhhbmRsZUltYWdlQ2hhbmdlXyIsImxheWVyXyIsImRlY2x1dHRlckV4ZWN1dG9yR3JvdXAiLCJsb2FkZWRUaWxlQ2FsbGJhY2siLCJ0aWxlcyIsImNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIiLCJmb3JFYWNoTG9hZGVkVGlsZSIsImdldExheWVyIiwicmVuZGVySWZSZWFkeUFuZFZpc2libGUiLCJsb2FkSW1hZ2UiLCJpbWFnZVN0YXRlIiwicGl4ZWxDb250ZXh0IiwicmVuZGVyZWRSZXNvbHV0aW9uIiwidGVtcFRyYW5zZm9ybSIsInBpeGVsVHJhbnNmb3JtIiwiaW52ZXJzZVBpeGVsVHJhbnNmb3JtIiwiY29udGFpbmVyUmV1c2VkIiwicGl4ZWxDb250ZXh0XyIsImdldEltYWdlRGF0YSIsImNvbCIsInJvdyIsIndpbGxSZWFkRnJlcXVlbnRseSIsImRyYXdJbWFnZSIsImVyciIsInVzZUNvbnRhaW5lciIsImJhY2tncm91bmRDb2xvciIsImxheWVyQ2xhc3NOYW1lIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJIVE1MQ2FudmFzRWxlbWVudCIsInRyYW5zZm9ybU9yaWdpbiIsImNsaXBVbnJvdGF0ZWQiLCJ0b3BMZWZ0IiwidG9wUmlnaHQiLCJib3R0b21SaWdodCIsImJvdHRvbUxlZnQiLCJpbnZlcnRlZCIsInNhdmUiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbGlwIiwiZGlzcGF0Y2hSZW5kZXJFdmVudF8iLCJwcmVSZW5kZXIiLCJwb3N0UmVuZGVyIiwiZ2V0UmVuZGVyVHJhbnNmb3JtIiwidGlsZUxheWVyIiwiZXh0ZW50Q2hhbmdlZCIsInJlbmRlcmVkRXh0ZW50XyIsInJlbmRlcmVkUGl4ZWxSYXRpbyIsInJlbmRlcmVkUHJvamVjdGlvbiIsInJlbmRlcmVkUmV2aXNpb24iLCJyZW5kZXJlZFRpbGVzIiwibmV3VGlsZXNfIiwidG1wRXh0ZW50IiwidG1wVGlsZVJhbmdlXyIsImlzRHJhd2FibGVUaWxlIiwidGlsZVN0YXRlIiwiZ2V0VGlsZSIsInRpbGVHcmlkIiwiZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwidGlsZVBpeGVsUmF0aW8iLCJnZXRUaWxlUGl4ZWxSYXRpbyIsImdldFpGb3JSZXNvbHV0aW9uIiwiZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaIiwidGlsZU9yaWdpbiIsImdldE9yaWdpbiIsInRpbGVTaXplIiwiZ2V0VGlsZVNpemUiLCJndXR0ZXIiLCJnZXRHdXR0ZXJGb3JQcm9qZWN0aW9uIiwidmlld1Jlc29sdXRpb24iLCJ2aWV3Q2VudGVyIiwidGlsZVNvdXJjZSIsInNvdXJjZVJldmlzaW9uIiwiekRpcmVjdGlvbiIsImNhbnZhc0V4dGVudCIsImdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoiLCJ0aWxlc1RvRHJhd0J5WiIsImZpbmRMb2FkZWRUaWxlcyIsInRtcFRpbGVSYW5nZSIsInZpZXdwb3J0IiwidGlsZUNvb3JkSW50ZXJzZWN0c1ZpZXdwb3J0IiwidWlkIiwiY2hpbGRUaWxlUmFuZ2UiLCJnZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZSIsImNvdmVyZWQiLCJmb3JFYWNoVGlsZUNvb3JkUGFyZW50VGlsZVJhbmdlIiwiY2FudmFzU2NhbGUiLCJjYW52YXNUcmFuc2Zvcm0iLCJnZXRJbnRlcnBvbGF0ZSIsImltYWdlU21vb3RoaW5nRW5hYmxlZCIsImNsaXBzIiwiY2xpcFpzIiwiY3VycmVudENsaXAiLCJ6cyIsImdldE9wYXF1ZSIsInJldmVyc2UiLCJjdXJyZW50WiIsImN1cnJlbnRUaWxlUGl4ZWxTaXplIiwiZ2V0VGlsZVBpeGVsU2l6ZSIsImN1cnJlbnRTY2FsZSIsIm9yaWdpblRpbGVDb29yZCIsIm9yaWdpblRpbGVFeHRlbnQiLCJnZXRUaWxlQ29vcmRFeHRlbnQiLCJ0aWxlR3V0dGVyIiwidGlsZXNUb0RyYXciLCJ0aWxlQ29vcmRLZXkiLCJ4SW5kZXgiLCJuZXh0WCIsInlJbmRleCIsIm5leHRZIiwiY29udGV4dFNhdmVkIiwiZHJhd1RpbGVJbWFnZSIsInJlc3RvcmUiLCJ1bnNoaWZ0IiwidXBkYXRlVXNlZFRpbGVzIiwibWFuYWdlVGlsZVB5cmFtaWQiLCJzY2hlZHVsZUV4cGlyZUNhY2hlIiwiZ2V0VGlsZUltYWdlIiwiYWxwaGEiLCJhbHBoYUNoYW5nZWQiLCJnbG9iYWxBbHBoYSIsInBvc3RSZW5kZXJGdW5jdGlvbiIsImV4cGlyZUNhY2hlIiwidGlsZUNhbGxiYWNrIiwidGlsZUNvdW50IiwiZ2V0VGlsZUNvb3JkQ2VudGVyIiwidXNlVGlsZSIsInVwZGF0ZUNhY2hlU2l6ZSIsIkJhc2VUaWxlIiwiY2xhbXAiLCJzcXVhcmVkU2VnbWVudERpc3RhbmNlIiwic29sdmVMaW5lYXJTeXN0ZW0iLCJtYXQiLCJtYXhSb3ciLCJtYXhFbCIsImFic1ZhbHVlIiwiY29lZiIsInRvUmFkaWFucyIsImFuZ2xlSW5EZWdyZWVzIiwibW9kdWxvIiwibGVycCIsInRvRml4ZWQiLCJkZWNpbWFscyIsIm9iamVjdCIsInByb3BlcnR5IiwiY29kZV8iLCJ1bml0c18iLCJ3b3JsZEV4dGVudF8iLCJ3b3JsZEV4dGVudCIsImF4aXNPcmllbnRhdGlvbl8iLCJheGlzT3JpZW50YXRpb24iLCJnbG9iYWxfIiwiZ2xvYmFsIiwiY2FuV3JhcFhfIiwiZ2V0UG9pbnRSZXNvbHV0aW9uRnVuY18iLCJnZXRQb2ludFJlc29sdXRpb24iLCJkZWZhdWx0VGlsZUdyaWRfIiwibWV0ZXJzUGVyVW5pdF8iLCJtZXRlcnNQZXJVbml0IiwiZ2V0Q29kZSIsImdldEF4aXNPcmllbnRhdGlvbiIsInNldEdsb2JhbCIsImdldERlZmF1bHRUaWxlR3JpZCIsInNldERlZmF1bHRUaWxlR3JpZCIsInNldFdvcmxkRXh0ZW50Iiwic2V0R2V0UG9pbnRSZXNvbHV0aW9uIiwiZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYyIsIlJBRElVUyIsIkhBTEZfU0laRSIsIldPUkxEX0VYVEVOVCIsIk1BWF9TQUZFX1kiLCJ0YW4iLCJFUFNHMzg1N1Byb2plY3Rpb24iLCJ1bml0cyIsImNvc2giLCJQUk9KRUNUSU9OUyIsIkVQU0c0MzI2UHJvamVjdGlvbiIsInRyYW5zZm9ybXMiLCJzb3VyY2VDb2RlIiwiZGVzdGluYXRpb25Db2RlIiwiREVGQVVMVF9SQURJVVMiLCJjMSIsImMyIiwicmFkaXVzIiwibGF0MSIsImxhdDIiLCJkZWx0YUxhdEJ5MiIsImRlbHRhTG9uQnkyIiwic2hvd0Nvb3JkaW5hdGVXYXJuaW5nIiwiZGlzYWJsZUNvb3JkaW5hdGVXYXJuaW5nIiwiZGlzYWJsZSIsImNsb25lVHJhbnNmb3JtIiwiaW5wdXQiLCJvdXRwdXQiLCJpZGVudGl0eVRyYW5zZm9ybSIsImFkZFByb2plY3Rpb24iLCJwcm9qZWN0aW9uTGlrZSIsInJlcGxhY2UiLCJwb2ludFJlc29sdXRpb24iLCJnZXR0ZXIiLCJwcm9qVW5pdHMiLCJ0b0VQU0c0MzI2IiwiZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zIiwidmVydGljZXMiLCJhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMiLCJwcm9qZWN0aW9ucyIsImFkZFByb2plY3Rpb25zIiwiY3JlYXRlUHJvamVjdGlvbiIsImRlZmF1bHRDb2RlIiwiZnJvbUxvbkxhdCIsImVxdWl2YWxlbnQiLCJwcm9qZWN0aW9uMSIsInByb2plY3Rpb24yIiwiZXF1YWxVbml0cyIsInNvdXJjZVByb2plY3Rpb24iLCJkZXN0aW5hdGlvblByb2plY3Rpb24iLCJ0cmFuc2Zvcm1GdW5jIiwiZ2V0VHJhbnNmb3JtIiwidHJhbnNmb3JtRXh0ZW50IiwiZ2V0VXNlclByb2plY3Rpb24iLCJ0b1VzZXJDb29yZGluYXRlIiwiZnJvbVVzZXJDb29yZGluYXRlIiwiZGVzdFByb2plY3Rpb24iLCJ0b1VzZXJFeHRlbnQiLCJmcm9tVXNlckV4dGVudCIsInByb2plY3Rpb25zMiIsImZvcndhcmRUcmFuc2Zvcm0iLCJpbnZlcnNlVHJhbnNmb3JtIiwiZGltZW5zaW9uIiwiYXRhbiIsImV4cCIsIlJlbmRlckV2ZW50IiwiUFJFUkVOREVSIiwiUE9TVFJFTkRFUiIsIlBSRUNPTVBPU0UiLCJQT1NUQ09NUE9TRSIsIlJFTkRFUkNPTVBMRVRFIiwiYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfIiwiZHJhd1Rlc3RUcmlhbmdsZSIsInUxIiwidjEiLCJ1MiIsInYyIiwiY2xvc2VQYXRoIiwidmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmciLCJjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uIiwidGFyZ2V0UHJvaiIsInRhcmdldE1ldGVyc1BlclVuaXQiLCJzb3VyY2VNZXRlcnNQZXJVbml0Iiwic291cmNlRXh0ZW50IiwiY29tcGVuc2F0aW9uRmFjdG9yIiwiaXNGaW5pdGUiLCJSZXByb2pUaWxlIiwic291cmNlVGlsZUdyaWQiLCJ0YXJnZXRUaWxlR3JpZCIsIndyYXBwZWRUaWxlQ29vcmQiLCJnZXRUaWxlRnVuY3Rpb24iLCJlcnJvclRocmVzaG9sZCIsInJlbmRlckVkZ2VzIiwicmVuZGVyRWRnZXNfIiwiZ3V0dGVyXyIsImNhbnZhc18iLCJzb3VyY2VUaWxlR3JpZF8iLCJ0YXJnZXRUaWxlR3JpZF8iLCJ3cmFwcGVkVGlsZUNvb3JkXyIsInNvdXJjZVRpbGVzXyIsInNvdXJjZXNMaXN0ZW5lcktleXNfIiwic291cmNlWl8iLCJ0YXJnZXRFeHRlbnQiLCJtYXhUYXJnZXRFeHRlbnQiLCJtYXhTb3VyY2VFeHRlbnQiLCJsaW1pdGVkVGFyZ2V0RXh0ZW50Iiwic291cmNlUHJvakV4dGVudCIsImNhbGN1bGF0ZVNvdXJjZUV4dGVudFJlc29sdXRpb24iLCJlcnJvclRocmVzaG9sZEluUGl4ZWxzIiwidHJpYW5ndWxhdGlvbl8iLCJkZXN0aW5hdGlvblJlc29sdXRpb24iLCJzb3VyY2VQcm9qXyIsInRhcmdldFByb2pfIiwidHJhbnNmb3JtSW52Q2FjaGUiLCJ0cmFuc2Zvcm1JbnYiLCJ0cmFuc2Zvcm1JbnZfIiwiYyIsIm1heFNvdXJjZUV4dGVudF8iLCJlcnJvclRocmVzaG9sZFNxdWFyZWRfIiwidHJpYW5nbGVzXyIsIndyYXBzWEluU291cmNlXyIsImNhbldyYXBYSW5Tb3VyY2VfIiwic291cmNlV29ybGRXaWR0aF8iLCJ0YXJnZXRXb3JsZFdpZHRoXyIsImRlc3RpbmF0aW9uVG9wTGVmdCIsImRlc3RpbmF0aW9uVG9wUmlnaHQiLCJkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0IiwiZGVzdGluYXRpb25Cb3R0b21MZWZ0Iiwic291cmNlVG9wTGVmdCIsInNvdXJjZVRvcFJpZ2h0Iiwic291cmNlQm90dG9tUmlnaHQiLCJzb3VyY2VCb3R0b21MZWZ0IiwibWF4U3ViZGl2aXNpb24iLCJsb2cyIiwiYWRkUXVhZF8iLCJsZWZ0Qm91bmQiLCJ0cmlhbmdsZSIsIm5ld1RyaWFuZ2xlIiwiYWRkVHJpYW5nbGVfIiwiYVNyYyIsImJTcmMiLCJjU3JjIiwiZFNyYyIsInNvdXJjZVF1YWRFeHRlbnQiLCJzb3VyY2VDb3ZlcmFnZVgiLCJzb3VyY2VXb3JsZFdpZHRoIiwid3JhcHNYIiwibmVlZHNTdWJkaXZpc2lvbiIsInRhcmdldFF1YWRFeHRlbnQiLCJpc05vdEZpbml0ZSIsImNlbnRlclNyYyIsImJjIiwiYmNTcmMiLCJkYSIsImRhU3JjIiwiYWIiLCJhYlNyYyIsImNkIiwiY2RTcmMiLCJjYWxjdWxhdGVTb3VyY2VFeHRlbnQiLCJnZXRUcmlhbmdsZXMiLCJzb3VyY2VSYW5nZSIsInNyY1giLCJzcmNZIiwicmVwcm9qZWN0XyIsInNvdXJjZXMiLCJ0cmlhbmd1bGF0aW9uIiwicGl4ZWxSb3VuZCIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsInNvdXJjZURhdGFFeHRlbnQiLCJjYW52YXNXaWR0aEluVW5pdHMiLCJjYW52YXNIZWlnaHRJblVuaXRzIiwic3RpdGNoQ29udGV4dCIsInN0aXRjaFNjYWxlIiwieFBvcyIsInlQb3MiLCJzcmNXaWR0aCIsInNyY0hlaWdodCIsInRhcmdldFRvcExlZnQiLCJ1MCIsInYwIiwic291cmNlTnVtZXJpY2FsU2hpZnRYIiwic291cmNlTnVtZXJpY2FsU2hpZnRZIiwiYXVnbWVudGVkTWF0cml4IiwiYWZmaW5lQ29lZnMiLCJpc0Jyb2tlbkRpYWdvbmFsUmVuZGVyaW5nIiwic3RlcHMiLCJ1ZCIsInZkIiwic3RlcCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwic3Ryb2tlIiwibGVmdFRvTG9hZCIsInNvdXJjZUxpc3RlbktleSIsImUiLCJ1bmxpc3RlblNvdXJjZXNfIiwiY3JlYXRlU25hcFRvTiIsImNyZWF0ZVNuYXBUb1plcm8iLCJoYXNBcmVhIiwidG9TaXplIiwiWFlaIiwiVGlsZUltYWdlIiwib3BhcXVlIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQiLCJ0aWxlVXJsRnVuY3Rpb24iLCJ1cmwiLCJ1cmxzIiwiYXR0cmlidXRpb25zQ29sbGFwc2libGUiLCJnZXRHdXR0ZXIiLCJ0ZW1wbGF0ZSIsInRleHQiLCJzdHJva2VSZWN0IiwidGV4dEFsaWduIiwidGV4dEJhc2VsaW5lIiwiZm9udCIsInN0cm9rZVRleHQiLCJmaWxsVGV4dCIsImhpZ2hXYXRlck1hcmsiLCJjb3VudF8iLCJlbnRyaWVzXyIsIm9sZGVzdF8iLCJuZXdlc3RfIiwia2VlcCIsImNvbnRhaW5zS2V5IiwiZW50cnkiLCJ2YWx1ZV8iLCJrZXlfIiwibmV3ZXIiLCJvbGRlciIsImdldFZhbHVlcyIsInBlZWtMYXN0IiwicGVla0xhc3RLZXkiLCJwZWVrRmlyc3RLZXkiLCJwZWVrIiwicHJ1bmVFeGNlcHROZXdlc3RaIiwiU291cmNlIiwiYXR0cmlidXRpb25zXyIsImFkYXB0QXR0cmlidXRpb25zIiwiYXR0cmlidXRpb25zQ29sbGFwc2libGVfIiwid3JhcFhfIiwiaW50ZXJwb2xhdGVfIiwidmlld1Jlc29sdmVyIiwidmlld1JlamVjdG9yIiwidmlld1Byb21pc2VfIiwicmVqZWN0IiwicmVmcmVzaCIsInNldEF0dHJpYnV0aW9ucyIsImF0dHJpYnV0aW9uTGlrZSIsIlRpbGVTb3VyY2VFdmVudCIsIm9wYXF1ZV8iLCJ0aWxlUGl4ZWxSYXRpb18iLCJ0aWxlQ2FjaGUiLCJ0bXBTaXplIiwidGlsZU9wdGlvbnMiLCJnZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uIiwic2V0S2V5IiwiZ2V0VGlsZUdyaWQiLCJnZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24iLCJjcmVhdGVGcm9tVGVtcGxhdGUiLCJ6UmVnRXgiLCJ4UmVnRXgiLCJ5UmVnRXgiLCJkYXNoWVJlZ0V4IiwicmFuZ2UiLCJnZXRGdWxsVGlsZVJhbmdlIiwiVXJsVGlsZSIsImdlbmVyYXRlVGlsZVVybEZ1bmN0aW9uXyIsInNldFVybHMiLCJzZXRVcmwiLCJ0aWxlTG9hZGluZ0tleXNfIiwiZ2V0VGlsZUxvYWRGdW5jdGlvbiIsImdldFRpbGVVcmxGdW5jdGlvbiIsImdldFByb3RvdHlwZU9mIiwiZ2V0VXJscyIsInNldFRpbGVMb2FkRnVuY3Rpb24iLCJzZXRUaWxlVXJsRnVuY3Rpb24iLCJtYXRjaCIsInN0YXJ0Q2hhckNvZGUiLCJjaGFyQ29kZUF0Iiwic3RvcENoYXJDb2RlIiwiY2hhckNvZGUiLCJmcm9tQ2hhckNvZGUiLCJzdG9wIiwiZXhwYW5kVXJsIiwidGVtcGxhdGVzIiwidGlsZVVybEZ1bmN0aW9ucyIsImNyZWF0ZUZyb21UaWxlVXJsRnVuY3Rpb25zIiwiY3JlYXRlRnJvbVRlbXBsYXRlcyIsImRlZmF1bHRUaWxlTG9hZEZ1bmN0aW9uIiwiaW1hZ2VUaWxlIiwidGlsZUNsYXNzIiwidGlsZUNhY2hlRm9yUHJvamVjdGlvbiIsInRpbGVHcmlkRm9yUHJvamVjdGlvbiIsInJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkXyIsInJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyIsInVzZWRUaWxlQ2FjaGUiLCJ0aGlzUHJvaiIsInByb2pLZXkiLCJjcmVhdGVUaWxlXyIsInVybFRpbGVDb29yZCIsInRpbGVVcmwiLCJnZXRUaWxlSW50ZXJuYWwiLCJuZXdUaWxlIiwic2V0UmVuZGVyUmVwcm9qZWN0aW9uRWRnZXMiLCJzZXRUaWxlR3JpZEZvclByb2plY3Rpb24iLCJ0aWxlZ3JpZCIsInByb2oiLCJnZXRLZXlaWFkiLCJmcm9tS2V5IiwiaGFzaCIsIndpdGhpbkV4dGVudEFuZFoiLCJnZXRGb3JQcm9qZWN0aW9uIiwicmVzb2x1dGlvbnNGcm9tRXh0ZW50IiwiY3JlYXRlRm9yRXh0ZW50IiwiZXh0ZW50RnJvbVByb2plY3Rpb24iLCJjcmVhdGVGb3JQcm9qZWN0aW9uIiwiY3JlYXRlWFlaIiwieHl6T3B0aW9ucyIsImdyaWRPcHRpb25zIiwiaGFsZiIsInRtcFRpbGVDb29yZCIsIm9yaWdpbnMiLCJvcmlnaW5fIiwib3JpZ2luc18iLCJ0aWxlU2l6ZXNfIiwidGlsZVNpemVzIiwidGlsZVNpemVfIiwiZnVsbFRpbGVSYW5nZXNfIiwidG1wU2l6ZV8iLCJ0bXBFeHRlbnRfIiwic2l6ZXMiLCJyZXN0cmljdGVkVGlsZVJhbmdlIiwiY2FsY3VsYXRlVGlsZVJhbmdlc18iLCJmb3JFYWNoVGlsZUNvb3JkIiwidGVtcFRpbGVSYW5nZSIsInRlbXBFeHRlbnQiLCJ0aWxlQ29vcmRFeHRlbnQiLCJnZXRUaWxlUmFuZ2VGb3JUaWxlQ29vcmRBbmRaIiwidGlsZUNvb3JkWiIsInRpbGVDb29yZFgiLCJ0aWxlQ29vcmRZIiwiZ2V0VGlsZVJhbmdlRXh0ZW50IiwiZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyIsImdldFRpbGVDb29yZEZvckNvb3JkQW5kUmVzb2x1dGlvbiIsIm9wdF90aWxlQ29vcmQiLCJnZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fIiwicmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSIsImdldFRpbGVDb29yZFJlc29sdXRpb24iLCJvcHRfZGlyZWN0aW9uIiwiZnVsbFRpbGVSYW5nZXMiLCJERUZBVUxUX01BWF9aT09NIiwiREVGQVVMVF9USUxFX1NJWkUiLCJjcmVhdGUiLCJjb21wb3NlIiwibWFrZUludmVyc2UiLCJkZXQiLCJ0cmFuc2Zvcm1TdHJpbmdEaXYiLCJ0cmFuc2Zvcm1TdHJpbmciLCJhYnN0cmFjdCIsInVpZENvdW50ZXJfIiwiZ2V0VWlkIiwib2xfdWlkIl0sInNvdXJjZVJvb3QiOiIifQ==